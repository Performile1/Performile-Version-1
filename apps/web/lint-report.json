[{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\middleware\\rateLimit.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\App.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Pricing' is defined but never used.","line":50,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":50,"endColumn":15},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has a missing dependency: 'validateStoredToken'. Either include it or remove the dependency array.","line":170,"column":6,"nodeType":"ArrayExpression","endLine":170,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [validateStoredToken]","fix":{"range":[6403,6405],"text":"[validateStoredToken]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleAuthError' is assigned a value but never used.","line":197,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":197,"endColumn":26}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { HashRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { ThemeProvider, createTheme, CssBaseline } from '@mui/material';\nimport { Toaster } from 'react-hot-toast';\nimport { useAuthStore } from '@/store/authStore';\nimport { AppLayout } from '@/components/layout/AppLayout';\nimport { SessionExpiredModal } from '@/components/SessionExpiredModal';\nimport { NotLoggedInModal } from '@/components/auth/NotLoggedInModal';\nimport { AuthPage } from '@/pages/AuthPage';\nimport { NotFound } from '@/pages/NotFound';\nimport { Dashboard } from '@/pages/Dashboard';\nimport { TrustScores } from '@/pages/TrustScores';\nimport { ManageCarriers } from '@/pages/admin/ManageCarriers';\nimport { ManageStores } from '@/pages/admin/ManageStores';\nimport { ManageMerchants } from '@/pages/admin/ManageMerchants';\nimport { ManageCouriers } from '@/pages/admin/ManageCouriers';\nimport { ReviewBuilder } from '@/pages/admin/ReviewBuilder';\nimport SubscriptionManagement from '@/pages/admin/SubscriptionManagement';\nimport SystemSettings from '@/pages/admin/SystemSettings';\nimport RoleManagement from '@/pages/admin/RoleManagement';\nimport FeatureFlagsSettings from '@/pages/admin/FeatureFlagsSettings';\nimport { CourierDirectory } from '@/pages/courier/CourierDirectory';\nimport { CourierCheckoutAnalytics } from '@/pages/courier/CourierCheckoutAnalytics';\nimport { MerchantCheckoutAnalytics } from '@/pages/merchant/MerchantCheckoutAnalytics';\nimport { TeamManagement } from '@/pages/team/TeamManagement';\nimport { AcceptInvitation } from '@/pages/team/AcceptInvitation';\nimport { Analytics } from './pages/Analytics';\nimport AdminAnalytics from './pages/analytics/AdminAnalytics';\nimport MerchantAnalytics from './pages/analytics/MerchantAnalytics';\nimport CourierAnalytics from './pages/analytics/CourierAnalytics';\nimport { ReviewRequestSettings } from './pages/settings/ReviewRequestSettings';\nimport { CourierPreferences } from './pages/settings/CourierPreferences';\nimport ProximitySettings from './pages/settings/ProximitySettings';\nimport NotificationPreferences from './pages/settings/NotificationPreferences';\nimport NotificationCenter from './pages/notifications/NotificationCenter';\nimport { PluginSetup } from './pages/integrations/PluginSetup';\nimport { CourierIntegrationSettings } from './pages/integrations/CourierIntegrationSettings';\nimport { WebhookManagement } from './pages/integrations/WebhookManagement';\nimport { ApiKeysManagement } from './pages/integrations/ApiKeysManagement';\nimport { IntegrationDashboard } from './pages/integrations/IntegrationDashboard';\nimport { TrackingPage } from './pages/TrackingPage';\nimport { ClaimsPage } from './pages/ClaimsPage';\nimport { MessagingCenter } from './components/messaging/MessagingCenter';\nimport Settings from './pages/Settings';\nimport Orders from './pages/Orders';\nimport ServiceRatingForm from './components/rating/ServiceRatingForm';\nimport { SentryTestButton } from './components/debug/SentryTestButton';\nimport { PublicReview } from './pages/PublicReview';\nimport Pricing from './pages/Pricing';\nimport { AIChatWidget } from './components/chat/AIChatWidget';\nimport SubscriptionPlans from './pages/SubscriptionPlans';\nimport SubscriptionSuccess from './pages/SubscriptionSuccess';\nimport SubscriptionCancel from './pages/SubscriptionCancel';\nimport MySubscription from './pages/MySubscription';\nimport ResetPassword from './pages/ResetPassword';\nimport BillingPortal from './pages/BillingPortal';\n// import Home from './pages/Home'; // Replaced with LandingPage\nimport Contact from './pages/Contact';\nimport Info from './pages/Info';\nimport { ComingSoon } from './components/ComingSoon';\nimport { CheckoutDemo } from './pages/CheckoutDemo';\n// import LandingPage from './pages/LandingPage'; // Old Tailwind version\nimport LandingPageMUI from './pages/LandingPageMUI'; // New MUI version\nimport KnowledgeBase from './pages/KnowledgeBase';\nimport ConsumerDashboard from './pages/consumer/Dashboard';\nimport ConsumerOrders from './pages/consumer/Orders';\nimport C2CCreate from './pages/consumer/C2CCreate';\n\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      retry: 1,\n      refetchOnWindowFocus: false,\n    },\n  },\n});\n\nconst theme = createTheme({\n  palette: {\n    mode: 'light',\n    primary: {\n      main: '#667eea',\n      light: '#8fa5f3',\n      dark: '#4c63d2',\n    },\n    secondary: {\n      main: '#764ba2',\n      light: '#9575cd',\n      dark: '#512da8',\n    },\n    background: {\n      default: '#f5f7fa',\n      paper: '#ffffff',\n    },\n  },\n  typography: {\n    fontFamily: '\"Inter\", \"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\n    h4: {\n      fontWeight: 600,\n    },\n    h5: {\n      fontWeight: 600,\n    },\n    h6: {\n      fontWeight: 600,\n    },\n  },\n  shape: {\n    borderRadius: 12,\n  },\n  components: {\n    MuiCard: {\n      styleOverrides: {\n        root: {\n          boxShadow: '0 2px 12px rgba(0,0,0,0.08)',\n          border: '1px solid rgba(0,0,0,0.05)',\n        },\n      },\n    },\n    MuiButton: {\n      styleOverrides: {\n        root: {\n          textTransform: 'none',\n          fontWeight: 600,\n        },\n      },\n    },\n  },\n});\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n  requiredRoles?: string[];\n}\n\nconst ProtectedRoute: React.FC<ProtectedRouteProps> = ({ children, requiredRoles = [] }) => {\n  const { isAuthenticated, user } = useAuthStore();\n\n  if (!isAuthenticated) {\n    return <Navigate to=\"/login\" replace />;\n  }\n\n  if (requiredRoles.length > 0 && user && !requiredRoles.includes(user.user_role)) {\n    return <Navigate to=\"/dashboard\" replace />;\n  }\n\n  return <AppLayout>{children}</AppLayout>;\n};\n\nconst App: React.FC = () => {\n  const { isAuthenticated, user, validateStoredToken } = useAuthStore();\n  const [showNotLoggedIn, setShowNotLoggedIn] = React.useState(false);\n  const [isValidating, setIsValidating] = React.useState(true);\n\n  // Validate tokens on app load\n  React.useEffect(() => {\n    const validateTokens = async () => {\n      try {\n        console.log('[App] Validating stored tokens on load...');\n        await validateStoredToken();\n      } catch (error) {\n        console.error('[App] Token validation failed:', error);\n      } finally {\n        setIsValidating(false);\n      }\n    };\n\n    validateTokens();\n  }, []); // Run once on mount\n\n  // Proactive token refresh - check every 50 minutes\n  React.useEffect(() => {\n    if (!isAuthenticated) {\n      return;\n    }\n\n    console.log('[App] Setting up proactive token refresh (every 50 minutes)');\n    \n    const refreshInterval = setInterval(async () => {\n      console.log('[App] Proactive token refresh triggered');\n      try {\n        await validateStoredToken();\n      } catch (error) {\n        console.error('[App] Proactive token refresh failed:', error);\n      }\n    }, 50 * 60 * 1000); // 50 minutes\n\n    return () => {\n      console.log('[App] Clearing token refresh interval');\n      clearInterval(refreshInterval);\n    };\n  }, [isAuthenticated, validateStoredToken]);\n\n  // Listen for authentication errors\n  React.useEffect(() => {\n    const handleAuthError = () => {\n      if (!isAuthenticated && !isValidating) {\n        setShowNotLoggedIn(true);\n      }\n    };\n\n    // You can add event listeners here if needed\n    // For now, we'll rely on the SessionExpiredModal for 401 errors\n\n    return () => {\n      // Cleanup\n    };\n  }, [isAuthenticated, isValidating]);\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      <ThemeProvider theme={theme}>\n        <CssBaseline />\n        <Router>\n          <Routes>\n            {/* Public Routes */}\n            <Route\n              path=\"/login\"\n              element={\n                isAuthenticated ? <Navigate to=\"/dashboard\" replace /> : <AuthPage />\n              }\n            />\n            <Route\n              path=\"/register\"\n              element={\n                isAuthenticated ? <Navigate to=\"/dashboard\" replace /> : <AuthPage />\n              }\n            />\n            {/* Public Pages */}\n            <Route path=\"/\" element={<LandingPageMUI />} />\n            <Route path=\"/home\" element={<Navigate to=\"/\" replace />} />\n            <Route path=\"/contact\" element={<Contact />} />\n            <Route path=\"/info\" element={<Info />} />\n            <Route path=\"/knowledge-base\" element={<KnowledgeBase />} />\n            <Route path=\"/checkout-demo\" element={<CheckoutDemo />} />\n            <Route path=\"/review/:token\" element={<PublicReview />} />\n            <Route path=\"/track/:trackingNumber?\" element={<TrackingPage />} />\n            {/* Public subscription plans page (for non-logged-in users) */}\n            <Route path=\"/subscription/plans\" element={<SubscriptionPlans />} />\n            <Route path=\"/subscription/success\" element={<SubscriptionSuccess />} />\n            <Route path=\"/subscription/cancel\" element={<SubscriptionCancel />} />\n            <Route path=\"/reset-password\" element={<ResetPassword />} />\n\n            {/* Protected Routes */}\n            {/* My Subscription - for logged-in merchants and couriers */}\n            <Route\n              path=\"/my-subscription\"\n              element={\n                <ProtectedRoute requiredRoles={['merchant', 'courier']}>\n                  <MySubscription />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/trustscores\"\n              element={\n                <ProtectedRoute requiredRoles={['admin', 'merchant', 'consumer']}>\n                  <TrustScores />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/tracking\"\n              element={\n                <ProtectedRoute requiredRoles={['admin', 'merchant', 'courier', 'consumer']}>\n                  <TrackingPage />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/claims\"\n              element={\n                <ProtectedRoute requiredRoles={['admin', 'merchant']}>\n                  <ClaimsPage />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/dashboard\"\n              element={\n                <ProtectedRoute>\n                  <Dashboard />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/trustscores\"\n              element={\n                <ProtectedRoute>\n                  {user?.user_role === 'courier' ? (\n                    <Navigate to=\"/courier/checkout-analytics\" replace />\n                  ) : (\n                    <TrustScores />\n                  )}\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/orders\"\n              element={\n                <ProtectedRoute>\n                  <Orders />\n                </ProtectedRoute>\n              }\n            />\n            {/* Consumer Routes */}\n            <Route\n              path=\"/consumer/dashboard\"\n              element={\n                <ProtectedRoute requiredRoles={['consumer']}>\n                  <ConsumerDashboard />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/consumer/orders\"\n              element={\n                <ProtectedRoute requiredRoles={['consumer']}>\n                  <ConsumerOrders />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/consumer/c2c/create\"\n              element={\n                <ProtectedRoute requiredRoles={['consumer']}>\n                  <C2CCreate />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/stores\"\n              element={\n                <ProtectedRoute requiredRoles={['admin', 'merchant']}>\n                  <ManageMerchants />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/couriers\"\n              element={\n                <ProtectedRoute requiredRoles={['admin', 'courier']}>\n                  {/* Show anonymized directory for couriers, full management for admin */}\n                  {/* This will be handled by checking user role in the component */}\n                  <CourierDirectory />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/courier/checkout-analytics\"\n              element={\n                <ProtectedRoute requiredRoles={['courier', 'admin']}>\n                  <CourierCheckoutAnalytics />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/merchant/checkout-analytics\"\n              element={\n                <ProtectedRoute requiredRoles={['merchant', 'admin']}>\n                  <MerchantCheckoutAnalytics />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/users\"\n              element={\n                <ProtectedRoute requiredRoles={['admin']}>\n                  <div>Users Page - Coming Soon</div>\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/admin/carriers\"\n              element={\n                <ProtectedRoute requiredRoles={['admin']}>\n                  <ManageCarriers />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/admin/stores\"\n              element={\n                <ProtectedRoute requiredRoles={['admin']}>\n                  <ManageStores />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/admin/merchants\"\n              element={\n                <ProtectedRoute requiredRoles={['admin']}>\n                  <ManageMerchants />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/admin/couriers\"\n              element={\n                <ProtectedRoute requiredRoles={['admin']}>\n                  <ManageCouriers />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/admin/reviews\"\n              element={\n                <ProtectedRoute requiredRoles={['admin']}>\n                  <ReviewBuilder />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/admin/subscriptions\"\n              element={\n                <ProtectedRoute requiredRoles={['admin']}>\n                  <SubscriptionManagement />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/admin/system-settings\"\n              element={\n                <ProtectedRoute requiredRoles={['admin']}>\n                  <SystemSettings />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/admin/role-management\"\n              element={\n                <ProtectedRoute requiredRoles={['admin']}>\n                  <RoleManagement />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/admin/feature-flags\"\n              element={\n                <ProtectedRoute requiredRoles={['admin']}>\n                  <FeatureFlagsSettings />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/service-performance\"\n              element={\n                <ProtectedRoute requiredRoles={['admin']}>\n                  <Navigate to=\"/settings#analytics\" replace />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/admin/service-analytics\"\n              element={\n                <ProtectedRoute requiredRoles={['admin']}>\n                  <Navigate to=\"/settings#analytics\" replace />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/messages\"\n              element={\n                <ProtectedRoute>\n                  <MessagingCenter />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/settings/review-requests\"\n              element={\n                <ProtectedRoute requiredRoles={['admin', 'merchant', 'courier']}>\n                  <ReviewRequestSettings />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/analytics\"\n              element={\n                <ProtectedRoute requiredRoles={['admin', 'merchant', 'courier']}>\n                  <Analytics />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/analytics/admin\"\n              element={\n                <ProtectedRoute requiredRoles={['admin']}>\n                  <AdminAnalytics />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/analytics/merchant\"\n              element={\n                <ProtectedRoute requiredRoles={['merchant']}>\n                  <MerchantAnalytics />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/analytics/courier\"\n              element={\n                <ProtectedRoute requiredRoles={['courier']}>\n                  <CourierAnalytics />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/profile\"\n              element={\n                <ProtectedRoute>\n                  <Settings />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/settings\"\n              element={\n                <ProtectedRoute>\n                  <Settings />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/billing\"\n              element={\n                <ProtectedRoute requiredRoles={['admin', 'merchant', 'courier']}>\n                  <BillingPortal />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/rate/:token\"\n              element={<ServiceRatingForm />}\n            />\n            <Route\n              path=\"/team\"\n              element={\n                <ProtectedRoute requiredRoles={['admin', 'merchant', 'courier']}>\n                  <TeamManagement />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/invite/:token\"\n              element={<AcceptInvitation />}\n            />\n            {/* Coming Soon Features */}\n            <Route\n              path=\"/parcel-points\"\n              element={\n                <ProtectedRoute requiredRoles={['merchant', 'courier']}>\n                  <ComingSoon \n                    featureName=\"Parcel Points\"\n                    description=\"Find and manage parcel pickup and drop-off locations. Search by postal code, view coverage maps, and get detailed information about each location.\"\n                    estimatedDate=\"Q1 2026\"\n                  />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/coverage-checker\"\n              element={\n                <ProtectedRoute requiredRoles={['merchant', 'courier']}>\n                  <ComingSoon \n                    featureName=\"Coverage Checker\"\n                    description=\"Check delivery coverage for any postal code or address. View service availability, delivery times, and pricing for different courier services.\"\n                    estimatedDate=\"Q1 2026\"\n                  />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/marketplace\"\n              element={\n                <ProtectedRoute requiredRoles={['courier']}>\n                  <ComingSoon \n                    featureName=\"Marketplace\"\n                    description=\"Browse and bid on delivery jobs from merchants. Expand your business by finding new opportunities in your service area.\"\n                    estimatedDate=\"Q2 2026\"\n                  />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/integrations\"\n              element={\n                <ProtectedRoute requiredRoles={['admin', 'merchant']}>\n                  <IntegrationDashboard />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/integrations/couriers\"\n              element={\n                <ProtectedRoute requiredRoles={['admin', 'merchant']}>\n                  <CourierIntegrationSettings />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/integrations/webhooks\"\n              element={\n                <ProtectedRoute requiredRoles={['admin', 'merchant']}>\n                  <WebhookManagement />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/integrations/api-keys\"\n              element={\n                <ProtectedRoute requiredRoles={['admin', 'merchant']}>\n                  <ApiKeysManagement />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/integrations/ecommerce\"\n              element={\n                <ProtectedRoute requiredRoles={['admin', 'merchant']}>\n                  <PluginSetup />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/settings/email-templates\"\n              element={\n                <ProtectedRoute requiredRoles={['admin', 'merchant']}>\n                  <div>Email Templates - Coming Soon</div>\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/settings/courier-preferences\"\n              element={\n                <ProtectedRoute requiredRoles={['merchant']}>\n                  <CourierPreferences />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/settings/proximity\"\n              element={\n                <ProtectedRoute requiredRoles={['merchant', 'courier']}>\n                  <ProximitySettings />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/settings/notifications\"\n              element={\n                <ProtectedRoute>\n                  <NotificationPreferences />\n                </ProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/notifications\"\n              element={\n                <ProtectedRoute>\n                  <NotificationCenter />\n                </ProtectedRoute>\n              }\n            />\n\n            {/* Default Redirects */}\n            <Route\n              path=\"/\"\n              element={\n                <Navigate to={isAuthenticated ? \"/dashboard\" : \"/home\"} replace />\n              }\n            />\n            \n            {/* 404 Not Found - Must be last */}\n            <Route path=\"*\" element={<NotFound />} />\n          </Routes>\n          {/* Only show session modal on protected routes (when user is authenticated) */}\n          {isAuthenticated && <SessionExpiredModal />}\n          <NotLoggedInModal \n            isOpen={showNotLoggedIn} \n            onClose={() => setShowNotLoggedIn(false)}\n          />\n        </Router>\n        <Toaster\n          position=\"top-right\"\n          toastOptions={{\n            duration: 4000,\n            style: {\n              background: '#363636',\n              color: '#fff',\n            },\n          }}\n        />\n        <SentryTestButton />\n        <AIChatWidget position=\"bottom-right\" />\n      </ThemeProvider>\n    </QueryClientProvider>\n  );\n};\n\nexport default App;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\ComingSoon.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\CourierDocumentUpload.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":98,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":98,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2395,2398],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2395,2398],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":181,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":181,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4811,4814],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4811,4814],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":212,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":212,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5689,5692],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5689,5692],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useCallback } from 'react';\nimport {\n  Box,\n  Button,\n  Card,\n  CardContent,\n  Typography,\n  Grid,\n  IconButton,\n  LinearProgress,\n  Alert,\n  Avatar,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  ListItemSecondaryAction,\n  Divider\n} from '@mui/material';\nimport {\n  CloudUpload,\n  Delete,\n  Visibility,\n  Business,\n  Description,\n  Security,\n  VerifiedUser\n} from '@mui/icons-material';\nimport { apiClient } from '../services/apiClient';\nimport toast from 'react-hot-toast';\n\ninterface Document {\n  document_id: string;\n  courier_id: string;\n  document_type: 'logo' | 'license' | 'insurance' | 'certification';\n  file_url: string;\n  file_name: string;\n  mime_type: string;\n  uploaded_at: string;\n}\n\ninterface CourierDocumentUploadProps {\n  courierId?: string;\n  onDocumentChange?: () => void;\n  readOnly?: boolean;\n}\n\nconst documentTypeConfig = {\n  logo: {\n    label: 'Company Logo',\n    icon: <Business />,\n    color: 'primary' as const,\n    accept: 'image/*',\n    description: 'Upload your company logo (JPG, PNG, GIF, WebP)',\n    maxSize: 5 * 1024 * 1024 // 5MB\n  },\n  license: {\n    label: 'Business License',\n    icon: <Description />,\n    color: 'info' as const,\n    accept: 'image/*,application/pdf',\n    description: 'Upload business license document',\n    maxSize: 10 * 1024 * 1024 // 10MB\n  },\n  insurance: {\n    label: 'Insurance Certificate',\n    icon: <Security />,\n    color: 'warning' as const,\n    accept: 'image/*,application/pdf',\n    description: 'Upload insurance certificate',\n    maxSize: 10 * 1024 * 1024 // 10MB\n  },\n  certification: {\n    label: 'Certifications',\n    icon: <VerifiedUser />,\n    color: 'success' as const,\n    accept: 'image/*,application/pdf',\n    description: 'Upload professional certifications',\n    maxSize: 10 * 1024 * 1024 // 10MB\n  }\n};\n\nconst CourierDocumentUpload: React.FC<CourierDocumentUploadProps> = ({\n  courierId,\n  onDocumentChange,\n  readOnly = false\n}) => {\n  const [documents, setDocuments] = useState<Document[]>([]);\n  const [uploadProgress, setUploadProgress] = useState<{ [key: string]: number }>({});\n\n  // Load documents\n  const loadDocuments = useCallback(async () => {\n    try {\n      const response = await apiClient.get(`/upload${courierId ? `?courierId=${courierId}` : ''}`);\n      if (response.data.success) {\n        setDocuments(response.data.documents);\n      }\n    } catch (error: any) {\n      console.error('Failed to load documents:', error);\n      if (!readOnly) {\n        toast.error('Failed to load documents');\n      }\n    }\n  }, [courierId, readOnly]);\n\n  React.useEffect(() => {\n    loadDocuments();\n  }, [loadDocuments]);\n\n  // Handle file upload with direct Vercel Blob integration\n  const handleFileUpload = async (documentType: keyof typeof documentTypeConfig, file: File) => {\n    if (!file || readOnly) return;\n\n    const config = documentTypeConfig[documentType];\n\n    // Validate file size\n    if (file.size > config.maxSize) {\n      toast.error(`File size must be less than ${Math.round(config.maxSize / (1024 * 1024))}MB`);\n      return;\n    }\n\n    try {\n      setUploadProgress(prev => ({ ...prev, [documentType]: 0 }));\n\n      // Step 1: Get upload URL from our API\n      const uploadResponse = await apiClient.post('/upload', {\n        filename: file.name,\n        fileType: file.type,\n        documentType,\n        courierId\n      });\n\n      if (!uploadResponse.data.success) {\n        throw new Error(uploadResponse.data.message);\n      }\n\n      const { uploadUrl } = uploadResponse.data.data;\n\n      // Step 2: Upload directly to Vercel Blob\n      const formData = new FormData();\n      formData.append('file', file);\n\n      const xhr = new XMLHttpRequest();\n\n      xhr.upload.addEventListener('progress', (e) => {\n        if (e.lengthComputable) {\n          const progress = Math.round((e.loaded / e.total) * 100);\n          setUploadProgress(prev => ({ ...prev, [documentType]: progress }));\n        }\n      });\n\n      xhr.addEventListener('load', () => {\n        setUploadProgress(prev => {\n          const newProgress = { ...prev };\n          delete newProgress[documentType];\n          return newProgress;\n        });\n\n        if (xhr.status === 200 || xhr.status === 201) {\n          toast.success(`${config.label} uploaded successfully`);\n          loadDocuments();\n          onDocumentChange?.();\n        } else {\n          toast.error('Upload failed');\n        }\n      });\n\n      xhr.addEventListener('error', () => {\n        setUploadProgress(prev => {\n          const newProgress = { ...prev };\n          delete newProgress[documentType];\n          return newProgress;\n        });\n        toast.error('Upload failed');\n      });\n\n      xhr.open('PUT', uploadUrl);\n      xhr.setRequestHeader('Content-Type', file.type);\n      xhr.send(file);\n\n    } catch (error: any) {\n      console.error('Upload error:', error);\n      toast.error(error.response?.data?.message || 'Upload failed');\n      setUploadProgress(prev => {\n        const newProgress = { ...prev };\n        delete newProgress[documentType];\n        return newProgress;\n      });\n    }\n  };\n\n  // Handle file deletion\n  const handleDeleteDocument = async (document: Document) => {\n    if (readOnly) return;\n\n    if (!window.confirm(`Are you sure you want to delete ${document.file_name}?`)) {\n      return;\n    }\n\n    try {\n      const response = await apiClient.delete('/upload', {\n        data: { documentId: document.document_id }\n      });\n\n      if (response.data.success) {\n        toast.success('Document deleted successfully');\n        loadDocuments();\n        onDocumentChange?.();\n      } else {\n        throw new Error(response.data.message);\n      }\n    } catch (error: any) {\n      console.error('Delete error:', error);\n      toast.error(error.response?.data?.message || 'Failed to delete document');\n    }\n  };\n\n  // Get documents by type\n  const getDocumentsByType = (type: keyof typeof documentTypeConfig) => {\n    return documents.filter(doc => doc.document_type === type);\n  };\n\n  // Handle file input change\n  const handleFileInputChange = (documentType: keyof typeof documentTypeConfig, event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      handleFileUpload(documentType, file);\n    }\n    // Reset input value to allow re-uploading same file\n    event.target.value = '';\n  };\n\n  return (\n    <Box>\n      <Typography variant=\"h6\" gutterBottom>\n        {readOnly ? 'Documents' : 'Document Management'}\n      </Typography>\n      \n      <Grid container spacing={2}>\n        {Object.entries(documentTypeConfig).map(([type, config]) => {\n          const typeDocuments = getDocumentsByType(type as keyof typeof documentTypeConfig);\n          const isUploading = uploadProgress[type] !== undefined;\n          const hasDocument = typeDocuments.length > 0;\n          \n          return (\n            <Grid item xs={12} sm={6} key={type}>\n              <Card variant=\"outlined\">\n                <CardContent>\n                  <Box display=\"flex\" alignItems=\"center\" gap={1} mb={2}>\n                    {config.icon}\n                    <Typography variant=\"subtitle1\">{config.label}</Typography>\n                    {hasDocument && <VerifiedUser color=\"success\" fontSize=\"small\" />}\n                  </Box>\n                  \n                  <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\n                    {config.description}\n                  </Typography>\n\n                  {isUploading && (\n                    <Box mb={2}>\n                      <LinearProgress \n                        variant=\"determinate\" \n                        value={uploadProgress[type]} \n                      />\n                      <Typography variant=\"caption\" color=\"text.secondary\">\n                        Uploading... {uploadProgress[type]}%\n                      </Typography>\n                    </Box>\n                  )}\n\n                  {!readOnly && (\n                    <>\n                      <input\n                        type=\"file\"\n                        id={`upload-${type}`}\n                        style={{ display: 'none' }}\n                        accept={config.accept}\n                        onChange={(e) => handleFileInputChange(type as keyof typeof documentTypeConfig, e)}\n                      />\n                      <Button\n                        variant=\"outlined\"\n                        startIcon={<CloudUpload />}\n                        onClick={() => document.getElementById(`upload-${type}`)?.click()}\n                        disabled={isUploading}\n                        fullWidth\n                        size=\"small\"\n                        sx={{ mb: 2 }}\n                      >\n                        {hasDocument ? 'Replace' : 'Upload'} {config.label}\n                      </Button>\n                    </>\n                  )}\n\n                  {typeDocuments.length > 0 && (\n                    <>\n                      <Divider sx={{ my: 1 }} />\n                      <List dense>\n                        {typeDocuments.map((document) => (\n                          <ListItem key={document.document_id} sx={{ px: 0 }}>\n                            <ListItemAvatar>\n                              <Avatar sx={{ width: 32, height: 32 }}>\n                                {document.mime_type.startsWith('image/') ? (\n                                  <Description fontSize=\"small\" />\n                                ) : (\n                                  <Description fontSize=\"small\" />\n                                )}\n                              </Avatar>\n                            </ListItemAvatar>\n                            <ListItemText\n                              primary={document.file_name}\n                              secondary={new Date(document.uploaded_at).toLocaleDateString()}\n                              primaryTypographyProps={{ variant: 'body2' }}\n                              secondaryTypographyProps={{ variant: 'caption' }}\n                            />\n                            <ListItemSecondaryAction>\n                              <IconButton\n                                edge=\"end\"\n                                onClick={() => window.open(document.file_url, '_blank')}\n                                size=\"small\"\n                              >\n                                <Visibility fontSize=\"small\" />\n                              </IconButton>\n                              {!readOnly && (\n                                <IconButton\n                                  edge=\"end\"\n                                  onClick={() => handleDeleteDocument(document)}\n                                  size=\"small\"\n                                  color=\"error\"\n                                >\n                                  <Delete fontSize=\"small\" />\n                                </IconButton>\n                              )}\n                            </ListItemSecondaryAction>\n                          </ListItem>\n                        ))}\n                      </List>\n                    </>\n                  )}\n                </CardContent>\n              </Card>\n            </Grid>\n          );\n        })}\n      </Grid>\n\n      {readOnly && documents.length === 0 && (\n        <Alert severity=\"info\" sx={{ mt: 2 }}>\n          No documents have been uploaded yet.\n        </Alert>\n      )}\n    </Box>\n  );\n};\n\nexport default CourierDocumentUpload;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\ErrorBoundary.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Container' is defined but never used.","line":2,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":32},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Paper' is defined but never used.","line":2,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":51},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ErrorOutline' is defined but never used.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":299,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":299,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9923,9926],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9923,9926],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { Component, ErrorInfo, ReactNode } from 'react';\nimport { Box, Button, Container, Typography, Paper, Stack, Card, CardContent, Alert, Collapse } from '@mui/material';\nimport { ErrorOutline, Refresh, Home, BugReport, ExpandMore, ExpandLess, SearchOff } from '@mui/icons-material';\n\ninterface Props {\n  children: ReactNode;\n}\n\ninterface State {\n  hasError: boolean;\n  error: Error | null;\n  errorInfo: ErrorInfo | null;\n  showDetails: boolean;\n  retryCount: number;\n}\n\nexport class ErrorBoundary extends Component<Props, State> {\n  private maxRetries = 3;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      error: null,\n      errorInfo: null,\n      showDetails: false,\n      retryCount: 0,\n    };\n  }\n\n  static getDerivedStateFromError(error: Error): Partial<State> {\n    return {\n      hasError: true,\n      error,\n    };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    console.error('ErrorBoundary caught an error:', error, errorInfo);\n    \n    this.setState({\n      error,\n      errorInfo,\n    });\n\n    // Report to Sentry if available\n    if (window.Sentry) {\n      window.Sentry.captureException(error, {\n        contexts: {\n          react: {\n            componentStack: errorInfo.componentStack,\n          },\n        },\n      });\n    }\n  }\n\n  handleReset = () => {\n    this.setState({\n      hasError: false,\n      error: null,\n      errorInfo: null,\n      retryCount: 0,\n    });\n    window.location.href = '/';\n  };\n\n  handleRetry = () => {\n    if (this.state.retryCount < this.maxRetries) {\n      this.setState(prevState => ({\n        hasError: false,\n        error: null,\n        errorInfo: null,\n        retryCount: prevState.retryCount + 1,\n      }));\n    }\n  };\n\n  handleGoHome = () => {\n    window.location.href = '/dashboard';\n  };\n\n  toggleDetails = () => {\n    this.setState(prevState => ({\n      showDetails: !prevState.showDetails,\n    }));\n  };\n\n  getErrorMessage = (error: Error): string => {\n    if (error.message.includes('ChunkLoadError') || error.message.includes('Loading chunk')) {\n      return 'Failed to load application resources. This might be due to a network issue or an app update.';\n    }\n    if (error.message.includes('Network Error') || error.message.includes('fetch')) {\n      return 'Network connection error. Please check your internet connection and try again.';\n    }\n    if (error.message.includes('Unauthorized') || error.message.includes('401')) {\n      return 'Your session has expired. Please log in again.';\n    }\n    if (error.message.includes('403') || error.message.includes('Forbidden')) {\n      return 'You do not have permission to access this resource.';\n    }\n    if (error.message.includes('404') || error.message.includes('Not Found')) {\n      return 'The requested resource was not found.';\n    }\n    if (error.message.includes('500') || error.message.includes('Internal Server Error')) {\n      return 'Server error occurred. Please try again later.';\n    }\n    return 'An unexpected error occurred. Please try refreshing the page.';\n  };\n\n  render() {\n    if (this.state.hasError) {\n      const { error, errorInfo, retryCount } = this.state;\n      const canRetry = retryCount < this.maxRetries;\n      const errorMessage = error ? this.getErrorMessage(error) : 'An unknown error occurred';\n\n      return (\n        <Box\n          sx={{\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n            minHeight: '100vh',\n            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n            p: 3,\n          }}\n        >\n          <Card sx={{ maxWidth: 500, width: '100%', mx: 'auto' }}>\n            <CardContent sx={{ p: 4 }}>\n              <Stack spacing={3} alignItems=\"center\">\n                {/* Performile Logo */}\n                <Box\n                  sx={{\n                    mb: 2,\n                    display: 'flex',\n                    justifyContent: 'center',\n                    alignItems: 'center',\n                  }}\n                >\n                  <img\n                    src=\"/Performile-lastmile performance index.ico\"\n                    alt=\"Performile Logo\"\n                    style={{\n                      width: '64px',\n                      height: '64px',\n                      objectFit: 'contain',\n                    }}\n                  />\n                </Box>\n\n                {/* Error Icon - Magnifying Glass with X */}\n                <Box\n                  sx={{\n                    position: 'relative',\n                    width: 120,\n                    height: 120,\n                    borderRadius: 3,\n                    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                  }}\n                >\n                  <SearchOff\n                    sx={{\n                      fontSize: 60,\n                      color: 'white',\n                    }}\n                  />\n                </Box>\n\n                {/* Error Title */}\n                <Typography variant=\"h5\" component=\"h2\" textAlign=\"center\" fontWeight=\"bold\">\n                  Oops! Something went wrong\n                </Typography>\n\n                {/* User-friendly error message */}\n                <Alert severity=\"error\" sx={{ width: '100%' }}>\n                  {errorMessage}\n                </Alert>\n\n                {/* Retry information */}\n                {retryCount > 0 && (\n                  <Typography variant=\"body2\" color=\"text.secondary\" textAlign=\"center\">\n                    Retry attempt: {retryCount} of {this.maxRetries}\n                  </Typography>\n                )}\n\n                {/* Action buttons */}\n                <Stack direction=\"row\" spacing={2} flexWrap=\"wrap\" justifyContent=\"center\">\n                  {canRetry && (\n                    <Button\n                      variant=\"contained\"\n                      startIcon={<Refresh />}\n                      onClick={this.handleRetry}\n                      color=\"primary\"\n                    >\n                      Try Again\n                    </Button>\n                  )}\n                  \n                  <Button\n                    variant=\"outlined\"\n                    startIcon={<Home />}\n                    onClick={this.handleGoHome}\n                  >\n                    Go to Dashboard\n                  </Button>\n\n                  <Button\n                    variant=\"outlined\"\n                    onClick={() => window.location.reload()}\n                    startIcon={<Refresh />}\n                  >\n                    Refresh Page\n                  </Button>\n                </Stack>\n\n                {/* Technical details toggle */}\n                {import.meta.env.DEV && (\n                  <>\n                    <Button\n                      variant=\"text\"\n                      startIcon={<BugReport />}\n                      endIcon={this.state.showDetails ? <ExpandLess /> : <ExpandMore />}\n                      onClick={this.toggleDetails}\n                      size=\"small\"\n                    >\n                      Technical Details\n                    </Button>\n\n                    <Collapse in={this.state.showDetails} sx={{ width: '100%' }}>\n                      <Card variant=\"outlined\" sx={{ mt: 2 }}>\n                        <CardContent>\n                          <Typography variant=\"subtitle2\" gutterBottom>\n                            Error Details:\n                          </Typography>\n                          <Typography\n                            variant=\"body2\"\n                            component=\"pre\"\n                            sx={{\n                              whiteSpace: 'pre-wrap',\n                              wordBreak: 'break-word',\n                              fontFamily: 'monospace',\n                              fontSize: '0.75rem',\n                              backgroundColor: 'grey.100',\n                              p: 1,\n                              borderRadius: 1,\n                              maxHeight: 200,\n                              overflow: 'auto',\n                            }}\n                          >\n                            {error?.toString()}\n                          </Typography>\n                          \n                          {errorInfo && (\n                            <>\n                              <Typography variant=\"subtitle2\" gutterBottom sx={{ mt: 2 }}>\n                                Component Stack:\n                              </Typography>\n                              <Typography\n                                variant=\"body2\"\n                                component=\"pre\"\n                                sx={{\n                                  whiteSpace: 'pre-wrap',\n                                  wordBreak: 'break-word',\n                                  fontFamily: 'monospace',\n                                  fontSize: '0.75rem',\n                                  backgroundColor: 'grey.100',\n                                  p: 1,\n                                  borderRadius: 1,\n                                  maxHeight: 200,\n                                  overflow: 'auto',\n                                }}\n                              >\n                                {errorInfo.componentStack}\n                              </Typography>\n                            </>\n                          )}\n                        </CardContent>\n                      </Card>\n                    </Collapse>\n                  </>\n                )}\n              </Stack>\n            </CardContent>\n          </Card>\n        </Box>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\n// Extend Window interface for TypeScript\ndeclare global {\n  interface Window {\n    Sentry?: any;\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\LeadCreationForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":150,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":150,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3540,3543],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3540,3543],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  TextField,\n  Button,\n  Stepper,\n  Step,\n  StepLabel,\n  Grid,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  FormControlLabel,\n  Checkbox,\n  Alert\n} from '@mui/material';\n\ninterface Store {\n  store_id: string;\n  store_name: string;\n  store_type: string;\n}\n\ninterface LeadFormData {\n  title: string;\n  description: string;\n  lead_category: string;\n  lead_priority: string;\n  shipment_cost: number;\n  order_value: number;\n  delivery_country: string;\n  delivery_city: string;\n  delivery_postal_code: string;\n  merchant_company_name: string;\n  merchant_contact_name: string;\n  merchant_contact_email: string;\n  merchant_contact_phone: string;\n  lead_price: number;\n  competition_level: number;\n  is_repeat_customer: boolean;\n  previous_orders_count: number;\n  total_previous_spend: number;\n  next_follow_up: string;\n  follow_up_type: string;\n  expires_at: string;\n  is_premium: boolean;\n  is_featured: boolean;\n  created_by_store_id: string;\n  tags: string[];\n}\n\nconst steps = ['Basic Information', 'Shipment Details', 'Contact Information', 'Pricing & Settings'];\n\nconst categories = [\n  'electronics',\n  'fashion',\n  'home_garden',\n  'automotive',\n  'health_beauty',\n  'sports_outdoors',\n  'books_media',\n  'food_beverages',\n  'other'\n];\n\nconst priorities = [\n  { value: 'low', label: 'Low' },\n  { value: 'medium', label: 'Medium' },\n  { value: 'high', label: 'High' },\n  { value: 'urgent', label: 'Urgent' }\n];\n\nconst followUpTypes = [\n  { value: 'call', label: 'Phone Call' },\n  { value: 'email', label: 'Email' },\n  { value: 'meeting', label: 'In-Person Meeting' },\n  { value: 'none', label: 'No Follow-up' }\n];\n\nconst LeadCreationForm: React.FC = () => {\n  const [activeStep, setActiveStep] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [stores, setStores] = useState<Store[]>([]);\n  const [error, setError] = useState<string>('');\n  const [success, setSuccess] = useState<string>('');\n  const [formData, setFormData] = useState<LeadFormData>({\n    title: '',\n    description: '',\n    lead_category: '',\n    lead_priority: 'medium',\n    shipment_cost: 0,\n    order_value: 0,\n    delivery_country: '',\n    delivery_city: '',\n    delivery_postal_code: '',\n    merchant_company_name: '',\n    merchant_contact_name: '',\n    merchant_contact_email: '',\n    merchant_contact_phone: '',\n    lead_price: 0,\n    competition_level: 3,\n    is_repeat_customer: false,\n    previous_orders_count: 0,\n    total_previous_spend: 0,\n    next_follow_up: '',\n    follow_up_type: 'email',\n    expires_at: '',\n    is_premium: false,\n    is_featured: false,\n    created_by_store_id: '',\n    tags: []\n  });\n\n  // Fetch user's stores on component mount\n  useEffect(() => {\n    fetchStores();\n  }, []);\n\n  const fetchStores = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        setError('Authentication required');\n        return;\n      }\n\n      const response = await fetch('/api/stores', {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to fetch stores');\n      }\n\n      const data = await response.json();\n      setStores(data.stores || []);\n    } catch (err) {\n      console.error('Error fetching stores:', err);\n      setError('Failed to load stores');\n    }\n  };\n\n  const handleInputChange = (field: keyof LeadFormData, value: any) => {\n    setFormData(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n\n  const handleNext = () => {\n    if (validateStep(activeStep)) {\n      setActiveStep(prev => prev + 1);\n    }\n  };\n\n  const handleBack = () => {\n    setActiveStep(prev => prev - 1);\n  };\n\n  const validateStep = (step: number): boolean => {\n    switch (step) {\n      case 0: // Basic Information\n        if (!formData.title.trim()) {\n          setError('Title is required');\n          return false;\n        }\n        if (!formData.description.trim()) {\n          setError('Description is required');\n          return false;\n        }\n        if (!formData.lead_category) {\n          setError('Category is required');\n          return false;\n        }\n        break;\n      case 1: // Shipment Details\n        if (!formData.delivery_country.trim()) {\n          setError('Delivery country is required');\n          return false;\n        }\n        if (!formData.delivery_city.trim()) {\n          setError('Delivery city is required');\n          return false;\n        }\n        if (formData.shipment_cost <= 0) {\n          setError('Shipment cost must be greater than 0');\n          return false;\n        }\n        if (formData.order_value <= 0) {\n          setError('Order value must be greater than 0');\n          return false;\n        }\n        break;\n      case 2: // Contact Information\n        if (!formData.merchant_company_name.trim()) {\n          setError('Company name is required');\n          return false;\n        }\n        if (!formData.merchant_contact_name.trim()) {\n          setError('Contact name is required');\n          return false;\n        }\n        if (!formData.merchant_contact_email.trim()) {\n          setError('Contact email is required');\n          return false;\n        }\n        break;\n      case 3: // Pricing & Settings\n        if (formData.lead_price <= 0) {\n          setError('Lead price must be greater than 0');\n          return false;\n        }\n        if (!formData.created_by_store_id && stores.length > 0) {\n          setError('Please select a store');\n          return false;\n        }\n        break;\n    }\n    setError('');\n    return true;\n  };\n\n  const handleSubmit = async () => {\n    if (!validateStep(activeStep)) return;\n\n    setLoading(true);\n    setError('');\n    setSuccess('');\n\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        throw new Error('Authentication required');\n      }\n\n      const response = await fetch('/api/leads', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          action: 'create',\n          ...formData,\n          expires_at: formData.expires_at || null\n        })\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to create lead');\n      }\n\n      setSuccess('Lead created successfully!');\n      \n      // Reset form\n      setFormData({\n        title: '',\n        description: '',\n        lead_category: '',\n        lead_priority: 'medium',\n        shipment_cost: 0,\n        order_value: 0,\n        delivery_country: '',\n        delivery_city: '',\n        delivery_postal_code: '',\n        merchant_company_name: '',\n        merchant_contact_name: '',\n        merchant_contact_email: '',\n        merchant_contact_phone: '',\n        lead_price: 0,\n        competition_level: 3,\n        is_repeat_customer: false,\n        previous_orders_count: 0,\n        total_previous_spend: 0,\n        next_follow_up: '',\n        follow_up_type: 'email',\n        expires_at: '',\n        is_premium: false,\n        is_featured: false,\n        created_by_store_id: '',\n        tags: []\n      });\n      setActiveStep(0);\n\n    } catch (err) {\n      console.error('Error creating lead:', err);\n      setError(err instanceof Error ? err.message : 'Failed to create lead');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const renderStepContent = (step: number) => {\n    switch (step) {\n      case 0:\n        return (\n          <Grid container spacing={3}>\n            <Grid item xs={12}>\n              <TextField\n                fullWidth\n                label=\"Lead Title *\"\n                value={formData.title}\n                onChange={(e) => handleInputChange('title', e.target.value)}\n                placeholder=\"e.g., Weekly Electronics Delivery Route\"\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <TextField\n                fullWidth\n                multiline\n                rows={3}\n                label=\"Description *\"\n                value={formData.description}\n                onChange={(e) => handleInputChange('description', e.target.value)}\n                placeholder=\"Describe the delivery opportunity...\"\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <FormControl fullWidth>\n                <InputLabel>Category *</InputLabel>\n                <Select\n                  value={formData.lead_category}\n                  label=\"Category *\"\n                  onChange={(e) => handleInputChange('lead_category', e.target.value)}\n                >\n                  {categories.map(cat => (\n                    <MenuItem key={cat} value={cat}>\n                      {cat.charAt(0).toUpperCase() + cat.slice(1)}\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <FormControl fullWidth>\n                <InputLabel>Priority</InputLabel>\n                <Select\n                  value={formData.lead_priority}\n                  label=\"Priority\"\n                  onChange={(e) => handleInputChange('lead_priority', e.target.value)}\n                >\n                  {priorities.map(priority => (\n                    <MenuItem key={priority.value} value={priority.value}>\n                      {priority.label}\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n            </Grid>\n          </Grid>\n        );\n\n      case 1:\n        return (\n          <Grid container spacing={3}>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Delivery Country *\"\n                value={formData.delivery_country}\n                onChange={(e) => handleInputChange('delivery_country', e.target.value)}\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Delivery City *\"\n                value={formData.delivery_city}\n                onChange={(e) => handleInputChange('delivery_city', e.target.value)}\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Shipment Cost *\"\n                type=\"number\"\n                value={formData.shipment_cost}\n                onChange={(e) => handleInputChange('shipment_cost', e.target.value)}\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Order Value *\"\n                type=\"number\"\n                value={formData.order_value}\n                onChange={(e) => handleInputChange('order_value', e.target.value)}\n              />\n            </Grid>\n          </Grid>\n        );\n\n      case 2:\n        return (\n          <Grid container spacing={3}>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Company Name *\"\n                value={formData.merchant_company_name}\n                onChange={(e) => handleInputChange('merchant_company_name', e.target.value)}\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Contact Name *\"\n                value={formData.merchant_contact_name}\n                onChange={(e) => handleInputChange('merchant_contact_name', e.target.value)}\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Contact Email *\"\n                type=\"email\"\n                value={formData.merchant_contact_email}\n                onChange={(e) => handleInputChange('merchant_contact_email', e.target.value)}\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Contact Phone\"\n                value={formData.merchant_contact_phone}\n                onChange={(e) => handleInputChange('merchant_contact_phone', e.target.value)}\n              />\n            </Grid>\n          </Grid>\n        );\n\n      case 3:\n        return (\n          <Grid container spacing={3}>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Lead Price *\"\n                type=\"number\"\n                value={formData.lead_price}\n                onChange={(e) => handleInputChange('lead_price', e.target.value)}\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <FormControl fullWidth>\n                <InputLabel>Follow-up Type</InputLabel>\n                <Select\n                  value={formData.follow_up_type}\n                  label=\"Follow-up Type\"\n                  onChange={(e) => handleInputChange('follow_up_type', e.target.value)}\n                >\n                  {followUpTypes.map(followUpType => (\n                    <MenuItem key={followUpType.value} value={followUpType.value}>\n                      {followUpType.label}\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Expires At\"\n                type=\"datetime-local\"\n                value={formData.expires_at}\n                onChange={(e) => handleInputChange('expires_at', e.target.value)}\n                InputLabelProps={{ shrink: true }}\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <FormControlLabel\n                control={\n                  <Checkbox\n                    checked={formData.is_premium}\n                    onChange={(e) => handleInputChange('is_premium', e.target.checked)}\n                  />\n                }\n                label=\"Premium Lead\"\n              />\n            </Grid>\n            {stores.length > 0 && (\n              <Grid item xs={12}>\n                <FormControl fullWidth>\n                  <InputLabel>Store</InputLabel>\n                  <Select\n                    value={formData.created_by_store_id}\n                    label=\"Store\"\n                    onChange={(e) => handleInputChange('created_by_store_id', e.target.value)}\n                  >\n                    {stores.map(store => (\n                      <MenuItem key={store.store_id} value={store.store_id}>\n                        {store.store_name}\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n              </Grid>\n            )}\n          </Grid>\n        );\n\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <Box sx={{ p: { xs: 1, md: 3 } }}>\n      <Typography variant=\"h4\" sx={{ fontWeight: 'bold', mb: 3 }}>\n        Create New Lead\n      </Typography>\n\n      <Card>\n        <CardContent>\n          <Stepper activeStep={activeStep} sx={{ mb: 4 }}>\n            {steps.map((label) => (\n              <Step key={label}>\n                <StepLabel>{label}</StepLabel>\n              </Step>\n            ))}\n          </Stepper>\n\n          {renderStepContent(activeStep)}\n\n          <Box sx={{ display: 'flex', justifyContent: 'space-between', mt: 4 }}>\n            <Button\n              disabled={activeStep === 0}\n              onClick={handleBack}\n            >\n              Back\n            </Button>\n            <Box>\n              {activeStep === steps.length - 1 ? (\n                <Button\n                  variant=\"contained\"\n                  onClick={handleSubmit}\n                  disabled={loading}\n                >\n                  {loading ? 'Creating...' : 'Create Lead'}\n                </Button>\n              ) : (\n                <Button\n                  variant=\"contained\"\n                  onClick={handleNext}\n                >\n                  Next\n                </Button>\n              )}\n            </Box>\n          </Box>\n        </CardContent>\n      </Card>\n      {error && (\n        <Alert severity=\"error\" sx={{ mt: 3 }}>\n          {error}\n        </Alert>\n      )}\n      {success && (\n        <Alert severity=\"success\" sx={{ mt: 3 }}>\n          {success}\n        </Alert>\n      )}\n    </Box>\n  );\n};\n\nexport default LeadCreationForm;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\LeadPurchaseModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":82,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":82,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1949,1952],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1949,1952],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":101,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":101,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2490,2493],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2490,2493],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  Typography,\n  Box,\n  Card,\n  CardContent,\n  Chip,\n  CircularProgress,\n  Alert\n} from '@mui/material';\nimport {\n  CreditCard,\n  LocationOn,\n  TrendingUp,\n  AttachMoney,\n  Business\n} from '@mui/icons-material';\nimport { apiClient } from '../services/apiClient';\nimport toast from 'react-hot-toast';\n\ninterface Lead {\n  lead_id: string;\n  title: string;\n  description: string;\n  delivery_areas: string;\n  estimated_order_volume: number;\n  avg_order_value: number;\n  lead_price: number;\n  requirements: string;\n  budget_min: number;\n  budget_max: number;\n  merchant_contact_name: string;\n  merchant_contact_email: string;\n  merchant_contact_phone: string;\n  lead_score: number;\n  lead_category: string;\n  created_at: string;\n}\n\ninterface LeadPurchaseModalProps {\n  open: boolean;\n  onClose: () => void;\n  lead: Lead | null;\n  onPurchaseSuccess: () => void;\n}\n\nconst LeadPurchaseModal: React.FC<LeadPurchaseModalProps> = ({\n  open,\n  onClose,\n  lead,\n  onPurchaseSuccess\n}) => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const handleStripeCheckout = async () => {\n    if (!lead) return;\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const response = await apiClient.post('/leads?action=checkout', {\n        leadId: lead.lead_id,\n        successUrl: `${window.location.origin}/dashboard?payment=success&leadId=${lead.lead_id}`,\n        cancelUrl: `${window.location.origin}/dashboard?payment=cancelled`\n      });\n\n      if (response.data.success) {\n        // Call success callback before redirect\n        onPurchaseSuccess();\n        // Redirect to Stripe Checkout\n        window.location.href = response.data.data.url;\n      } else {\n        throw new Error(response.data.message || 'Failed to create checkout session');\n      }\n    } catch (error: any) {\n      console.error('Checkout error:', error);\n      setError(error.response?.data?.message || 'Failed to initiate payment');\n      toast.error('Payment initiation failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDirectPurchase = async () => {\n    if (!lead) return;\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      // For demo purposes, we'll use Stripe Checkout\n      // In production, you'd implement Stripe Elements for direct payment\n      await handleStripeCheckout();\n    } catch (error: any) {\n      console.error('Purchase error:', error);\n      setError(error.response?.data?.message || 'Failed to process payment');\n      toast.error('Purchase failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!lead) return null;\n\n  const monthlyRevenuePotential = lead.estimated_order_volume * lead.avg_order_value;\n  const roiMonths = Math.ceil(lead.lead_price / (monthlyRevenuePotential * 0.1)); // Assuming 10% margin\n\n  return (\n    <Dialog open={open} onClose={onClose} maxWidth=\"md\" fullWidth>\n      <DialogTitle>\n        <Box display=\"flex\" alignItems=\"center\" gap={1}>\n          <CreditCard color=\"primary\" />\n          <Typography variant=\"h6\">Purchase Lead</Typography>\n          <Chip \n            label={`Score: ${lead.lead_score}/100`} \n            color={lead.lead_score >= 80 ? 'success' : lead.lead_score >= 60 ? 'warning' : 'error'}\n            size=\"small\"\n          />\n        </Box>\n      </DialogTitle>\n\n      <DialogContent>\n        {error && (\n          <Alert severity=\"error\" sx={{ mb: 2 }}>\n            {error}\n          </Alert>\n        )}\n\n        <Card sx={{ mb: 3 }}>\n          <CardContent>\n            <Typography variant=\"h6\" gutterBottom>\n              {lead.title}\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\n              {lead.description}\n            </Typography>\n\n            <Box display=\"flex\" flexWrap=\"wrap\" gap={2} mb={2}>\n              <Box display=\"flex\" alignItems=\"center\" gap={0.5}>\n                <LocationOn fontSize=\"small\" color=\"action\" />\n                <Typography variant=\"body2\">{lead.delivery_areas}</Typography>\n              </Box>\n              <Box display=\"flex\" alignItems=\"center\" gap={0.5}>\n                <TrendingUp fontSize=\"small\" color=\"action\" />\n                <Typography variant=\"body2\">\n                  {lead.estimated_order_volume} orders/month\n                </Typography>\n              </Box>\n              <Box display=\"flex\" alignItems=\"center\" gap={0.5}>\n                <AttachMoney fontSize=\"small\" color=\"action\" />\n                <Typography variant=\"body2\">\n                  ${lead.avg_order_value} avg order value\n                </Typography>\n              </Box>\n            </Box>\n\n            <Chip \n              label={lead.lead_category} \n              variant=\"outlined\" \n              size=\"small\"\n              sx={{ mr: 1 }}\n            />\n          </CardContent>\n        </Card>\n\n        <Card sx={{ mb: 3, bgcolor: 'primary.50' }}>\n          <CardContent>\n            <Typography variant=\"h6\" gutterBottom color=\"primary\">\n              Revenue Potential Analysis\n            </Typography>\n            <Box display=\"grid\" gridTemplateColumns=\"1fr 1fr\" gap={2}>\n              <Box>\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  Monthly Revenue Potential\n                </Typography>\n                <Typography variant=\"h6\" color=\"success.main\">\n                  ${monthlyRevenuePotential.toLocaleString()}\n                </Typography>\n              </Box>\n              <Box>\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  Estimated ROI Timeline\n                </Typography>\n                <Typography variant=\"h6\" color=\"info.main\">\n                  {roiMonths} months\n                </Typography>\n              </Box>\n            </Box>\n          </CardContent>\n        </Card>\n\n        <Card sx={{ mb: 3 }}>\n          <CardContent>\n            <Typography variant=\"h6\" gutterBottom>\n              Merchant Contact Information\n            </Typography>\n            <Box display=\"grid\" gridTemplateColumns=\"1fr\" gap={1}>\n              <Box display=\"flex\" alignItems=\"center\" gap={1}>\n                <Business fontSize=\"small\" color=\"action\" />\n                <Typography variant=\"body2\">\n                  {lead.merchant_contact_name}\n                </Typography>\n              </Box>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Email: {lead.merchant_contact_email}\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Phone: {lead.merchant_contact_phone}\n              </Typography>\n            </Box>\n          </CardContent>\n        </Card>\n\n        <Box \n          sx={{ \n            p: 2, \n            bgcolor: 'success.50', \n            borderRadius: 1,\n            border: '1px solid',\n            borderColor: 'success.200'\n          }}\n        >\n          <Typography variant=\"h5\" color=\"success.dark\" textAlign=\"center\">\n            Lead Price: ${lead.lead_price}\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\" textAlign=\"center\" mt={1}>\n            One-time payment  Secure payment via Stripe\n          </Typography>\n        </Box>\n      </DialogContent>\n\n      <DialogActions sx={{ p: 3, gap: 1 }}>\n        <Button onClick={onClose} disabled={loading}>\n          Cancel\n        </Button>\n        <Button\n          variant=\"contained\"\n          onClick={handleDirectPurchase}\n          disabled={loading}\n          startIcon={loading ? <CircularProgress size={20} /> : <CreditCard />}\n          size=\"large\"\n        >\n          {loading ? 'Processing...' : `Purchase for $${lead.lead_price}`}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default LeadPurchaseModal;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\LeadsMarketplace.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchLeads'. Either include it or remove the dependency array.","line":107,"column":6,"nodeType":"ArrayExpression","endLine":107,"endColumn":32,"suggestions":[{"desc":"Update the dependencies array to be: [fetchLeads, filters, pagination.page]","fix":{"range":[2386,2412],"text":"[fetchLeads, filters, pagination.page]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":159,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":159,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4027,4030],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4027,4030],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":291,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":291,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7659,7662],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7659,7662],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":522,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":522,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15924,15927],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15924,15927],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Grid,\n  TextField,\n  Button,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Chip,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Pagination,\n  Alert,\n  CircularProgress,\n  Divider\n} from '@mui/material';\nimport {\n  Search,\n  Star,\n  LocationOn,\n  Business,\n  AttachMoney,\n  Visibility,\n  ShoppingCart,\n  Category,\n  Email,\n  Phone\n} from '@mui/icons-material';\n\ninterface Lead {\n  lead_id: string;\n  title: string;\n  description: string;\n  lead_category: string;\n  lead_priority: 'low' | 'medium' | 'high' | 'urgent';\n  shipment_cost: number;\n  order_value: number;\n  delivery_country: string;\n  delivery_city: string;\n  delivery_postal_code: string;\n  merchant_company_name: string;\n  merchant_contact_name: string;\n  merchant_contact_email: string;\n  merchant_contact_phone: string;\n  lead_price: number;\n  lead_score: number;\n  competition_level: number;\n  is_repeat_customer: boolean;\n  previous_orders_count: number;\n  total_previous_spend: number;\n  next_follow_up: string;\n  follow_up_type: string;\n  expires_at: string;\n  is_premium: boolean;\n  is_featured: boolean;\n  created_at: string;\n  updated_at: string;\n  status: string;\n  view_count: number;\n  interest_count: number;\n  purchase_count: number;\n  is_purchased_by_user: boolean;\n  creator_name: string;\n  store_name: string;\n}\n\ninterface LeadsMarketplaceProps {\n  userRole: string;\n}\n\nconst LeadsMarketplace: React.FC<LeadsMarketplaceProps> = ({ userRole }) => {\n  const [leads, setLeads] = useState<Lead[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string>('');\n  const [success, setSuccess] = useState<string>('');\n  const [selectedLead, setSelectedLead] = useState<Lead | null>(null);\n  const [detailsOpen, setDetailsOpen] = useState(false);\n  const [purchaseLoading, setPurchaseLoading] = useState(false);\n  \n  // Filters and pagination\n  const [filters, setFilters] = useState({\n    search: '',\n    category: '',\n    priority: '',\n    min_price: '',\n    max_price: '',\n    delivery_country: '',\n    featured_only: false\n  });\n  const [pagination, setPagination] = useState({\n    page: 1,\n    limit: 12,\n    total: 0,\n    totalPages: 0\n  });\n\n  // Fetch leads on component mount and filter changes\n  useEffect(() => {\n    fetchLeads();\n  }, [filters, pagination.page]);\n\n  const fetchLeads = async () => {\n    setLoading(true);\n    setError('');\n    \n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        setError('Authentication required');\n        return;\n      }\n\n      const queryParams = new URLSearchParams({\n        page: pagination.page.toString(),\n        limit: pagination.limit.toString(),\n        ...(filters.search && { search: filters.search }),\n        ...(filters.category && { category: filters.category }),\n        ...(filters.priority && { priority: filters.priority }),\n        ...(filters.min_price && { min_price: filters.min_price }),\n        ...(filters.max_price && { max_price: filters.max_price }),\n        ...(filters.delivery_country && { delivery_country: filters.delivery_country }),\n        ...(filters.featured_only && { featured_only: 'true' })\n      });\n\n      const response = await fetch(`/api/leads?${queryParams}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to fetch leads');\n      }\n\n      const data = await response.json();\n      setLeads(data.leads || []);\n      setPagination(prev => ({\n        ...prev,\n        total: data.pagination.total,\n        totalPages: data.pagination.totalPages\n      }));\n\n    } catch (err) {\n      console.error('Error fetching leads:', err);\n      setError(err instanceof Error ? err.message : 'Failed to fetch leads');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleFilterChange = (field: string, value: any) => {\n    setFilters(prev => ({ ...prev, [field]: value }));\n    setPagination(prev => ({ ...prev, page: 1 })); // Reset to first page\n  };\n\n  const handleViewLead = async (lead: Lead) => {\n    setSelectedLead(lead);\n    setDetailsOpen(true);\n\n    // Track lead view\n    try {\n      const token = localStorage.getItem('token');\n      if (token) {\n        await fetch('/api/leads', {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            action: 'view',\n            lead_id: lead.lead_id\n          })\n        });\n      }\n    } catch (err) {\n      console.error('Error tracking lead view:', err);\n    }\n  };\n\n  const handlePurchaseLead = async (leadId: string) => {\n    if (userRole !== 'courier') {\n      setError('Only couriers can purchase leads');\n      return;\n    }\n\n    setPurchaseLoading(true);\n    setError('');\n    setSuccess('');\n\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        setError('Authentication required');\n        return;\n      }\n\n      const response = await fetch('/api/leads', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          action: 'purchase',\n          lead_id: leadId\n        })\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to purchase lead');\n      }\n\n      setSuccess('Lead purchased successfully!');\n      setDetailsOpen(false);\n      fetchLeads(); // Refresh leads list\n\n    } catch (err) {\n      console.error('Error purchasing lead:', err);\n      setError(err instanceof Error ? err.message : 'Failed to purchase lead');\n    } finally {\n      setPurchaseLoading(false);\n    }\n  };\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case 'urgent': return 'error';\n      case 'high': return 'warning';\n      case 'medium': return 'info';\n      case 'low': return 'success';\n      default: return 'default';\n    }\n  };\n\n  const getCategoryIcon = (category: string) => {\n    switch (category) {\n      case 'electronics': return '';\n      case 'fashion': return '';\n      case 'home_garden': return '';\n      case 'automotive': return '';\n      case 'health_beauty': return '';\n      case 'sports_outdoors': return '';\n      case 'books_media': return '';\n      case 'food_beverages': return '';\n      default: return '';\n    }\n  };\n\n  const LeadCard: React.FC<{ lead: Lead }> = ({ lead }) => (\n    <Card \n      sx={{ \n        height: '100%', \n        display: 'flex', \n        flexDirection: 'column',\n        transition: 'transform 0.2s, box-shadow 0.2s',\n        '&:hover': {\n          transform: 'translateY(-4px)',\n          boxShadow: 4\n        },\n        border: lead.is_featured ? '2px solid #gold' : 'none',\n        position: 'relative'\n      }}\n    >\n      {lead.is_featured && (\n        <Chip\n          label=\"Featured\"\n          color=\"warning\"\n          size=\"small\"\n          sx={{ position: 'absolute', top: 8, right: 8, zIndex: 1 }}\n        />\n      )}\n      \n      <CardContent sx={{ flexGrow: 1, p: 2 }}>\n        <Box sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>\n          <Typography variant=\"h6\" component=\"h3\" sx={{ flexGrow: 1, fontSize: '1.1rem' }}>\n            {lead.title}\n          </Typography>\n          <Chip\n            label={lead.lead_priority}\n            color={getPriorityColor(lead.lead_priority) as any}\n            size=\"small\"\n          />\n        </Box>\n\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2, height: 40, overflow: 'hidden' }}>\n          {lead.description}\n        </Typography>\n\n        <Box sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>\n          <Category sx={{ fontSize: 16, mr: 1, color: 'text.secondary' }} />\n          <Typography variant=\"body2\" sx={{ mr: 2 }}>\n            {getCategoryIcon(lead.lead_category)} {lead.lead_category}\n          </Typography>\n          <Star sx={{ fontSize: 16, mr: 0.5, color: 'gold' }} />\n          <Typography variant=\"body2\">\n            {lead.lead_score}/100\n          </Typography>\n        </Box>\n\n        <Box sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>\n          <LocationOn sx={{ fontSize: 16, mr: 1, color: 'text.secondary' }} />\n          <Typography variant=\"body2\">\n            {lead.delivery_city}, {lead.delivery_country}\n          </Typography>\n        </Box>\n\n        <Box sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>\n          <Business sx={{ fontSize: 16, mr: 1, color: 'text.secondary' }} />\n          <Typography variant=\"body2\">\n            {lead.merchant_company_name}\n          </Typography>\n        </Box>\n\n        <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\n          <AttachMoney sx={{ fontSize: 16, mr: 1, color: 'text.secondary' }} />\n          <Typography variant=\"body2\" sx={{ mr: 2 }}>\n            Order: ${lead.order_value}\n          </Typography>\n          <Typography variant=\"body2\">\n            Shipping: ${lead.shipment_cost}\n          </Typography>\n        </Box>\n\n        <Divider sx={{ mb: 2 }} />\n\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n          <Typography variant=\"h6\" color=\"primary\">\n            ${lead.lead_price}\n          </Typography>\n          <Box sx={{ display: 'flex', alignItems: 'center' }}>\n            <Visibility sx={{ fontSize: 16, mr: 0.5, color: 'text.secondary' }} />\n            <Typography variant=\"body2\" sx={{ mr: 1 }}>\n              {lead.view_count}\n            </Typography>\n            <ShoppingCart sx={{ fontSize: 16, mr: 0.5, color: 'text.secondary' }} />\n            <Typography variant=\"body2\">\n              {lead.purchase_count}\n            </Typography>\n          </Box>\n        </Box>\n\n        <Button\n          fullWidth\n          variant=\"contained\"\n          onClick={() => handleViewLead(lead)}\n          disabled={lead.is_purchased_by_user}\n          sx={{ mt: 'auto' }}\n        >\n          {lead.is_purchased_by_user ? 'Already Purchased' : 'View Details'}\n        </Button>\n      </CardContent>\n    </Card>\n  );\n\n  if (userRole !== 'courier') {\n    return (\n      <Alert severity=\"info\">\n        Lead marketplace is only available for couriers.\n      </Alert>\n    );\n  }\n\n  return (\n    <Box sx={{ p: { xs: 1, md: 3 } }}>\n      <Typography variant=\"h4\" sx={{ fontWeight: 'bold', mb: 3 }}>\n        Leads Marketplace\n      </Typography>\n\n      {/* Filters */}\n      <Box sx={{ p: 2, mb: 3, bgcolor: 'background.paper', borderRadius: 1, boxShadow: 1 }}>\n        <Grid container spacing={2} alignItems=\"center\">\n          <Grid item xs={12} md={4}>\n            <TextField\n              fullWidth\n              placeholder=\"Search leads...\"\n              value={filters.search}\n              onChange={(e) => handleFilterChange('search', e.target.value)}\n              InputProps={{\n                startAdornment: <Search sx={{ mr: 1, color: 'text.secondary' }} />\n              }}\n            />\n          </Grid>\n          <Grid item xs={12} sm={6} md={2}>\n            <FormControl fullWidth>\n              <InputLabel>Category</InputLabel>\n              <Select\n                value={filters.category}\n                label=\"Category\"\n                onChange={(e) => handleFilterChange('category', e.target.value)}\n              >\n                <MenuItem value=\"\">All Categories</MenuItem>\n                <MenuItem value=\"electronics\">Electronics</MenuItem>\n                <MenuItem value=\"fashion\">Fashion</MenuItem>\n                <MenuItem value=\"home_garden\">Home & Garden</MenuItem>\n                <MenuItem value=\"automotive\">Automotive</MenuItem>\n                <MenuItem value=\"health_beauty\">Health & Beauty</MenuItem>\n                <MenuItem value=\"sports_outdoors\">Sports & Outdoors</MenuItem>\n                <MenuItem value=\"books_media\">Books & Media</MenuItem>\n                <MenuItem value=\"food_beverages\">Food & Beverages</MenuItem>\n                <MenuItem value=\"other\">Other</MenuItem>\n              </Select>\n            </FormControl>\n          </Grid>\n          <Grid item xs={12} sm={6} md={2}>\n            <FormControl fullWidth>\n              <InputLabel>Priority</InputLabel>\n              <Select\n                value={filters.priority}\n                label=\"Priority\"\n                onChange={(e) => handleFilterChange('priority', e.target.value)}\n              >\n                <MenuItem value=\"\">All Priorities</MenuItem>\n                <MenuItem value=\"urgent\">Urgent</MenuItem>\n                <MenuItem value=\"high\">High</MenuItem>\n                <MenuItem value=\"medium\">Medium</MenuItem>\n                <MenuItem value=\"low\">Low</MenuItem>\n              </Select>\n            </FormControl>\n          </Grid>\n          <Grid item xs={6} md={2}>\n            <TextField\n              fullWidth\n              type=\"number\"\n              placeholder=\"Min Price\"\n              value={filters.min_price}\n              onChange={(e) => handleFilterChange('min_price', e.target.value)}\n            />\n          </Grid>\n          <Grid item xs={6} md={2}>\n            <TextField\n              fullWidth\n              type=\"number\"\n              placeholder=\"Max Price\"\n              value={filters.max_price}\n              onChange={(e) => handleFilterChange('max_price', e.target.value)}\n            />\n          </Grid>\n        </Grid>\n      </Box>\n\n      {/* Error/Success Messages */}\n      {error && (\n        <Alert severity=\"error\" sx={{ mb: 3 }} onClose={() => setError('')}>\n          {error}\n        </Alert>\n      )}\n      {success && (\n        <Alert severity=\"success\" sx={{ mb: 3 }} onClose={() => setSuccess('')}>\n          {success}\n        </Alert>\n      )}\n\n      {/* Loading State */}\n      {loading && (\n        <Box sx={{ display: 'flex', justifyContent: 'center', py: 4 }}>\n          <CircularProgress />\n        </Box>\n      )}\n\n      {/* Leads Grid */}\n      {!loading && (\n        <>\n          <Grid container spacing={3}>\n            {leads.map((lead) => (\n              <Grid item xs={12} sm={6} md={4} key={lead.lead_id}>\n                <LeadCard lead={lead} />\n              </Grid>\n            ))}\n          </Grid>\n\n          {/* Pagination */}\n          {pagination.totalPages > 1 && (\n            <Box sx={{ display: 'flex', justifyContent: 'center', mt: 4 }}>\n              <Pagination\n                count={pagination.totalPages}\n                page={pagination.page}\n                onChange={(_, page) => setPagination(prev => ({ ...prev, page }))}\n                color=\"primary\"\n              />\n            </Box>\n          )}\n\n          {/* No Results */}\n          {leads.length === 0 && !loading && (\n            <Box sx={{ textAlign: 'center', py: 8 }}>\n              <Typography variant=\"h6\" color=\"text.secondary\">\n                No leads found matching your criteria\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1 }}>\n                Try adjusting your filters or check back later for new leads\n              </Typography>\n            </Box>\n          )}\n        </>\n      )}\n\n      {/* Lead Details Dialog */}\n      <Dialog\n        open={detailsOpen}\n        onClose={() => setDetailsOpen(false)}\n        maxWidth=\"md\"\n        fullWidth\n      >\n        {selectedLead && (\n          <>\n            <DialogTitle>\n              <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n                <Typography variant=\"h5\">{selectedLead.title}</Typography>\n                <Chip\n                  label={selectedLead.lead_priority}\n                  color={getPriorityColor(selectedLead.lead_priority) as any}\n                />\n              </Box>\n            </DialogTitle>\n            <DialogContent>\n              <Grid container spacing={3}>\n                <Grid item xs={12}>\n                  <Typography variant=\"body1\" sx={{ mb: 2 }}>\n                    {selectedLead.description}\n                  </Typography>\n                </Grid>\n                \n                <Grid item xs={12} md={6}>\n                  <Typography variant=\"h6\" sx={{ mb: 1 }}>Shipment Details</Typography>\n                  <Typography variant=\"body2\">\n                    <strong>Order Value:</strong> ${selectedLead.order_value}\n                  </Typography>\n                  <Typography variant=\"body2\">\n                    <strong>Shipping Cost:</strong> ${selectedLead.shipment_cost}\n                  </Typography>\n                  <Typography variant=\"body2\">\n                    <strong>Delivery:</strong> {selectedLead.delivery_city}, {selectedLead.delivery_country} {selectedLead.delivery_postal_code}\n                  </Typography>\n                  <Typography variant=\"body2\">\n                    <strong>Category:</strong> {getCategoryIcon(selectedLead.lead_category)} {selectedLead.lead_category}\n                  </Typography>\n                </Grid>\n                \n                <Grid item xs={12} md={6}>\n                  <Typography variant=\"h6\" sx={{ mb: 1 }}>Merchant Information</Typography>\n                  <Typography variant=\"body2\">\n                    <strong>Company:</strong> {selectedLead.merchant_company_name}\n                  </Typography>\n                  <Typography variant=\"body2\">\n                    <strong>Contact:</strong> {selectedLead.merchant_contact_name}\n                  </Typography>\n                  <Typography variant=\"body2\" sx={{ display: 'flex', alignItems: 'center' }}>\n                    <Email sx={{ fontSize: 16, mr: 1 }} />\n                    <strong>Email:</strong> {selectedLead.merchant_contact_email}\n                  </Typography>\n                  <Typography variant=\"body2\" sx={{ display: 'flex', alignItems: 'center' }}>\n                    <Phone sx={{ fontSize: 16, mr: 1 }} />\n                    <strong>Phone:</strong> {selectedLead.merchant_contact_phone}\n                  </Typography>\n                </Grid>\n                \n                <Grid item xs={12}>\n                  <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', p: 2, bgcolor: 'grey.50', borderRadius: 1 }}>\n                    <Box>\n                      <Typography variant=\"h6\">Lead Score: {selectedLead.lead_score}/100</Typography>\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        Competition Level: {selectedLead.competition_level}/5\n                      </Typography>\n                    </Box>\n                    <Typography variant=\"h4\" color=\"primary\">\n                      ${selectedLead.lead_price}\n                    </Typography>\n                  </Box>\n                </Grid>\n                \n                {selectedLead.is_repeat_customer && (\n                  <Grid item xs={12}>\n                    <Alert severity=\"info\">\n                      This is a repeat customer with {selectedLead.previous_orders_count} previous orders \n                      totaling ${selectedLead.total_previous_spend}\n                    </Alert>\n                  </Grid>\n                )}\n              </Grid>\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={() => setDetailsOpen(false)}>\n                Close\n              </Button>\n              {!selectedLead.is_purchased_by_user && (\n                <Button\n                  variant=\"contained\"\n                  onClick={() => handlePurchaseLead(selectedLead.lead_id)}\n                  disabled={purchaseLoading}\n                  startIcon={purchaseLoading ? <CircularProgress size={20} /> : <ShoppingCart />}\n                >\n                  {purchaseLoading ? 'Purchasing...' : `Purchase for $${selectedLead.lead_price}`}\n                </Button>\n              )}\n            </DialogActions>\n          </>\n        )}\n      </Dialog>\n    </Box>\n  );\n};\n\nexport default LeadsMarketplace;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\RoleBasedSettingsRouter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\SessionExpiredModal.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":95,"column":85,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[3226,3365],"text":" Your session will automatically extend while you&apos;re active. Sessions expire after 15 minutes of inactivity for your security.\n            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[3226,3365],"text":" Your session will automatically extend while you&lsquo;re active. Sessions expire after 15 minutes of inactivity for your security.\n            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[3226,3365],"text":" Your session will automatically extend while you&#39;re active. Sessions expire after 15 minutes of inactivity for your security.\n            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[3226,3365],"text":" Your session will automatically extend while you&rsquo;re active. Sessions expire after 15 minutes of inactivity for your security.\n            "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { sessionEvents } from '@/services/apiClient';\nimport { useAuthStore } from '@/store/authStore';\nimport { AlertTriangle, LogIn, X } from 'lucide-react';\n\nexport const SessionExpiredModal = () => {\n  const [isOpen, setIsOpen] = useState(false);\n  const navigate = useNavigate();\n  const { clearAuth } = useAuthStore();\n\n  // Memoize the session handler to prevent re-subscriptions\n  const handleSessionExpired = useCallback(() => {\n    setIsOpen(true);\n  }, []);\n\n  useEffect(() => {\n    // Subscribe to session expiration events\n    const unsubscribe = sessionEvents.subscribe(handleSessionExpired);\n\n    // Cleanup subscription on unmount\n    return () => {\n      if (typeof unsubscribe === 'function') {\n        unsubscribe();\n      }\n    };\n  }, [handleSessionExpired]);\n\n  const handleLogin = useCallback(() => {\n    setIsOpen(false);\n    clearAuth();\n    navigate('/login', { state: { sessionExpired: true } });\n  }, [clearAuth, navigate]);\n\n  const handleClose = useCallback(() => {\n    setIsOpen(false);\n    clearAuth();\n    navigate('/login');\n  }, [clearAuth, navigate]);\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm\">\n      <div className=\"relative w-full max-w-md mx-4 bg-white rounded-lg shadow-xl\">\n        {/* Close button */}\n        <button\n          onClick={handleClose}\n          className=\"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors\"\n          aria-label=\"Close\"\n        >\n          <X className=\"w-5 h-5\" />\n        </button>\n\n        {/* Content */}\n        <div className=\"p-6\">\n          {/* Icon */}\n          <div className=\"flex justify-center mb-4\">\n            <div className=\"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center\">\n              <AlertTriangle className=\"w-8 h-8 text-yellow-600\" />\n            </div>\n          </div>\n\n          {/* Title */}\n          <h2 className=\"text-2xl font-bold text-center text-gray-900 mb-2\">\n            Session Expired\n          </h2>\n\n          {/* Message */}\n          <p className=\"text-center text-gray-600 mb-6\">\n            Your session has expired due to inactivity. Please log in again to continue using Performile.\n          </p>\n\n          {/* Actions */}\n          <div className=\"flex flex-col gap-3\">\n            <button\n              onClick={handleLogin}\n              className=\"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium\"\n            >\n              <LogIn className=\"w-5 h-5\" />\n              Log In Again\n            </button>\n            \n            <button\n              onClick={handleClose}\n              className=\"w-full px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium\"\n            >\n              Close\n            </button>\n          </div>\n\n          {/* Info */}\n          <div className=\"mt-6 p-4 bg-blue-50 rounded-lg\">\n            <p className=\"text-sm text-blue-800\">\n              <strong>Tip:</strong> Your session will automatically extend while you're active. Sessions expire after 15 minutes of inactivity for your security.\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SessionExpiredModal;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\SubscriptionGate.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'showDetails' is assigned a value but never used.","line":240,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":240,"endColumn":14}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport {\n  Box,\n  Paper,\n  Typography,\n  Button,\n  Alert,\n  Chip,\n  Stack,\n} from '@mui/material';\nimport {\n  Lock,\n  Upgrade,\n  Star,\n  CheckCircle,\n} from '@mui/icons-material';\nimport { useNavigate } from 'react-router-dom';\nimport type { SubscriptionInfo } from '@/utils/subscriptionHelpers';\nimport {\n  canAccessFeature,\n  isProfessionalOrHigher,\n  isEnterpriseTier,\n  getTierDisplayName,\n  getUpgradeMessage,\n} from '@/utils/subscriptionHelpers';\n\ninterface SubscriptionGateProps {\n  children: React.ReactNode;\n  subscriptionInfo: SubscriptionInfo | null;\n  requiredTier?: 'professional' | 'enterprise';\n  requiredFeature?: keyof SubscriptionInfo['subscription'];\n  fallback?: React.ReactNode;\n  showUpgradePrompt?: boolean;\n  featureName?: string;\n}\n\n/**\n * SubscriptionGate Component\n * \n * Conditionally renders content based on user's subscription tier or feature access.\n * Shows upgrade prompts when user doesn't have access.\n * \n * @example\n * // Require Professional tier or higher\n * <SubscriptionGate \n *   subscriptionInfo={subscriptionInfo}\n *   requiredTier=\"professional\"\n *   featureName=\"Advanced Analytics\"\n * >\n *   <AdvancedAnalyticsComponent />\n * </SubscriptionGate>\n * \n * @example\n * // Require specific feature\n * <SubscriptionGate \n *   subscriptionInfo={subscriptionInfo}\n *   requiredFeature=\"has_api_access\"\n *   featureName=\"API Access\"\n * >\n *   <APIKeySection />\n * </SubscriptionGate>\n */\nexport const SubscriptionGate: React.FC<SubscriptionGateProps> = ({\n  children,\n  subscriptionInfo,\n  requiredTier,\n  requiredFeature,\n  fallback,\n  showUpgradePrompt = true,\n  featureName = 'this feature',\n}) => {\n  const navigate = useNavigate();\n\n  // Check if user has access\n  const hasAccess = React.useMemo(() => {\n    if (!subscriptionInfo) return false;\n\n    const { tier } = subscriptionInfo.subscription;\n\n    // Check tier requirement\n    if (requiredTier === 'professional' && !isProfessionalOrHigher(tier)) {\n      return false;\n    }\n    if (requiredTier === 'enterprise' && !isEnterpriseTier(tier)) {\n      return false;\n    }\n\n    // Check feature requirement\n    if (requiredFeature && !canAccessFeature(subscriptionInfo, requiredFeature)) {\n      return false;\n    }\n\n    return true;\n  }, [subscriptionInfo, requiredTier, requiredFeature]);\n\n  // If user has access, render children\n  if (hasAccess) {\n    return <>{children}</>;\n  }\n\n  // If custom fallback provided, use it\n  if (fallback) {\n    return <>{fallback}</>;\n  }\n\n  // Default upgrade prompt\n  if (showUpgradePrompt) {\n    const currentPlan = subscriptionInfo?.subscription.plan_name || 'Free';\n\n    return (\n      <Paper\n        sx={{\n          p: 4,\n          textAlign: 'center',\n          background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n          color: 'white',\n          position: 'relative',\n          overflow: 'hidden',\n        }}\n      >\n        {/* Background decoration */}\n        <Box\n          sx={{\n            position: 'absolute',\n            top: -50,\n            right: -50,\n            width: 200,\n            height: 200,\n            borderRadius: '50%',\n            background: 'rgba(255,255,255,0.1)',\n          }}\n        />\n\n        <Lock sx={{ fontSize: 64, mb: 2, opacity: 0.9 }} />\n\n        <Typography variant=\"h5\" fontWeight={600} gutterBottom>\n          Unlock {featureName}\n        </Typography>\n\n        <Typography variant=\"body1\" sx={{ mb: 3, opacity: 0.9 }}>\n          {getUpgradeMessage(requiredFeature || requiredTier || 'feature')}\n        </Typography>\n\n        <Stack direction=\"row\" spacing={2} justifyContent=\"center\" sx={{ mb: 3 }}>\n          <Chip\n            label={`Current: ${currentPlan}`}\n            sx={{ bgcolor: 'rgba(255,255,255,0.2)', color: 'white' }}\n          />\n          {requiredTier && (\n            <Chip\n              icon={<Star sx={{ color: 'gold !important' }} />}\n              label={`Required: ${getTierDisplayName(requiredTier === 'professional' ? 2 : 3)}`}\n              sx={{ bgcolor: 'rgba(255,215,0,0.3)', color: 'white' }}\n            />\n          )}\n        </Stack>\n\n        <Button\n          variant=\"contained\"\n          size=\"large\"\n          startIcon={<Upgrade />}\n          onClick={() => navigate('/pricing')}\n          sx={{\n            bgcolor: 'white',\n            color: '#667eea',\n            fontWeight: 600,\n            px: 4,\n            '&:hover': {\n              bgcolor: 'rgba(255,255,255,0.9)',\n            },\n          }}\n        >\n          View Pricing Plans\n        </Button>\n\n        {/* Features list */}\n        {requiredTier === 'professional' && (\n          <Box sx={{ mt: 4, textAlign: 'left', maxWidth: 400, mx: 'auto' }}>\n            <Typography variant=\"subtitle2\" gutterBottom fontWeight={600}>\n              Professional Plan Includes:\n            </Typography>\n            <Stack spacing={1}>\n              {[\n                'Advanced Analytics',\n                'Up to 20 Couriers',\n                'API Access',\n                'Custom Templates',\n                'Priority Support',\n              ].map((feature) => (\n                <Box key={feature} sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                  <CheckCircle fontSize=\"small\" />\n                  <Typography variant=\"body2\">{feature}</Typography>\n                </Box>\n              ))}\n            </Stack>\n          </Box>\n        )}\n\n        {requiredTier === 'enterprise' && (\n          <Box sx={{ mt: 4, textAlign: 'left', maxWidth: 400, mx: 'auto' }}>\n            <Typography variant=\"subtitle2\" gutterBottom fontWeight={600}>\n              Enterprise Plan Includes:\n            </Typography>\n            <Stack spacing={1}>\n              {[\n                'Unlimited Couriers',\n                'Unlimited Shops',\n                'White Label',\n                'Dedicated Manager',\n                'Custom Integrations',\n              ].map((feature) => (\n                <Box key={feature} sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                  <CheckCircle fontSize=\"small\" />\n                  <Typography variant=\"body2\">{feature}</Typography>\n                </Box>\n              ))}\n            </Stack>\n          </Box>\n        )}\n      </Paper>\n    );\n  }\n\n  // No upgrade prompt, just hide content\n  return null;\n};\n\n/**\n * SubscriptionBadge Component\n * \n * Shows a badge indicating subscription tier\n */\ninterface SubscriptionBadgeProps {\n  subscriptionInfo: SubscriptionInfo | null;\n  showDetails?: boolean;\n}\n\nexport const SubscriptionBadge: React.FC<SubscriptionBadgeProps> = ({\n  subscriptionInfo,\n  showDetails = false,\n}) => {\n  if (!subscriptionInfo) return null;\n\n  const { plan_name, tier } = subscriptionInfo.subscription;\n\n  const getBadgeColor = () => {\n    switch (tier) {\n      case 0: return '#9e9e9e';\n      case 1: return '#2196f3';\n      case 2: return '#9c27b0';\n      case 3: return '#ff9800';\n      default: return '#9e9e9e';\n    }\n  };\n\n  return (\n    <Chip\n      icon={tier >= 2 ? <Star sx={{ color: 'gold !important' }} /> : undefined}\n      label={plan_name}\n      size=\"small\"\n      sx={{\n        bgcolor: getBadgeColor(),\n        color: 'white',\n        fontWeight: 600,\n      }}\n    />\n  );\n};\n\n/**\n * FeatureLockedAlert Component\n * \n * Shows an inline alert for locked features\n */\ninterface FeatureLockedAlertProps {\n  featureName: string;\n  requiredTier?: string;\n  onUpgrade?: () => void;\n}\n\nexport const FeatureLockedAlert: React.FC<FeatureLockedAlertProps> = ({\n  featureName,\n  requiredTier = 'Professional',\n  onUpgrade,\n}) => {\n  const navigate = useNavigate();\n\n  return (\n    <Alert\n      severity=\"info\"\n      icon={<Lock />}\n      action={\n        <Button\n          size=\"small\"\n          onClick={onUpgrade || (() => navigate('/pricing'))}\n        >\n          Upgrade\n        </Button>\n      }\n    >\n      <strong>{featureName}</strong> is available on the {requiredTier} plan and above.\n    </Alert>\n  );\n};\n\nexport default SubscriptionGate;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\UpgradePrompt.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\analytics\\AvailableMarketsList.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":86,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":86,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1971,1974],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1971,1974],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":99,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":99,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2475,2478],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2475,2478],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Available Markets List Component\n * Week 2 Day 4 - Market List with Stats\n * \n * Displays list of available markets with order counts and performance metrics\n * Clickable to filter PerformanceByLocation component\n * Created: November 6, 2025\n */\n\nimport React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  List,\n  ListItem,\n  ListItemButton,\n  ListItemText,\n  Typography,\n  Chip,\n  CircularProgress,\n  Alert,\n  Divider\n} from '@mui/material';\nimport { apiClient } from '@/services/apiClient';\nimport { useAuthStore } from '@/store/authStore';\n\ninterface MarketData {\n  country: string;\n  countryName: string;\n  countryFlag: string;\n  totalOrders: number;\n  totalCouriers: number;\n  avgOnTimeRate: number;\n}\n\ninterface AvailableMarketsListProps {\n  onMarketSelect?: (countryCode: string) => void;\n  selectedMarket?: string;\n}\n\nconst countryFlags: { [key: string]: string } = {\n  'NO': '',\n  'SE': '',\n  'DK': '',\n  'FI': '',\n  'US': '',\n  'GB': '',\n  'DE': '',\n  'FR': ''\n};\n\nconst countryNames: { [key: string]: string } = {\n  'NO': 'Norway',\n  'SE': 'Sweden',\n  'DK': 'Denmark',\n  'FI': 'Finland',\n  'US': 'United States',\n  'GB': 'United Kingdom',\n  'DE': 'Germany',\n  'FR': 'France'\n};\n\nexport const AvailableMarketsList: React.FC<AvailableMarketsListProps> = ({ \n  onMarketSelect,\n  selectedMarket \n}) => {\n  const { user } = useAuthStore();\n  const [markets, setMarkets] = useState<MarketData[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    fetchMarkets();\n  }, [user]);\n\n  const fetchMarkets = async () => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      // Fetch market statistics from API\n      const response = await apiClient.get('/analytics/markets-summary');\n      \n      const marketData = response.data.data || [];\n      \n      // Transform data\n      const transformedMarkets = marketData.map((market: any) => ({\n        country: market.country,\n        countryName: countryNames[market.country] || market.country,\n        countryFlag: countryFlags[market.country] || '',\n        totalOrders: market.total_orders || 0,\n        totalCouriers: market.total_couriers || 0,\n        avgOnTimeRate: market.avg_on_time_rate || 0\n      }));\n\n      // Sort by total orders descending\n      transformedMarkets.sort((a, b) => b.totalOrders - a.totalOrders);\n\n      setMarkets(transformedMarkets);\n    } catch (err: any) {\n      console.error('Failed to fetch markets:', err);\n      setError(err.response?.data?.error || 'Failed to load markets');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleMarketClick = (countryCode: string) => {\n    if (onMarketSelect) {\n      onMarketSelect(countryCode);\n    }\n  };\n\n  if (loading) {\n    return (\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" p={3}>\n        <CircularProgress size={24} />\n        <Typography variant=\"body2\" sx={{ ml: 2 }}>\n          Loading markets...\n        </Typography>\n      </Box>\n    );\n  }\n\n  if (error) {\n    return (\n      <Alert severity=\"warning\">\n        {error}\n      </Alert>\n    );\n  }\n\n  if (markets.length === 0) {\n    return (\n      <Typography variant=\"body2\" color=\"text.secondary\">\n        No market data available yet. Markets will appear once orders are placed.\n      </Typography>\n    );\n  }\n\n  return (\n    <Box>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n        Click a market to view performance details below.\n      </Typography>\n      \n      <List sx={{ p: 0 }}>\n        {markets.map((market, index) => (\n          <React.Fragment key={market.country}>\n            {index > 0 && <Divider />}\n            <ListItem disablePadding>\n              <ListItemButton\n                selected={selectedMarket === market.country}\n                onClick={() => handleMarketClick(market.country)}\n                sx={{\n                  py: 1.5,\n                  '&.Mui-selected': {\n                    backgroundColor: 'primary.light',\n                    '&:hover': {\n                      backgroundColor: 'primary.light',\n                    }\n                  }\n                }}\n              >\n                <ListItemText\n                  primary={\n                    <Box display=\"flex\" alignItems=\"center\" gap={1}>\n                      <Typography variant=\"h6\" component=\"span\">\n                        {market.countryFlag}\n                      </Typography>\n                      <Typography variant=\"subtitle1\" component=\"span\" fontWeight=\"medium\">\n                        {market.countryName}\n                      </Typography>\n                    </Box>\n                  }\n                  secondary={\n                    <Box display=\"flex\" gap={1} flexWrap=\"wrap\" mt={0.5}>\n                      <Chip \n                        label={`${market.totalOrders} orders`}\n                        size=\"small\"\n                        variant=\"outlined\"\n                        color={market.totalOrders > 0 ? 'primary' : 'default'}\n                      />\n                      <Chip \n                        label={`${market.totalCouriers} couriers`}\n                        size=\"small\"\n                        variant=\"outlined\"\n                      />\n                      {market.avgOnTimeRate > 0 && (\n                        <Chip \n                          label={`${market.avgOnTimeRate.toFixed(0)}% on-time`}\n                          size=\"small\"\n                          variant=\"outlined\"\n                          color={market.avgOnTimeRate >= 90 ? 'success' : market.avgOnTimeRate >= 75 ? 'warning' : 'error'}\n                        />\n                      )}\n                    </Box>\n                  }\n                />\n              </ListItemButton>\n            </ListItem>\n          </React.Fragment>\n        ))}\n      </List>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\analytics\\GoogleAnalytics.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[143,146],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[143,146],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":7,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[175,178],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[175,178],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\n\ndeclare global {\n  interface Window {\n    gtag?: (...args: any[]) => void;\n    dataLayer?: any[];\n  }\n}\n\ninterface GoogleAnalyticsProps {\n  measurementId?: string;\n}\n\nexport function GoogleAnalytics({ measurementId = 'G-XXXXXXXXXX' }: GoogleAnalyticsProps) {\n  const location = useLocation();\n\n  useEffect(() => {\n    // Load Google Analytics script\n    if (!window.gtag) {\n      const script1 = document.createElement('script');\n      script1.async = true;\n      script1.src = `https://www.googletagmanager.com/gtag/js?id=${measurementId}`;\n      document.head.appendChild(script1);\n\n      const script2 = document.createElement('script');\n      script2.innerHTML = `\n        window.dataLayer = window.dataLayer || [];\n        function gtag(){dataLayer.push(arguments);}\n        gtag('js', new Date());\n        gtag('config', '${measurementId}', {\n          page_path: window.location.pathname,\n        });\n      `;\n      document.head.appendChild(script2);\n    }\n  }, [measurementId]);\n\n  useEffect(() => {\n    // Track page views on route change\n    if (window.gtag) {\n      window.gtag('config', measurementId, {\n        page_path: location.pathname + location.search,\n      });\n    }\n  }, [location, measurementId]);\n\n  return null;\n}\n\n// Helper functions for tracking events\nexport const trackEvent = (\n  action: string,\n  category: string,\n  label?: string,\n  value?: number\n) => {\n  if (window.gtag) {\n    window.gtag('event', action, {\n      event_category: category,\n      event_label: label,\n      value: value,\n    });\n  }\n};\n\nexport const trackButtonClick = (buttonName: string, location: string) => {\n  trackEvent('click', 'Button', `${buttonName} - ${location}`);\n};\n\nexport const trackFormSubmit = (formName: string) => {\n  trackEvent('submit', 'Form', formName);\n};\n\nexport const trackSignup = (method: string) => {\n  if (window.gtag) {\n    window.gtag('event', 'sign_up', {\n      method: method,\n    });\n  }\n};\n\nexport const trackPurchase = (value: number, currency: string = 'EUR') => {\n  if (window.gtag) {\n    window.gtag('event', 'purchase', {\n      value: value,\n      currency: currency,\n    });\n  }\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\analytics\\PerformanceByLocation.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'tokens' is assigned a value but never used.","line":70,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":70,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":113,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":113,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2935,2938],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2935,2938],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'country'. Either include it or remove the dependency array.","line":136,"column":6,"nodeType":"ArrayExpression","endLine":136,"endColumn":23,"suggestions":[{"desc":"Update the dependencies array to be: [country, selectedCountry]","fix":{"range":[3649,3666],"text":"[country, selectedCountry]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","line":142,"column":6,"nodeType":"ArrayExpression","endLine":142,"endColumn":31,"suggestions":[{"desc":"Update the dependencies array to be: [country, daysBack, fetchData, user]","fix":{"range":[3736,3761],"text":"[country, daysBack, fetchData, user]"}}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Performance By Location Component\n * Week 2 Day 4 - Performance Limits Integration\n * \n * Displays courier performance data by location with subscription-based access control\n * Created: November 6, 2025\n */\n\nimport React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Select,\n  MenuItem,\n  FormControl,\n  InputLabel,\n  Alert,\n  Button,\n  CircularProgress,\n  Chip,\n  ToggleButton,\n  ToggleButtonGroup,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Paper,\n  Grid,\n  Divider\n} from '@mui/material';\nimport { useAuthStore } from '@/store/authStore';\nimport { apiClient } from '@/services/apiClient';\n\ninterface PerformanceData {\n  courierId: string;\n  courierName: string;\n  postalCode: string;\n  city: string;\n  country: string;\n  displayCount: number;\n  selectionCount: number;\n  selectionRate: number;\n}\n\ninterface Limits {\n  maxCountries: number;\n  maxDays: number;\n  maxRows: number;\n  appliedLimits?: {\n    country: string;\n    daysBack: number;\n    rowsReturned: number;\n  };\n}\n\ninterface SubscriptionInfo {\n  hasAccess: boolean;\n  reason: string;\n}\n\ninterface PerformanceByLocationProps {\n  selectedCountry?: string;\n}\n\nexport const PerformanceByLocation: React.FC<PerformanceByLocationProps> = ({ selectedCountry }) => {\n  const { user, tokens } = useAuthStore();\n  const [country, setCountry] = useState(selectedCountry || 'NO');\n  const [viewMode, setViewMode] = useState<'table' | 'heatmap'>('table');\n  const [daysBack, setDaysBack] = useState(30);\n  const [data, setData] = useState<PerformanceData[]>([]);\n  const [limits, setLimits] = useState<Limits | null>(null);\n  const [subscription, setSubscription] = useState<SubscriptionInfo | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [accessDenied, setAccessDenied] = useState(false);\n  const [upgradeMessage, setUpgradeMessage] = useState<string | null>(null);\n  const [currentPlan, setCurrentPlan] = useState<string>('Starter');\n\n  const countries = [\n    { code: 'NO', name: 'Norway' },\n    { code: 'SE', name: 'Sweden' },\n    { code: 'DK', name: 'Denmark' },\n    { code: 'FI', name: 'Finland' },\n    { code: 'US', name: 'United States' },\n    { code: 'GB', name: 'United Kingdom' },\n    { code: 'DE', name: 'Germany' },\n    { code: 'FR', name: 'France' }\n  ];\n\n  const fetchData = async () => {\n    setLoading(true);\n    setError(null);\n    setAccessDenied(false);\n\n    try {\n      // Use apiClient which handles auth automatically\n      const response = await apiClient.get('/analytics/performance-by-location', {\n        params: {\n          country,\n          daysBack\n        }\n      });\n\n      // Success - set data\n      setData(response.data.data || []);\n      setLimits(response.data.limits);\n      setSubscription(response.data.subscription);\n      setAccessDenied(false);\n    } catch (err: any) {\n      // Handle 403 (access denied) separately\n      if (err.response?.status === 403) {\n        const errorData = err.response.data;\n        setAccessDenied(true);\n        setUpgradeMessage(errorData.reason);\n        setLimits(errorData.limits);\n        setCurrentPlan(errorData.currentPlan || 'Starter');\n        setData([]);\n      } else {\n        setError(err.response?.data?.error || err.message || 'Failed to load performance data');\n        console.error(err);\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Update country when selectedCountry prop changes\n  useEffect(() => {\n    if (selectedCountry && selectedCountry !== country) {\n      setCountry(selectedCountry);\n    }\n  }, [selectedCountry]);\n\n  useEffect(() => {\n    if (user) {\n      fetchData();\n    }\n  }, [country, daysBack, user]);\n\n  return (\n    <Box>\n      <Card>\n        <CardContent>\n          <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={2}>\n            <Box>\n              <Typography variant=\"h5\" gutterBottom>\n                Performance by Location\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Analyze courier performance across different postal codes and cities\n              </Typography>\n            </Box>\n            \n            {/* View Mode Toggle */}\n            <ToggleButtonGroup\n              value={viewMode}\n              exclusive\n              onChange={(e, newMode) => newMode && setViewMode(newMode)}\n              size=\"small\"\n            >\n              <ToggleButton value=\"table\">\n                Table\n              </ToggleButton>\n              <ToggleButton value=\"heatmap\">\n                Heatmap\n              </ToggleButton>\n            </ToggleButtonGroup>\n          </Box>\n\n          {/* Filters */}\n          <Grid container spacing={2} sx={{ mb: 3 }}>\n            <Grid item xs={12} sm={6} md={4}>\n              <FormControl fullWidth>\n                <InputLabel>Country</InputLabel>\n                <Select\n                  value={country}\n                  label=\"Country\"\n                  onChange={(e) => setCountry(e.target.value)}\n                  disabled={loading}\n                >\n                  {countries.map((c) => (\n                    <MenuItem key={c.code} value={c.code}>\n                      {c.name}\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n            </Grid>\n\n            <Grid item xs={12} sm={6} md={4}>\n              <FormControl fullWidth>\n                <InputLabel>Time Range</InputLabel>\n                <Select\n                  value={daysBack}\n                  label=\"Time Range\"\n                  onChange={(e) => setDaysBack(Number(e.target.value))}\n                  disabled={loading}\n                >\n                  <MenuItem value={7}>Last 7 days</MenuItem>\n                  <MenuItem value={30}>Last 30 days</MenuItem>\n                  <MenuItem value={90}>Last 90 days</MenuItem>\n                  <MenuItem value={365}>Last year</MenuItem>\n                </Select>\n              </FormControl>\n            </Grid>\n          </Grid>\n\n          {/* Subscription Limits Info */}\n          {limits && !accessDenied && subscription?.hasAccess && (\n            <Alert severity=\"info\" sx={{ mb: 2 }}>\n              <Box display=\"flex\" gap={1} flexWrap=\"wrap\" alignItems=\"center\">\n                <Typography variant=\"body2\" sx={{ mr: 1 }}>\n                  Your plan includes:\n                </Typography>\n              </Box>\n              <Box display=\"flex\" gap={1} flexWrap=\"wrap\">\n                <Chip \n                  label={limits.maxCountries >= 999 ? 'Unlimited countries' : `${limits.maxCountries} countries`}\n                  size=\"small\" \n                  color=\"primary\" \n                />\n                <Chip \n                  label={limits.maxDays >= 999 ? 'Unlimited history' : `${limits.maxDays} days history`}\n                  size=\"small\" \n                  color=\"primary\" \n                />\n                <Chip \n                  label={limits.maxRows >= 999999 ? 'Unlimited data' : `${limits.maxRows} rows max`}\n                  size=\"small\" \n                  color=\"primary\" \n                />\n                {limits.appliedLimits && (\n                  <Chip \n                    label={`Showing ${limits.appliedLimits.rowsReturned} results`} \n                    size=\"small\" \n                    variant=\"outlined\" \n                  />\n                )}\n              </Box>\n            </Alert>\n          )}\n\n          {/* Access Denied - Upgrade Prompt */}\n          {accessDenied && (\n            <Alert \n              severity=\"warning\" \n              sx={{ mb: 2 }}\n              action={\n                <Button \n                  color=\"inherit\" \n                  size=\"small\"\n                  variant=\"outlined\"\n                  href=\"/subscription-plans\"\n                >\n                  Upgrade Now\n                </Button>\n              }\n            >\n              <Typography variant=\"subtitle2\" gutterBottom>\n                 Subscription Limit Reached\n              </Typography>\n              <Typography variant=\"body2\" sx={{ mb: 1 }}>\n                {upgradeMessage}\n              </Typography>\n              {limits && (\n                <Box mt={1}>\n                  <Typography variant=\"caption\" display=\"block\">\n                    <strong>Current Plan:</strong> {currentPlan}\n                  </Typography>\n                  <Typography variant=\"caption\" display=\"block\">\n                    <strong>Your limits:</strong> {limits.maxCountries} countries, {limits.maxDays} days history\n                  </Typography>\n                  <Typography variant=\"caption\" display=\"block\" sx={{ mt: 1 }}>\n                     Upgrade to Professional or Enterprise for expanded access\n                  </Typography>\n                </Box>\n              )}\n            </Alert>\n          )}\n\n          {/* Loading */}\n          {loading && (\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" p={4}>\n              <CircularProgress />\n              <Typography variant=\"body2\" sx={{ ml: 2 }}>\n                Loading performance data...\n              </Typography>\n            </Box>\n          )}\n\n          {/* Error */}\n          {error && !accessDenied && (\n            <Alert severity=\"error\" sx={{ mb: 2 }}>\n              {error}\n            </Alert>\n          )}\n\n          {/* Data Display - Table View */}\n          {!loading && !error && !accessDenied && data.length > 0 && viewMode === 'table' && (\n            <TableContainer component={Paper} variant=\"outlined\">\n              <Table>\n                <TableHead>\n                  <TableRow>\n                    <TableCell><strong>Courier</strong></TableCell>\n                    <TableCell><strong>Postal Code</strong></TableCell>\n                    <TableCell><strong>City</strong></TableCell>\n                    <TableCell align=\"right\"><strong>Displays</strong></TableCell>\n                    <TableCell align=\"right\"><strong>Selections</strong></TableCell>\n                    <TableCell align=\"right\"><strong>Selection Rate</strong></TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {data.map((row, index) => (\n                    <TableRow key={`${row.courierId}-${row.postalCode}-${index}`}>\n                      <TableCell>{row.courierName}</TableCell>\n                      <TableCell>{row.postalCode}</TableCell>\n                      <TableCell>{row.city}</TableCell>\n                      <TableCell align=\"right\">{row.displayCount}</TableCell>\n                      <TableCell align=\"right\">{row.selectionCount}</TableCell>\n                      <TableCell align=\"right\">\n                        <Chip \n                          label={`${row.selectionRate}%`}\n                          color={row.selectionRate >= 50 ? 'success' : row.selectionRate >= 25 ? 'warning' : 'default'}\n                          size=\"small\"\n                        />\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </TableContainer>\n          )}\n\n          {/* Data Display - Heatmap View */}\n          {!loading && !error && !accessDenied && data.length > 0 && viewMode === 'heatmap' && (\n            <Box>\n              <Paper variant=\"outlined\" sx={{ p: 3 }}>\n                <Typography variant=\"h6\" gutterBottom>\n                  Performance Heatmap\n                </Typography>\n                <Grid container spacing={2}>\n                  {data.map((row, index) => {\n                    const intensity = row.selectionRate;\n                    const color = intensity >= 75 ? '#4caf50' : \n                                 intensity >= 50 ? '#8bc34a' : \n                                 intensity >= 25 ? '#ffc107' : \n                                 intensity >= 10 ? '#ff9800' : '#f44336';\n                    \n                    return (\n                      <Grid item xs={12} sm={6} md={4} lg={3} key={`${row.courierId}-${row.postalCode}-${index}`}>\n                        <Paper \n                          elevation={2}\n                          sx={{ \n                            p: 2, \n                            backgroundColor: color,\n                            color: 'white',\n                            transition: 'transform 0.2s',\n                            '&:hover': {\n                              transform: 'scale(1.05)',\n                              cursor: 'pointer'\n                            }\n                          }}\n                        >\n                          <Typography variant=\"h6\" fontWeight=\"bold\">\n                            {row.postalCode}\n                          </Typography>\n                          <Typography variant=\"body2\" sx={{ opacity: 0.9 }}>\n                            {row.city}\n                          </Typography>\n                          <Divider sx={{ my: 1, borderColor: 'rgba(255,255,255,0.3)' }} />\n                          <Typography variant=\"body2\">\n                            <strong>{row.courierName}</strong>\n                          </Typography>\n                          <Box display=\"flex\" justifyContent=\"space-between\" mt={1}>\n                            <Typography variant=\"caption\">\n                              {row.displayCount} displays\n                            </Typography>\n                            <Typography variant=\"caption\">\n                              {row.selectionCount} selections\n                            </Typography>\n                          </Box>\n                          <Typography variant=\"h5\" fontWeight=\"bold\" textAlign=\"center\" mt={1}>\n                            {row.selectionRate}%\n                          </Typography>\n                        </Paper>\n                      </Grid>\n                    );\n                  })}\n                </Grid>\n                \n                {/* Legend */}\n                <Box mt={3} display=\"flex\" gap={2} flexWrap=\"wrap\" justifyContent=\"center\">\n                  <Chip label=\"Excellent (75%+)\" sx={{ backgroundColor: '#4caf50', color: 'white' }} />\n                  <Chip label=\"Good (50-74%)\" sx={{ backgroundColor: '#8bc34a', color: 'white' }} />\n                  <Chip label=\"Average (25-49%)\" sx={{ backgroundColor: '#ffc107', color: 'white' }} />\n                  <Chip label=\"Below Average (10-24%)\" sx={{ backgroundColor: '#ff9800', color: 'white' }} />\n                  <Chip label=\"Poor (<10%)\" sx={{ backgroundColor: '#f44336', color: 'white' }} />\n                </Box>\n              </Paper>\n            </Box>\n          )}\n\n          {/* No Data */}\n          {!loading && !error && !accessDenied && data.length === 0 && (\n            <Alert severity=\"info\">\n              No performance data available for the selected filters. Try selecting a different country or time range.\n            </Alert>\n          )}\n\n          {/* Summary Stats */}\n          {!loading && !error && !accessDenied && data.length > 0 && (\n            <Box sx={{ mt: 3, p: 2, bgcolor: 'background.default', borderRadius: 1 }}>\n              <Grid container spacing={2}>\n                <Grid item xs={6} sm={3}>\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    Total Locations\n                  </Typography>\n                  <Typography variant=\"h6\">\n                    {data.length}\n                  </Typography>\n                </Grid>\n                <Grid item xs={6} sm={3}>\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    Total Displays\n                  </Typography>\n                  <Typography variant=\"h6\">\n                    {data.reduce((sum, row) => sum + row.displayCount, 0)}\n                  </Typography>\n                </Grid>\n                <Grid item xs={6} sm={3}>\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    Total Selections\n                  </Typography>\n                  <Typography variant=\"h6\">\n                    {data.reduce((sum, row) => sum + row.selectionCount, 0)}\n                  </Typography>\n                </Grid>\n                <Grid item xs={6} sm={3}>\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    Avg Selection Rate\n                  </Typography>\n                  <Typography variant=\"h6\">\n                    {(data.reduce((sum, row) => sum + row.selectionRate, 0) / data.length).toFixed(1)}%\n                  </Typography>\n                </Grid>\n              </Grid>\n            </Box>\n          )}\n        </CardContent>\n      </Card>\n    </Box>\n  );\n};\n\nexport default PerformanceByLocation;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\analytics\\PremiumFeatures.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\analytics\\RatingAnalytics.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":94,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":94,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2219,2222],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2219,2222],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":125,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":125,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3226,3229],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3226,3229],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Grid,\n  Chip,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  LinearProgress,\n  Alert\n} from '@mui/material';\nimport {\n  Email,\n  CheckCircle,\n  Schedule,\n  TrendingUp,\n  Store,\n  Home,\n  Lock,\n  LocationOn,\n  Business\n} from '@mui/icons-material';\nimport { PieChart, Pie, Cell, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\nimport { apiClient } from '@/services/apiClient';\n\ninterface RatingStats {\n  overall: {\n    total_requests: number;\n    responses_received: number;\n    auto_processed: number;\n    expired: number;\n    response_rate: number;\n  };\n  byPlatform: Array<{\n    integration_platform: string;\n    requests: number;\n    responses: number;\n    response_rate: number;\n  }>;\n}\n\ninterface ServicePerformance {\n  courier_id: string;\n  courier_name: string;\n  service_type: string;\n  total_orders: number;\n  avg_rating: number;\n  avg_service_rating: number;\n  service_accuracy_rate: number;\n  accurate_deliveries: number;\n  service_substitutions: number;\n  avg_delivery_hours: number;\n}\n\nconst serviceIcons = {\n  home_delivery: <Home />,\n  parcelshop: <Store />,\n  parcellocker: <Lock />,\n  pickup_point: <LocationOn />,\n  office_delivery: <Business />\n};\n\nconst serviceLabels = {\n  home_delivery: 'Home Delivery',\n  parcelshop: 'Parcel Shop',\n  parcellocker: 'Parcel Locker',\n  pickup_point: 'Pickup Point',\n  office_delivery: 'Office Delivery'\n};\n\nconst COLORS = ['#0088FE', '#00C49F', '#FFBB28', '#FF8042', '#8884D8'];\n\nconst RatingAnalytics: React.FC = () => {\n  const [ratingStats, setRatingStats] = useState<RatingStats | null>(null);\n  const [servicePerformance, setServicePerformance] = useState<ServicePerformance[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    fetchAnalytics();\n  }, []);\n\n  const fetchAnalytics = async () => {\n    try {\n      const response = await apiClient.get('/rating/analytics'); \n      setRatingStats(response.data.ratingAnalytics);\n      setServicePerformance(response.data.servicePerformance);\n    } catch (err: any) {\n      setError('Failed to load rating analytics');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) return <LinearProgress />;\n  if (error) return <Alert severity=\"error\">{error}</Alert>;\n\n  const responseData = ratingStats?.byPlatform.map(platform => ({\n    name: platform.integration_platform || 'Direct',\n    requests: platform.requests,\n    responses: platform.responses,\n    rate: platform.response_rate\n  })) || [];\n\n  const serviceTypeData = servicePerformance.reduce((acc, service) => {\n    const existing = acc.find(item => item.service_type === service.service_type);\n    if (existing) {\n      existing.total_orders += service.total_orders;\n      existing.avg_rating = (existing.avg_rating + service.avg_rating) / 2;\n    } else {\n      acc.push({\n        service_type: service.service_type,\n        total_orders: service.total_orders,\n        avg_rating: service.avg_rating,\n        accuracy_rate: service.service_accuracy_rate\n      });\n    }\n    return acc;\n  }, [] as any[]);\n\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom>\n        Rating Request Analytics\n      </Typography>\n\n      {/* Overview Stats */}\n      <Grid container spacing={3} mb={4}>\n        <Grid item xs={12} md={3}>\n          <Card>\n            <CardContent sx={{ textAlign: 'center' }}>\n              <Email color=\"primary\" sx={{ fontSize: 40, mb: 1 }} />\n              <Typography variant=\"h4\">{ratingStats?.overall.total_requests || 0}</Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Requests Sent\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} md={3}>\n          <Card>\n            <CardContent sx={{ textAlign: 'center' }}>\n              <CheckCircle color=\"success\" sx={{ fontSize: 40, mb: 1 }} />\n              <Typography variant=\"h4\">{ratingStats?.overall.responses_received || 0}</Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Responses Received\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} md={3}>\n          <Card>\n            <CardContent sx={{ textAlign: 'center' }}>\n              <Schedule color=\"warning\" sx={{ fontSize: 40, mb: 1 }} />\n              <Typography variant=\"h4\">{ratingStats?.overall.auto_processed || 0}</Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Auto-Processed (70%)\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} md={3}>\n          <Card>\n            <CardContent sx={{ textAlign: 'center' }}>\n              <TrendingUp color=\"info\" sx={{ fontSize: 40, mb: 1 }} />\n              <Typography variant=\"h4\">{ratingStats?.overall.response_rate || 0}%</Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Response Rate\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n\n      <Grid container spacing={3}>\n        {/* Response Rate by Platform */}\n        <Grid item xs={12} md={6}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Response Rate by Platform\n              </Typography>\n              <ResponsiveContainer width=\"100%\" height={300}>\n                <BarChart data={responseData}>\n                  <CartesianGrid strokeDasharray=\"3 3\" />\n                  <XAxis dataKey=\"name\" />\n                  <YAxis />\n                  <Tooltip />\n                  <Bar dataKey=\"rate\" fill=\"#1976d2\" />\n                </BarChart>\n              </ResponsiveContainer>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        {/* Service Type Performance */}\n        <Grid item xs={12} md={6}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Service Type Performance\n              </Typography>\n              <ResponsiveContainer width=\"100%\" height={300}>\n                <PieChart>\n                  <Pie\n                    data={serviceTypeData}\n                    cx=\"50%\"\n                    cy=\"50%\"\n                    outerRadius={80}\n                    fill=\"#8884d8\"\n                    dataKey=\"total_orders\"\n                    label={({ service_type, total_orders }) => \n                      `${serviceLabels[service_type as keyof typeof serviceLabels]} (${total_orders})`\n                    }\n                  >\n                    {serviceTypeData.map((_, index) => (\n                      <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\n                    ))}\n                  </Pie>\n                  <Tooltip />\n                </PieChart>\n              </ResponsiveContainer>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        {/* Platform Statistics Table */}\n        <Grid item xs={12}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Integration Platform Statistics\n              </Typography>\n              <TableContainer>\n                <Table>\n                  <TableHead>\n                    <TableRow>\n                      <TableCell>Platform</TableCell>\n                      <TableCell align=\"right\">Requests Sent</TableCell>\n                      <TableCell align=\"right\">Responses</TableCell>\n                      <TableCell align=\"right\">Response Rate</TableCell>\n                      <TableCell align=\"center\">Status</TableCell>\n                    </TableRow>\n                  </TableHead>\n                  <TableBody>\n                    {ratingStats?.byPlatform.map((platform) => (\n                      <TableRow key={platform.integration_platform}>\n                        <TableCell>\n                          <Box display=\"flex\" alignItems=\"center\" gap={1}>\n                            <Email fontSize=\"small\" />\n                            {platform.integration_platform || 'Direct Email'}\n                          </Box>\n                        </TableCell>\n                        <TableCell align=\"right\">{platform.requests}</TableCell>\n                        <TableCell align=\"right\">{platform.responses}</TableCell>\n                        <TableCell align=\"right\">{platform.response_rate}%</TableCell>\n                        <TableCell align=\"center\">\n                          <Chip\n                            label={platform.response_rate >= 30 ? 'Good' : 'Needs Improvement'}\n                            color={platform.response_rate >= 30 ? 'success' : 'warning'}\n                            size=\"small\"\n                          />\n                        </TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n              </TableContainer>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        {/* Service Performance Table */}\n        <Grid item xs={12}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Courier Service Performance\n              </Typography>\n              <TableContainer>\n                <Table>\n                  <TableHead>\n                    <TableRow>\n                      <TableCell>Courier</TableCell>\n                      <TableCell>Service Type</TableCell>\n                      <TableCell align=\"right\">Orders</TableCell>\n                      <TableCell align=\"right\">Avg Rating</TableCell>\n                      <TableCell align=\"right\">Service Rating</TableCell>\n                      <TableCell align=\"right\">Accuracy Rate</TableCell>\n                      <TableCell align=\"right\">Substitutions</TableCell>\n                    </TableRow>\n                  </TableHead>\n                  <TableBody>\n                    {servicePerformance.map((service, index) => (\n                      <TableRow key={index}>\n                        <TableCell>{service.courier_name}</TableCell>\n                        <TableCell>\n                          <Box display=\"flex\" alignItems=\"center\" gap={1}>\n                            {serviceIcons[service.service_type as keyof typeof serviceIcons]}\n                            {serviceLabels[service.service_type as keyof typeof serviceLabels]}\n                          </Box>\n                        </TableCell>\n                        <TableCell align=\"right\">{service.total_orders}</TableCell>\n                        <TableCell align=\"right\">\n                          <Chip\n                            label={service.avg_rating?.toFixed(1) || 'N/A'}\n                            color={service.avg_rating >= 4 ? 'success' : service.avg_rating >= 3 ? 'warning' : 'error'}\n                            size=\"small\"\n                          />\n                        </TableCell>\n                        <TableCell align=\"right\">\n                          <Chip\n                            label={service.avg_service_rating?.toFixed(1) || 'N/A'}\n                            color={service.avg_service_rating >= 4 ? 'success' : service.avg_service_rating >= 3 ? 'warning' : 'error'}\n                            size=\"small\"\n                          />\n                        </TableCell>\n                        <TableCell align=\"right\">\n                          <Box display=\"flex\" alignItems=\"center\" gap={1}>\n                            {service.service_accuracy_rate?.toFixed(1) || 0}%\n                            <Chip\n                              label={service.service_accuracy_rate >= 90 ? 'Excellent' : service.service_accuracy_rate >= 75 ? 'Good' : 'Needs Improvement'}\n                              color={service.service_accuracy_rate >= 90 ? 'success' : service.service_accuracy_rate >= 75 ? 'info' : 'warning'}\n                              size=\"small\"\n                            />\n                          </Box>\n                        </TableCell>\n                        <TableCell align=\"right\">{service.service_substitutions || 0}</TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n              </TableContainer>\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n    </Box>\n  );\n};\n\nexport default RatingAnalytics;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\auth\\EnhancedRegisterForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\auth\\EnhancedRegisterFormV2.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":45,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1222,1225],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1222,1225],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":55,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":55,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1728,1731],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1728,1731],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":78,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2417,2420],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2417,2420],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":90,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":90,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2735,2738],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2735,2738],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":142,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":142,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4303,4306],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4303,4306],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":533,"column":14,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[19497,19565],"text":"\n          Let&apos;s get your account ready in just a few steps\n        "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[19497,19565],"text":"\n          Let&lsquo;s get your account ready in just a few steps\n        "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[19497,19565],"text":"\n          Let&#39;s get your account ready in just a few steps\n        "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[19497,19565],"text":"\n          Let&rsquo;s get your account ready in just a few steps\n        "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Button,\n  Typography,\n  Stepper,\n  Step,\n  StepLabel,\n  Alert,\n  CircularProgress,\n  Link,\n  Chip,\n  Divider\n} from '@mui/material';\nimport { useNavigate } from 'react-router-dom';\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\nimport EditIcon from '@mui/icons-material/Edit';\nimport { useAuthStore } from '@/store/authStore';\nimport { RegisterForm } from './RegisterForm';\nimport { apiClient } from '@/services/apiClient';\n\ninterface SelectedPlan {\n  id: number;\n  name: string;\n  price: number;\n  cycle: 'monthly' | 'yearly';\n  user_type: 'merchant' | 'courier';\n}\n\ninterface EnhancedRegisterFormProps {\n  onSwitchToLogin: () => void;\n  selectedPlan?: SelectedPlan;\n}\n\nconst steps = ['Account', 'Platform', 'Branding', 'Plan'];\n\nexport const EnhancedRegisterFormV2: React.FC<EnhancedRegisterFormProps> = ({ onSwitchToLogin, selectedPlan }) => {\n  const [activeStep, setActiveStep] = useState(0);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Registration data from step 1\n  const [registrationData, setRegistrationData] = useState<any>(null);\n  const [userRole, setUserRole] = useState<string>('');\n  \n  // Onboarding data\n  const [platform, setPlatform] = useState('');\n  const [customText, setCustomText] = useState('');\n  const [primaryColor, setPrimaryColor] = useState('#667eea');\n  const [secondaryColor, setSecondaryColor] = useState('#764ba2');\n  const [logoUrl, setLogoUrl] = useState('');\n  const [selectedPlanId, setSelectedPlanId] = useState<number | null>(null);\n  const [subscriptionPlans, setSubscriptionPlans] = useState<any[]>([]);\n\n  const navigate = useNavigate();\n\n  // Fetch subscription plans\n  useEffect(() => {\n    const fetchPlans = async () => {\n      try {\n        const apiUrl = import.meta.env.VITE_API_URL || '';\n        const response = await fetch(`${apiUrl}/api/public/subscription-plans`);\n        if (response.ok) {\n          const data = await response.json();\n          setSubscriptionPlans(data.plans || []);\n        } else {\n          console.error('Failed to fetch plans:', response.status, response.statusText);\n        }\n      } catch (err) {\n        console.error('Failed to fetch plans:', err);\n      }\n    };\n    fetchPlans();\n  }, []);\n\n  const handleRegistrationSuccess = (data: any, role: string) => {\n    setRegistrationData(data);\n    setUserRole(role);\n    \n    // Skip onboarding steps for couriers\n    if (role === 'courier') {\n      completeRegistration(data, role);\n    } else {\n      setActiveStep(1); // Move to platform selection\n    }\n  };\n\n  const completeRegistration = async (data: any, role: string) => {\n    setIsSubmitting(true);\n    setError(null);\n\n    try {\n      // Register user\n      const registerResponse = await apiClient.post('/auth', {\n        ...data,\n        user_role: role\n      });\n\n      const authData = registerResponse.data;\n\n      // If merchant, save onboarding data\n      if (role === 'merchant' && platform) {\n        const token = authData.token;\n        \n        // Save e-commerce integration\n        await apiClient.post('/ecommerce-integrations', {\n          platform,\n          status: 'pending'\n        }, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n\n        // Save email template\n        if (customText || logoUrl) {\n          await apiClient.post('/email-templates', {\n            template_type: 'review_request',\n            custom_text: customText,\n            logo_url: logoUrl,\n            primary_color: primaryColor,\n            secondary_color: secondaryColor\n          }, {\n            headers: {\n              'Authorization': `Bearer ${token}`\n            }\n          });\n        }\n\n        // Save subscription selection (for future payment)\n        if (selectedPlanId) {\n          localStorage.setItem('selected_plan_id', selectedPlanId.toString());\n        }\n      }\n\n      // Login after registration - let App.tsx route handle redirect\n      const authStore = useAuthStore.getState();\n      await authStore.login({ email: data.email, password: data.password });\n      // Redirect handled by App.tsx based on isAuthenticated state\n    } catch (err: any) {\n      setError(err.message || 'Registration failed');\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleNext = () => {\n    setActiveStep((prev) => prev + 1);\n  };\n\n  const handleBack = () => {\n    setActiveStep((prev) => prev - 1);\n  };\n\n  const handleFinish = () => {\n    if (registrationData && userRole) {\n      completeRegistration(registrationData, userRole);\n    }\n  };\n\n  const renderStepContent = () => {\n    switch (activeStep) {\n      case 0:\n        return (\n          <Box>\n            {/* Selected Plan Display */}\n            {selectedPlan && (\n              <Card \n                sx={{ \n                  mb: 3, \n                  background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n                  color: 'white'\n                }}\n              >\n                <CardContent>\n                  <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                      <CheckCircleIcon sx={{ color: 'white' }} />\n                      <Typography variant=\"h6\">\n                        Selected Plan: {selectedPlan.name}\n                      </Typography>\n                    </Box>\n                    <Chip \n                      label={selectedPlan.user_type === 'merchant' ? ' Merchant' : ' Courier'}\n                      sx={{ \n                        backgroundColor: 'rgba(255,255,255,0.2)',\n                        color: 'white',\n                        fontWeight: 'bold'\n                      }}\n                    />\n                  </Box>\n                  \n                  <Divider sx={{ my: 2, borderColor: 'rgba(255,255,255,0.3)' }} />\n                  \n                  <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                    <Box>\n                      <Typography variant=\"h4\" sx={{ fontWeight: 'bold' }}>\n                        ${selectedPlan.price}\n                        <Typography component=\"span\" variant=\"body1\" sx={{ ml: 1 }}>\n                          / {selectedPlan.cycle === 'monthly' ? 'month' : 'year'}\n                        </Typography>\n                      </Typography>\n                      {selectedPlan.cycle === 'yearly' && (\n                        <Typography variant=\"body2\" sx={{ mt: 0.5, opacity: 0.9 }}>\n                           Save 16.7% with annual billing\n                        </Typography>\n                      )}\n                    </Box>\n                    \n                    <Button\n                      variant=\"outlined\"\n                      startIcon={<EditIcon />}\n                      onClick={() => navigate('/subscription/plans')}\n                      sx={{\n                        color: 'white',\n                        borderColor: 'white',\n                        '&:hover': {\n                          borderColor: 'white',\n                          backgroundColor: 'rgba(255,255,255,0.1)'\n                        }\n                      }}\n                    >\n                      Change Plan\n                    </Button>\n                  </Box>\n                </CardContent>\n              </Card>\n            )}\n\n            <RegisterForm \n              onSwitchToLogin={onSwitchToLogin}\n              onSuccess={handleRegistrationSuccess}\n            />\n            <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\" sx={{ mt: 2 }}>\n              Note: Merchants will complete additional setup steps after registration.\n            </Typography>\n          </Box>\n        );\n\n      case 1:\n        return (\n          <Box>\n            <Typography variant=\"h6\" gutterBottom>\n              Select Your E-commerce Platform\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n              Choose the platform you use to manage your online store\n            </Typography>\n            \n            <Box sx={{ display: 'grid', gap: 2, gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))' }}>\n              {['WooCommerce', 'Shopify', 'Magento', 'BigCommerce', 'Custom', 'Other'].map((p) => (\n                <Button\n                  key={p}\n                  variant={platform === p ? 'contained' : 'outlined'}\n                  onClick={() => setPlatform(p)}\n                  sx={{ py: 2 }}\n                >\n                  {p}\n                </Button>\n              ))}\n            </Box>\n            \n            <Box sx={{ display: 'flex', gap: 2, mt: 3 }}>\n              <Button onClick={handleBack}>Back</Button>\n              <Button\n                variant=\"contained\"\n                onClick={handleNext}\n                disabled={!platform}\n                fullWidth\n              >\n                Continue\n              </Button>\n            </Box>\n          </Box>\n        );\n\n      case 2:\n        return (\n          <Box>\n            <Typography variant=\"h6\" gutterBottom>\n              Customize Your Branding\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n              Personalize how your customers see your review requests\n            </Typography>\n            \n            {/* Logo Upload */}\n            <Box sx={{ mb: 3 }}>\n              <Typography variant=\"subtitle2\" gutterBottom>\n                Logo URL (optional)\n              </Typography>\n              <input\n                type=\"text\"\n                value={logoUrl}\n                onChange={(e) => setLogoUrl(e.target.value)}\n                placeholder=\"https://example.com/logo.png\"\n                style={{ width: '100%', padding: '10px', borderRadius: '4px', border: '1px solid #ccc' }}\n              />\n            </Box>\n\n            {/* Custom Text */}\n            <Box sx={{ mb: 3 }}>\n              <Typography variant=\"subtitle2\" gutterBottom>\n                Custom Message (optional)\n              </Typography>\n              <textarea\n                value={customText}\n                onChange={(e) => setCustomText(e.target.value)}\n                placeholder=\"Add a personal message to your review requests...\"\n                rows={4}\n                style={{ width: '100%', padding: '10px', borderRadius: '4px', border: '1px solid #ccc', fontFamily: 'inherit' }}\n              />\n            </Box>\n\n            {/* Colors */}\n            <Box sx={{ display: 'flex', gap: 2, mb: 3 }}>\n              <Box sx={{ flex: 1 }}>\n                <Typography variant=\"subtitle2\" gutterBottom>\n                  Primary Color\n                </Typography>\n                <input\n                  type=\"color\"\n                  value={primaryColor}\n                  onChange={(e) => setPrimaryColor(e.target.value)}\n                  style={{ width: '100%', height: '50px', border: '1px solid #ccc', borderRadius: '4px' }}\n                />\n              </Box>\n              <Box sx={{ flex: 1 }}>\n                <Typography variant=\"subtitle2\" gutterBottom>\n                  Secondary Color\n                </Typography>\n                <input\n                  type=\"color\"\n                  value={secondaryColor}\n                  onChange={(e) => setSecondaryColor(e.target.value)}\n                  style={{ width: '100%', height: '50px', border: '1px solid #ccc', borderRadius: '4px' }}\n                />\n              </Box>\n            </Box>\n\n            <Box sx={{ display: 'flex', gap: 2, mt: 3 }}>\n              <Button onClick={handleBack}>Back</Button>\n              <Button variant=\"contained\" onClick={handleNext} fullWidth>\n                Continue\n              </Button>\n            </Box>\n          </Box>\n        );\n\n      case 3:\n        return (\n          <Box>\n            <Typography variant=\"h6\" gutterBottom>\n              Choose Your Plan\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n              Select a subscription plan (you can start with a free trial)\n            </Typography>\n            \n            <Box sx={{ display: 'grid', gap: 2, gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))' }}>\n              {subscriptionPlans.filter(p => p.user_type === userRole).map((plan) => (\n                <Card\n                  key={plan.plan_id}\n                  sx={{\n                    border: selectedPlanId === plan.plan_id ? '2px solid' : '1px solid',\n                    borderColor: selectedPlanId === plan.plan_id ? 'primary.main' : 'divider',\n                    cursor: 'pointer',\n                    '&:hover': { borderColor: 'primary.main' }\n                  }}\n                  onClick={() => setSelectedPlanId(plan.plan_id)}\n                >\n                  <CardContent>\n                    <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start', mb: 1 }}>\n                      <Typography variant=\"h6\" gutterBottom>\n                        {plan.plan_name}\n                      </Typography>\n                      {plan.is_popular && (\n                        <Chip label=\"Popular\" color=\"primary\" size=\"small\" />\n                      )}\n                    </Box>\n                    <Typography variant=\"h4\" color=\"primary\" gutterBottom>\n                      ${plan.monthly_price || plan.price_per_month || 0}\n                      <Typography component=\"span\" variant=\"body2\" color=\"text.secondary\">\n                        /month\n                      </Typography>\n                    </Typography>\n                    {plan.annual_price > 0 && (\n                      <Typography variant=\"caption\" color=\"text.secondary\" display=\"block\" sx={{ mb: 1 }}>\n                        or ${plan.annual_price}/year (save ${(plan.monthly_price * 12 - plan.annual_price).toFixed(0)})\n                      </Typography>\n                    )}\n                    <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n                      {plan.description || 'Perfect for getting started'}\n                    </Typography>\n                    \n                    <Divider sx={{ my: 1.5 }} />\n                    \n                    <Box sx={{ mt: 2 }}>\n                      <Typography variant=\"caption\" fontWeight=\"bold\" display=\"block\" sx={{ mb: 1 }}>\n                        INCLUDES:\n                      </Typography>\n                      {plan.max_orders_per_month && (\n                        <Typography variant=\"caption\" display=\"block\" sx={{ mb: 0.5 }}>\n                           {plan.max_orders_per_month === 999999 ? 'Unlimited' : plan.max_orders_per_month} orders/month\n                        </Typography>\n                      )}\n                      {!plan.max_orders_per_month && (\n                        <Typography variant=\"caption\" display=\"block\" sx={{ mb: 0.5 }}>\n                           Unlimited orders\n                        </Typography>\n                      )}\n                      {userRole === 'merchant' && plan.max_couriers && (\n                        <Typography variant=\"caption\" display=\"block\" sx={{ mb: 0.5 }}>\n                           Up to {plan.max_couriers} couriers\n                        </Typography>\n                      )}\n                      {userRole === 'merchant' && !plan.max_couriers && plan.tier >= 3 && (\n                        <Typography variant=\"caption\" display=\"block\" sx={{ mb: 0.5 }}>\n                           Unlimited couriers\n                        </Typography>\n                      )}\n                      {userRole === 'merchant' && plan.max_shops && (\n                        <Typography variant=\"caption\" display=\"block\" sx={{ mb: 0.5 }}>\n                           {plan.max_shops} shop{plan.max_shops > 1 ? 's' : ''}\n                        </Typography>\n                      )}\n                      {userRole === 'merchant' && !plan.max_shops && plan.tier >= 3 && (\n                        <Typography variant=\"caption\" display=\"block\" sx={{ mb: 0.5 }}>\n                           Unlimited shops\n                        </Typography>\n                      )}\n                      {plan.max_emails_per_month && plan.max_emails_per_month < 999999 && (\n                        <Typography variant=\"caption\" display=\"block\" sx={{ mb: 0.5 }}>\n                           {plan.max_emails_per_month} emails/month\n                        </Typography>\n                      )}\n                      {plan.tier >= 2 && (\n                        <Typography variant=\"caption\" display=\"block\" sx={{ mb: 0.5 }}>\n                           Priority support\n                        </Typography>\n                      )}\n                      {plan.tier >= 3 && (\n                        <Typography variant=\"caption\" display=\"block\" sx={{ mb: 0.5 }}>\n                           API access\n                        </Typography>\n                      )}\n                    </Box>\n                  </CardContent>\n                </Card>\n              ))}\n            </Box>\n\n            {subscriptionPlans.length === 0 && (\n              <Alert severity=\"info\">\n                No plans available. You can set up payment later.\n              </Alert>\n            )}\n\n            {error && (\n              <Alert severity=\"error\" sx={{ mt: 2 }}>\n                {error}\n              </Alert>\n            )}\n            \n            <Box sx={{ display: 'flex', gap: 2, mt: 3 }}>\n              <Button onClick={handleBack} disabled={isSubmitting}>\n                Back\n              </Button>\n              <Button\n                variant=\"contained\"\n                onClick={handleFinish}\n                disabled={isSubmitting}\n                fullWidth\n              >\n                {isSubmitting ? <CircularProgress size={24} /> : 'Complete Registration'}\n              </Button>\n            </Box>\n          </Box>\n        );\n\n      default:\n        return null;\n    }\n  };\n\n  // For step 0 (account creation), don't show stepper\n  if (activeStep === 0) {\n    return renderStepContent();\n  }\n\n  return (\n    <Card sx={{ maxWidth: 1200, mx: 'auto' }}>\n      <CardContent sx={{ p: 4 }}>\n        {/* Logo and Brand */}\n        <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'center', mb: 3 }}>\n          <Box\n            component=\"img\"\n            src=\"/logo.png\"\n            alt=\"Performile Logo\"\n            sx={{\n              width: 80,\n              height: 80,\n              mb: 2,\n              objectFit: 'contain',\n            }}\n          />\n          <Typography\n            variant=\"h4\"\n            component=\"h1\"\n            sx={{\n              fontWeight: 700,\n              color: 'primary.main',\n              mb: 0.5,\n            }}\n          >\n            Performile\n          </Typography>\n          <Typography\n            variant=\"body2\"\n            color=\"text.secondary\"\n            align=\"center\"\n            sx={{ fontStyle: 'italic', mb: 3 }}\n          >\n            Elevate Every Delivery\n          </Typography>\n        </Box>\n\n        <Typography variant=\"h5\" align=\"center\" gutterBottom>\n          Complete Your Setup\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\" sx={{ mb: 4 }}>\n          Let's get your account ready in just a few steps\n        </Typography>\n\n        <Stepper activeStep={activeStep - 1} sx={{ mb: 4 }}>\n          {steps.slice(1).map((label, index) => (\n            <Step key={label} completed={index < activeStep - 1}>\n              <StepLabel>{label}</StepLabel>\n            </Step>\n          ))}\n        </Stepper>\n\n        {renderStepContent()}\n\n        <Box sx={{ mt: 3, textAlign: 'center' }}>\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            Already have an account?{' '}\n            <Link\n              component=\"button\"\n              variant=\"body2\"\n              onClick={onSwitchToLogin}\n              sx={{ cursor: 'pointer' }}\n            >\n              Sign in\n            </Link>\n          </Typography>\n        </Box>\n      </CardContent>\n    </Card>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\auth\\LoginForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'navigate' is assigned a value but never used.","line":49,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":49,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":71,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2065,2068],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2065,2068],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":263,"column":48,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[7822,7934],"text":"\n                Enter your email address and we&apos;ll send you instructions to reset your password.\n              "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[7822,7934],"text":"\n                Enter your email address and we&lsquo;ll send you instructions to reset your password.\n              "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[7822,7934],"text":"\n                Enter your email address and we&#39;ll send you instructions to reset your password.\n              "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[7822,7934],"text":"\n                Enter your email address and we&rsquo;ll send you instructions to reset your password.\n              "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  TextField,\n  Button,\n  Typography,\n  Link,\n  Alert,\n  InputAdornment,\n  IconButton,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n} from '@mui/material';\nimport { Visibility, VisibilityOff, Email, Lock } from '@mui/icons-material';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\nimport { LoginCredentials } from '@/types';\nimport { useAuthStore } from '@/store/authStore';\nimport { useNavigate } from 'react-router-dom';\n\nconst schema = yup.object({\n  email: yup\n    .string()\n    .email('Please enter a valid email address')\n    .required('Email is required'),\n  password: yup\n    .string()\n    .min(8, 'Password must be at least 8 characters')\n    .required('Password is required'),\n});\n\ninterface LoginFormProps {\n  onSwitchToRegister: () => void;\n}\n\nexport const LoginForm: React.FC<LoginFormProps> = ({ onSwitchToRegister }) => {\n  const [showPassword, setShowPassword] = useState(false);\n  const [showForgotPassword, setShowForgotPassword] = useState(false);\n  const [resetEmail, setResetEmail] = useState('');\n  const [resetSent, setResetSent] = useState(false);\n  const [resetError, setResetError] = useState('');\n  const [sendingReset, setSendingReset] = useState(false);\n  const { login, isLoading } = useAuthStore();\n  const navigate = useNavigate();\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n    setError,\n  } = useForm<LoginCredentials>({\n    resolver: yupResolver(schema),\n  });\n\n  const onSubmit = async (data: LoginCredentials) => {\n    try {\n      const success = await login(data);\n      // Don't manually navigate - let App.tsx route handle redirect based on isAuthenticated\n      // This prevents race conditions with multiple navigation attempts\n      if (!success) {\n        setError('root', {\n          type: 'manual',\n          message: 'Login failed. Please check your credentials and try again.',\n        });\n      }\n    } catch (error: any) {\n      setError('root', {\n        type: 'manual',\n        message: error.message || 'Login failed. Please try again.',\n      });\n    }\n  };\n\n  const handleForgotPassword = async () => {\n    setResetError('');\n    \n    if (!resetEmail || !/\\S+@\\S+\\.\\S+/.test(resetEmail)) {\n      setResetError('Please enter a valid email address');\n      return;\n    }\n\n    setSendingReset(true);\n    \n    try {\n      const response = await fetch('/api/auth/forgot-password', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ email: resetEmail }),\n      });\n\n      if (response.ok) {\n        setResetSent(true);\n      } else {\n        const data = await response.json();\n        setResetError(data.message || 'Failed to send reset email');\n      }\n    } catch (error) {\n      setResetError('Failed to send reset email. Please try again.');\n    } finally {\n      setSendingReset(false);\n    }\n  };\n\n  const handleCloseForgotPassword = () => {\n    setShowForgotPassword(false);\n    setResetEmail('');\n    setResetSent(false);\n    setResetError('');\n  };\n\n  return (\n    <Card sx={{ maxWidth: 400, mx: 'auto', mt: 4 }}>\n      <CardContent sx={{ p: 4 }}>\n        {/* Logo and Brand */}\n        <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'center', mb: 3 }}>\n          <Box\n            component=\"img\"\n            src=\"/logo.png\"\n            alt=\"Performile Logo\"\n            sx={{\n              width: 100,\n              height: 100,\n              mb: 2,\n              objectFit: 'contain',\n            }}\n          />\n          <Typography\n            variant=\"h4\"\n            component=\"h1\"\n            sx={{\n              fontWeight: 700,\n              color: 'primary.main',\n              mb: 1,\n            }}\n          >\n            Performile\n          </Typography>\n          <Typography\n            variant=\"body2\"\n            color=\"text.secondary\"\n            align=\"center\"\n            sx={{ fontStyle: 'italic', mb: 2 }}\n          >\n            Elevate Every Delivery\n          </Typography>\n        </Box>\n\n        <Typography variant=\"h5\" component=\"h2\" gutterBottom align=\"center\" sx={{ mb: 1 }}>\n          Sign In\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\" sx={{ mb: 3 }}>\n          Welcome back to your dashboard\n        </Typography>\n\n        {errors.root && (\n          <Alert severity=\"error\" sx={{ mb: 2 }}>\n            {errors.root.message}\n          </Alert>\n        )}\n\n        <Box component=\"form\" onSubmit={handleSubmit(onSubmit)} noValidate>\n          <TextField\n            {...register('email')}\n            fullWidth\n            label=\"Email Address\"\n            type=\"email\"\n            autoComplete=\"email\"\n            autoFocus\n            error={!!errors.email}\n            helperText={errors.email?.message}\n            sx={{ mb: 2 }}\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  <Email color=\"action\" />\n                </InputAdornment>\n              ),\n            }}\n          />\n\n          <TextField\n            {...register('password')}\n            fullWidth\n            label=\"Password\"\n            type={showPassword ? 'text' : 'password'}\n            autoComplete=\"current-password\"\n            error={!!errors.password}\n            helperText={errors.password?.message}\n            sx={{ mb: 3 }}\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  <Lock color=\"action\" />\n                </InputAdornment>\n              ),\n              endAdornment: (\n                <InputAdornment position=\"end\">\n                  <IconButton\n                    aria-label=\"toggle password visibility\"\n                    onClick={() => setShowPassword(!showPassword)}\n                    edge=\"end\"\n                  >\n                    {showPassword ? <VisibilityOff /> : <Visibility />}\n                  </IconButton>\n                </InputAdornment>\n              ),\n            }}\n          />\n\n          <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            size=\"large\"\n            disabled={isLoading}\n            sx={{ mb: 2 }}\n          >\n            {isLoading ? 'Signing In...' : 'Sign In'}\n          </Button>\n\n          <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n            <Link\n              component=\"button\"\n              type=\"button\"\n              variant=\"body2\"\n              onClick={() => setShowForgotPassword(true)}\n              sx={{ textDecoration: 'none' }}\n            >\n              Forgot password?\n            </Link>\n            <Link\n              component=\"button\"\n              type=\"button\"\n              variant=\"body2\"\n              onClick={onSwitchToRegister}\n              sx={{ textDecoration: 'none' }}\n            >\n              Sign up\n            </Link>\n          </Box>\n        </Box>\n      </CardContent>\n\n      {/* Forgot Password Dialog */}\n      <Dialog open={showForgotPassword} onClose={handleCloseForgotPassword} maxWidth=\"sm\" fullWidth>\n        <DialogTitle>Reset Password</DialogTitle>\n        <DialogContent>\n          {resetSent ? (\n            <Alert severity=\"success\" sx={{ mt: 2 }}>\n              <Typography variant=\"body2\">\n                Password reset instructions have been sent to <strong>{resetEmail}</strong>.\n                Please check your inbox and follow the link to reset your password.\n              </Typography>\n            </Alert>\n          ) : (\n            <>\n              <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1, mb: 3 }}>\n                Enter your email address and we'll send you instructions to reset your password.\n              </Typography>\n              \n              {resetError && (\n                <Alert severity=\"error\" sx={{ mb: 2 }}>\n                  {resetError}\n                </Alert>\n              )}\n\n              <TextField\n                fullWidth\n                label=\"Email Address\"\n                type=\"email\"\n                value={resetEmail}\n                onChange={(e) => setResetEmail(e.target.value)}\n                autoFocus\n                InputProps={{\n                  startAdornment: (\n                    <InputAdornment position=\"start\">\n                      <Email color=\"action\" />\n                    </InputAdornment>\n                  ),\n                }}\n              />\n            </>\n          )}\n        </DialogContent>\n        <DialogActions sx={{ p: 2 }}>\n          <Button onClick={handleCloseForgotPassword}>\n            {resetSent ? 'Close' : 'Cancel'}\n          </Button>\n          {!resetSent && (\n            <Button \n              variant=\"contained\" \n              onClick={handleForgotPassword}\n              disabled={sendingReset}\n            >\n              {sendingReset ? 'Sending...' : 'Send Reset Link'}\n            </Button>\n          )}\n        </DialogActions>\n      </Dialog>\n    </Card>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\auth\\NotLoggedInModal.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":147,"column":82,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[3843,3918],"text":" Your session may have expired or you haven&apos;t logged in yet.\n              "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[3843,3918],"text":" Your session may have expired or you haven&lsquo;t logged in yet.\n              "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[3843,3918],"text":" Your session may have expired or you haven&#39;t logged in yet.\n              "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[3843,3918],"text":" Your session may have expired or you haven&rsquo;t logged in yet.\n              "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Button,\n  Stack,\n} from '@mui/material';\nimport { LockOutlined, Login } from '@mui/icons-material';\n\ninterface NotLoggedInModalProps {\n  isOpen: boolean;\n  onClose?: () => void;\n  message?: string;\n}\n\nexport const NotLoggedInModal: React.FC<NotLoggedInModalProps> = ({\n  isOpen,\n  onClose,\n  message = 'You need to be logged in to access this page.',\n}) => {\n  const navigate = useNavigate();\n\n  if (!isOpen) return null;\n\n  const handleLogin = () => {\n    onClose?.();\n    navigate('/login');\n  };\n\n  const handleRegister = () => {\n    onClose?.();\n    navigate('/register');\n  };\n\n  return (\n    <Box\n      sx={{\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        zIndex: 9999,\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n        backdropFilter: 'blur(8px)',\n      }}\n    >\n      <Card\n        sx={{\n          maxWidth: 450,\n          width: '90%',\n          mx: 2,\n          boxShadow: '0 8px 32px rgba(0,0,0,0.2)',\n        }}\n      >\n        <CardContent sx={{ p: 4 }}>\n          <Stack spacing={3} alignItems=\"center\">\n            {/* Icon */}\n            <Box\n              sx={{\n                width: 80,\n                height: 80,\n                borderRadius: '50%',\n                background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n              }}\n            >\n              <LockOutlined sx={{ fontSize: 40, color: 'white' }} />\n            </Box>\n\n            {/* Title */}\n            <Typography\n              variant=\"h5\"\n              component=\"h2\"\n              textAlign=\"center\"\n              fontWeight=\"bold\"\n              color=\"text.primary\"\n            >\n              Authentication Required\n            </Typography>\n\n            {/* Message */}\n            <Typography\n              variant=\"body1\"\n              textAlign=\"center\"\n              color=\"text.secondary\"\n              sx={{ px: 2 }}\n            >\n              {message}\n            </Typography>\n\n            {/* Actions */}\n            <Stack spacing={2} sx={{ width: '100%', mt: 2 }}>\n              <Button\n                variant=\"contained\"\n                size=\"large\"\n                fullWidth\n                startIcon={<Login />}\n                onClick={handleLogin}\n                sx={{\n                  background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n                  '&:hover': {\n                    background: 'linear-gradient(135deg, #5568d3 0%, #653a8b 100%)',\n                  },\n                }}\n              >\n                Log In\n              </Button>\n\n              <Button\n                variant=\"outlined\"\n                size=\"large\"\n                fullWidth\n                onClick={handleRegister}\n                sx={{\n                  borderColor: '#667eea',\n                  color: '#667eea',\n                  '&:hover': {\n                    borderColor: '#5568d3',\n                    backgroundColor: 'rgba(102, 126, 234, 0.04)',\n                  },\n                }}\n              >\n                Create Account\n              </Button>\n            </Stack>\n\n            {/* Info */}\n            <Box\n              sx={{\n                mt: 2,\n                p: 2,\n                backgroundColor: 'rgba(102, 126, 234, 0.08)',\n                borderRadius: 2,\n                width: '100%',\n              }}\n            >\n              <Typography variant=\"body2\" color=\"text.secondary\" textAlign=\"center\">\n                <strong>Note:</strong> Your session may have expired or you haven't logged in yet.\n              </Typography>\n            </Box>\n          </Stack>\n        </CardContent>\n      </Card>\n    </Box>\n  );\n};\n\nexport default NotLoggedInModal;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\auth\\PasswordStrengthMeter.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":63,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2056,2059],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2056,2059],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Box, LinearProgress, Typography } from '@mui/material';\nimport { PASSWORD_REQUIREMENTS } from './types';\n\ninterface PasswordStrengthMeterProps {\n  password: string;\n}\n\nexport const PasswordStrengthMeter: React.FC<PasswordStrengthMeterProps> = ({ password }) => {\n  const strength = React.useMemo(() => {\n    if (!password) return { score: 0, message: '', color: 'error' };\n    \n    const requirements = {\n      minLength: password.length >= PASSWORD_REQUIREMENTS.minLength,\n      hasUppercase: /[A-Z]/.test(password),\n      hasLowercase: /[a-z]/.test(password),\n      hasNumber: /\\d/.test(password),\n      hasSpecialChar: new RegExp(`[${PASSWORD_REQUIREMENTS.specialChars.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}]`).test(password),\n    };\n\n    const score = Object.values(requirements).filter(Boolean).length;\n    const total = Object.keys(requirements).length;\n    const percentage = (score / total) * 100;\n\n    let message = '';\n    let color: 'error' | 'warning' | 'info' | 'success' = 'error';\n\n    if (score <= 1) {\n      message = 'Very Weak';\n      color = 'error';\n    } else if (score <= 2) {\n      message = 'Weak';\n      color = 'error';\n    } else if (score <= 3) {\n      message = 'Fair';\n      color = 'warning';\n    } else if (score < total) {\n      message = 'Good';\n      color = 'info';\n    } else {\n      message = 'Strong';\n      color = 'success';\n    }\n\n    return { score, message, color, percentage };\n  }, [password]);\n\n  if (!password) return null;\n\n  return (\n    <Box sx={{ width: '100%', mt: 1 }}>\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 0.5 }}>\n        <Typography variant=\"caption\" color=\"text.secondary\">\n          Password Strength: {strength.message}\n        </Typography>\n        <Typography variant=\"caption\" color={`${strength.color}.main`}>\n          {Math.round(strength.percentage || 0)}%\n        </Typography>\n      </Box>\n      <LinearProgress\n        variant=\"determinate\"\n        value={strength.percentage || 0}\n        color={strength.color as any}\n        sx={{\n          height: 4,\n          borderRadius: 2,\n          '& .MuiLinearProgress-bar': {\n            transition: 'transform 0.2s ease-in-out',\n          },\n        }}\n      />\n      <Box sx={{ mt: 1, mb: 2 }}>\n        <Typography variant=\"caption\" color=\"text.secondary\" component=\"div\">\n          Your password should contain:\n        </Typography>\n        <Box component=\"ul\" sx={{ pl: 2, mt: 0.5, mb: 0 }}>\n          <Typography component=\"li\" variant=\"caption\" color={password.length >= PASSWORD_REQUIREMENTS.minLength ? 'success.main' : 'text.secondary'}>\n            At least {PASSWORD_REQUIREMENTS.minLength} characters\n          </Typography>\n          <Typography component=\"li\" variant=\"caption\" color={/[A-Z]/.test(password) ? 'success.main' : 'text.secondary'}>\n            At least one uppercase letter\n          </Typography>\n          <Typography component=\"li\" variant=\"caption\" color={/[a-z]/.test(password) ? 'success.main' : 'text.secondary'}>\n            At least one lowercase letter\n          </Typography>\n          <Typography component=\"li\" variant=\"caption\" color={/\\d/.test(password) ? 'success.main' : 'text.secondary'}>\n            At least one number\n          </Typography>\n          <Typography \n            component=\"li\" \n            variant=\"caption\" \n            color={new RegExp(`[${PASSWORD_REQUIREMENTS.specialChars.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}]`).test(password) \n              ? 'success.main' \n              : 'text.secondary'}\n          >\n            At least one special character (!@#$%^&* etc.)\n          </Typography>\n        </Box>\n      </Box>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\auth\\RegisterForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":85,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":85,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1940,1943],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1940,1943],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\[.","line":123,"column":40,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":123,"endColumn":41,"suggestions":[{"messageId":"removeEscape","fix":{"range":[3214,3215],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[3214,3214],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":152,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":152,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4038,4041],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4038,4041],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useMemo } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  TextField,\n  Button,\n  Typography,\n  Link,\n  Alert,\n  AlertTitle,\n  InputAdornment,\n  IconButton,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  FormHelperText,\n  CircularProgress,\n  Tooltip,\n  Fade,\n  Zoom,\n} from '@mui/material';\nimport { \n  Visibility as VisibilityIcon, \n  VisibilityOff as VisibilityOffIcon, \n  Email as EmailIcon, \n  Lock as LockIcon, \n  Person as PersonIcon, \n  Phone as PhoneIcon,\n  HelpOutline as HelpOutlineIcon,\n  CheckCircle as CheckCircleIcon,\n} from '@mui/icons-material';\nimport { useForm, Controller, FormProvider } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { useNavigate } from 'react-router-dom';\n\n// Local imports\nimport { useAuthStore } from '@/store/authStore';\nimport { RegisterFormData, RoleOption, ApiError } from './types';\nimport { registerFormSchema } from './validation';\nimport { PasswordStrengthMeter } from './PasswordStrengthMeter';\n\n// Memoized role options\nconst ROLE_OPTIONS: RoleOption[] = [\n  { \n    value: 'consumer', \n    label: 'Consumer',\n    description: 'Track deliveries and rate carriers'\n  },\n  { \n    value: 'merchant', \n    label: 'Merchant',\n    description: 'Manage stores and analyze performance'\n  },\n  { \n    value: 'courier', \n    label: 'Courier',\n    description: 'Monitor performance and generate leads'\n  },\n];\n\n// Form field IDs for better accessibility\nconst FORM_IDS = {\n  FIRST_NAME: 'register-first-name',\n  LAST_NAME: 'register-last-name',\n  EMAIL: 'register-email',\n  PASSWORD: 'register-password',\n  PHONE: 'register-phone',\n  ROLE: 'register-role',\n} as const;\n\n// Form default values\nconst DEFAULT_VALUES: RegisterFormData = {\n  first_name: '',\n  last_name: '',\n  email: '',\n  password: '',\n  phone: '',\n  user_role: 'consumer',\n};\n\ninterface RegisterFormProps {\n  onSwitchToLogin: () => void;\n  onSuccess?: (data: any, role: string) => void;\n}\n\nexport const RegisterForm: React.FC<RegisterFormProps> = ({ onSwitchToLogin, onSuccess }) => {\n  const [showPassword, setShowPassword] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [serverError, setServerError] = useState<string | null>(null);\n  const [showPasswordTooltip, setShowPasswordTooltip] = useState(false);\n  \n  const { register: registerUser } = useAuthStore();\n  const navigate = useNavigate();\n\n  const methods = useForm<RegisterFormData>({\n    resolver: yupResolver(registerFormSchema),\n    defaultValues: DEFAULT_VALUES,\n    mode: 'onBlur',\n    reValidateMode: 'onChange',\n  });\n\n  const { \n    control, \n    handleSubmit, \n    formState: { isDirty, isValid },\n    watch,\n    setError: setFormError,\n    // clearErrors, // Commented out as it's not used\n  } = methods;\n\n  // Watch password field for strength meter\n  const passwordValue = watch('password', '');\n  \n  // Memoize the password strength calculation\n  const passwordStrength = useMemo(\n    () => ({\n      hasMinLength: passwordValue.length >= 8,\n      hasUppercase: /[A-Z]/.test(passwordValue),\n      hasLowercase: /[a-z]/.test(passwordValue),\n      hasNumber: /\\d/.test(passwordValue),\n      hasSpecialChar: /[!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,.<>/?`~]/.test(passwordValue),\n    }),\n    [passwordValue]\n  );\n\n  // Handle form submission\n  const onSubmit = async (data: RegisterFormData) => {\n    if (isSubmitting) return;\n    \n    setIsSubmitting(true);\n    setServerError(null);\n    \n    try {\n      // If onSuccess callback is provided, use it instead of default behavior\n      if (onSuccess) {\n        onSuccess(data, data.user_role);\n        return;\n      }\n      \n      // Default behavior: register and navigate\n      const success = await registerUser(data);\n      if (success) {\n        navigate('/dashboard');\n      }\n    } catch (error) {\n      const apiError = error as ApiError;\n      const errorMessage = apiError.message || 'Registration failed. Please try again.';\n      \n      if (apiError.field) {\n        setFormError(apiError.field as any, {\n          type: 'manual',\n          message: errorMessage,\n        });\n      } else {\n        setServerError(errorMessage);\n      }\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  \n  // Handle password visibility toggle\n  const togglePasswordVisibility = () => {\n    setShowPassword(!showPassword);\n  };\n  \n  // Handle password focus to show tooltip\n  const handlePasswordFocus = () => {\n    setShowPasswordTooltip(true);\n  };\n  \n  // Handle password blur to hide tooltip with delay\n  const handlePasswordBlur = () => {\n    setTimeout(() => setShowPasswordTooltip(false), 200);\n  };\n\n  // Calculate form submission state\n  const isFormValid = isDirty && isValid;\n  const isSubmitDisabled = isSubmitting || !isFormValid;\n  \n  return (\n    <Card \n      component=\"section\"\n      aria-labelledby=\"register-form-title\"\n      sx={{ \n        maxWidth: 600, \n        width: '100%',\n        mx: 'auto', \n        mt: { xs: 2, sm: 4 },\n        boxShadow: 3,\n        borderRadius: 2,\n        overflow: 'hidden',\n      }}\n    >\n      <CardContent sx={{ p: { xs: 2, sm: 4 } }}>\n        {/* Logo and Brand */}\n        <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'center', mb: 3 }}>\n          <Box\n            component=\"img\"\n            src=\"/logo.png\"\n            alt=\"Performile Logo\"\n            sx={{\n              width: 100,\n              height: 100,\n              mb: 2,\n              objectFit: 'contain',\n            }}\n          />\n          <Typography\n            variant=\"h4\"\n            component=\"h1\"\n            sx={{\n              fontWeight: 700,\n              color: 'primary.main',\n              mb: 1,\n            }}\n          >\n            Performile\n          </Typography>\n          <Typography\n            variant=\"body2\"\n            color=\"text.secondary\"\n            align=\"center\"\n            sx={{ fontStyle: 'italic', mb: 2 }}\n          >\n            Elevate Every Delivery\n          </Typography>\n        </Box>\n\n        <Typography \n          id=\"register-form-title\"\n          variant=\"h5\" \n          component=\"h2\" \n          gutterBottom \n          align=\"center\"\n          sx={{\n            fontWeight: 600,\n            fontSize: { xs: '1.5rem', sm: '1.75rem' },\n            mb: 1,\n          }}\n        >\n          Create Account\n        </Typography>\n        \n        <Typography \n          variant=\"body2\" \n          color=\"text.secondary\" \n          align=\"center\" \n          sx={{ \n            mb: 3,\n            fontSize: { xs: '0.875rem', sm: '0.95rem' },\n          }}\n        >\n          Join thousands tracking and improving delivery performance\n        </Typography>\n\n        {serverError && (\n          <Fade in={!!serverError}>\n            <Alert \n              severity=\"error\" \n              sx={{ \n                mb: 3,\n                '& .MuiAlert-message': {\n                  width: '100%',\n                },\n              }}\n              onClose={() => setServerError(null)}\n            >\n              <AlertTitle>Registration Error</AlertTitle>\n              {serverError}\n            </Alert>\n          </Fade>\n        )}\n\n        <FormProvider {...methods}>\n          <Box \n            component=\"form\" \n            onSubmit={handleSubmit(onSubmit)} \n            noValidate\n            aria-label=\"Registration form\"\n          >\n            {/* Name Fields */}\n            <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 2, mb: 2 }}>\n              <Controller\n                name=\"first_name\"\n                control={control}\n                render={({ field, fieldState: { error } }) => (\n                  <TextField\n                    {...field}\n                    id={FORM_IDS.FIRST_NAME}\n                    label=\"First Name\"\n                    autoComplete=\"given-name\"\n                    fullWidth\n                    error={!!error}\n                    helperText={error?.message || ' '}\n                    InputProps={{\n                      startAdornment: (\n                        <InputAdornment position=\"start\">\n                          <PersonIcon color={error ? 'error' : 'action'} />\n                        </InputAdornment>\n                      ),\n                    }}\n                    inputProps={{\n                      'aria-required': 'true',\n                      'aria-invalid': error ? 'true' : 'false',\n                      'aria-describedby': error ? `${FORM_IDS.FIRST_NAME}-error` : undefined,\n                    }}\n                    FormHelperTextProps={{\n                      id: error ? `${FORM_IDS.FIRST_NAME}-error` : undefined,\n                      component: 'div',\n                    }}\n                    sx={{\n                      minWidth: { xs: '100%', sm: 'calc(50% - 8px)' },\n                      flex: 1,\n                    }}\n                  />\n                )}\n              />\n              \n              <Controller\n                name=\"last_name\"\n                control={control}\n                render={({ field, fieldState: { error } }) => (\n                  <TextField\n                    {...field}\n                    id={FORM_IDS.LAST_NAME}\n                    label=\"Last Name\"\n                    autoComplete=\"family-name\"\n                    fullWidth\n                    error={!!error}\n                    helperText={error?.message || ' '}\n                    inputProps={{\n                      'aria-required': 'true',\n                      'aria-invalid': error ? 'true' : 'false',\n                      'aria-describedby': error ? `${FORM_IDS.LAST_NAME}-error` : undefined,\n                    }}\n                    FormHelperTextProps={{\n                      id: error ? `${FORM_IDS.LAST_NAME}-error` : undefined,\n                      component: 'div',\n                    }}\n                    sx={{\n                      minWidth: { xs: '100%', sm: 'calc(50% - 8px)' },\n                      flex: 1,\n                    }}\n                  />\n                )}\n              />\n            </Box>\n\n            {/* Email Field */}\n            <Controller\n              name=\"email\"\n              control={control}\n              render={({ field, fieldState: { error } }) => (\n                <TextField\n                  {...field}\n                  id={FORM_IDS.EMAIL}\n                  label=\"Email Address\"\n                  type=\"email\"\n                  autoComplete=\"email\"\n                  fullWidth\n                  error={!!error}\n                  helperText={error?.message || ' '}\n                  sx={{ mb: 2 }}\n                  InputProps={{\n                    startAdornment: (\n                      <InputAdornment position=\"start\">\n                        <EmailIcon color={error ? 'error' : 'action'} />\n                      </InputAdornment>\n                    ),\n                  }}\n                  inputProps={{\n                    'aria-required': 'true',\n                    'aria-invalid': error ? 'true' : 'false',\n                    'aria-describedby': error ? `${FORM_IDS.EMAIL}-error` : undefined,\n                    inputMode: 'email',\n                  }}\n                  FormHelperTextProps={{\n                    id: error ? `${FORM_IDS.EMAIL}-error` : undefined,\n                  }}\n                />\n              )}\n            />\n\n            {/* Phone Field */}\n            <Controller\n              name=\"phone\"\n              control={control}\n              render={({ field, fieldState: { error } }) => (\n                <TextField\n                  {...field}\n                  id={FORM_IDS.PHONE}\n                  label=\"Phone Number (Optional)\"\n                  type=\"tel\"\n                  autoComplete=\"tel\"\n                  fullWidth\n                  error={!!error}\n                  helperText={error?.message || ' '}\n                  sx={{ mb: 2 }}\n                  InputProps={{\n                    startAdornment: (\n                      <InputAdornment position=\"start\">\n                        <PhoneIcon color={error ? 'error' : 'action'} />\n                      </InputAdornment>\n                    ),\n                  }}\n                  inputProps={{\n                    'aria-invalid': error ? 'true' : 'false',\n                    'aria-describedby': error ? `${FORM_IDS.PHONE}-error` : undefined,\n                    inputMode: 'tel',\n                  }}\n                  FormHelperTextProps={{\n                    id: error ? `${FORM_IDS.PHONE}-error` : undefined,\n                  }}\n                />\n              )}\n            />\n\n            {/* Role Selection */}\n            <Controller\n              name=\"user_role\"\n              control={control}\n              render={({ field, fieldState: { error } }) => (\n                <FormControl \n                  fullWidth \n                  error={!!error} \n                  sx={{ mb: 2 }}\n                  variant=\"outlined\"\n                >\n                  <InputLabel id={`${FORM_IDS.ROLE}-label`}>Account Type</InputLabel>\n                  <Select\n                    {...field}\n                    labelId={`${FORM_IDS.ROLE}-label`}\n                    id={FORM_IDS.ROLE}\n                    label=\"Account Type\"\n                    aria-required=\"true\"\n                    aria-invalid={!!error}\n                    aria-describedby={error ? `${FORM_IDS.ROLE}-error` : undefined}\n                    MenuProps={{\n                      PaperProps: {\n                        sx: {\n                          maxHeight: 300,\n                          '& .MuiMenuItem-root': {\n                            py: 1.5,\n                            borderBottom: '1px solid',\n                            borderColor: 'divider',\n                            '&:last-child': {\n                              borderBottom: 'none',\n                            },\n                          },\n                        },\n                      },\n                    }}\n                  >\n                    {ROLE_OPTIONS.map((option) => (\n                      <MenuItem \n                        key={option.value} \n                        value={option.value}\n                        sx={{\n                          '&.Mui-selected': {\n                            backgroundColor: 'action.selected',\n                            '&:hover': {\n                              backgroundColor: 'action.hover',\n                            },\n                          },\n                        }}\n                      >\n                        <Box>\n                          <Typography \n                            variant=\"subtitle2\" \n                            sx={{ \n                              fontWeight: 600,\n                              display: 'flex',\n                              alignItems: 'center',\n                              gap: 1,\n                            }}\n                          >\n                            {option.label}\n                            {field.value === option.value && (\n                              <CheckCircleIcon \n                                color=\"success\" \n                                fontSize=\"small\" \n                                sx={{ ml: 'auto' }} \n                              />\n                            )}\n                          </Typography>\n                          <Typography \n                            variant=\"body2\" \n                            color=\"text.secondary\"\n                            sx={{\n                              mt: 0.5,\n                              fontSize: '0.75rem',\n                              lineHeight: 1.4,\n                            }}\n                          >\n                            {option.description}\n                          </Typography>\n                        </Box>\n                      </MenuItem>\n                    ))}\n                  </Select>\n                  {error ? (\n                    <FormHelperText id={`${FORM_IDS.ROLE}-error`}>\n                      {error.message}\n                    </FormHelperText>\n                  ) : (\n                    <FormHelperText>Select your account type</FormHelperText>\n                  )}\n                </FormControl>\n              )}\n            />\n\n            {/* Password Field */}\n            <Controller\n              name=\"password\"\n              control={control}\n              render={({ field, fieldState: { error } }) => (\n                <Box sx={{ position: 'relative' }}>\n                  <TextField\n                    {...field}\n                    id={FORM_IDS.PASSWORD}\n                    label=\"Password\"\n                    type={showPassword ? 'text' : 'password'}\n                    autoComplete=\"new-password\"\n                    fullWidth\n                    error={!!error}\n                    helperText={error?.message || ' '}\n                    sx={{ mb: 0.5 }}\n                    onFocus={handlePasswordFocus}\n                    onBlur={handlePasswordBlur}\n                    InputProps={{\n                      startAdornment: (\n                        <InputAdornment position=\"start\">\n                          <LockIcon color={error ? 'error' : 'action'} />\n                        </InputAdornment>\n                      ),\n                      endAdornment: (\n                        <Tooltip \n                          title={showPassword ? 'Hide password' : 'Show password'}\n                          arrow\n                          placement=\"top\"\n                          TransitionComponent={Zoom}\n                        >\n                          <InputAdornment position=\"end\">\n                            <IconButton\n                              aria-label={showPassword ? 'Hide password' : 'Show password'}\n                              onClick={togglePasswordVisibility}\n                              onMouseDown={(e) => e.preventDefault()}\n                              edge=\"end\"\n                              color={error ? 'error' : 'default'}\n                              sx={{\n                                '&:hover': {\n                                  backgroundColor: 'transparent',\n                                },\n                              }}\n                            >\n                              {showPassword ? (\n                                <VisibilityOffIcon />\n                              ) : (\n                                <VisibilityIcon />\n                              )}\n                            </IconButton>\n                          </InputAdornment>\n                        </Tooltip>\n                      ),\n                    }}\n                    inputProps={{\n                      'aria-required': 'true',\n                      'aria-invalid': error ? 'true' : 'false',\n                      'aria-describedby': error \n                        ? `${FORM_IDS.PASSWORD}-error` \n                        : `${FORM_IDS.PASSWORD}-helper`,\n                    }}\n                    FormHelperTextProps={{\n                      id: error \n                        ? `${FORM_IDS.PASSWORD}-error` \n                        : `${FORM_IDS.PASSWORD}-helper`,\n                      component: 'div',\n                    }}\n                  />\n                  \n                  {/* Password Requirements Tooltip */}\n                  <Tooltip\n                    title={\n                      <Box sx={{ p: 1 }}>\n                        <Typography variant=\"subtitle2\" sx={{ mb: 1 }}>\n                          Password Requirements:\n                        </Typography>\n                        <Box component=\"ul\" sx={{ pl: 2, m: 0, '& li': { mb: 0.5 } }}>\n                          <Typography component=\"li\" variant=\"caption\" color={passwordStrength.hasMinLength ? 'success.main' : 'text.secondary'}>\n                            At least 8 characters long\n                          </Typography>\n                          <Typography component=\"li\" variant=\"caption\" color={passwordStrength.hasUppercase ? 'success.main' : 'text.secondary'}>\n                            At least one uppercase letter\n                          </Typography>\n                          <Typography component=\"li\" variant=\"caption\" color={passwordStrength.hasLowercase ? 'success.main' : 'text.secondary'}>\n                            At least one lowercase letter\n                          </Typography>\n                          <Typography component=\"li\" variant=\"caption\" color={passwordStrength.hasNumber ? 'success.main' : 'text.secondary'}>\n                            At least one number\n                          </Typography>\n                          <Typography component=\"li\" variant=\"caption\" color={passwordStrength.hasSpecialChar ? 'success.main' : 'text.secondary'}>\n                            At least one special character\n                          </Typography>\n                        </Box>\n                      </Box>\n                    }\n                    open={showPasswordTooltip}\n                    arrow\n                    placement=\"top-start\"\n                    disableFocusListener\n                    disableHoverListener\n                    disableTouchListener\n                    TransitionComponent={Zoom}\n                    PopperProps={{\n                      disablePortal: true,\n                      modifiers: [\n                        {\n                          name: 'offset',\n                          options: {\n                            offset: [0, 8],\n                          },\n                        },\n                      ],\n                    }}\n                    componentsProps={{\n                      tooltip: {\n                        sx: {\n                          bgcolor: 'background.paper',\n                          color: 'text.primary',\n                          border: '1px solid',\n                          borderColor: 'divider',\n                          boxShadow: 2,\n                          maxWidth: 250,\n                        },\n                      },\n                      arrow: {\n                        sx: {\n                          color: 'background.paper',\n                          '&:before': {\n                            border: '1px solid',\n                            borderColor: 'divider',\n                            bgcolor: 'background.paper',\n                          },\n                        },\n                      },\n                    }}\n                  >\n                    <Box sx={{ position: 'absolute', top: 8, right: 8 }}>\n                      <HelpOutlineIcon \n                        color=\"action\" \n                        fontSize=\"small\" \n                        sx={{ opacity: 0.7 }}\n                      />\n                    </Box>\n                  </Tooltip>\n                  \n                  {/* Password Strength Meter */}\n                  {field.value && (\n                    <Box sx={{ mt: 1, mb: 2 }}>\n                      <PasswordStrengthMeter password={field.value} />\n                    </Box>\n                  )}\n                </Box>\n              )}\n            />\n\n            {/* Submit Button */}\n            <Button\n              type=\"submit\"\n              fullWidth\n              variant=\"contained\"\n              size=\"large\"\n              disabled={isSubmitDisabled}\n              sx={{\n                mt: 2,\n                mb: 3,\n                py: 1.5,\n                fontSize: '1rem',\n                fontWeight: 600,\n                textTransform: 'none',\n                borderRadius: 2,\n                boxShadow: 'none',\n                '&:hover': {\n                  boxShadow: 'none',\n                },\n                '&:active': {\n                  transform: 'translateY(1px)',\n                },\n                '&.Mui-disabled': {\n                  bgcolor: 'action.disabledBackground',\n                  color: 'text.disabled',\n                },\n              }}\n              startIcon={\n                isSubmitting ? (\n                  <CircularProgress size={20} color=\"inherit\" />\n                ) : null\n              }\n            >\n              {isSubmitting ? 'Creating Account...' : 'Create Account'}\n            </Button>\n\n            {/* Login Link */}\n            <Box \n              textAlign=\"center\" \n              sx={{ \n                pt: 1,\n                borderTop: '1px solid',\n                borderColor: 'divider',\n              }}\n            >\n              <Typography variant=\"body2\" component=\"span\" sx={{ mr: 1 }}>\n                Already have an account?\n              </Typography>\n              <Link\n                component=\"button\"\n                type=\"button\"\n                variant=\"body2\"\n                onClick={onSwitchToLogin}\n                sx={{\n                  fontWeight: 600,\n                  textDecoration: 'none',\n                  '&:hover': {\n                    textDecoration: 'underline',\n                  },\n                }}\n              >\n                Sign in\n              </Link>\n            </Box>\n          </Box>\n        </FormProvider>\n      </CardContent>\n    </Card>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\auth\\__tests__\\RegisterForm.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'queryClient' is assigned a value but never used.","line":23,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":20},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[948,951],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[948,951],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect, vi, beforeEach } from 'vitest';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { MemoryRouter } from 'react-router-dom';\nimport { RegisterForm } from '../RegisterForm';\nimport { useAuthStore } from '@/store/authStore';\n\n// Mock the auth store\nvi.mock('@/store/authStore', () => ({\n  useAuthStore: vi.fn(),\n}));\n\n// Create a test-utils file to wrap with providers\nconst TestWrapper = ({ children }: { children: React.ReactNode }) => (\n  <MemoryRouter>\n    <QueryClientProvider client={new QueryClient()}>\n      {children}\n    </QueryClientProvider>\n  </MemoryRouter>\n);\n\ndescribe('RegisterForm', () => {\n  const queryClient = new QueryClient();\n  const mockRegister = vi.fn();\n  \n  beforeEach(() => {\n    // Reset all mocks\n    vi.clearAllMocks();\n    \n    // Setup mock implementation\n    (useAuthStore as any).mockImplementation(() => ({\n      register: mockRegister,\n    }));\n  });\n\n  const renderComponent = () => {\n    return render(\n      <TestWrapper>\n        <RegisterForm onSwitchToLogin={vi.fn()} />\n      </TestWrapper>\n    );\n  };\n\n  it('renders the form with all fields', () => {\n    renderComponent();\n    \n    expect(screen.getByLabelText(/first name/i)).toBeInTheDocument();\n    expect(screen.getByLabelText(/last name/i)).toBeInTheDocument();\n    expect(screen.getByLabelText(/email address/i)).toBeInTheDocument();\n    expect(screen.getByLabelText(/password/i)).toBeInTheDocument();\n    expect(screen.getByLabelText(/phone number/i)).toBeInTheDocument();\n    expect(screen.getByLabelText(/account type/i)).toBeInTheDocument();\n    expect(screen.getByRole('button', { name: /create account/i })).toBeInTheDocument();\n  });\n\n  it('shows validation errors when form is submitted empty', async () => {\n    renderComponent();\n    \n    // Submit the form\n    fireEvent.click(screen.getByRole('button', { name: /create account/i }));\n    \n    // Check for validation errors\n    expect(await screen.findByText(/first name is required/i)).toBeInTheDocument();\n    expect(screen.getByText(/last name is required/i)).toBeInTheDocument();\n    expect(screen.getByText(/email is required/i)).toBeInTheDocument();\n    expect(screen.getByText(/password is required/i)).toBeInTheDocument();\n    \n    // Should not call register function\n    expect(mockRegister).not.toHaveBeenCalled();\n  });\n\n  it('shows password strength indicator', async () => {\n    renderComponent();\n    \n    const passwordInput = screen.getByLabelText(/password/i);\n    \n    // Type a weak password\n    fireEvent.change(passwordInput, { target: { value: 'weak' } });\n    \n    // Check for weak password indicator\n    expect(await screen.findByText(/weak/i, { selector: 'span' })).toBeInTheDocument();\n    \n    // Type a stronger password\n    fireEvent.change(passwordInput, { target: { value: 'Str0ngP@ss' } });\n    \n    // Check for strong password indicator\n    expect(await screen.findByText(/strong/i, { selector: 'span' })).toBeInTheDocument();\n  });\n\n  it('submits the form with valid data', async () => {\n    // Mock successful registration\n    mockRegister.mockResolvedValueOnce(true);\n    \n    renderComponent();\n    \n    // Fill out the form\n    fireEvent.change(screen.getByLabelText(/first name/i), { target: { value: 'John' } });\n    fireEvent.change(screen.getByLabelText(/last name/i), { target: { value: 'Doe' } });\n    fireEvent.change(screen.getByLabelText(/email address/i), { target: { value: 'john@example.com' } });\n    fireEvent.change(screen.getByLabelText(/password/i), { target: { value: 'Str0ngP@ss' } });\n    \n    // Submit the form\n    fireEvent.click(screen.getByRole('button', { name: /create account/i }));\n    \n    // Check if register was called with the right data\n    await waitFor(() => {\n      expect(mockRegister).toHaveBeenCalledWith({\n        first_name: 'John',\n        last_name: 'Doe',\n        email: 'john@example.com',\n        password: 'Str0ngP@ss',\n        user_role: 'consumer',\n        phone: '',\n      });\n    });\n    \n    // Should redirect to dashboard on success\n    expect(mockPush).toHaveBeenCalledWith('/dashboard');\n  });\n\n  it('shows error message when registration fails', async () => {\n    // Mock failed registration\n    const errorMessage = 'Email already in use';\n    mockRegister.mockRejectedValueOnce({ message: errorMessage });\n    \n    renderComponent();\n    \n    // Fill out the form\n    fireEvent.change(screen.getByLabelText(/first name/i), { target: { value: 'John' } });\n    fireEvent.change(screen.getByLabelText(/last name/i), { target: { value: 'Doe' } });\n    fireEvent.change(screen.getByLabelText(/email address/i), { target: { value: 'john@example.com' } });\n    fireEvent.change(screen.getByLabelText(/password/i), { target: { value: 'Str0ngP@ss' } });\n    \n    // Submit the form\n    fireEvent.click(screen.getByRole('button', { name: /create account/i }));\n    \n    // Check for error message\n    expect(await screen.findByText(errorMessage)).toBeInTheDocument();\n  });\n\n  it('toggles password visibility', () => {\n    renderComponent();\n    \n    const passwordInput = screen.getByLabelText(/password/i) as HTMLInputElement;\n    const toggleButton = screen.getByRole('button', { name: /show password/i });\n    \n    // Password should be hidden by default\n    expect(passwordInput.type).toBe('password');\n    \n    // Click the toggle button\n    fireEvent.click(toggleButton);\n    \n    // Password should be visible\n    expect(passwordInput.type).toBe('text');\n    \n    // Click the toggle button again\n    fireEvent.click(toggleButton);\n    \n    // Password should be hidden again\n    expect(passwordInput.type).toBe('password');\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\auth\\types.ts","messages":[{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\-.","line":43,"column":30,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":43,"endColumn":31,"suggestions":[{"messageId":"removeEscape","fix":{"range":[845,846],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[845,845],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\[.","line":43,"column":33,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":43,"endColumn":34,"suggestions":[{"messageId":"removeEscape","fix":{"range":[848,849],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[848,848],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\].","line":43,"column":35,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":43,"endColumn":36,"suggestions":[{"messageId":"removeEscape","fix":{"range":[850,851],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[850,850],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export type UserRole = 'merchant' | 'courier' | 'consumer';\n\nexport interface RegisterFormData {\n  email: string;\n  password: string;\n  first_name: string;\n  last_name: string;\n  user_role: UserRole;\n  phone?: string;\n}\n\nexport interface RoleOption {\n  value: UserRole;\n  label: string;\n  description: string;\n}\n\nexport interface ApiError extends Error {\n  status?: number;\n  code?: string;\n  field?: string;\n  details?: Record<string, unknown>;\n}\n\nexport interface RegisterFormProps {\n  onSwitchToLogin: () => void;\n}\n\nexport interface PasswordRequirements {\n  minLength: boolean;\n  hasUppercase: boolean;\n  hasLowercase: boolean;\n  hasNumber: boolean;\n  hasSpecialChar: boolean;\n}\n\nexport const PASSWORD_REQUIREMENTS = {\n  minLength: 8,\n  minUppercase: 1,\n  minLowercase: 1,\n  minNumbers: 1,\n  minSpecialChars: 1,\n  specialChars: '!@#$%^&*()_+\\-=\\[\\]{};:\"\\\\|,.<>/?`~',\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\auth\\validation.ts","messages":[{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\+.","line":34,"column":17,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":34,"endColumn":18,"suggestions":[{"messageId":"removeEscape","fix":{"range":[1316,1317],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[1316,1316],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as yup from 'yup';\nimport { RegisterFormData, PASSWORD_REQUIREMENTS } from './types';\n\nexport const registerFormSchema: yup.ObjectSchema<RegisterFormData> = yup.object().shape({\n  email: yup\n    .string()\n    .email('Please enter a valid email address')\n    .required('Email is required'),\n  password: yup\n    .string()\n    .min(PASSWORD_REQUIREMENTS.minLength, `Password must be at least ${PASSWORD_REQUIREMENTS.minLength} characters`)\n    .matches(\n      new RegExp(`^(?=.*[a-z])(?=.*[A-Z])(?=.*\\\\d)(?=.*[${PASSWORD_REQUIREMENTS.specialChars.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}])`),\n      'Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character'\n    )\n    .required('Password is required'),\n  first_name: yup\n    .string()\n    .min(1, 'First name is required')\n    .max(100, 'First name must be less than 100 characters')\n    .required('First name is required'),\n  last_name: yup\n    .string()\n    .min(1, 'Last name is required')\n    .max(100, 'Last name must be less than 100 characters')\n    .required('Last name is required'),\n  user_role: yup\n    .string()\n    .oneOf(['merchant', 'courier', 'consumer'] as const, 'Please select a valid role')\n    .required('Role is required'),\n  phone: yup\n    .string()\n    .optional()\n    .matches(/^[\\+]?[1-9][\\d]{0,15}$/, 'Please enter a valid phone number'),\n});\n\nexport const checkPasswordStrength = (password: string) => {\n  const requirements = {\n    minLength: password.length >= PASSWORD_REQUIREMENTS.minLength,\n    hasUppercase: /[A-Z]/.test(password),\n    hasLowercase: /[a-z]/.test(password),\n    hasNumber: /\\d/.test(password),\n    hasSpecialChar: new RegExp(`[${PASSWORD_REQUIREMENTS.specialChars.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}]`).test(password),\n  };\n\n  return {\n    ...requirements,\n    isValid: Object.values(requirements).every(Boolean),\n    score: Object.values(requirements).filter(Boolean).length,\n    total: Object.keys(requirements).length,\n  };\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\chat\\AIChatWidget.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Chip' is defined but never used.","line":23,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'user' is assigned a value but never used.","line":56,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":32},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":114,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":114,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3030,3033],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3030,3033],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * AI CHAT WIDGET\n * Floating chat widget for homepage and authenticated users\n * Created: October 21, 2025\n * \n * Security Features:\n * - No user role exposure\n * - No subscription data exposure\n * - Sanitized user context\n * - Rate limiting\n */\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport {\n  Box,\n  IconButton,\n  Paper,\n  Typography,\n  TextField,\n  CircularProgress,\n  Fade,\n  Avatar,\n  Chip,\n} from '@mui/material';\nimport {\n  Chat as ChatIcon,\n  Close as CloseIcon,\n  Send as SendIcon,\n  SmartToy as BotIcon,\n  Person as PersonIcon,\n} from '@mui/icons-material';\nimport { useAuthStore } from '../../store/authStore';\nimport { chatService } from '../../services/chatService';\nimport toast from 'react-hot-toast';\n\ninterface Message {\n  id: string;\n  role: 'user' | 'assistant';\n  content: string;\n  timestamp: Date;\n}\n\ninterface AIChatWidgetProps {\n  position?: 'bottom-right' | 'bottom-left';\n}\n\nexport const AIChatWidget: React.FC<AIChatWidgetProps> = ({ \n  position = 'bottom-right' \n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [input, setInput] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  \n  const { isAuthenticated, user } = useAuthStore();\n\n  // Initial greeting message\n  useEffect(() => {\n    if (isOpen && messages.length === 0) {\n      const greeting = isAuthenticated\n        ? `Hi! I'm your Performile AI assistant. How can I help you today?`\n        : `Welcome to Performile! I'm here to help you learn about our platform. What would you like to know?`;\n      \n      setMessages([{\n        id: '1',\n        role: 'assistant',\n        content: greeting,\n        timestamp: new Date(),\n      }]);\n    }\n  }, [isOpen, isAuthenticated, messages.length]);\n\n  // Auto-scroll to bottom\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  const handleSend = async () => {\n    if (!input.trim() || isLoading) return;\n\n    const userMessage: Message = {\n      id: Date.now().toString(),\n      role: 'user',\n      content: input.trim(),\n      timestamp: new Date(),\n    };\n\n    setMessages(prev => [...prev, userMessage]);\n    setInput('');\n    setIsLoading(true);\n\n    try {\n      // Send message to AI service with sanitized context\n      const response = await chatService.sendMessage({\n        message: input.trim(),\n        isAuthenticated,\n        // Only send safe, non-sensitive context\n        context: {\n          hasAccount: isAuthenticated,\n          // NO role, NO subscription data, NO sensitive info\n        },\n        conversationHistory: messages.slice(-5), // Last 5 messages for context\n      });\n\n      const assistantMessage: Message = {\n        id: (Date.now() + 1).toString(),\n        role: 'assistant',\n        content: response.message,\n        timestamp: new Date(),\n      };\n\n      setMessages(prev => [...prev, assistantMessage]);\n    } catch (error: any) {\n      console.error('Chat error:', error);\n      \n      // Determine error message based on error type\n      let errorContent = 'I apologize, but I encountered an error. Please try again or contact support if the issue persists.';\n      let toastMessage = 'Failed to send message';\n      \n      if (error.message?.includes('rate limit') || error.message?.includes('Rate limit')) {\n        errorContent = 'I apologize, but our AI service is currently experiencing high demand. Please wait a moment and try again.';\n        toastMessage = 'Rate limit reached. Please wait a moment.';\n      } else if (error.message?.includes('Too many requests')) {\n        errorContent = 'You\\'re sending messages too quickly. Please wait a moment before trying again.';\n        toastMessage = 'Please slow down';\n      }\n      \n      const errorMessage: Message = {\n        id: (Date.now() + 1).toString(),\n        role: 'assistant',\n        content: errorContent,\n        timestamp: new Date(),\n      };\n      \n      setMessages(prev => [...prev, errorMessage]);\n      toast.error(toastMessage);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n\n  const positionStyles = position === 'bottom-right'\n    ? { bottom: 20, right: 20 }\n    : { bottom: 20, left: 20 };\n\n  return (\n    <>\n      {/* Chat Widget */}\n      <Fade in={isOpen}>\n        <Paper\n          elevation={8}\n          sx={{\n            position: 'fixed',\n            ...positionStyles,\n            width: 380,\n            height: 550,\n            display: isOpen ? 'flex' : 'none',\n            flexDirection: 'column',\n            zIndex: 1300,\n            borderRadius: 2,\n            overflow: 'hidden',\n          }}\n        >\n          {/* Header */}\n          <Box\n            sx={{\n              background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n              color: 'white',\n              p: 2,\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'space-between',\n            }}\n          >\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n              <BotIcon />\n              <Box>\n                <Typography variant=\"subtitle1\" fontWeight=\"bold\">\n                  Performile AI\n                </Typography>\n                <Typography variant=\"caption\">\n                  {isAuthenticated ? 'Your Personal Assistant' : 'Ask me anything'}\n                </Typography>\n              </Box>\n            </Box>\n            <IconButton\n              size=\"small\"\n              onClick={() => setIsOpen(false)}\n              sx={{ color: 'white' }}\n            >\n              <CloseIcon />\n            </IconButton>\n          </Box>\n\n          {/* Messages */}\n          <Box\n            sx={{\n              flex: 1,\n              overflowY: 'auto',\n              p: 2,\n              backgroundColor: '#f5f5f5',\n              display: 'flex',\n              flexDirection: 'column',\n              gap: 2,\n            }}\n          >\n            {messages.map((message) => (\n              <Box\n                key={message.id}\n                sx={{\n                  display: 'flex',\n                  gap: 1,\n                  alignItems: 'flex-start',\n                  flexDirection: message.role === 'user' ? 'row-reverse' : 'row',\n                }}\n              >\n                <Avatar\n                  sx={{\n                    width: 32,\n                    height: 32,\n                    bgcolor: message.role === 'user' ? '#667eea' : '#764ba2',\n                  }}\n                >\n                  {message.role === 'user' ? <PersonIcon /> : <BotIcon />}\n                </Avatar>\n                <Paper\n                  elevation={1}\n                  sx={{\n                    p: 1.5,\n                    maxWidth: '75%',\n                    backgroundColor: message.role === 'user' ? '#667eea' : 'white',\n                    color: message.role === 'user' ? 'white' : 'text.primary',\n                    borderRadius: 2,\n                  }}\n                >\n                  <Typography variant=\"body2\" sx={{ whiteSpace: 'pre-wrap' }}>\n                    {message.content}\n                  </Typography>\n                  <Typography\n                    variant=\"caption\"\n                    sx={{\n                      display: 'block',\n                      mt: 0.5,\n                      opacity: 0.7,\n                      fontSize: '0.7rem',\n                    }}\n                  >\n                    {message.timestamp.toLocaleTimeString([], {\n                      hour: '2-digit',\n                      minute: '2-digit',\n                    })}\n                  </Typography>\n                </Paper>\n              </Box>\n            ))}\n            {isLoading && (\n              <Box sx={{ display: 'flex', gap: 1, alignItems: 'center' }}>\n                <Avatar sx={{ width: 32, height: 32, bgcolor: '#764ba2' }}>\n                  <BotIcon />\n                </Avatar>\n                <Paper elevation={1} sx={{ p: 1.5, borderRadius: 2 }}>\n                  <CircularProgress size={20} />\n                </Paper>\n              </Box>\n            )}\n            <div ref={messagesEndRef} />\n          </Box>\n\n          {/* Input */}\n          <Box\n            sx={{\n              p: 2,\n              backgroundColor: 'white',\n              borderTop: '1px solid',\n              borderColor: 'divider',\n            }}\n          >\n            <Box sx={{ display: 'flex', gap: 1 }}>\n              <TextField\n                fullWidth\n                size=\"small\"\n                placeholder=\"Type your message...\"\n                value={input}\n                onChange={(e) => setInput(e.target.value)}\n                onKeyPress={handleKeyPress}\n                disabled={isLoading}\n                multiline\n                maxRows={3}\n                sx={{\n                  '& .MuiOutlinedInput-root': {\n                    borderRadius: 2,\n                  },\n                }}\n              />\n              <IconButton\n                color=\"primary\"\n                onClick={handleSend}\n                disabled={!input.trim() || isLoading}\n                sx={{\n                  bgcolor: 'primary.main',\n                  color: 'white',\n                  '&:hover': {\n                    bgcolor: 'primary.dark',\n                  },\n                  '&.Mui-disabled': {\n                    bgcolor: 'action.disabledBackground',\n                  },\n                }}\n              >\n                <SendIcon />\n              </IconButton>\n            </Box>\n            <Typography\n              variant=\"caption\"\n              color=\"text.secondary\"\n              sx={{ display: 'block', mt: 1, textAlign: 'center' }}\n            >\n              AI responses may not always be accurate\n            </Typography>\n          </Box>\n        </Paper>\n      </Fade>\n\n      {/* Floating Button */}\n      {!isOpen && (\n        <IconButton\n          onClick={() => setIsOpen(true)}\n          sx={{\n            position: 'fixed',\n            ...positionStyles,\n            width: 60,\n            height: 60,\n            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n            color: 'white',\n            boxShadow: 4,\n            zIndex: 1300,\n            '&:hover': {\n              background: 'linear-gradient(135deg, #764ba2 0%, #667eea 100%)',\n              transform: 'scale(1.1)',\n            },\n            transition: 'all 0.3s ease',\n          }}\n        >\n          <ChatIcon sx={{ fontSize: 30 }} />\n        </IconButton>\n      )}\n    </>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\checkout\\CheckoutPreview.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useEffect' is defined but never used.","line":1,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useMemo' is defined but never used.","line":1,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TextField' is defined but never used.","line":7,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'InputAdornment' is defined but never used.","line":8,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'IconButton' is defined but never used.","line":9,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Tooltip' is defined but never used.","line":10,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Alert' is defined but never used.","line":11,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CircularProgress' is defined but never used.","line":12,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FormControl' is defined but never used.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MenuItem' is defined but never used.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Select' is defined but never used.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'LocationOn' is defined but never used.","line":17,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Refresh' is defined but never used.","line":17,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CheckCircle' is defined but never used.","line":17,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":42},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ErrorIcon' is defined but never used.","line":17,"column":53,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":62},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'apiClient' is defined but never used.","line":20,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'debounce' is defined but never used.","line":21,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":16}],"suppressedMessages":[],"errorCount":17,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useMemo, useState } from 'react';\nimport {\n  Box,\n  Typography,\n  Paper,\n  Button,\n  TextField,\n  InputAdornment,\n  IconButton,\n  Tooltip,\n  Alert,\n  CircularProgress,\n  FormControl,\n  MenuItem,\n  Select,\n} from '@mui/material';\nimport { LocationOn, Refresh, CheckCircle, Error as ErrorIcon } from '@mui/icons-material';\nimport { CourierComparisonView } from './CourierComparisonView';\nimport { CourierOption } from './CourierSelectionCard';\nimport { apiClient } from '@/services/apiClient';\nimport debounce from 'lodash.debounce';\n\nconst sampleCouriers: CourierOption[] = [\n  {\n    courier_id: '1',\n    courier_name: 'DHL Express',\n    courier_code: 'dhl',\n    price: 65,\n    currency: 'NOK',\n    delivery_time_min: 1,\n    delivery_time_max: 1,\n    delivery_time_unit: 'days',\n    trust_score: 92,\n    avg_rating: 4.8,\n    total_reviews: 1234,\n    on_time_rate: 98,\n    completion_rate: 99,\n    performance_grade: 'A+',\n    is_eco_friendly: false,\n    description: 'Premium express delivery service with guaranteed next-day delivery.',\n    features: ['Track & Trace', 'SMS Notifications', 'Signature Required', 'Insurance Included'],\n  },\n  {\n    courier_id: '2',\n    courier_name: 'Bring',\n    courier_code: 'bring',\n    price: 55,\n    currency: 'NOK',\n    original_price: 65,\n    delivery_time_min: 1,\n    delivery_time_max: 2,\n    delivery_time_unit: 'days',\n    trust_score: 88,\n    avg_rating: 4.6,\n    total_reviews: 987,\n    on_time_rate: 95,\n    completion_rate: 97,\n    performance_grade: 'A',\n    is_eco_friendly: true,\n    description: 'Reliable delivery with eco-friendly options and flexible pickup points.',\n    features: ['Parcel Lockers', 'Eco-Friendly', 'Flexible Pickup', 'Track & Trace'],\n  },\n  {\n    courier_id: '3',\n    courier_name: 'PostNord',\n    courier_code: 'postnord',\n    price: 49,\n    currency: 'NOK',\n    delivery_time_min: 2,\n    delivery_time_max: 3,\n    delivery_time_unit: 'days',\n    trust_score: 82,\n    avg_rating: 4.3,\n    total_reviews: 756,\n    on_time_rate: 92,\n    completion_rate: 95,\n    performance_grade: 'B+',\n    is_eco_friendly: false,\n    description: 'Affordable delivery option with extensive parcel shop network.',\n    features: ['Parcel Shops', 'Track & Trace', 'SMS Notifications'],\n  },\n  {\n    courier_id: '4',\n    courier_name: 'Instabox',\n    courier_code: 'instabox',\n    price: 59,\n    currency: 'NOK',\n    delivery_time_min: 1,\n    delivery_time_max: 2,\n    delivery_time_unit: 'days',\n    trust_score: 85,\n    avg_rating: 4.5,\n    total_reviews: 543,\n    on_time_rate: 94,\n    completion_rate: 96,\n    performance_grade: 'A-',\n    is_eco_friendly: true,\n    description: 'Modern delivery service with smart lockers and flexible pickup times.',\n    features: ['Smart Lockers', '24/7 Pickup', 'Eco-Friendly', 'App Integration'],\n  },\n  {\n    courier_id: '5',\n    courier_name: 'Budbee',\n    courier_code: 'budbee',\n    price: 52,\n    currency: 'NOK',\n    delivery_time_min: 1,\n    delivery_time_max: 2,\n    delivery_time_unit: 'days',\n    trust_score: 86,\n    avg_rating: 4.4,\n    total_reviews: 432,\n    on_time_rate: 93,\n    completion_rate: 96,\n    performance_grade: 'A-',\n    is_eco_friendly: true,\n    description: 'Flexible home delivery with evening and weekend options.',\n    features: ['Evening Delivery', 'Weekend Delivery', 'Live Tracking', 'Eco-Friendly'],\n  },\n];\n\nexport interface CheckoutPreviewProps {\n  showBackButton?: boolean;\n  showInfoPanel?: boolean;\n  onBack?: () => void;\n  onContinue?: (courier?: CourierOption) => void;\n}\n\nexport const CheckoutPreview: React.FC<CheckoutPreviewProps> = ({\n  showBackButton = true,\n  showInfoPanel = true,\n  onBack,\n  onContinue,\n}) => {\n  const [selectedCourierId, setSelectedCourierId] = useState<string | null>(null);\n\n  const handleContinue = () => {\n    if (selectedCourierId) {\n      const selectedCourier = sampleCouriers.find((c) => c.courier_id === selectedCourierId);\n      if (onContinue) {\n        onContinue(selectedCourier);\n      } else {\n        window.alert(\n          `Selected: ${selectedCourier?.courier_name}\\nPrice: ${selectedCourier?.price} ${selectedCourier?.currency}\\nTrustScore: ${selectedCourier?.trust_score}/100`\n        );\n      }\n    } else {\n      window.alert('Please select a delivery method');\n    }\n  };\n\n  return (\n    <Box sx={{ display: 'flex', flexDirection: 'column', gap: 3 }}>\n      <Paper sx={{ p: 3 }}>\n        <Typography variant=\"h6\" gutterBottom>\n          Step 3 of 4: Select Delivery Method\n        </Typography>\n\n        <CourierComparisonView\n          couriers={sampleCouriers}\n          selectedCourierId={selectedCourierId}\n          onSelectCourier={setSelectedCourierId}\n          sortBy=\"trustscore\"\n          showSortOptions\n          showTrustScoreInfo\n          maxVisible={3}\n        />\n\n        <Box\n          sx={{\n            mt: 4,\n            display: 'flex',\n            justifyContent: showBackButton ? 'space-between' : 'flex-end',\n          }}\n        >\n          {showBackButton && (\n            <Button variant=\"outlined\" onClick={onBack}>\n               Back\n            </Button>\n          )}\n          <Button\n            variant=\"contained\"\n            size=\"large\"\n            onClick={handleContinue}\n            disabled={!selectedCourierId}\n          >\n            Continue to Payment \n          </Button>\n        </Box>\n      </Paper>\n\n      {showInfoPanel && (\n        <Paper sx={{ p: 3, backgroundColor: '#f5f5f5' }}>\n          <Typography variant=\"h6\" gutterBottom>\n            About This Demo\n          </Typography>\n          <Typography variant=\"body2\" paragraph>\n            This demo shows how TrustScore is integrated into the checkout flow:\n          </Typography>\n          <ul>\n            <li>Couriers are sorted by TrustScore by default (highest first)</li>\n            <li>Each courier card shows rating, reviews, and TrustScore</li>\n            <li>Performance metrics (on-time rate, completion rate) are visible</li>\n            <li>Badges highlight top-rated, fastest, and best-value options</li>\n            <li>Users can view detailed TrustScore information</li>\n            <li>Link to full TrustScore page for comparison</li>\n          </ul>\n          <Typography variant=\"body2\" sx={{ mt: 2 }}>\n            <strong>Key Features:</strong>\n          </Typography>\n          <ul>\n            <li>Mobile-responsive design</li>\n            <li>Expandable details for each courier</li>\n            <li>Multiple sorting options (TrustScore, price, speed, rating)</li>\n            <li>Visual indicators and badges</li>\n            <li>Direct link to full TrustScore comparison page</li>\n          </ul>\n        </Paper>\n      )}\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\checkout\\CourierBadge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\checkout\\CourierComparisonView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Info' is defined but never used.","line":18,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":20},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":114,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":114,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3322,3325],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3322,3325],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Box,\n  Typography,\n  Stack,\n  Button,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Alert,\n  Link as MuiLink,\n} from '@mui/material';\nimport { Sort, Info, TrendingUp } from '@mui/icons-material';\nimport { CourierSelectionCard, CourierOption } from './CourierSelectionCard';\nimport { useNavigate } from 'react-router-dom';\n\ninterface CourierComparisonViewProps {\n  couriers: CourierOption[];\n  selectedCourierId: string | null;\n  onSelectCourier: (courierId: string) => void;\n  sortBy?: 'trustscore' | 'price' | 'speed' | 'rating';\n  showSortOptions?: boolean;\n  showTrustScoreInfo?: boolean;\n  maxVisible?: number;\n}\n\nexport const CourierComparisonView: React.FC<CourierComparisonViewProps> = ({\n  couriers,\n  selectedCourierId,\n  onSelectCourier,\n  sortBy = 'trustscore',\n  showSortOptions = true,\n  showTrustScoreInfo = true,\n  maxVisible,\n}) => {\n  const navigate = useNavigate();\n  const [currentSortBy, setCurrentSortBy] = useState(sortBy);\n  const [showAllCouriers, setShowAllCouriers] = useState(false);\n  const [detailsDialogOpen, setDetailsDialogOpen] = useState(false);\n  const [selectedCourierForDetails, setSelectedCourierForDetails] = useState<CourierOption | null>(null);\n\n  // Sort couriers\n  const sortedCouriers = [...couriers].sort((a, b) => {\n    switch (currentSortBy) {\n      case 'trustscore':\n        return b.trust_score - a.trust_score;\n      case 'price':\n        return a.price - b.price;\n      case 'speed':\n        return a.delivery_time_min - b.delivery_time_min;\n      case 'rating':\n        return b.avg_rating - a.avg_rating;\n      default:\n        return 0;\n    }\n  });\n\n  // Limit visible couriers if maxVisible is set\n  const visibleCouriers = maxVisible && !showAllCouriers\n    ? sortedCouriers.slice(0, maxVisible)\n    : sortedCouriers;\n\n  const hasMoreCouriers = maxVisible && sortedCouriers.length > maxVisible;\n\n  // Handle view details\n  const handleViewDetails = (courierId: string) => {\n    const courier = couriers.find(c => c.courier_id === courierId);\n    if (courier) {\n      setSelectedCourierForDetails(courier);\n      setDetailsDialogOpen(true);\n    }\n  };\n\n  // Handle view all TrustScores\n  const handleViewAllTrustScores = () => {\n    navigate('/trustscores');\n  };\n\n  // Get sort label\n  const getSortLabel = (sort: string) => {\n    switch (sort) {\n      case 'trustscore':\n        return 'TrustScore (Highest First)';\n      case 'price':\n        return 'Price (Lowest First)';\n      case 'speed':\n        return 'Delivery Speed (Fastest First)';\n      case 'rating':\n        return 'Rating (Highest First)';\n      default:\n        return 'TrustScore';\n    }\n  };\n\n  return (\n    <Box>\n      {/* Header */}\n      <Box sx={{ mb: 3 }}>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 1 }}>\n          <Typography variant=\"h6\" fontWeight=\"bold\">\n            Select Delivery Method\n          </Typography>\n          {showSortOptions && (\n            <FormControl size=\"small\" sx={{ minWidth: 200 }}>\n              <InputLabel>Sort By</InputLabel>\n              <Select\n                value={currentSortBy}\n                label=\"Sort By\"\n                onChange={(e) => setCurrentSortBy(e.target.value as any)}\n                startAdornment={<Sort sx={{ mr: 1, fontSize: 18 }} />}\n              >\n                <MenuItem value=\"trustscore\">TrustScore</MenuItem>\n                <MenuItem value=\"price\">Price</MenuItem>\n                <MenuItem value=\"speed\">Delivery Speed</MenuItem>\n                <MenuItem value=\"rating\">Rating</MenuItem>\n              </Select>\n            </FormControl>\n          )}\n        </Box>\n\n        {/* TrustScore info banner */}\n        {showTrustScoreInfo && (\n          <Alert\n            severity=\"info\"\n            icon={<TrendingUp />}\n            action={\n              <Button\n                color=\"inherit\"\n                size=\"small\"\n                onClick={handleViewAllTrustScores}\n              >\n                View All\n              </Button>\n            }\n            sx={{ mb: 2 }}\n          >\n            <Typography variant=\"body2\">\n              Couriers are ranked by <strong>TrustScore</strong> - our data-driven rating based on delivery performance, customer reviews, and reliability.{' '}\n              <MuiLink\n                component=\"button\"\n                variant=\"body2\"\n                onClick={handleViewAllTrustScores}\n                sx={{ textDecoration: 'underline', cursor: 'pointer' }}\n              >\n                Learn more\n              </MuiLink>\n            </Typography>\n          </Alert>\n        )}\n\n        <Typography variant=\"body2\" color=\"text.secondary\">\n          Sorted by: {getSortLabel(currentSortBy)}  {sortedCouriers.length} options available\n        </Typography>\n      </Box>\n\n      {/* Courier cards */}\n      <Stack spacing={2}>\n        {visibleCouriers.map((courier, index) => (\n          <CourierSelectionCard\n            key={courier.courier_id}\n            courier={courier}\n            selected={selectedCourierId === courier.courier_id}\n            onSelect={onSelectCourier}\n            onViewDetails={handleViewDetails}\n            showDetailedView={true}\n            rank={index + 1}\n          />\n        ))}\n      </Stack>\n\n      {/* Show more button */}\n      {hasMoreCouriers && !showAllCouriers && (\n        <Box sx={{ mt: 2, textAlign: 'center' }}>\n          <Button\n            variant=\"outlined\"\n            onClick={() => setShowAllCouriers(true)}\n          >\n            Show {sortedCouriers.length - maxVisible!} More Options\n          </Button>\n        </Box>\n      )}\n\n      {/* Details Dialog */}\n      <Dialog\n        open={detailsDialogOpen}\n        onClose={() => setDetailsDialogOpen(false)}\n        maxWidth=\"md\"\n        fullWidth\n      >\n        <DialogTitle>\n          {selectedCourierForDetails?.courier_name} - Full TrustScore Details\n        </DialogTitle>\n        <DialogContent>\n          {selectedCourierForDetails && (\n            <Box>\n              <Typography variant=\"body1\" paragraph>\n                TrustScore: <strong>{selectedCourierForDetails.trust_score}/100</strong>\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\n                The TrustScore is calculated based on multiple factors including delivery performance,\n                customer reviews, on-time rate, and completion rate.\n              </Typography>\n              \n              <Box sx={{ mt: 2 }}>\n                <Typography variant=\"subtitle2\" gutterBottom>\n                  Performance Metrics:\n                </Typography>\n                <ul>\n                  <li>Average Rating: {selectedCourierForDetails.avg_rating}/5 ({selectedCourierForDetails.total_reviews} reviews)</li>\n                  <li>On-Time Delivery: {selectedCourierForDetails.on_time_rate}%</li>\n                  <li>Completion Rate: {selectedCourierForDetails.completion_rate}%</li>\n                  <li>Performance Grade: {selectedCourierForDetails.performance_grade || 'N/A'}</li>\n                </ul>\n              </Box>\n\n              <Button\n                variant=\"outlined\"\n                onClick={handleViewAllTrustScores}\n                sx={{ mt: 2 }}\n              >\n                View All Courier TrustScores\n              </Button>\n            </Box>\n          )}\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setDetailsDialogOpen(false)}>Close</Button>\n          {selectedCourierForDetails && (\n            <Button\n              variant=\"contained\"\n              onClick={() => {\n                onSelectCourier(selectedCourierForDetails.courier_id);\n                setDetailsDialogOpen(false);\n              }}\n            >\n              Select This Courier\n            </Button>\n          )}\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\checkout\\CourierSelectionCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Schedule' is defined but never used.","line":21,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'BadgeType' is defined but never used.","line":28,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":51}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Card,\n  CardContent,\n  Box,\n  Typography,\n  Radio,\n  Chip,\n  Button,\n  Collapse,\n  IconButton,\n  Divider,\n  Grid,\n  useTheme,\n  useMediaQuery,\n} from '@mui/material';\nimport {\n  ExpandMore,\n  ExpandLess,\n  Star,\n  Schedule,\n  LocalShipping,\n  CheckCircle,\n  Info,\n} from '@mui/icons-material';\nimport { CourierLogo } from '@/components/courier/CourierLogo';\nimport { TrustScoreIndicator } from './TrustScoreIndicator';\nimport { CourierBadge, getCourierBadges, BadgeType } from './CourierBadge';\n\nexport interface CourierOption {\n  courier_id: string;\n  courier_name: string;\n  courier_code: string;\n  logo_url?: string;\n  \n  // Pricing\n  price: number;\n  currency: string;\n  original_price?: number; // For showing discounts\n  \n  // Delivery\n  delivery_time_min: number;\n  delivery_time_max: number;\n  delivery_time_unit: 'hours' | 'days';\n  estimated_delivery_date?: string;\n  \n  // TrustScore\n  trust_score: number; // 0-100\n  avg_rating: number; // 0-5\n  total_reviews: number;\n  on_time_rate: number; // percentage\n  completion_rate: number; // percentage\n  performance_grade?: string; // A+, A, B+, etc.\n  \n  // Additional\n  is_eco_friendly?: boolean;\n  description?: string;\n  features?: string[];\n}\n\ninterface CourierSelectionCardProps {\n  courier: CourierOption;\n  selected: boolean;\n  onSelect: (courierId: string) => void;\n  onViewDetails?: (courierId: string) => void;\n  showDetailedView?: boolean;\n  rank?: number; // Position in list (1, 2, 3...)\n}\n\nexport const CourierSelectionCard: React.FC<CourierSelectionCardProps> = ({\n  courier,\n  selected,\n  onSelect,\n  onViewDetails,\n  showDetailedView = false,\n  rank,\n}) => {\n  const [expanded, setExpanded] = useState(false);\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n\n  // Get badges for this courier\n  const badges = getCourierBadges({\n    trust_score: courier.trust_score,\n    avg_rating: courier.avg_rating,\n    total_reviews: courier.total_reviews,\n    delivery_time_min: courier.delivery_time_min,\n    price: courier.price,\n    is_eco_friendly: courier.is_eco_friendly,\n  });\n\n  // Format delivery time\n  const formatDeliveryTime = () => {\n    const { delivery_time_min, delivery_time_max, delivery_time_unit } = courier;\n    if (delivery_time_min === delivery_time_max) {\n      return `${delivery_time_min} ${delivery_time_unit}`;\n    }\n    return `${delivery_time_min}-${delivery_time_max} ${delivery_time_unit}`;\n  };\n\n  // Format price\n  const formatPrice = () => {\n    return `${courier.price} ${courier.currency}`;\n  };\n\n  // Check if this is a top courier\n  const isTopCourier = rank && rank <= 3;\n\n  return (\n    <Card\n      sx={{\n        cursor: 'pointer',\n        border: selected ? `2px solid ${theme.palette.primary.main}` : '1px solid #e0e0e0',\n        backgroundColor: selected ? `${theme.palette.primary.main}08` : '#fff',\n        transition: 'all 0.2s',\n        position: 'relative',\n        '&:hover': {\n          boxShadow: theme.shadows[4],\n          borderColor: theme.palette.primary.main,\n        },\n      }}\n      onClick={() => onSelect(courier.courier_id)}\n    >\n      {/* Rank badge for top 3 */}\n      {isTopCourier && (\n        <Box\n          sx={{\n            position: 'absolute',\n            top: -8,\n            left: 16,\n            backgroundColor: rank === 1 ? '#ffd700' : rank === 2 ? '#c0c0c0' : '#cd7f32',\n            color: '#fff',\n            borderRadius: '12px',\n            padding: '2px 12px',\n            fontSize: '0.75rem',\n            fontWeight: 'bold',\n            zIndex: 1,\n          }}\n        >\n          #{rank}\n        </Box>\n      )}\n\n      <CardContent sx={{ p: isMobile ? 2 : 3 }}>\n        <Grid container spacing={2} alignItems=\"center\">\n          {/* Radio button */}\n          <Grid item xs=\"auto\">\n            <Radio\n              checked={selected}\n              onChange={() => onSelect(courier.courier_id)}\n              onClick={(e) => e.stopPropagation()}\n              sx={{ p: 0 }}\n            />\n          </Grid>\n\n          {/* Courier logo and name */}\n          <Grid item xs=\"auto\">\n            <CourierLogo\n              courierCode={courier.courier_code}\n              courierName={courier.courier_name}\n              size={isMobile ? 'medium' : 'large'}\n              variant=\"rounded\"\n            />\n          </Grid>\n\n          {/* Main content */}\n          <Grid item xs>\n            <Box>\n              {/* Courier name and badges */}\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, flexWrap: 'wrap', mb: 1 }}>\n                <Typography variant={isMobile ? 'body1' : 'h6'} fontWeight=\"bold\">\n                  {courier.courier_name}\n                </Typography>\n                {badges.slice(0, isMobile ? 1 : 2).map((badge) => (\n                  <CourierBadge key={badge} type={badge} size=\"small\" />\n                ))}\n              </Box>\n\n              {/* Rating */}\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1 }}>\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.5 }}>\n                  <Star sx={{ fontSize: 16, color: '#ffc107' }} />\n                  <Typography variant=\"body2\" fontWeight=\"medium\">\n                    {courier.avg_rating.toFixed(1)}\n                  </Typography>\n                </Box>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  ({courier.total_reviews.toLocaleString()} reviews)\n                </Typography>\n              </Box>\n\n              {/* TrustScore - Compact on mobile, default on desktop */}\n              <Box sx={{ mb: 1 }}>\n                <TrustScoreIndicator\n                  score={courier.trust_score}\n                  size={isMobile ? 'small' : 'medium'}\n                  grade={courier.performance_grade}\n                  variant={isMobile ? 'compact' : 'default'}\n                />\n              </Box>\n\n              {/* Performance metrics */}\n              {!isMobile && (\n                <Box sx={{ display: 'flex', gap: 2, mb: 1 }}>\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.5 }}>\n                    <CheckCircle sx={{ fontSize: 14, color: '#4caf50' }} />\n                    <Typography variant=\"caption\">\n                      {courier.on_time_rate}% On-Time\n                    </Typography>\n                  </Box>\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.5 }}>\n                    <CheckCircle sx={{ fontSize: 14, color: '#4caf50' }} />\n                    <Typography variant=\"caption\">\n                      {courier.completion_rate}% Complete\n                    </Typography>\n                  </Box>\n                </Box>\n              )}\n            </Box>\n          </Grid>\n\n          {/* Price and delivery time */}\n          <Grid item xs={12} sm=\"auto\">\n            <Box sx={{ textAlign: isMobile ? 'left' : 'right' }}>\n              {/* Price */}\n              <Box sx={{ mb: 1 }}>\n                {courier.original_price && courier.original_price > courier.price && (\n                  <Typography\n                    variant=\"caption\"\n                    sx={{ textDecoration: 'line-through', color: 'text.secondary', mr: 1 }}\n                  >\n                    {courier.original_price} {courier.currency}\n                  </Typography>\n                )}\n                <Typography variant=\"h6\" fontWeight=\"bold\" color=\"primary\">\n                  {formatPrice()}\n                </Typography>\n              </Box>\n\n              {/* Delivery time */}\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.5, justifyContent: isMobile ? 'flex-start' : 'flex-end' }}>\n                <LocalShipping sx={{ fontSize: 16, color: 'text.secondary' }} />\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  {formatDeliveryTime()}\n                </Typography>\n              </Box>\n\n              {courier.estimated_delivery_date && (\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  Est. {new Date(courier.estimated_delivery_date).toLocaleDateString()}\n                </Typography>\n              )}\n            </Box>\n          </Grid>\n        </Grid>\n\n        {/* Expandable details */}\n        {showDetailedView && (\n          <>\n            <Box sx={{ mt: 2, display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n              <Button\n                size=\"small\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                  if (onViewDetails) {\n                    onViewDetails(courier.courier_id);\n                  }\n                }}\n                startIcon={<Info />}\n              >\n                View Full TrustScore\n              </Button>\n              <IconButton\n                size=\"small\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                  setExpanded(!expanded);\n                }}\n              >\n                {expanded ? <ExpandLess /> : <ExpandMore />}\n              </IconButton>\n            </Box>\n\n            <Collapse in={expanded}>\n              <Divider sx={{ my: 2 }} />\n              \n              {/* Detailed metrics */}\n              <Grid container spacing={2}>\n                <Grid item xs={6} sm={3}>\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    On-Time Rate\n                  </Typography>\n                  <Typography variant=\"body2\" fontWeight=\"bold\">\n                    {courier.on_time_rate}%\n                  </Typography>\n                </Grid>\n                <Grid item xs={6} sm={3}>\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    Completion Rate\n                  </Typography>\n                  <Typography variant=\"body2\" fontWeight=\"bold\">\n                    {courier.completion_rate}%\n                  </Typography>\n                </Grid>\n                <Grid item xs={6} sm={3}>\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    Total Reviews\n                  </Typography>\n                  <Typography variant=\"body2\" fontWeight=\"bold\">\n                    {courier.total_reviews.toLocaleString()}\n                  </Typography>\n                </Grid>\n                <Grid item xs={6} sm={3}>\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    Performance\n                  </Typography>\n                  <Typography variant=\"body2\" fontWeight=\"bold\">\n                    {courier.performance_grade || 'N/A'}\n                  </Typography>\n                </Grid>\n              </Grid>\n\n              {/* Features */}\n              {courier.features && courier.features.length > 0 && (\n                <Box sx={{ mt: 2 }}>\n                  <Typography variant=\"caption\" color=\"text.secondary\" gutterBottom>\n                    Features:\n                  </Typography>\n                  <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5, mt: 0.5 }}>\n                    {courier.features.map((feature, index) => (\n                      <Chip key={index} label={feature} size=\"small\" variant=\"outlined\" />\n                    ))}\n                  </Box>\n                </Box>\n              )}\n\n              {/* Description */}\n              {courier.description && (\n                <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 2 }}>\n                  {courier.description}\n                </Typography>\n              )}\n            </Collapse>\n          </>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\checkout\\CourierSelector.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Avatar' is defined but never used.","line":10,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":9},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":80,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":80,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2058,2061],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2058,2061],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":106,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":106,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3148,3151],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3148,3151],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchCourierRatings'. Either include it or remove the dependency array.","line":150,"column":6,"nodeType":"ArrayExpression","endLine":150,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [fetchCourierRatings, postalCode]","fix":{"range":[4586,4598],"text":"[fetchCourierRatings, postalCode]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":232,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":232,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6660,6663],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6660,6663],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useMemo } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Radio,\n  RadioGroup,\n  FormControlLabel,\n  Avatar,\n  Chip,\n  Rating,\n  Alert,\n  Skeleton,\n} from '@mui/material';\nimport {\n  LocalShipping,\n  CheckCircle,\n  Speed,\n  Star,\n} from '@mui/icons-material';\nimport { CourierLogo } from '@/components/courier/CourierLogo';\nimport { isFeatureEnabled } from '@/lib/analytics';\n\ninterface Courier {\n  courier_id: string;\n  courier_name: string;\n  courier_code?: string; // Added for CourierLogo\n  company_name: string;\n  logo_url: string | null;\n  trust_score: number;\n  total_reviews: number;\n  avg_delivery_time: string;\n  on_time_percentage: number;\n  badge: 'excellent' | 'very_good' | 'good' | 'average';\n  final_score?: number | null;\n  selection_rate?: number | null;\n  rank_position?: number | null;\n  eta_minutes?: number | null;\n}\n\ninterface CourierSelectorProps {\n  postalCode: string;\n  onCourierSelect: (courierId: string) => void;\n  selectedCourierId?: string;\n}\n\nconst badgeConfig = {\n  excellent: { label: 'Excellent', color: '#4caf50' },\n  very_good: { label: 'Very Good', color: '#8bc34a' },\n  good: { label: 'Good', color: '#ffc107' },\n  average: { label: 'Average', color: '#ff9800' },\n};\n\nconst DYNAMIC_RANKING_FLAG_KEY = 'dynamic_courier_ranking';\nconst DEFAULT_LIMIT = 5;\n\nconst determineBadge = (trustScore: number): Courier['badge'] => {\n  if (trustScore >= 4.5) return 'excellent';\n  if (trustScore >= 4.0) return 'very_good';\n  if (trustScore >= 3.5) return 'good';\n  return 'average';\n};\n\nconst formatDeliveryWindow = (avgDays?: number | null, etaMinutes?: number | null): string => {\n  if (etaMinutes && etaMinutes > 0) {\n    const approxHours = Math.max(1, Math.round(etaMinutes / 60));\n    const upperHours = approxHours + 1;\n    return `${approxHours}-${upperHours} hours`;\n  }\n\n  if (avgDays && avgDays > 0) {\n    const rounded = Math.max(1, Math.round(avgDays));\n    return `${rounded}-${rounded + 1} days`;\n  }\n\n  return 'N/A';\n};\n\nconst mapDynamicCouriers = (items: any[]): Courier[] =>\n  items.map((courier) => {\n    const trustScore = Number(courier.trust_score ?? 0);\n    const totalReviews = Number(courier.total_reviews ?? 0);\n    const onTimeRate = Number(\n      courier.on_time_rate ?? courier.on_time_percentage ?? courier.on_time ?? 0\n    );\n\n    return {\n      courier_id: courier.courier_id,\n      courier_name: courier.courier_name ?? 'Unknown Courier',\n      courier_code: courier.courier_code ?? courier.courier_name ?? undefined,\n      company_name: courier.company_name ?? '',\n      logo_url: courier.logo_url ?? null,\n      trust_score: trustScore,\n      total_reviews: totalReviews,\n      avg_delivery_time: formatDeliveryWindow(courier.avg_delivery_days, courier.eta_minutes),\n      on_time_percentage: onTimeRate,\n      badge: determineBadge(trustScore),\n      final_score: courier.final_score ?? courier.final_ranking_score ?? null,\n      selection_rate: courier.selection_rate ?? null,\n      rank_position: courier.rank_position ?? null,\n      eta_minutes: courier.eta_minutes ?? null,\n    };\n  });\n\nconst mapLegacyCouriers = (items: any[]): Courier[] =>\n  items.map((courier) => {\n    const trustScore = Number(courier.trust_score ?? 0);\n    return {\n      courier_id: courier.courier_id,\n      courier_name: courier.courier_name ?? 'Unknown Courier',\n      courier_code: courier.courier_code ?? courier.courier_name ?? undefined,\n      company_name: courier.company_name ?? '',\n      logo_url: courier.logo_url ?? null,\n      trust_score: trustScore,\n      total_reviews: Number(courier.total_reviews ?? 0),\n      avg_delivery_time: courier.avg_delivery_time ?? 'N/A',\n      on_time_percentage: Number(courier.on_time_percentage ?? 0),\n      badge: determineBadge(trustScore),\n    };\n  });\n\nexport const CourierSelector: React.FC<CourierSelectorProps> = ({\n  postalCode,\n  onCourierSelect,\n  selectedCourierId,\n}) => {\n  const [couriers, setCouriers] = useState<Courier[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [isLocalData, setIsLocalData] = useState(true);\n\n  const dynamicRankingEnabled = useMemo(() => {\n    if (import.meta.env.VITE_ENABLE_DYNAMIC_RANKING === 'true') {\n      return true;\n    }\n\n    try {\n      return isFeatureEnabled(DYNAMIC_RANKING_FLAG_KEY);\n    } catch (error) {\n      console.warn('[CourierSelector] Failed to resolve PostHog flag:', error);\n      return false;\n    }\n  }, []);\n\n  useEffect(() => {\n    if (postalCode) {\n      fetchCourierRatings();\n    }\n  }, [postalCode]);\n\n  const fetchCourierRatings = async () => {\n    setLoading(true);\n    setError(null);\n\n    const tryDynamicRanking = async (): Promise<boolean> => {\n      if (!dynamicRankingEnabled) {\n        return false;\n      }\n\n      const params = new URLSearchParams({\n        postal_code: postalCode,\n        limit: `${DEFAULT_LIMIT}`,\n      });\n\n      try {\n        const response = await fetch(`/api/couriers/rankings?${params.toString()}`);\n\n        if (!response.ok) {\n          throw new Error(`Dynamic rankings request failed with status ${response.status}`);\n        }\n\n        const data = await response.json();\n\n        if (!data?.success) {\n          return false;\n        }\n\n        const formatted = mapDynamicCouriers(data.couriers ?? []);\n\n        if (formatted.length === 0) {\n          return false;\n        }\n\n        setCouriers(formatted);\n        setIsLocalData(data.is_local_data !== false);\n\n        if (!selectedCourierId) {\n          onCourierSelect(formatted[0].courier_id);\n        }\n\n        return true;\n      } catch (error) {\n        console.warn('[CourierSelector] Dynamic ranking fetch failed:', error);\n        return false;\n      }\n    };\n\n    const tryLegacyRanking = async () => {\n      const response = await fetch(\n        `/api/couriers/ratings-by-postal?postal_code=${encodeURIComponent(\n          postalCode\n        )}&limit=${DEFAULT_LIMIT}`\n      );\n\n      if (!response.ok) {\n        throw new Error('Failed to fetch courier ratings');\n      }\n\n      const data = await response.json();\n\n      if (!data?.success) {\n        throw new Error(data?.message || 'Failed to load couriers');\n      }\n\n      const formatted = mapLegacyCouriers(data.couriers ?? []);\n\n      setCouriers(formatted);\n      setIsLocalData(data.is_local_data ?? true);\n\n      if (!selectedCourierId && formatted.length > 0) {\n        onCourierSelect(formatted[0].courier_id);\n      }\n    };\n\n    try {\n      const dynamicSucceeded = await tryDynamicRanking();\n\n      if (!dynamicSucceeded) {\n        await tryLegacyRanking();\n      }\n    } catch (err: any) {\n      console.error('Error fetching couriers:', err);\n      setError(err.message || 'Failed to load courier ratings');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <Card sx={{ mb: 3 }}>\n        <CardContent>\n          <Typography variant=\"h6\" gutterBottom>\n            <LocalShipping sx={{ mr: 1, verticalAlign: 'middle' }} />\n            Loading Top Rated Couriers...\n          </Typography>\n          {[1, 2, 3].map((i) => (\n            <Box key={i} sx={{ mb: 2 }}>\n              <Skeleton variant=\"rectangular\" height={80} />\n            </Box>\n          ))}\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (error) {\n    return (\n      <Alert severity=\"warning\" sx={{ mb: 3 }}>\n        {error}\n      </Alert>\n    );\n  }\n\n  if (couriers.length === 0) {\n    return (\n      <Alert severity=\"info\" sx={{ mb: 3 }}>\n        No courier ratings available for your area yet.\n      </Alert>\n    );\n  }\n\n  return (\n    <Card sx={{ mb: 3 }}>\n      <CardContent>\n        <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\n          <LocalShipping sx={{ mr: 1, color: 'primary.main' }} />\n          <Typography variant=\"h6\" component=\"div\">\n            Top Rated Couriers in Your Area\n          </Typography>\n        </Box>\n\n        {!isLocalData && (\n          <Alert severity=\"info\" sx={{ mb: 2 }}>\n            No local couriers found. Showing top national couriers.\n          </Alert>\n        )}\n\n        <RadioGroup\n          value={selectedCourierId || ''}\n          onChange={(e) => onCourierSelect(e.target.value)}\n        >\n          {couriers.map((courier, index) => (\n            <Card\n              key={courier.courier_id}\n              variant=\"outlined\"\n              sx={{\n                mb: 2,\n                cursor: 'pointer',\n                border: selectedCourierId === courier.courier_id ? 2 : 1,\n                borderColor: selectedCourierId === courier.courier_id \n                  ? 'primary.main' \n                  : 'divider',\n                '&:hover': {\n                  borderColor: 'primary.main',\n                  boxShadow: 1,\n                },\n              }}\n              onClick={() => onCourierSelect(courier.courier_id)}\n            >\n              <CardContent>\n                <Box sx={{ display: 'flex', alignItems: 'flex-start' }}>\n                  <FormControlLabel\n                    value={courier.courier_id}\n                    control={<Radio />}\n                    label=\"\"\n                    sx={{ mr: 1 }}\n                  />\n\n                  <Box sx={{ mr: 2 }}>\n                    <CourierLogo\n                      courierCode={courier.courier_code || courier.courier_name}\n                      courierName={courier.courier_name}\n                      size=\"large\"\n                      variant=\"rounded\"\n                      showName={false}\n                    />\n                  </Box>\n\n                  <Box sx={{ flexGrow: 1 }}>\n                    <Box sx={{ display: 'flex', alignItems: 'center', mb: 0.5 }}>\n                      <Typography variant=\"subtitle1\" component=\"div\" sx={{ fontWeight: 600 }}>\n                        {courier.courier_name}\n                      </Typography>\n                      \n                      {index === 0 && (\n                        <Chip\n                          label=\"Recommended\"\n                          size=\"small\"\n                          color=\"primary\"\n                          sx={{ ml: 1 }}\n                        />\n                      )}\n\n                      <Chip\n                        label={badgeConfig[courier.badge].label}\n                        size=\"small\"\n                        sx={{\n                          ml: 1,\n                          backgroundColor: badgeConfig[courier.badge].color,\n                          color: 'white',\n                        }}\n                      />\n                    </Box>\n\n                    <Box sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>\n                      <Rating\n                        value={courier.trust_score}\n                        precision={0.1}\n                        readOnly\n                        size=\"small\"\n                      />\n                      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ ml: 1 }}>\n                        {courier.trust_score.toFixed(1)} ({courier.total_reviews} reviews)\n                      </Typography>\n                    </Box>\n\n                    <Box sx={{ display: 'flex', gap: 2, flexWrap: 'wrap' }}>\n                      <Box sx={{ display: 'flex', alignItems: 'center' }}>\n                        <Speed fontSize=\"small\" sx={{ mr: 0.5, color: 'text.secondary' }} />\n                        <Typography variant=\"body2\" color=\"text.secondary\">\n                          {courier.avg_delivery_time}\n                        </Typography>\n                      </Box>\n\n                      <Box sx={{ display: 'flex', alignItems: 'center' }}>\n                        <CheckCircle fontSize=\"small\" sx={{ mr: 0.5, color: 'success.main' }} />\n                        <Typography variant=\"body2\" color=\"text.secondary\">\n                          {courier.on_time_percentage.toFixed(0)}% on-time\n                        </Typography>\n                      </Box>\n                    </Box>\n                  </Box>\n                </Box>\n              </CardContent>\n            </Card>\n          ))}\n        </RadioGroup>\n\n        <Box sx={{ mt: 2, p: 2, bgcolor: 'grey.50', borderRadius: 1 }}>\n          <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: 'flex', alignItems: 'center' }}>\n            <Star fontSize=\"small\" sx={{ mr: 0.5 }} />\n            Ratings based on verified customer reviews  Powered by Performile\n          </Typography>\n        </Box>\n      </CardContent>\n    </Card>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\checkout\\ServiceSections.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":235,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":235,"endColumn":32}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Service Sections Component\n * Week 2 Day 4 - Service Sections UI\n * \n * Displays courier options grouped by speed or delivery method\n * Created: November 6, 2025\n */\n\nimport React, { useState, useMemo } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Tabs,\n  Tab,\n  Radio,\n  RadioGroup,\n  FormControlLabel,\n  Chip,\n  Avatar,\n  Divider,\n  ToggleButtonGroup,\n  ToggleButton\n} from '@mui/material';\nimport {\n  Zap,\n  Package,\n  Truck,\n  Home,\n  Store,\n  Lock,\n  Clock,\n  Calendar,\n  Star\n} from 'lucide-react';\n\ninterface CourierOption {\n  id: string;\n  courierCode: string;\n  courierName: string;\n  serviceName: string;\n  price: number;\n  currency: string;\n  estimatedDays: number;\n  rating: number;\n  deliveryMethod: 'home' | 'parcel_shop' | 'locker';\n  speed: 'express' | 'standard' | 'economy';\n  badges?: ('same_day' | 'next_day' | 'weekend')[];\n}\n\ninterface ServiceSectionsProps {\n  couriers: CourierOption[];\n  selectedCourierId?: string;\n  onSelect: (courierId: string) => void;\n  groupBy?: 'speed' | 'method';\n  showGroupToggle?: boolean;\n}\n\nexport const ServiceSections: React.FC<ServiceSectionsProps> = ({\n  couriers,\n  selectedCourierId,\n  onSelect,\n  groupBy: initialGroupBy = 'speed',\n  showGroupToggle = true\n}) => {\n  const [activeTab, setActiveTab] = useState(0);\n  const [groupBy, setGroupBy] = useState<'speed' | 'method'>(initialGroupBy);\n\n  // Group couriers by speed or method\n  const groupedCouriers = useMemo(() => {\n    if (groupBy === 'speed') {\n      return {\n        express: couriers.filter(c => c.speed === 'express'),\n        standard: couriers.filter(c => c.speed === 'standard'),\n        economy: couriers.filter(c => c.speed === 'economy')\n      };\n    } else {\n      return {\n        home: couriers.filter(c => c.deliveryMethod === 'home'),\n        parcel_shop: couriers.filter(c => c.deliveryMethod === 'parcel_shop'),\n        locker: couriers.filter(c => c.deliveryMethod === 'locker')\n      };\n    }\n  }, [couriers, groupBy]);\n\n  const speedTabs = [\n    { \n      label: 'Express', \n      icon: <Zap size={20} />, \n      key: 'express',\n      color: '#FF5722'\n    },\n    { \n      label: 'Standard', \n      icon: <Package size={20} />, \n      key: 'standard',\n      color: '#2196F3'\n    },\n    { \n      label: 'Economy', \n      icon: <Truck size={20} />, \n      key: 'economy',\n      color: '#4CAF50'\n    }\n  ];\n\n  const methodTabs = [\n    { \n      label: 'Home Delivery', \n      icon: <Home size={20} />, \n      key: 'home',\n      color: '#9C27B0'\n    },\n    { \n      label: 'Parcel Shop', \n      icon: <Store size={20} />, \n      key: 'parcel_shop',\n      color: '#FF9800'\n    },\n    { \n      label: 'Locker', \n      icon: <Lock size={20} />, \n      key: 'locker',\n      color: '#607D8B'\n    }\n  ];\n\n  const tabs = groupBy === 'speed' ? speedTabs : methodTabs;\n  const currentKey = tabs[activeTab]?.key;\n  const currentCouriers = groupedCouriers[currentKey] || [];\n\n  const renderBadge = (badge: string) => {\n    switch (badge) {\n      case 'same_day':\n        return (\n          <Chip\n            icon={<Clock size={14} />}\n            label=\"Same Day\"\n            size=\"small\"\n            sx={{ \n              ml: 1, \n              height: 24,\n              backgroundColor: '#d32f2f',\n              color: '#ffffff',\n              fontWeight: 600,\n              '& .MuiChip-icon': {\n                color: '#ffffff'\n              }\n            }}\n          />\n        );\n      case 'next_day':\n        return (\n          <Chip\n            icon={<Calendar size={14} />}\n            label=\"Next Day\"\n            size=\"small\"\n            sx={{ \n              ml: 1, \n              height: 24,\n              backgroundColor: '#ed6c02',\n              color: '#ffffff',\n              fontWeight: 600,\n              '& .MuiChip-icon': {\n                color: '#ffffff'\n              }\n            }}\n          />\n        );\n      case 'weekend':\n        return (\n          <Chip\n            label=\"Weekend\"\n            size=\"small\"\n            sx={{ \n              ml: 1, \n              height: 24,\n              backgroundColor: '#0288d1',\n              color: '#ffffff',\n              fontWeight: 600\n            }}\n          />\n        );\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <Card>\n      <CardContent>\n        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={2}>\n          <Typography variant=\"h6\">\n            Select Delivery Service\n          </Typography>\n\n          {/* Group By Toggle */}\n          {showGroupToggle && (\n            <ToggleButtonGroup\n              value={groupBy}\n              exclusive\n              onChange={(_, value) => {\n                if (value) {\n                  setGroupBy(value);\n                  setActiveTab(0); // Reset to first tab when switching\n                }\n              }}\n              size=\"small\"\n            >\n              <ToggleButton value=\"speed\">\n                <Zap size={16} style={{ marginRight: 4 }} />\n                Speed\n              </ToggleButton>\n              <ToggleButton value=\"method\">\n                <Home size={16} style={{ marginRight: 4 }} />\n                Method\n              </ToggleButton>\n            </ToggleButtonGroup>\n          )}\n        </Box>\n\n        {/* Tabs */}\n        <Tabs\n          value={activeTab}\n          onChange={(_, newValue) => setActiveTab(newValue)}\n          variant=\"fullWidth\"\n          sx={{ \n            mb: 2,\n            '& .MuiTab-root': {\n              minHeight: 64\n            }\n          }}\n        >\n          {tabs.map((tab, index) => (\n            <Tab\n              key={tab.key}\n              icon={tab.icon}\n              label={`${tab.label} (${groupedCouriers[tab.key]?.length || 0})`}\n              iconPosition=\"start\"\n              sx={{\n                '&.Mui-selected': {\n                  color: tab.color\n                }\n              }}\n            />\n          ))}\n        </Tabs>\n\n        {/* Courier Options */}\n        <RadioGroup\n          value={selectedCourierId}\n          onChange={(e) => onSelect(e.target.value)}\n        >\n          {currentCouriers.length === 0 ? (\n            <Box py={4} textAlign=\"center\">\n              <Typography color=\"text.secondary\">\n                No {tabs[activeTab]?.label.toLowerCase()} delivery options available\n              </Typography>\n            </Box>\n          ) : (\n            currentCouriers.map((courier, index) => (\n              <React.Fragment key={courier.id}>\n                {index > 0 && <Divider sx={{ my: 1 }} />}\n                <FormControlLabel\n                  value={courier.id}\n                  control={<Radio />}\n                  label={\n                    <Box display=\"flex\" alignItems=\"center\" width=\"100%\" py={1}>\n                      {/* Courier Logo */}\n                      <Avatar\n                        src={`/courier-logos/${courier.courierCode}_logo.jpeg`}\n                        alt={courier.courierName}\n                        sx={{ width: 48, height: 48, mr: 2 }}\n                      >\n                        {courier.courierName[0]}\n                      </Avatar>\n\n                      {/* Courier Info */}\n                      <Box flex={1}>\n                        <Box display=\"flex\" alignItems=\"center\" flexWrap=\"wrap\">\n                          <Typography variant=\"subtitle1\" sx={{ fontWeight: 500 }}>\n                            {courier.courierName}\n                          </Typography>\n                          {courier.badges?.map(badge => renderBadge(badge))}\n                        </Box>\n                        <Typography variant=\"body2\" color=\"text.secondary\">\n                          {courier.serviceName}  {courier.estimatedDays} {courier.estimatedDays === 1 ? 'day' : 'days'}\n                        </Typography>\n                        <Box display=\"flex\" alignItems=\"center\" mt={0.5}>\n                          <Star size={14} fill=\"#FFC107\" color=\"#FFC107\" />\n                          <Typography variant=\"caption\" color=\"text.secondary\" sx={{ ml: 0.5 }}>\n                            {courier.rating.toFixed(1)}\n                          </Typography>\n                        </Box>\n                      </Box>\n\n                      {/* Price */}\n                      <Box textAlign=\"right\" ml={2}>\n                        <Typography variant=\"h6\" sx={{ fontWeight: 600 }}>\n                          {courier.currency} {courier.price.toFixed(2)}\n                        </Typography>\n                      </Box>\n                    </Box>\n                  }\n                  sx={{\n                    width: '100%',\n                    m: 0,\n                    p: 1,\n                    borderRadius: 1,\n                    '&:hover': {\n                      backgroundColor: 'action.hover'\n                    },\n                    '& .MuiFormControlLabel-label': {\n                      width: '100%'\n                    }\n                  }}\n                />\n              </React.Fragment>\n            ))\n          )}\n        </RadioGroup>\n\n        {/* Summary */}\n        {currentCouriers.length > 0 && (\n          <Box mt={2} p={2} bgcolor=\"background.default\" borderRadius={1}>\n            <Typography variant=\"caption\" color=\"text.secondary\">\n              Showing {currentCouriers.length} {tabs[activeTab]?.label.toLowerCase()} option{currentCouriers.length !== 1 ? 's' : ''}\n              {selectedCourierId && `  1 selected`}\n            </Typography>\n          </Box>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default ServiceSections;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\checkout\\TrustScoreIndicator.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Star' is defined but never used.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TrendingUp' is defined but never used.","line":3,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":26},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":159,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":159,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4700,4703],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4700,4703],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":163,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":163,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4901,4904],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4901,4904],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Box, Typography, LinearProgress, Tooltip, Chip } from '@mui/material';\nimport { Star, TrendingUp, CheckCircle } from '@mui/icons-material';\n\ninterface TrustScoreIndicatorProps {\n  score: number; // 0-100\n  size?: 'small' | 'medium' | 'large';\n  showLabel?: boolean;\n  showGrade?: boolean;\n  grade?: string; // A+, A, B+, etc.\n  variant?: 'default' | 'compact' | 'detailed';\n}\n\nexport const TrustScoreIndicator: React.FC<TrustScoreIndicatorProps> = ({\n  score,\n  size = 'medium',\n  showLabel = true,\n  showGrade = true,\n  grade,\n  variant = 'default',\n}) => {\n  // Calculate grade if not provided\n  const calculatedGrade = grade || getGrade(score);\n  \n  // Get color based on score\n  const getColor = (score: number): string => {\n    if (score >= 90) return '#4caf50'; // Green\n    if (score >= 80) return '#8bc34a'; // Light green\n    if (score >= 70) return '#ffc107'; // Yellow\n    if (score >= 60) return '#ff9800'; // Orange\n    return '#f44336'; // Red\n  };\n\n  // Get grade from score\n  function getGrade(score: number): string {\n    if (score >= 95) return 'A+';\n    if (score >= 90) return 'A';\n    if (score >= 85) return 'A-';\n    if (score >= 80) return 'B+';\n    if (score >= 75) return 'B';\n    if (score >= 70) return 'B-';\n    if (score >= 65) return 'C+';\n    if (score >= 60) return 'C';\n    return 'D';\n  }\n\n  // Size configurations\n  const sizeConfig = {\n    small: {\n      height: 4,\n      fontSize: '0.75rem',\n      gradeSize: 'small' as const,\n    },\n    medium: {\n      height: 8,\n      fontSize: '0.875rem',\n      gradeSize: 'medium' as const,\n    },\n    large: {\n      height: 12,\n      fontSize: '1rem',\n      gradeSize: 'medium' as const,\n    },\n  };\n\n  const config = sizeConfig[size];\n  const color = getColor(score);\n\n  // Compact variant\n  if (variant === 'compact') {\n    return (\n      <Tooltip title={`TrustScore: ${score}/100 - Grade ${calculatedGrade}`}>\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n          <Typography variant=\"caption\" fontWeight=\"bold\" sx={{ color }}>\n            {score}\n          </Typography>\n          <LinearProgress\n            variant=\"determinate\"\n            value={score}\n            sx={{\n              width: 60,\n              height: config.height,\n              borderRadius: 4,\n              backgroundColor: '#e0e0e0',\n              '& .MuiLinearProgress-bar': {\n                backgroundColor: color,\n              },\n            }}\n          />\n        </Box>\n      </Tooltip>\n    );\n  }\n\n  // Detailed variant\n  if (variant === 'detailed') {\n    return (\n      <Box>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 0.5 }}>\n          <Typography variant=\"body2\" fontWeight=\"medium\">\n            TrustScore\n          </Typography>\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n            <Typography variant=\"h6\" fontWeight=\"bold\" sx={{ color }}>\n              {score}\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              /100\n            </Typography>\n            {showGrade && (\n              <Chip\n                label={calculatedGrade}\n                size=\"small\"\n                sx={{\n                  backgroundColor: color,\n                  color: '#fff',\n                  fontWeight: 'bold',\n                  minWidth: 40,\n                }}\n              />\n            )}\n          </Box>\n        </Box>\n        <LinearProgress\n          variant=\"determinate\"\n          value={score}\n          sx={{\n            height: config.height,\n            borderRadius: 4,\n            backgroundColor: '#e0e0e0',\n            '& .MuiLinearProgress-bar': {\n              backgroundColor: color,\n              borderRadius: 4,\n            },\n          }}\n        />\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', mt: 0.5 }}>\n          <Typography variant=\"caption\" color=\"text.secondary\">\n            Based on {score >= 80 ? 'excellent' : score >= 60 ? 'good' : 'fair'} performance\n          </Typography>\n          {score >= 90 && (\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.5 }}>\n              <CheckCircle sx={{ fontSize: 14, color: '#4caf50' }} />\n              <Typography variant=\"caption\" sx={{ color: '#4caf50', fontWeight: 'medium' }}>\n                Top Rated\n              </Typography>\n            </Box>\n          )}\n        </Box>\n      </Box>\n    );\n  }\n\n  // Default variant\n  return (\n    <Box>\n      {showLabel && (\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 0.5 }}>\n          <Typography variant={config.fontSize as any} color=\"text.secondary\">\n            TrustScore\n          </Typography>\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.5 }}>\n            <Typography variant={config.fontSize as any} fontWeight=\"bold\" sx={{ color }}>\n              {score}/100\n            </Typography>\n            {showGrade && (\n              <Chip\n                label={calculatedGrade}\n                size={config.gradeSize}\n                sx={{\n                  backgroundColor: color,\n                  color: '#fff',\n                  fontWeight: 'bold',\n                  height: size === 'small' ? 20 : 24,\n                }}\n              />\n            )}\n          </Box>\n        </Box>\n      )}\n      <LinearProgress\n        variant=\"determinate\"\n        value={score}\n        sx={{\n          height: config.height,\n          borderRadius: 4,\n          backgroundColor: '#e0e0e0',\n          '& .MuiLinearProgress-bar': {\n            backgroundColor: color,\n            borderRadius: 4,\n          },\n        }}\n      />\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\checkout\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\common\\EmptyState.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\common\\ErrorBoundary.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ErrorOutline' is defined but never used.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":15}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { Component, ReactNode } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Button,\n  Alert,\n  Collapse,\n  Stack,\n} from '@mui/material';\nimport {\n  ErrorOutline,\n  Refresh,\n  BugReport,\n  ExpandMore,\n  ExpandLess,\n  Home,\n  SearchOff,\n} from '@mui/icons-material';\n\ninterface Props {\n  children: ReactNode;\n  fallback?: ReactNode;\n  onError?: (error: Error, errorInfo: React.ErrorInfo) => void;\n  showDetails?: boolean;\n}\n\ninterface State {\n  hasError: boolean;\n  error: Error | null;\n  errorInfo: React.ErrorInfo | null;\n  showDetails: boolean;\n  retryCount: number;\n}\n\nclass ErrorBoundary extends Component<Props, State> {\n  private maxRetries = 3;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      error: null,\n      errorInfo: null,\n      showDetails: false,\n      retryCount: 0,\n    };\n  }\n\n  static getDerivedStateFromError(error: Error): Partial<State> {\n    return {\n      hasError: true,\n      error,\n    };\n  }\n\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n    this.setState({\n      error,\n      errorInfo,\n    });\n\n    // Log error to console in development\n    if (process.env.NODE_ENV === 'development') {\n      console.error('ErrorBoundary caught an error:', error, errorInfo);\n    }\n\n    // Call custom error handler if provided\n    this.props.onError?.(error, errorInfo);\n\n    // In production, you might want to send this to an error reporting service\n    if (process.env.NODE_ENV === 'production') {\n      // Example: Sentry.captureException(error, { extra: errorInfo });\n    }\n  }\n\n  handleRetry = () => {\n    if (this.state.retryCount < this.maxRetries) {\n      this.setState(prevState => ({\n        hasError: false,\n        error: null,\n        errorInfo: null,\n        retryCount: prevState.retryCount + 1,\n      }));\n    }\n  };\n\n  handleReset = () => {\n    this.setState({\n      hasError: false,\n      error: null,\n      errorInfo: null,\n      retryCount: 0,\n    });\n  };\n\n  handleGoHome = () => {\n    window.location.href = '/dashboard';\n  };\n\n  toggleDetails = () => {\n    this.setState(prevState => ({\n      showDetails: !prevState.showDetails,\n    }));\n  };\n\n  getErrorMessage = (error: Error): string => {\n    // Provide user-friendly error messages based on error types\n    if (error.message.includes('ChunkLoadError') || error.message.includes('Loading chunk')) {\n      return 'Failed to load application resources. This might be due to a network issue or an app update.';\n    }\n    \n    if (error.message.includes('Network Error') || error.message.includes('fetch')) {\n      return 'Network connection error. Please check your internet connection and try again.';\n    }\n    \n    if (error.message.includes('Unauthorized') || error.message.includes('401')) {\n      return 'Your session has expired. Please log in again.';\n    }\n    \n    if (error.message.includes('403') || error.message.includes('Forbidden')) {\n      return 'You do not have permission to access this resource.';\n    }\n    \n    if (error.message.includes('404') || error.message.includes('Not Found')) {\n      return 'The requested resource was not found.';\n    }\n    \n    if (error.message.includes('500') || error.message.includes('Internal Server Error')) {\n      return 'Server error occurred. Please try again later.';\n    }\n\n    return 'An unexpected error occurred. Please try refreshing the page.';\n  };\n\n  render() {\n    if (this.state.hasError) {\n      // Use custom fallback if provided\n      if (this.props.fallback) {\n        return this.props.fallback;\n      }\n\n      const { error, errorInfo, retryCount } = this.state;\n      const canRetry = retryCount < this.maxRetries;\n      const errorMessage = error ? this.getErrorMessage(error) : 'An unknown error occurred';\n\n      return (\n        <Box\n          sx={{\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n            minHeight: '100vh',\n            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n            p: 3,\n          }}\n        >\n          <Card sx={{ maxWidth: 500, width: '100%', mx: 'auto' }}>\n            <CardContent sx={{ p: 4 }}>\n              <Stack spacing={3} alignItems=\"center\">\n                {/* Performile Logo */}\n                <Box\n                  sx={{\n                    mb: 2,\n                    display: 'flex',\n                    justifyContent: 'center',\n                    alignItems: 'center',\n                  }}\n                >\n                  <img\n                    src=\"/Performile-lastmile performance index.ico\"\n                    alt=\"Performile Logo\"\n                    style={{\n                      width: '64px',\n                      height: '64px',\n                      objectFit: 'contain',\n                    }}\n                  />\n                </Box>\n\n                {/* Error Icon - Magnifying Glass */}\n                <Box\n                  sx={{\n                    position: 'relative',\n                    width: 120,\n                    height: 120,\n                    borderRadius: 3,\n                    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                  }}\n                >\n                  <SearchOff\n                    sx={{\n                      fontSize: 60,\n                      color: 'white',\n                    }}\n                  />\n                </Box>\n\n                {/* Error Title */}\n                <Typography variant=\"h5\" component=\"h2\" textAlign=\"center\" fontWeight=\"bold\">\n                  Oops! Something went wrong\n                </Typography>\n\n                {/* User-friendly error message */}\n                <Alert severity=\"error\" sx={{ width: '100%' }}>\n                  {errorMessage}\n                </Alert>\n\n                {/* Retry information */}\n                {retryCount > 0 && (\n                  <Typography variant=\"body2\" color=\"text.secondary\" textAlign=\"center\">\n                    Retry attempt: {retryCount} of {this.maxRetries}\n                  </Typography>\n                )}\n\n                {/* Action buttons */}\n                <Stack direction=\"row\" spacing={2} flexWrap=\"wrap\" justifyContent=\"center\">\n                  {canRetry && (\n                    <Button\n                      variant=\"contained\"\n                      startIcon={<Refresh />}\n                      onClick={this.handleRetry}\n                      color=\"primary\"\n                    >\n                      Try Again\n                    </Button>\n                  )}\n                  \n                  <Button\n                    variant=\"outlined\"\n                    startIcon={<Home />}\n                    onClick={this.handleGoHome}\n                  >\n                    Go to Dashboard\n                  </Button>\n\n                  <Button\n                    variant=\"outlined\"\n                    onClick={() => window.location.reload()}\n                    startIcon={<Refresh />}\n                  >\n                    Refresh Page\n                  </Button>\n                </Stack>\n\n                {/* Technical details toggle */}\n                {(this.props.showDetails || process.env.NODE_ENV === 'development') && (\n                  <>\n                    <Button\n                      variant=\"text\"\n                      startIcon={<BugReport />}\n                      endIcon={this.state.showDetails ? <ExpandLess /> : <ExpandMore />}\n                      onClick={this.toggleDetails}\n                      size=\"small\"\n                    >\n                      Technical Details\n                    </Button>\n\n                    <Collapse in={this.state.showDetails} sx={{ width: '100%' }}>\n                      <Card variant=\"outlined\" sx={{ mt: 2 }}>\n                        <CardContent>\n                          <Typography variant=\"subtitle2\" gutterBottom>\n                            Error Details:\n                          </Typography>\n                          <Typography\n                            variant=\"body2\"\n                            component=\"pre\"\n                            sx={{\n                              whiteSpace: 'pre-wrap',\n                              wordBreak: 'break-word',\n                              fontFamily: 'monospace',\n                              fontSize: '0.75rem',\n                              backgroundColor: 'grey.100',\n                              p: 1,\n                              borderRadius: 1,\n                              maxHeight: 200,\n                              overflow: 'auto',\n                            }}\n                          >\n                            {error?.toString()}\n                          </Typography>\n                          \n                          {errorInfo && (\n                            <>\n                              <Typography variant=\"subtitle2\" gutterBottom sx={{ mt: 2 }}>\n                                Component Stack:\n                              </Typography>\n                              <Typography\n                                variant=\"body2\"\n                                component=\"pre\"\n                                sx={{\n                                  whiteSpace: 'pre-wrap',\n                                  wordBreak: 'break-word',\n                                  fontFamily: 'monospace',\n                                  fontSize: '0.75rem',\n                                  backgroundColor: 'grey.100',\n                                  p: 1,\n                                  borderRadius: 1,\n                                  maxHeight: 200,\n                                  overflow: 'auto',\n                                }}\n                              >\n                                {errorInfo.componentStack}\n                              </Typography>\n                            </>\n                          )}\n                        </CardContent>\n                      </Card>\n                    </Collapse>\n                  </>\n                )}\n              </Stack>\n            </CardContent>\n          </Card>\n        </Box>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\common\\GlobalSearch.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":240,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":240,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6433,6436],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6433,6436],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":266,"column":42,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[7488,7531],"text":"\n                    No results found for &quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[7488,7531],"text":"\n                    No results found for &ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[7488,7531],"text":"\n                    No results found for &#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[7488,7531],"text":"\n                    No results found for &rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":266,"column":50,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[7538,7558],"text":"&quot;\n                  "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[7538,7558],"text":"&ldquo;\n                  "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[7538,7558],"text":"&#34;\n                  "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[7538,7558],"text":"&rdquo;\n                  "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\nimport {\n  Box,\n  TextField,\n  Paper,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Typography,\n  Chip,\n  InputAdornment,\n  Divider,\n  Fade,\n  CircularProgress,\n  IconButton,\n} from '@mui/material';\nimport {\n  Search,\n  LocalShipping,\n  Store,\n  Person,\n  Receipt,\n  Close,\n  History,\n} from '@mui/icons-material';\nimport { useQuery } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport { useNavigate } from 'react-router-dom';\n\ninterface SearchResult {\n  id: string;\n  type: 'order' | 'courier' | 'store' | 'user';\n  title: string;\n  subtitle?: string;\n  metadata?: string;\n  url: string;\n}\n\ninterface GlobalSearchProps {\n  onClose?: () => void;\n  placeholder?: string;\n  autoFocus?: boolean;\n}\n\nconst GlobalSearch: React.FC<GlobalSearchProps> = ({\n  onClose,\n  placeholder = \"Search orders, couriers, stores...\",\n  autoFocus = false,\n}) => {\n  const [query, setQuery] = useState('');\n  const [isOpen, setIsOpen] = useState(false);\n  const [recentSearches, setRecentSearches] = useState<string[]>([]);\n  const inputRef = useRef<HTMLInputElement>(null);\n  const navigate = useNavigate();\n\n  // Load recent searches from localStorage\n  useEffect(() => {\n    const saved = localStorage.getItem('performile_recent_searches');\n    if (saved) {\n      try {\n        setRecentSearches(JSON.parse(saved));\n      } catch (error) {\n        console.error('Failed to parse recent searches:', error);\n      }\n    }\n  }, []);\n\n  // Save recent searches to localStorage\n  const saveRecentSearch = (searchQuery: string) => {\n    if (!searchQuery.trim()) return;\n    \n    const updated = [searchQuery, ...recentSearches.filter(s => s !== searchQuery)].slice(0, 5);\n    setRecentSearches(updated);\n    localStorage.setItem('performile_recent_searches', JSON.stringify(updated));\n  };\n\n  // Search API call\n  const { data: searchResults = [], isLoading } = useQuery({\n    queryKey: ['globalSearch', query],\n    queryFn: async () => {\n      if (!query.trim() || query.length < 2) return [];\n\n      const response = await apiClient.get(`/search?q=${encodeURIComponent(query)}&limit=10`);\n      return response.data.results || [];\n    },\n    enabled: query.length >= 2,\n    staleTime: 30000,\n  });\n\n  const getIcon = (type: string) => {\n    switch (type) {\n      case 'order':\n        return <Receipt />;\n      case 'courier':\n        return <LocalShipping />;\n      case 'store':\n        return <Store />;\n      case 'user':\n        return <Person />;\n      default:\n        return <Search />;\n    }\n  };\n\n  const getTypeColor = (type: string) => {\n    switch (type) {\n      case 'order':\n        return 'primary';\n      case 'courier':\n        return 'success';\n      case 'store':\n        return 'warning';\n      case 'user':\n        return 'info';\n      default:\n        return 'default';\n    }\n  };\n\n  const handleResultClick = (result: SearchResult) => {\n    saveRecentSearch(query);\n    navigate(result.url);\n    setQuery('');\n    setIsOpen(false);\n    onClose?.();\n  };\n\n  const handleRecentSearchClick = (searchQuery: string) => {\n    setQuery(searchQuery);\n    setIsOpen(true);\n  };\n\n  const clearRecentSearches = () => {\n    setRecentSearches([]);\n    localStorage.removeItem('performile_recent_searches');\n  };\n\n  const handleKeyDown = (event: React.KeyboardEvent) => {\n    if (event.key === 'Escape') {\n      setQuery('');\n      setIsOpen(false);\n      onClose?.();\n    }\n  };\n\n  const showResults = isOpen && (query.length >= 2 || recentSearches.length > 0);\n\n  return (\n    <Box sx={{ position: 'relative', width: '100%', maxWidth: 600 }}>\n      <TextField\n        ref={inputRef}\n        fullWidth\n        placeholder={placeholder}\n        value={query}\n        onChange={(e) => {\n          setQuery(e.target.value);\n          setIsOpen(true);\n        }}\n        onFocus={() => setIsOpen(true)}\n        onKeyDown={handleKeyDown}\n        autoFocus={autoFocus}\n        sx={{\n          '& .MuiOutlinedInput-root': {\n            bgcolor: 'white !important',\n            borderRadius: 2,\n          },\n          '& .MuiInputBase-input': {\n            bgcolor: 'white !important',\n          }\n        }}\n        InputProps={{\n          startAdornment: (\n            <InputAdornment position=\"start\">\n              <Search />\n            </InputAdornment>\n          ),\n          endAdornment: (\n            <InputAdornment position=\"end\">\n              {isLoading && <CircularProgress size={20} />}\n              {(query || isOpen) && (\n                <IconButton\n                  size=\"small\"\n                  onClick={() => {\n                    setQuery('');\n                    setIsOpen(false);\n                    onClose?.();\n                  }}\n                >\n                  <Close />\n                </IconButton>\n              )}\n            </InputAdornment>\n          ),\n        }}\n      />\n\n      <Fade in={showResults}>\n        <Paper\n          elevation={8}\n          sx={{\n            position: 'absolute',\n            top: '100%',\n            left: 0,\n            right: 0,\n            zIndex: 1300,\n            mt: 1,\n            maxHeight: 400,\n            overflow: 'auto',\n          }}\n        >\n          {query.length >= 2 ? (\n            // Search results\n            <>\n              {searchResults.length > 0 ? (\n                <List dense>\n                  {searchResults.map((result: SearchResult) => (\n                    <ListItem\n                      key={`${result.type}-${result.id}`}\n                      button\n                      onClick={() => handleResultClick(result)}\n                      sx={{\n                        '&:hover': {\n                          backgroundColor: 'action.hover',\n                        },\n                      }}\n                    >\n                      <ListItemIcon>\n                        {getIcon(result.type)}\n                      </ListItemIcon>\n                      <ListItemText\n                        primary={\n                          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                            <Typography variant=\"body2\" noWrap>\n                              {result.title}\n                            </Typography>\n                            <Chip\n                              label={result.type}\n                              size=\"small\"\n                              color={getTypeColor(result.type) as any}\n                              variant=\"outlined\"\n                            />\n                          </Box>\n                        }\n                        secondary={\n                          <Box>\n                            {result.subtitle && (\n                              <Typography variant=\"caption\" color=\"text.secondary\">\n                                {result.subtitle}\n                              </Typography>\n                            )}\n                            {result.metadata && (\n                              <Typography variant=\"caption\" color=\"text.secondary\" sx={{ ml: 1 }}>\n                                 {result.metadata}\n                              </Typography>\n                            )}\n                          </Box>\n                        }\n                      />\n                    </ListItem>\n                  ))}\n                </List>\n              ) : (\n                <Box sx={{ p: 3, textAlign: 'center' }}>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    No results found for \"{query}\"\n                  </Typography>\n                </Box>\n              )}\n            </>\n          ) : (\n            // Recent searches\n            recentSearches.length > 0 && (\n              <>\n                <Box sx={{ p: 2, pb: 1, display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                  <Typography variant=\"subtitle2\" color=\"text.secondary\">\n                    Recent Searches\n                  </Typography>\n                  <IconButton size=\"small\" onClick={clearRecentSearches}>\n                    <Close />\n                  </IconButton>\n                </Box>\n                <List dense>\n                  {recentSearches.map((searchQuery) => (\n                    <ListItem\n                      key={searchQuery}\n                      button\n                      onClick={() => handleRecentSearchClick(searchQuery)}\n                      sx={{\n                        '&:hover': {\n                          backgroundColor: 'action.hover',\n                        },\n                      }}\n                    >\n                      <ListItemIcon>\n                        <History />\n                      </ListItemIcon>\n                      <ListItemText\n                        primary={searchQuery}\n                        primaryTypographyProps={{\n                          variant: 'body2',\n                          color: 'text.secondary',\n                        }}\n                      />\n                    </ListItem>\n                  ))}\n                </List>\n              </>\n            )\n          )}\n\n          {/* Search tips */}\n          <Divider />\n          <Box sx={{ p: 2 }}>\n            <Typography variant=\"caption\" color=\"text.secondary\">\n              Search by tracking number, order ID, store name, or courier name\n            </Typography>\n          </Box>\n        </Paper>\n      </Fade>\n\n      {/* Backdrop to close search */}\n      {showResults && (\n        <Box\n          sx={{\n            position: 'fixed',\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n            zIndex: 1200,\n          }}\n          onClick={() => {\n            setIsOpen(false);\n            onClose?.();\n          }}\n        />\n      )}\n    </Box>\n  );\n};\n\nexport default GlobalSearch;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\common\\LoadingSpinner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\common\\NotificationSystem.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":36,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[779,782],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[779,782],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  Badge,\n  IconButton,\n  Popover,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Typography,\n  Divider,\n  Button,\n} from '@mui/material';\nimport {\n  Notifications,\n  NotificationsActive,\n  LocalShipping,\n  Receipt,\n  CheckCircle,\n  Info,\n  Close,\n  MarkEmailRead,\n} from '@mui/icons-material';\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport { useAuthStore } from '@/store/authStore';\nimport Pusher from 'pusher-js';\nimport toast from 'react-hot-toast';\n\ninterface Notification {\n  id: string;\n  type: 'order_update' | 'new_order' | 'courier_assigned' | 'rating_received' | 'system';\n  title: string;\n  message: string;\n  data?: any;\n  read: boolean;\n  created_at: string;\n  user_id: string;\n}\n\ninterface NotificationSystemProps {\n  maxVisible?: number;\n}\n\nconst NotificationSystem: React.FC<NotificationSystemProps> = ({\n  maxVisible = 50,\n}) => {\n  const [anchorEl, setAnchorEl] = useState<HTMLButtonElement | null>(null);\n  const [notifications, setNotifications] = useState<Notification[]>([]);\n  const { user } = useAuthStore();\n  const queryClient = useQueryClient();\n\n  // Fetch notifications\n  const { data: notificationsData, refetch } = useQuery({\n    queryKey: ['notifications'],\n    queryFn: async () => {\n      const response = await apiClient.get('/notifications');\n      return response.data;\n    },\n    enabled: !!user,\n    refetchInterval: 30000, // Refetch every 30 seconds as fallback\n  });\n\n  // Update local state when data changes\n  useEffect(() => {\n    if (notificationsData) {\n      // Ensure we always work with an array\n      const notifArray = Array.isArray(notificationsData) \n        ? notificationsData \n        : Array.isArray(notificationsData?.data) \n        ? notificationsData.data \n        : [];\n      setNotifications(notifArray);\n    }\n  }, [notificationsData]);\n\n  // Real-time subscription with Pusher\n  useEffect(() => {\n    if (!user) return;\n\n    const pusherKey = import.meta.env.VITE_PUSHER_KEY;\n    const pusherCluster = import.meta.env.VITE_PUSHER_CLUSTER;\n\n    if (!pusherKey || !pusherCluster) {\n      console.warn('[NotificationSystem] Pusher not configured, falling back to polling');\n      return;\n    }\n\n    console.log('[NotificationSystem] Connecting to Pusher for real-time notifications');\n\n    // Initialize Pusher\n    const pusher = new Pusher(pusherKey, {\n      cluster: pusherCluster,\n    });\n\n    // Subscribe to user's notification channel\n    const channel = pusher.subscribe(`user-${user.user_id}`);\n\n    // Listen for new notifications\n    channel.bind('new-notification', (data: Notification) => {\n      console.log('[NotificationSystem] Received notification:', data);\n      \n      // Add to notifications list\n      setNotifications(prev => [data, ...prev].slice(0, maxVisible));\n      \n      // Show toast notification\n      showToastNotification(data);\n      \n      // Invalidate related queries\n      queryClient.invalidateQueries({ queryKey: ['orders'] });\n      queryClient.invalidateQueries({ queryKey: ['dashboard'] });\n    });\n\n    // Cleanup\n    return () => {\n      channel.unbind_all();\n      channel.unsubscribe();\n      pusher.disconnect();\n    };\n  }, [user, maxVisible, queryClient]);\n\n  const showToastNotification = (notification: Notification) => {\n    const toastOptions = {\n      duration: 5000,\n      position: 'top-right' as const,\n    };\n\n    switch (notification.type) {\n      case 'order_update':\n        toast.success(notification.title, toastOptions);\n        break;\n      case 'new_order':\n        toast.success(notification.title, toastOptions);\n        break;\n      case 'courier_assigned':\n        toast(notification.title, toastOptions);\n        break;\n      case 'rating_received':\n        toast.success(notification.title, toastOptions);\n        break;\n      case 'system':\n        toast(notification.title, toastOptions);\n        break;\n      default:\n        toast(notification.title, toastOptions);\n    }\n  };\n\n  const getNotificationIcon = (type: string) => {\n    switch (type) {\n      case 'order_update':\n        return <Receipt color=\"primary\" />;\n      case 'new_order':\n        return <Receipt color=\"success\" />;\n      case 'courier_assigned':\n        return <LocalShipping color=\"info\" />;\n      case 'rating_received':\n        return <CheckCircle color=\"success\" />;\n      case 'system':\n        return <Info color=\"warning\" />;\n      default:\n        return <Notifications />;\n    }\n  };\n\n  const getNotificationColor = (type: string) => {\n    switch (type) {\n      case 'order_update':\n        return 'primary';\n      case 'new_order':\n        return 'success';\n      case 'courier_assigned':\n        return 'info';\n      case 'rating_received':\n        return 'success';\n      case 'system':\n        return 'warning';\n      default:\n        return 'default';\n    }\n  };\n\n  const markAsRead = async (notificationId: string) => {\n    try {\n      await apiClient.patch(`/notifications/${notificationId}/read`);\n      \n      setNotifications(prev =>\n        prev.map(n => n.id === notificationId ? { ...n, read: true } : n)\n      );\n      \n      refetch();\n    } catch (error) {\n      console.error('Failed to mark notification as read:', error);\n    }\n  };\n\n  const markAllAsRead = async () => {\n    try {\n      await apiClient.patch('/notifications/read-all');\n      \n      setNotifications(prev =>\n        prev.map(n => ({ ...n, read: true }))\n      );\n      \n      refetch();\n    } catch (error) {\n      console.error('Failed to mark all notifications as read:', error);\n    }\n  };\n\n  const deleteNotification = async (notificationId: string) => {\n    try {\n      await apiClient.delete(`/notifications/${notificationId}`);\n      \n      setNotifications(prev =>\n        prev.filter(n => n.id !== notificationId)\n      );\n      \n      refetch();\n    } catch (error) {\n      console.error('Failed to delete notification:', error);\n    }\n  };\n\n  const unreadCount = Array.isArray(notifications) ? notifications.filter(n => !n.read).length : 0;\n  const isOpen = Boolean(anchorEl);\n\n  const formatTime = (timestamp: string) => {\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diffMs = now.getTime() - date.getTime();\n    const diffMins = Math.floor(diffMs / 60000);\n    const diffHours = Math.floor(diffMs / 3600000);\n    const diffDays = Math.floor(diffMs / 86400000);\n\n    if (diffMins < 1) return 'Just now';\n    if (diffMins < 60) return `${diffMins}m ago`;\n    if (diffHours < 24) return `${diffHours}h ago`;\n    if (diffDays < 7) return `${diffDays}d ago`;\n    return date.toLocaleDateString();\n  };\n\n  return (\n    <>\n      <IconButton\n        onClick={(event) => setAnchorEl(event.currentTarget)}\n        sx={{\n          position: 'relative',\n          color: unreadCount > 0 ? '#667eea' : '#666',\n          '&:hover': {\n            color: '#667eea',\n            backgroundColor: 'rgba(102, 126, 234, 0.1)',\n          },\n        }}\n      >\n        <Badge badgeContent={unreadCount} color=\"error\" max={99}>\n          {unreadCount > 0 ? (\n            <NotificationsActive />\n          ) : (\n            <Notifications />\n          )}\n        </Badge>\n      </IconButton>\n\n      <Popover\n        open={isOpen}\n        anchorEl={anchorEl}\n        onClose={() => setAnchorEl(null)}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'right',\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'right',\n        }}\n        PaperProps={{\n          sx: {\n            width: 400,\n            maxHeight: 600,\n            mt: 1,\n          },\n        }}\n      >\n        <Box sx={{ p: 2, borderBottom: 1, borderColor: 'divider' }}>\n          <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n            <Typography variant=\"h6\">\n              Notifications\n            </Typography>\n            {unreadCount > 0 && (\n              <Button\n                size=\"small\"\n                startIcon={<MarkEmailRead />}\n                onClick={markAllAsRead}\n              >\n                Mark all read\n              </Button>\n            )}\n          </Box>\n        </Box>\n\n        {!Array.isArray(notifications) || notifications.length === 0 ? (\n          <Box sx={{ p: 4, textAlign: 'center' }}>\n            <Notifications sx={{ fontSize: 48, color: 'text.secondary', mb: 2 }} />\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              No notifications yet\n            </Typography>\n          </Box>\n        ) : (\n          <List sx={{ p: 0, maxHeight: 400, overflow: 'auto' }}>\n            {notifications.map((notification, index) => (\n              <React.Fragment key={notification.id}>\n                <ListItem\n                  sx={{\n                    backgroundColor: notification.read ? 'transparent' : 'action.hover',\n                    '&:hover': {\n                      backgroundColor: 'action.selected',\n                    },\n                    cursor: 'pointer',\n                  }}\n                  onClick={() => !notification.read && markAsRead(notification.id)}\n                >\n                  <ListItemIcon>\n                    <Box\n                      sx={{\n                        width: 32,\n                        height: 32,\n                        bgcolor: `${getNotificationColor(notification.type)}.light`,\n                        display: 'flex',\n                        justifyContent: 'center',\n                        alignItems: 'center',\n                      }}\n                    >\n                      {getNotificationIcon(notification.type)}\n                    </Box>\n                  </ListItemIcon>\n                  <ListItemText\n                    primary={\n                      <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                        <Typography\n                          variant=\"body2\"\n                          sx={{\n                            fontWeight: notification.read ? 'normal' : 'bold',\n                            flex: 1,\n                          }}\n                        >\n                          {notification.title}\n                        </Typography>\n                        {!notification.read && (\n                          <Box\n                            sx={{\n                              width: 8,\n                              height: 8,\n                              borderRadius: '50%',\n                              bgcolor: 'primary.main',\n                            }}\n                          />\n                        )}\n                      </Box>\n                    }\n                    secondary={\n                      <Box>\n                        <Typography variant=\"caption\" color=\"text.secondary\">\n                          {notification.message}\n                        </Typography>\n                        <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: 'block', mt: 0.5 }}>\n                          {formatTime(notification.created_at)}\n                        </Typography>\n                      </Box>\n                    }\n                  />\n                  <IconButton\n                    size=\"small\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      deleteNotification(notification.id);\n                    }}\n                    sx={{ ml: 1 }}\n                  >\n                    <Close fontSize=\"small\" />\n                  </IconButton>\n                </ListItem>\n                {index < notifications.length - 1 && <Divider />}\n              </React.Fragment>\n            ))}\n          </List>\n        )}\n\n        {notifications.length > 0 && (\n          <>\n            <Divider />\n            <Box sx={{ p: 2, textAlign: 'center' }}>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Showing {Math.min(notifications.length, maxVisible)} notifications\n              </Typography>\n            </Box>\n          </>\n        )}\n      </Popover>\n    </>\n  );\n};\n\nexport default NotificationSystem;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\common\\ResponsiveContainer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\common\\ResponsiveDataGrid.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":32,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[489,492],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[489,492],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[731,734],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[731,734],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[842,845],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[842,845],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":48,"column":9,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":12,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[927,930],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[927,930],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":52,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1023,1026],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1023,1026],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":54,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1084,1087],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1084,1087],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":55,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":55,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1129,1132],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1129,1132],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":56,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":56,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1172,1175],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1172,1175],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":57,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1225,1228],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1225,1228],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":76,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":76,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1744,1747],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1744,1747],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":79,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":79,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1905,1908],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1905,1908],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Paper,\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  IconButton,\n  Menu,\n  MenuItem,\n  useTheme,\n  useMediaQuery,\n  Collapse,\n} from '@mui/material';\nimport {\n  MoreVert,\n  ExpandMore,\n  ExpandLess,\n} from '@mui/icons-material';\n\ninterface Column {\n  id: string;\n  label: string;\n  minWidth?: number;\n  align?: 'right' | 'left' | 'center';\n  format?: (value: any) => string | React.ReactNode;\n  sortable?: boolean;\n  hiddenOnMobile?: boolean;\n  priority?: 'high' | 'medium' | 'low'; // For mobile column prioritization\n}\n\ninterface Action {\n  label: string;\n  icon?: React.ReactNode;\n  onClick: (row: any) => void;\n  color?: 'primary' | 'secondary' | 'error' | 'warning' | 'info' | 'success';\n  disabled?: (row: any) => boolean;\n}\n\ninterface ResponsiveDataGridProps {\n  columns: Column[];\n  rows: any[];\n  actions?: Action[];\n  loading?: boolean;\n  emptyMessage?: string;\n  onRowClick?: (row: any) => void;\n  keyField?: string;\n  mobileCardTitle?: (row: any) => string;\n  mobileCardSubtitle?: (row: any) => string;\n  mobileCardAvatar?: (row: any) => React.ReactNode;\n  expandableContent?: (row: any) => React.ReactNode;\n}\n\nconst ResponsiveDataGrid: React.FC<ResponsiveDataGridProps> = ({\n  columns,\n  rows,\n  actions = [],\n  loading = false,\n  emptyMessage = 'No data available',\n  onRowClick,\n  keyField = 'id',\n  mobileCardTitle,\n  mobileCardSubtitle,\n  mobileCardAvatar,\n  expandableContent,\n}) => {\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('md'));\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n  const [selectedRow, setSelectedRow] = useState<any>(null);\n  const [expandedRows, setExpandedRows] = useState<Set<string>>(new Set());\n\n  const handleActionClick = (event: React.MouseEvent<HTMLElement>, row: any) => {\n    event.stopPropagation();\n    setAnchorEl(event.currentTarget);\n    setSelectedRow(row);\n  };\n\n  const handleActionClose = () => {\n    setAnchorEl(null);\n    setSelectedRow(null);\n  };\n\n  const handleActionItemClick = (action: Action) => {\n    if (selectedRow) {\n      action.onClick(selectedRow);\n    }\n    handleActionClose();\n  };\n\n  const toggleRowExpansion = (rowId: string) => {\n    const newExpanded = new Set(expandedRows);\n    if (newExpanded.has(rowId)) {\n      newExpanded.delete(rowId);\n    } else {\n      newExpanded.add(rowId);\n    }\n    setExpandedRows(newExpanded);\n  };\n\n  const getVisibleColumns = () => {\n    if (isMobile) {\n      return columns.filter(col => !col.hiddenOnMobile);\n    }\n    return columns;\n  };\n\n  const getPriorityColumns = () => {\n    return columns\n      .filter(col => col.priority === 'high')\n      .slice(0, 2); // Show max 2 high priority columns on mobile\n  };\n\n  if (loading) {\n    return (\n      <Box sx={{ p: 3, textAlign: 'center' }}>\n        <Typography>Loading...</Typography>\n      </Box>\n    );\n  }\n\n  if (rows.length === 0) {\n    return (\n      <Box sx={{ p: 3, textAlign: 'center' }}>\n        <Typography color=\"text.secondary\">{emptyMessage}</Typography>\n      </Box>\n    );\n  }\n\n  // Mobile Card View\n  if (isMobile) {\n    return (\n      <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2 }}>\n        {rows.map((row) => {\n          const rowId = row[keyField];\n          const isExpanded = expandedRows.has(rowId);\n          const priorityColumns = getPriorityColumns();\n          \n          return (\n            <Card\n              key={rowId}\n              sx={{\n                cursor: onRowClick ? 'pointer' : 'default',\n                '&:hover': {\n                  boxShadow: theme.shadows[4],\n                },\n              }}\n              onClick={() => onRowClick?.(row)}\n            >\n              <CardContent sx={{ pb: 1 }}>\n                {/* Card Header */}\n                <Box sx={{ display: 'flex', alignItems: 'flex-start', mb: 1 }}>\n                  {mobileCardAvatar && (\n                    <Box sx={{ mr: 2 }}>\n                      {mobileCardAvatar(row)}\n                    </Box>\n                  )}\n                  \n                  <Box sx={{ flexGrow: 1, minWidth: 0 }}>\n                    <Typography variant=\"subtitle1\" noWrap>\n                      {mobileCardTitle ? mobileCardTitle(row) : row[columns[0].id]}\n                    </Typography>\n                    {mobileCardSubtitle && (\n                      <Typography variant=\"body2\" color=\"text.secondary\" noWrap>\n                        {mobileCardSubtitle(row)}\n                      </Typography>\n                    )}\n                  </Box>\n\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                    {expandableContent && (\n                      <IconButton\n                        size=\"small\"\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          toggleRowExpansion(rowId);\n                        }}\n                      >\n                        {isExpanded ? <ExpandLess /> : <ExpandMore />}\n                      </IconButton>\n                    )}\n                    \n                    {actions.length > 0 && (\n                      <IconButton\n                        size=\"small\"\n                        onClick={(e) => handleActionClick(e, row)}\n                      >\n                        <MoreVert />\n                      </IconButton>\n                    )}\n                  </Box>\n                </Box>\n\n                {/* Priority Fields */}\n                {priorityColumns.length > 0 && (\n                  <Box sx={{ display: 'flex', gap: 2, flexWrap: 'wrap', mb: 1 }}>\n                    {priorityColumns.map((column) => (\n                      <Box key={column.id} sx={{ minWidth: 0 }}>\n                        <Typography variant=\"caption\" color=\"text.secondary\">\n                          {column.label}\n                        </Typography>\n                        <Typography variant=\"body2\" noWrap>\n                          {column.format ? column.format(row[column.id]) : row[column.id]}\n                        </Typography>\n                      </Box>\n                    ))}\n                  </Box>\n                )}\n\n                {/* Expandable Content */}\n                {expandableContent && (\n                  <Collapse in={isExpanded} timeout=\"auto\" unmountOnExit>\n                    <Box sx={{ mt: 2, pt: 2, borderTop: 1, borderColor: 'divider' }}>\n                      {expandableContent(row)}\n                    </Box>\n                  </Collapse>\n                )}\n              </CardContent>\n            </Card>\n          );\n        })}\n\n        {/* Action Menu */}\n        <Menu\n          anchorEl={anchorEl}\n          open={Boolean(anchorEl)}\n          onClose={handleActionClose}\n          transformOrigin={{ horizontal: 'right', vertical: 'top' }}\n          anchorOrigin={{ horizontal: 'right', vertical: 'bottom' }}\n        >\n          {actions.map((action, index) => (\n            <MenuItem\n              key={index}\n              onClick={() => handleActionItemClick(action)}\n              disabled={action.disabled?.(selectedRow)}\n              sx={{\n                color: action.color ? `${action.color}.main` : 'inherit',\n              }}\n            >\n              {action.icon && (\n                <Box sx={{ mr: 1, display: 'flex' }}>\n                  {action.icon}\n                </Box>\n              )}\n              {action.label}\n            </MenuItem>\n          ))}\n        </Menu>\n      </Box>\n    );\n  }\n\n  // Desktop Table View\n  return (\n    <TableContainer component={Paper} sx={{ maxHeight: 600 }}>\n      <Table stickyHeader>\n        <TableHead>\n          <TableRow>\n            {getVisibleColumns().map((column) => (\n              <TableCell\n                key={column.id}\n                align={column.align}\n                style={{ minWidth: column.minWidth }}\n                sx={{\n                  fontWeight: 'bold',\n                  bgcolor: 'background.paper',\n                }}\n              >\n                {column.label}\n              </TableCell>\n            ))}\n            {actions.length > 0 && (\n              <TableCell align=\"center\" sx={{ width: 80 }}>\n                Actions\n              </TableCell>\n            )}\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {rows.map((row) => (\n            <TableRow\n              key={row[keyField]}\n              hover\n              sx={{\n                cursor: onRowClick ? 'pointer' : 'default',\n                '&:hover': {\n                  bgcolor: 'action.hover',\n                },\n              }}\n              onClick={() => onRowClick?.(row)}\n            >\n              {getVisibleColumns().map((column) => (\n                <TableCell key={column.id} align={column.align}>\n                  {column.format ? column.format(row[column.id]) : row[column.id]}\n                </TableCell>\n              ))}\n              {actions.length > 0 && (\n                <TableCell align=\"center\">\n                  <IconButton\n                    size=\"small\"\n                    onClick={(e) => handleActionClick(e, row)}\n                  >\n                    <MoreVert />\n                  </IconButton>\n                </TableCell>\n              )}\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n\n      {/* Action Menu */}\n      <Menu\n        anchorEl={anchorEl}\n        open={Boolean(anchorEl)}\n        onClose={handleActionClose}\n        transformOrigin={{ horizontal: 'right', vertical: 'top' }}\n        anchorOrigin={{ horizontal: 'right', vertical: 'bottom' }}\n      >\n        {actions.map((action, index) => (\n          <MenuItem\n            key={index}\n            onClick={() => handleActionItemClick(action)}\n            disabled={action.disabled?.(selectedRow)}\n            sx={{\n              color: action.color ? `${action.color}.main` : 'inherit',\n            }}\n          >\n            {action.icon && (\n              <Box sx={{ mr: 1, display: 'flex' }}>\n                {action.icon}\n              </Box>\n            )}\n            {action.label}\n          </MenuItem>\n        ))}\n      </Menu>\n    </TableContainer>\n  );\n};\n\nexport default ResponsiveDataGrid;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\common\\UserAvatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\courier\\CourierIntegrations.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":47,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1515,1518],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1515,1518],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":60,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":60,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1903,1906],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1903,1906],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":77,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":77,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2410,2413],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2410,2413],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":90,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":90,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2800,2803],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2800,2803],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":105,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":105,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3199,3202],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3199,3202],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { Plus, Settings, Trash2, Power, RefreshCw, CheckCircle, XCircle } from 'lucide-react';\nimport { courierIntegrationsService } from '../../services/courierIntegrationsService';\n\ninterface CourierIntegration {\n  integration_id: string;\n  courier_id: string;\n  merchant_id: string;\n  api_base_url: string;\n  api_version?: string;\n  auth_type: string;\n  is_active: boolean;\n  is_sandbox: boolean;\n  last_sync_at?: string;\n  last_error?: string;\n  sync_frequency_minutes: number;\n  requests_per_minute: number;\n  requests_per_hour: number;\n  requests_today: number;\n  created_at: string;\n  courier?: {\n    courier_id: string;\n    courier_name: string;\n    courier_code: string;\n    logo_url?: string;\n  };\n}\n\nexport const CourierIntegrations: React.FC = () => {\n  const [integrations, setIntegrations] = useState<CourierIntegration[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [testingIntegration, setTestingIntegration] = useState<string | null>(null);\n  const [syncingIntegration, setSyncingIntegration] = useState<string | null>(null);\n\n  useEffect(() => {\n    loadIntegrations();\n  }, []);\n\n  const loadIntegrations = async () => {\n    try {\n      setLoading(true);\n      const data = await courierIntegrationsService.listIntegrations();\n      setIntegrations(data.integrations);\n      setError(null);\n    } catch (err: any) {\n      setError(err.message || 'Failed to load integrations');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleToggleActive = async (integrationId: string, currentStatus: boolean) => {\n    try {\n      await courierIntegrationsService.updateIntegration(integrationId, {\n        is_active: !currentStatus\n      });\n      await loadIntegrations();\n    } catch (err: any) {\n      alert(`Failed to toggle integration: ${err.message}`);\n    }\n  };\n\n  const handleTestConnection = async (integrationId: string) => {\n    try {\n      setTestingIntegration(integrationId);\n      const result = await courierIntegrationsService.testIntegration(integrationId);\n      \n      if (result.success) {\n        alert('Connection test successful!');\n      } else {\n        alert(`Connection test failed: ${result.message}`);\n      }\n      \n      await loadIntegrations();\n    } catch (err: any) {\n      alert(`Test failed: ${err.message}`);\n    } finally {\n      setTestingIntegration(null);\n    }\n  };\n\n  const handleSync = async (integrationId: string) => {\n    try {\n      setSyncingIntegration(integrationId);\n      await courierIntegrationsService.syncIntegration(integrationId);\n      alert('Sync triggered successfully!');\n      await loadIntegrations();\n    } catch (err: any) {\n      alert(`Sync failed: ${err.message}`);\n    } finally {\n      setSyncingIntegration(null);\n    }\n  };\n\n  const handleDelete = async (integrationId: string) => {\n    if (!confirm('Are you sure you want to delete this integration?')) {\n      return;\n    }\n\n    try {\n      await courierIntegrationsService.deleteIntegration(integrationId);\n      await loadIntegrations();\n    } catch (err: any) {\n      alert(`Failed to delete integration: ${err.message}`);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900\">Courier Integrations</h2>\n          <p className=\"text-gray-600 mt-1\">\n            Manage your courier API integrations for automated tracking\n          </p>\n        </div>\n        <button\n          onClick={() => setShowAddModal(true)}\n          className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n        >\n          <Plus className=\"w-5 h-5\" />\n          Add Integration\n        </button>\n      </div>\n\n      {/* Error Message */}\n      {error && (\n        <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg\">\n          {error}\n        </div>\n      )}\n\n      {/* Integrations List */}\n      {integrations.length === 0 ? (\n        <div className=\"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300\">\n          <Settings className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No integrations yet</h3>\n          <p className=\"text-gray-600 mb-4\">\n            Connect your courier APIs to enable automated tracking and notifications\n          </p>\n          <button\n            onClick={() => setShowAddModal(true)}\n            className=\"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            <Plus className=\"w-5 h-5\" />\n            Add Your First Integration\n          </button>\n        </div>\n      ) : (\n        <div className=\"grid gap-4\">\n          {integrations.map((integration) => (\n            <div\n              key={integration.integration_id}\n              className=\"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow\"\n            >\n              <div className=\"flex items-start justify-between\">\n                {/* Left: Courier Info */}\n                <div className=\"flex items-start gap-4 flex-1\">\n                  {integration.courier?.logo_url && (\n                    <img\n                      src={integration.courier.logo_url}\n                      alt={integration.courier.courier_name}\n                      className=\"w-16 h-16 object-contain rounded-lg border border-gray-200\"\n                    />\n                  )}\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center gap-3 mb-2\">\n                      <h3 className=\"text-lg font-semibold text-gray-900\">\n                        {integration.courier?.courier_name || 'Unknown Courier'}\n                      </h3>\n                      {integration.is_active ? (\n                        <span className=\"flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full\">\n                          <CheckCircle className=\"w-3 h-3\" />\n                          Active\n                        </span>\n                      ) : (\n                        <span className=\"flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-700 text-xs font-medium rounded-full\">\n                          <XCircle className=\"w-3 h-3\" />\n                          Inactive\n                        </span>\n                      )}\n                      {integration.is_sandbox && (\n                        <span className=\"px-2 py-1 bg-yellow-100 text-yellow-700 text-xs font-medium rounded-full\">\n                          Sandbox\n                        </span>\n                      )}\n                    </div>\n\n                    <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                      <div>\n                        <span className=\"text-gray-600\">Auth Type:</span>\n                        <span className=\"ml-2 font-medium text-gray-900\">\n                          {integration.auth_type}\n                        </span>\n                      </div>\n                      <div>\n                        <span className=\"text-gray-600\">API Version:</span>\n                        <span className=\"ml-2 font-medium text-gray-900\">\n                          {integration.api_version || 'N/A'}\n                        </span>\n                      </div>\n                      <div>\n                        <span className=\"text-gray-600\">Sync Frequency:</span>\n                        <span className=\"ml-2 font-medium text-gray-900\">\n                          Every {integration.sync_frequency_minutes} min\n                        </span>\n                      </div>\n                      <div>\n                        <span className=\"text-gray-600\">Requests Today:</span>\n                        <span className=\"ml-2 font-medium text-gray-900\">\n                          {integration.requests_today} / {integration.requests_per_hour}\n                        </span>\n                      </div>\n                      {integration.last_sync_at && (\n                        <div className=\"col-span-2\">\n                          <span className=\"text-gray-600\">Last Sync:</span>\n                          <span className=\"ml-2 font-medium text-gray-900\">\n                            {new Date(integration.last_sync_at).toLocaleString()}\n                          </span>\n                        </div>\n                      )}\n                      {integration.last_error && (\n                        <div className=\"col-span-2\">\n                          <span className=\"text-red-600 text-xs\">\n                            Error: {integration.last_error}\n                          </span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n\n                {/* Right: Actions */}\n                <div className=\"flex items-center gap-2 ml-4\">\n                  <button\n                    onClick={() => handleToggleActive(integration.integration_id, integration.is_active)}\n                    className={`p-2 rounded-lg transition-colors ${\n                      integration.is_active\n                        ? 'bg-green-100 text-green-700 hover:bg-green-200'\n                        : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                    }`}\n                    title={integration.is_active ? 'Deactivate' : 'Activate'}\n                  >\n                    <Power className=\"w-5 h-5\" />\n                  </button>\n\n                  <button\n                    onClick={() => handleTestConnection(integration.integration_id)}\n                    disabled={testingIntegration === integration.integration_id}\n                    className=\"p-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors disabled:opacity-50\"\n                    title=\"Test Connection\"\n                  >\n                    {testingIntegration === integration.integration_id ? (\n                      <RefreshCw className=\"w-5 h-5 animate-spin\" />\n                    ) : (\n                      <CheckCircle className=\"w-5 h-5\" />\n                    )}\n                  </button>\n\n                  <button\n                    onClick={() => handleSync(integration.integration_id)}\n                    disabled={syncingIntegration === integration.integration_id}\n                    className=\"p-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors disabled:opacity-50\"\n                    title=\"Sync Now\"\n                  >\n                    {syncingIntegration === integration.integration_id ? (\n                      <RefreshCw className=\"w-5 h-5 animate-spin\" />\n                    ) : (\n                      <RefreshCw className=\"w-5 h-5\" />\n                    )}\n                  </button>\n\n                  <button\n                    onClick={() => handleDelete(integration.integration_id)}\n                    className=\"p-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors\"\n                    title=\"Delete\"\n                  >\n                    <Trash2 className=\"w-5 h-5\" />\n                  </button>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Add Integration Modal - Placeholder */}\n      {showAddModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 max-w-2xl w-full mx-4\">\n            <h3 className=\"text-xl font-bold mb-4\">Add Courier Integration</h3>\n            <p className=\"text-gray-600 mb-4\">\n              Integration form coming soon. For now, please contact support to set up your courier API integration.\n            </p>\n            <button\n              onClick={() => setShowAddModal(false)}\n              className=\"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors\"\n            >\n              Close\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\courier\\CourierLogo.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'LocalShipping' is defined but never used.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { Box, Avatar, Typography, Tooltip } from '@mui/material';\nimport { LocalShipping } from '@mui/icons-material';\n\ninterface CourierLogoProps {\n  courierCode: string;\n  courierName: string;\n  size?: 'small' | 'medium' | 'large' | 'xlarge';\n  showName?: boolean;\n  variant?: 'circular' | 'rounded' | 'square';\n  tooltip?: boolean;\n}\n\n/**\n * Generate a consistent color based on courier name\n * Uses a hash function to ensure same name always gets same color\n */\nconst stringToColor = (str: string): string => {\n  let hash = 0;\n  for (let i = 0; i < str.length; i++) {\n    hash = str.charCodeAt(i) + ((hash << 5) - hash);\n  }\n  \n  // Generate HSL color with good saturation and lightness for readability\n  const hue = Math.abs(hash % 360);\n  const saturation = 65 + (Math.abs(hash) % 20); // 65-85%\n  const lightness = 45 + (Math.abs(hash) % 15); // 45-60%\n  \n  return `hsl(${hue}, ${saturation}%, ${lightness}%)`;\n};\n\n/**\n * Normalize courier code to handle variants\n * E.g., \"DHL Express\", \"DHL Freight\", \"DHL eCommerce\" all use \"dhl\" logo\n * \n * @param courierCode - Original courier code or name\n * @param courierName - Full courier name for additional context\n * @returns Normalized courier code for logo lookup\n */\nconst normalizeCourierCode = (courierCode: string, courierName: string): string => {\n  const code = courierCode.toLowerCase();\n  const name = courierName.toLowerCase();\n  \n  // DHL variants: DHL Express, DHL Freight, DHL eCommerce, DHL Supply Chain, etc.\n  if (code.includes('dhl') || name.includes('dhl')) {\n    return 'dhl';\n  }\n  \n  // FedEx variants: FedEx Express, FedEx Ground, FedEx Freight, FedEx International\n  if (code.includes('fedex') || name.includes('fedex')) {\n    return 'fedex';\n  }\n  \n  // UPS variants: UPS Express, UPS Ground, UPS Freight, UPS Mail Innovations\n  if (code.includes('ups') || name.includes('ups')) {\n    return 'ups';\n  }\n  \n  // TNT (now part of FedEx)\n  if (code.includes('tnt') || name.includes('tnt')) {\n    return 'tnt';\n  }\n  \n  // DPD variants: DPD Classic, DPD Express, DPD Direct\n  if (code.includes('dpd') || name.includes('dpd')) {\n    return 'dpd';\n  }\n  \n  // GLS variants: GLS Express, GLS Parcel\n  if (code.includes('gls') || name.includes('gls')) {\n    return 'gls';\n  }\n  \n  // Hermes/Evri variants\n  if (code.includes('hermes') || name.includes('hermes') || code.includes('evri') || name.includes('evri')) {\n    return 'hermes';\n  }\n  \n  // PostNL variants\n  if (code.includes('postnl') || name.includes('postnl')) {\n    return 'postnl';\n  }\n  \n  // Default: return original code\n  return code;\n};\n\n/**\n * CourierLogo Component\n * \n * Displays courier logo from public/courier-logos/ folder\n * Falls back to first letter avatar if logo not found\n * Automatically handles courier variants (e.g., DHL Express, DHL Freight use same logo)\n * \n * @param courierCode - Courier code (e.g., 'dhl', 'fedex')\n * @param courierName - Full courier name (e.g., 'DHL Express')\n * @param size - Size variant: small (32px), medium (48px), large (64px), xlarge (80px)\n * @param showName - Whether to display courier name next to logo\n * @param variant - Avatar shape: circular, rounded, square\n * @param tooltip - Whether to show tooltip on hover\n */\nexport const CourierLogo: React.FC<CourierLogoProps> = ({\n  courierCode,\n  courierName,\n  size = 'medium',\n  showName = false,\n  variant = 'circular',\n  tooltip = true,\n}) => {\n  const [imageError, setImageError] = useState(false);\n  \n  // Normalize courier code to handle variants (DHL Express, DHL Freight, etc.)\n  const normalizedCode = normalizeCourierCode(courierCode, courierName);\n  const logoPath = `/courier-logos/${normalizedCode}_logo.jpeg`;\n  \n  const sizes = {\n    small: 32,\n    medium: 48,\n    large: 64,\n    xlarge: 80,\n  };\n\n  const borderRadius = {\n    circular: '50%',\n    rounded: '8px',\n    square: '0px',\n  };\n\n  const avatarSize = sizes[size];\n  const backgroundColor = stringToColor(courierName);\n\n  const avatarElement = (\n    <Avatar\n      src={!imageError ? logoPath : undefined}\n      alt={`${courierName} logo`}\n      sx={{\n        width: avatarSize,\n        height: avatarSize,\n        borderRadius: borderRadius[variant],\n        bgcolor: backgroundColor,\n        color: '#ffffff',\n        fontSize: avatarSize / 2.5,\n        fontWeight: 'bold',\n        textTransform: 'uppercase',\n        boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n      }}\n      imgProps={{\n        onError: () => {\n          // Set error state to prevent further attempts and console errors\n          setImageError(true);\n        },\n      }}\n    >\n      {courierName.charAt(0).toUpperCase()}\n    </Avatar>\n  );\n\n  const content = (\n    <Box \n      display=\"flex\" \n      alignItems=\"center\" \n      gap={showName ? 1.5 : 0}\n      sx={{\n        cursor: tooltip ? 'pointer' : 'default',\n      }}\n    >\n      {avatarElement}\n      {showName && (\n        <Typography \n          variant={size === 'small' ? 'body2' : 'body1'}\n          fontWeight={500}\n          noWrap\n        >\n          {courierName}\n        </Typography>\n      )}\n    </Box>\n  );\n\n  if (tooltip && !showName) {\n    return (\n      <Tooltip title={courierName} arrow>\n        {content}\n      </Tooltip>\n    );\n  }\n\n  return content;\n};\n\n/**\n * Helper function to get courier logo URL\n * @param courierCode - Courier code\n * @returns Logo URL path\n */\nexport const getCourierLogoUrl = (courierCode: string): string => {\n  return `/courier-logos/${courierCode.toLowerCase()}_logo.jpeg`;\n};\n\n/**\n * Helper function to check if courier has logo\n * @param courierCode - Courier code\n * @returns Promise<boolean>\n */\nexport const courierHasLogo = async (courierCode: string): Promise<boolean> => {\n  try {\n    const response = await fetch(getCourierLogoUrl(courierCode), { method: 'HEAD' });\n    return response.ok;\n  } catch {\n    return false;\n  }\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\courier\\IntegrationStatusBadge.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CheckCircle' is defined but never used.","line":9,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":14}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Chip, Tooltip } from '@mui/material';\nimport {\n  CloudDone,\n  CloudOff,\n  Settings,\n  Error as ErrorIcon,\n  Pause,\n  CheckCircle,\n} from '@mui/icons-material';\n\nexport type IntegrationStatus = \n  | 'not_configured' \n  | 'configured' \n  | 'active' \n  | 'error' \n  | 'paused'\n  | 'manual';\n\ninterface IntegrationStatusBadgeProps {\n  status: IntegrationStatus;\n  hasApiIntegration?: boolean;\n  size?: 'small' | 'medium';\n  showIcon?: boolean;\n  lastSyncAt?: string | null;\n}\n\n/**\n * IntegrationStatusBadge Component\n * \n * Displays the integration status of a courier with appropriate color and icon\n * \n * @param status - Integration status\n * @param hasApiIntegration - Whether courier has API integration capability\n * @param size - Badge size\n * @param showIcon - Whether to show status icon\n * @param lastSyncAt - Last sync timestamp (ISO string)\n */\nexport const IntegrationStatusBadge: React.FC<IntegrationStatusBadgeProps> = ({\n  status,\n  hasApiIntegration = false,\n  size = 'small',\n  showIcon = true,\n  lastSyncAt,\n}) => {\n  // If no API integration, show manual badge\n  if (!hasApiIntegration) {\n    return (\n      <Tooltip title=\"Manual tracking - No API integration\" arrow>\n        <Chip \n          label=\"Manual\" \n          size={size}\n          variant=\"outlined\"\n          sx={{ \n            borderColor: 'grey.400',\n            color: 'text.secondary',\n          }}\n        />\n      </Tooltip>\n    );\n  }\n\n  const statusConfig: Record<IntegrationStatus, {\n    label: string;\n    color: 'default' | 'primary' | 'secondary' | 'error' | 'info' | 'success' | 'warning';\n    icon: React.ReactElement;\n    tooltip: string;\n  }> = {\n    not_configured: {\n      label: 'Not Configured',\n      color: 'default',\n      icon: <Settings fontSize=\"small\" />,\n      tooltip: 'API credentials not configured',\n    },\n    configured: {\n      label: 'Configured',\n      color: 'info',\n      icon: <Settings fontSize=\"small\" />,\n      tooltip: 'API configured but not active',\n    },\n    active: {\n      label: 'Active',\n      color: 'success',\n      icon: <CloudDone fontSize=\"small\" />,\n      tooltip: lastSyncAt \n        ? `Active - Last sync: ${new Date(lastSyncAt).toLocaleString()}` \n        : 'Active - Syncing automatically',\n    },\n    error: {\n      label: 'Error',\n      color: 'error',\n      icon: <ErrorIcon fontSize=\"small\" />,\n      tooltip: 'Integration error - Check logs',\n    },\n    paused: {\n      label: 'Paused',\n      color: 'warning',\n      icon: <Pause fontSize=\"small\" />,\n      tooltip: 'Integration paused',\n    },\n    manual: {\n      label: 'Manual',\n      color: 'default',\n      icon: <CloudOff fontSize=\"small\" />,\n      tooltip: 'Manual tracking',\n    },\n  };\n\n  const config = statusConfig[status];\n\n  return (\n    <Tooltip title={config.tooltip} arrow>\n      <Chip \n        label={config.label} \n        color={config.color} \n        size={size}\n        icon={showIcon ? config.icon : undefined}\n        sx={{\n          fontWeight: 500,\n          ...(status === 'active' && {\n            animation: 'pulse 2s ease-in-out infinite',\n            '@keyframes pulse': {\n              '0%, 100%': { opacity: 1 },\n              '50%': { opacity: 0.8 },\n            },\n          }),\n        }}\n      />\n    </Tooltip>\n  );\n};\n\n/**\n * Helper function to determine integration status from courier data\n */\nexport const getIntegrationStatus = (courier: {\n  has_api_integration?: boolean;\n  integration_status?: string;\n}): IntegrationStatus => {\n  if (!courier.has_api_integration) {\n    return 'manual';\n  }\n  \n  return (courier.integration_status as IntegrationStatus) || 'not_configured';\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\courier\\NotificationRules.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AlertTriangle' is defined but never used.","line":2,"column":50,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":63},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[421,424],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[421,424],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[437,440],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[437,440],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":15,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[461,464],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[461,464],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":26,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[783,786],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[783,786],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":42,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1232,1235],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1232,1235],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":53,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1515,1518],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1515,1518],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":62,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":62,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1796,1799],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1796,1799],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":75,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":75,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2117,2120],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2117,2120],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":80,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":80,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2242,2245],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2242,2245],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":93,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":93,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2665,2668],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2665,2668],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { Plus, Edit, Trash2, Power, Clock, Bell, AlertTriangle } from 'lucide-react';\nimport { notificationRulesService } from '../../services/notificationRulesService';\n\ninterface NotificationRule {\n  rule_id: string;\n  merchant_id: string;\n  rule_name: string;\n  rule_description?: string;\n  rule_type: string;\n  is_active: boolean;\n  priority: number;\n  conditions: any;\n  actions: any[];\n  else_actions?: any[];\n  cooldown_hours: number;\n  execution_count: number;\n  success_count: number;\n  failure_count: number;\n  last_executed_at?: string;\n  created_at: string;\n}\n\nexport const NotificationRules: React.FC = () => {\n  const [rules, setRules] = useState<NotificationRule[]>([]);\n  const [templates, setTemplates] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [showTemplates, setShowTemplates] = useState(false);\n\n  useEffect(() => {\n    loadRules();\n    loadTemplates();\n  }, []);\n\n  const loadRules = async () => {\n    try {\n      setLoading(true);\n      const data = await notificationRulesService.listRules();\n      setRules(data.rules);\n      setError(null);\n    } catch (err: any) {\n      setError(err.message || 'Failed to load rules');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadTemplates = async () => {\n    try {\n      const data = await notificationRulesService.getTemplates();\n      setTemplates(data.templates);\n    } catch (err: any) {\n      console.error('Failed to load templates:', err);\n    }\n  };\n\n  const handleToggleActive = async (ruleId: string, currentStatus: boolean) => {\n    try {\n      await notificationRulesService.toggleRule(ruleId, !currentStatus);\n      await loadRules();\n    } catch (err: any) {\n      alert(`Failed to toggle rule: ${err.message}`);\n    }\n  };\n\n  const handleDelete = async (ruleId: string) => {\n    if (!confirm('Are you sure you want to delete this rule?')) {\n      return;\n    }\n\n    try {\n      await notificationRulesService.deleteRule(ruleId);\n      await loadRules();\n    } catch (err: any) {\n      alert(`Failed to delete rule: ${err.message}`);\n    }\n  };\n\n  const handleCreateFromTemplate = async (template: any) => {\n    try {\n      await notificationRulesService.createRule({\n        rule_name: template.name,\n        rule_description: template.description,\n        rule_type: 'template',\n        priority: template.priority,\n        conditions: template.conditions,\n        actions: template.actions,\n      });\n      await loadRules();\n      setShowTemplates(false);\n      alert('Rule created successfully!');\n    } catch (err: any) {\n      alert(`Failed to create rule: ${err.message}`);\n    }\n  };\n\n  const getPriorityColor = (priority: number) => {\n    if (priority >= 8) return 'text-red-600 bg-red-100';\n    if (priority >= 5) return 'text-orange-600 bg-orange-100';\n    return 'text-blue-600 bg-blue-100';\n  };\n\n  const getSuccessRate = (rule: NotificationRule) => {\n    if (rule.execution_count === 0) return 0;\n    return Math.round((rule.success_count / rule.execution_count) * 100);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900\">Notification Rules</h2>\n          <p className=\"text-gray-600 mt-1\">\n            Automate notifications based on courier events and conditions\n          </p>\n        </div>\n        <div className=\"flex gap-2\">\n          <button\n            onClick={() => setShowTemplates(true)}\n            className=\"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors\"\n          >\n            <Bell className=\"w-5 h-5\" />\n            Use Template\n          </button>\n          <button\n            onClick={() => alert('Custom rule builder coming soon!')}\n            className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            <Plus className=\"w-5 h-5\" />\n            Create Custom Rule\n          </button>\n        </div>\n      </div>\n\n      {/* Error Message */}\n      {error && (\n        <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg\">\n          {error}\n        </div>\n      )}\n\n      {/* Rules List */}\n      {rules.length === 0 ? (\n        <div className=\"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300\">\n          <Bell className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No notification rules yet</h3>\n          <p className=\"text-gray-600 mb-4\">\n            Create automated notification rules to keep your customers informed\n          </p>\n          <button\n            onClick={() => setShowTemplates(true)}\n            className=\"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            <Bell className=\"w-5 h-5\" />\n            Browse Templates\n          </button>\n        </div>\n      ) : (\n        <div className=\"grid gap-4\">\n          {rules.map((rule) => (\n            <div\n              key={rule.rule_id}\n              className=\"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow\"\n            >\n              <div className=\"flex items-start justify-between\">\n                {/* Left: Rule Info */}\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-3 mb-3\">\n                    <h3 className=\"text-lg font-semibold text-gray-900\">{rule.rule_name}</h3>\n                    \n                    {rule.is_active ? (\n                      <span className=\"flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full\">\n                        Active\n                      </span>\n                    ) : (\n                      <span className=\"flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-700 text-xs font-medium rounded-full\">\n                        Inactive\n                      </span>\n                    )}\n\n                    <span className={`px-2 py-1 text-xs font-medium rounded-full ${getPriorityColor(rule.priority)}`}>\n                      Priority {rule.priority}\n                    </span>\n\n                    {rule.rule_type === 'template' && (\n                      <span className=\"px-2 py-1 bg-purple-100 text-purple-700 text-xs font-medium rounded-full\">\n                        Template\n                      </span>\n                    )}\n                  </div>\n\n                  {rule.rule_description && (\n                    <p className=\"text-gray-600 text-sm mb-4\">{rule.rule_description}</p>\n                  )}\n\n                  <div className=\"grid grid-cols-4 gap-4 text-sm\">\n                    <div>\n                      <div className=\"text-gray-600 text-xs mb-1\">Executions</div>\n                      <div className=\"font-semibold text-gray-900\">{rule.execution_count}</div>\n                    </div>\n                    <div>\n                      <div className=\"text-gray-600 text-xs mb-1\">Success Rate</div>\n                      <div className=\"font-semibold text-green-600\">{getSuccessRate(rule)}%</div>\n                    </div>\n                    <div>\n                      <div className=\"text-gray-600 text-xs mb-1\">Cooldown</div>\n                      <div className=\"font-semibold text-gray-900\">{rule.cooldown_hours}h</div>\n                    </div>\n                    <div>\n                      <div className=\"text-gray-600 text-xs mb-1\">Actions</div>\n                      <div className=\"font-semibold text-gray-900\">{rule.actions.length}</div>\n                    </div>\n                  </div>\n\n                  {rule.last_executed_at && (\n                    <div className=\"mt-3 flex items-center gap-2 text-xs text-gray-600\">\n                      <Clock className=\"w-4 h-4\" />\n                      Last executed: {new Date(rule.last_executed_at).toLocaleString()}\n                    </div>\n                  )}\n                </div>\n\n                {/* Right: Actions */}\n                <div className=\"flex items-center gap-2 ml-4\">\n                  <button\n                    onClick={() => handleToggleActive(rule.rule_id, rule.is_active)}\n                    className={`p-2 rounded-lg transition-colors ${\n                      rule.is_active\n                        ? 'bg-green-100 text-green-700 hover:bg-green-200'\n                        : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                    }`}\n                    title={rule.is_active ? 'Deactivate' : 'Activate'}\n                  >\n                    <Power className=\"w-5 h-5\" />\n                  </button>\n\n                  <button\n                    onClick={() => alert('Edit functionality coming soon!')}\n                    className=\"p-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors\"\n                    title=\"Edit\"\n                  >\n                    <Edit className=\"w-5 h-5\" />\n                  </button>\n\n                  <button\n                    onClick={() => handleDelete(rule.rule_id)}\n                    className=\"p-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors\"\n                    title=\"Delete\"\n                  >\n                    <Trash2 className=\"w-5 h-5\" />\n                  </button>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Templates Modal */}\n      {showTemplates && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"sticky top-0 bg-white border-b border-gray-200 px-6 py-4\">\n              <h3 className=\"text-xl font-bold\">Notification Rule Templates</h3>\n              <p className=\"text-gray-600 text-sm mt-1\">\n                Choose a pre-built template to get started quickly\n              </p>\n            </div>\n\n            <div className=\"p-6 space-y-4\">\n              {templates.map((template) => (\n                <div\n                  key={template.id}\n                  className=\"border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors\"\n                >\n                  <div className=\"flex items-start justify-between mb-3\">\n                    <div>\n                      <h4 className=\"font-semibold text-gray-900\">{template.name}</h4>\n                      <p className=\"text-sm text-gray-600 mt-1\">{template.description}</p>\n                    </div>\n                    <span className={`px-2 py-1 text-xs font-medium rounded-full ${getPriorityColor(template.priority)}`}>\n                      Priority {template.priority}\n                    </span>\n                  </div>\n\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"text-sm text-gray-600\">\n                      {template.actions.length} action(s)  {template.conditions.conditions.length} condition(s)\n                    </div>\n                    <button\n                      onClick={() => handleCreateFromTemplate(template)}\n                      className=\"px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors\"\n                    >\n                      Use Template\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n\n            <div className=\"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4\">\n              <button\n                onClick={() => setShowTemplates(false)}\n                className=\"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors\"\n              >\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\courier\\ServiceManagement.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":64,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":64,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1565,1568],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1565,1568],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":86,"column":77,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":86,"endColumn":80,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2113,2116],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2113,2116],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":105,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":105,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2695,2698],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2695,2698],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Switch,\n  TextField,\n  Button,\n  Grid,\n  Alert,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  IconButton\n} from '@mui/material';\nimport {\n  Home,\n  Store,\n  Lock,\n  LocationOn,\n  Business,\n  Add,\n  Delete,\n  Save\n} from '@mui/icons-material';\nimport { apiClient } from '@/services/apiClient'; \n\ninterface CourierService {\n  serviceId?: string;\n  serviceType: string;\n  isAvailable: boolean;\n  priceModifier: number;\n  estimatedDeliveryHours: number;\n  coverageAreas: string[];\n  specialInstructions: string;\n}\n\nconst serviceTypeOptions = [\n  { value: 'home_delivery', label: 'Home Delivery', icon: <Home /> },\n  { value: 'parcelshop', label: 'Parcel Shop', icon: <Store /> },\n  { value: 'parcellocker', label: 'Parcel Locker', icon: <Lock /> },\n  { value: 'pickup_point', label: 'Pickup Point', icon: <LocationOn /> },\n  { value: 'office_delivery', label: 'Office Delivery', icon: <Business /> }\n];\n\nconst ServiceManagement: React.FC = () => {\n  const [services, setServices] = useState<CourierService[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [message, setMessage] = useState('');\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    fetchServices();\n  }, []);\n\n  const fetchServices = async () => {\n    setLoading(true);\n    try {\n      const response = await apiClient.get('/rating/services/me');\n      setServices(response.data.services || []);\n    } catch (err: any) {\n      setError('Failed to load services');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const addService = () => {\n    setServices(prev => [...prev, {\n      serviceType: 'home_delivery',\n      isAvailable: true,\n      priceModifier: 1.00,\n      estimatedDeliveryHours: 24,\n      coverageAreas: [],\n      specialInstructions: ''\n    }]);\n  };\n\n  const removeService = (index: number) => {\n    setServices(prev => prev.filter((_, i) => i !== index));\n  };\n\n  const updateService = (index: number, field: keyof CourierService, value: any) => {\n    setServices(prev => prev.map((service, i) => \n      i === index ? { ...service, [field]: value } : service\n    ));\n  };\n\n  const handleCoverageAreasChange = (index: number, value: string) => {\n    const areas = value.split(',').map(area => area.trim()).filter(area => area);\n    updateService(index, 'coverageAreas', areas);\n  };\n\n  const saveServices = async () => {\n    setSaving(true);\n    setError('');\n    setMessage('');\n\n    try {\n      await apiClient.put('/rating/services', { services });\n      setMessage('Services updated successfully');\n    } catch (err: any) {\n      setError(err.response?.data?.error || 'Failed to save services');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  return (\n    <Box>\n      <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={3}>\n        <Typography variant=\"h5\">\n          y Services Management\n        </Typography>\n        <Button\n          variant=\"contained\"\n          startIcon={<Add />}\n          onClick={addService}\n        >\n          Add Service\n        </Button>\n      </Box>\n\n      {message && (\n        <Alert severity=\"success\" sx={{ mb: 3 }}>\n          {message}\n        </Alert>\n      )}\n\n      {error && (\n        <Alert severity=\"error\" sx={{ mb: 3 }}>\n          {error}\n        </Alert>\n      )}\n\n      <Grid container spacing={3}>\n        {services.map((service, index) => (\n          <Grid item xs={12} md={6} key={index}>\n            <Card>\n              <CardContent>\n                <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"flex-start\" mb={2}>\n                  <FormControl size=\"small\" sx={{ minWidth: 200 }}>\n                    <InputLabel>Service Type</InputLabel>\n                    <Select\n                      value={service.serviceType}\n                      onChange={(e) => updateService(index, 'serviceType', e.target.value)}\n                    >\n                      {serviceTypeOptions.map(option => (\n                        <MenuItem key={option.value} value={option.value}>\n                          <Box display=\"flex\" alignItems=\"center\" gap={1}>\n                            {option.icon}\n                            {option.label}\n                          </Box>\n                        </MenuItem>\n                      ))}\n                    </Select>\n                  </FormControl>\n\n                  <IconButton\n                    color=\"error\"\n                    onClick={() => removeService(index)}\n                    size=\"small\"\n                  >\n                    <Delete />\n                  </IconButton>\n                </Box>\n\n                <Box display=\"flex\" alignItems=\"center\" justifyContent=\"space-between\" mb={2}>\n                  <Typography variant=\"body2\">Available</Typography>\n                  <Switch\n                    checked={service.isAvailable}\n                    onChange={(e) => updateService(index, 'isAvailable', e.target.checked)}\n                  />\n                </Box>\n\n                <Grid container spacing={2}>\n                  <Grid item xs={6}>\n                    <TextField\n                      fullWidth\n                      size=\"small\"\n                      label=\"Price Modifier\"\n                      type=\"number\"\n                      value={service.priceModifier}\n                      onChange={(e) => updateService(index, 'priceModifier', parseFloat(e.target.value) || 1.00)}\n                      inputProps={{ min: 0.5, max: 3.0, step: 0.1 }}\n                      helperText=\"1.0 = base price\"\n                    />\n                  </Grid>\n\n                  <Grid item xs={6}>\n                    <TextField\n                      fullWidth\n                      size=\"small\"\n                      label=\"Delivery Hours\"\n                      type=\"number\"\n                      value={service.estimatedDeliveryHours}\n                      onChange={(e) => updateService(index, 'estimatedDeliveryHours', parseInt(e.target.value) || 24)}\n                      inputProps={{ min: 1, max: 168 }}\n                      helperText=\"Estimated hours\"\n                    />\n                  </Grid>\n\n                  <Grid item xs={12}>\n                    <TextField\n                      fullWidth\n                      size=\"small\"\n                      label=\"Coverage Areas\"\n                      value={service.coverageAreas.join(', ')}\n                      onChange={(e) => handleCoverageAreasChange(index, e.target.value)}\n                      placeholder=\"Enter postal codes or areas (comma separated)\"\n                      helperText=\"e.g. 1000, 2000, Downtown, City Center\"\n                    />\n                  </Grid>\n\n                  <Grid item xs={12}>\n                    <TextField\n                      fullWidth\n                      size=\"small\"\n                      multiline\n                      rows={2}\n                      label=\"Special Instructions\"\n                      value={service.specialInstructions}\n                      onChange={(e) => updateService(index, 'specialInstructions', e.target.value)}\n                      placeholder=\"Any special notes for this service type...\"\n                    />\n                  </Grid>\n                </Grid>\n              </CardContent>\n            </Card>\n          </Grid>\n        ))}\n      </Grid>\n\n      {services.length === 0 && !loading && (\n        <Card sx={{ textAlign: 'center', py: 6 }}>\n          <CardContent>\n            <Typography variant=\"h6\" color=\"text.secondary\" gutterBottom>\n              No Services Configured\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\" mb={3}>\n              Add your first delivery service to get started\n            </Typography>\n            <Button variant=\"contained\" startIcon={<Add />} onClick={addService}>\n              Add Service\n            </Button>\n          </CardContent>\n        </Card>\n      )}\n\n      {services.length > 0 && (\n        <Box display=\"flex\" justifyContent=\"center\" mt={4}>\n          <Button\n            variant=\"contained\"\n            size=\"large\"\n            startIcon={<Save />}\n            onClick={saveServices}\n            disabled={saving}\n            sx={{ minWidth: 200 }}\n          >\n            {saving ? 'Saving...' : 'Save Services'}\n          </Button>\n        </Box>\n      )}\n    </Box>\n  );\n};\n\nexport default ServiceManagement;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\courier\\ShipmentTracking.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Clock' is defined but never used.","line":2,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":32},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ShipmentEvent' is defined but never used.","line":5,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":24},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[730,733],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[730,733],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadTimeline'. Either include it or remove the dependency array.","line":30,"column":6,"nodeType":"ArrayExpression","endLine":30,"endColumn":15,"suggestions":[{"desc":"Update the dependencies array to be: [loadTimeline, orderId]","fix":{"range":[895,904],"text":"[loadTimeline, orderId]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":38,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1129,1132],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1129,1132],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":45,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1291,1294],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1291,1294],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":58,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":58,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1724,1727],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1724,1727],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":122,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":122,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3846,3849],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3846,3849],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":195,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":195,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6938,6941],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6938,6941],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":209,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":209,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7344,7347],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7344,7347],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":230,"column":30,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[7921,7991],"text":"\n            Orders that haven&apos;t had updates in over 7 days\n          "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[7921,7991],"text":"\n            Orders that haven&lsquo;t had updates in over 7 days\n          "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[7921,7991],"text":"\n            Orders that haven&#39;t had updates in over 7 days\n          "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[7921,7991],"text":"\n            Orders that haven&rsquo;t had updates in over 7 days\n          "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { Package, MapPin, Clock, AlertTriangle, CheckCircle, TrendingUp } from 'lucide-react';\nimport { shipmentTrackingService } from '../../services/shipmentTrackingService';\n\ninterface ShipmentEvent {\n  event_id: string;\n  event_type: string;\n  event_description?: string;\n  event_timestamp: string;\n  location_city?: string;\n  location_country?: string;\n  location_facility?: string;\n  status: string;\n  is_exception: boolean;\n  exception_type?: string;\n  exception_description?: string;\n}\n\ninterface ShipmentTrackingProps {\n  orderId: string;\n}\n\nexport const ShipmentTracking: React.FC<ShipmentTrackingProps> = ({ orderId }) => {\n  const [timeline, setTimeline] = useState<any>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    loadTimeline();\n  }, [orderId]);\n\n  const loadTimeline = async () => {\n    try {\n      setLoading(true);\n      const data = await shipmentTrackingService.getOrderTimeline(orderId);\n      setTimeline(data.timeline);\n      setError(null);\n    } catch (err: any) {\n      setError(err.message || 'Failed to load tracking information');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getStatusIcon = (event: any) => {\n    if (event.is_exception) {\n      return <AlertTriangle className=\"w-5 h-5 text-red-600\" />;\n    }\n    if (event.status === 'delivered') {\n      return <CheckCircle className=\"w-5 h-5 text-green-600\" />;\n    }\n    if (event.type === 'out_for_delivery') {\n      return <TrendingUp className=\"w-5 h-5 text-blue-600\" />;\n    }\n    return <Package className=\"w-5 h-5 text-gray-600\" />;\n  };\n\n  const getStatusColor = (event: any) => {\n    if (event.is_exception) return 'border-red-500 bg-red-50';\n    if (event.status === 'delivered') return 'border-green-500 bg-green-50';\n    if (event.type === 'out_for_delivery') return 'border-blue-500 bg-blue-50';\n    return 'border-gray-300 bg-white';\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg\">\n        {error}\n      </div>\n    );\n  }\n\n  if (!timeline) {\n    return (\n      <div className=\"text-center py-12 bg-gray-50 rounded-lg\">\n        <Package className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n        <p className=\"text-gray-600\">No tracking information available</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"bg-white border border-gray-200 rounded-lg p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div>\n            <h3 className=\"text-lg font-semibold text-gray-900\">\n              Order #{timeline.order_number}\n            </h3>\n            <p className=\"text-sm text-gray-600 mt-1\">\n              Tracking: {timeline.tracking_number}\n            </p>\n          </div>\n          <div className=\"text-right\">\n            <div className=\"text-sm text-gray-600\">Order Created</div>\n            <div className=\"font-medium text-gray-900\">\n              {new Date(timeline.created_at).toLocaleDateString()}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Timeline */}\n      <div className=\"bg-white border border-gray-200 rounded-lg p-6\">\n        <h4 className=\"font-semibold text-gray-900 mb-6\">Tracking Timeline</h4>\n        \n        {timeline.events.length === 0 ? (\n          <div className=\"text-center py-8 text-gray-500\">\n            No tracking events yet\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {timeline.events.map((event: any, index: number) => (\n              <div\n                key={index}\n                className={`relative pl-8 pb-4 ${\n                  index !== timeline.events.length - 1 ? 'border-l-2 border-gray-200' : ''\n                }`}\n              >\n                {/* Timeline Dot */}\n                <div className=\"absolute left-0 top-0 -ml-2.5\">\n                  <div className={`w-5 h-5 rounded-full border-2 flex items-center justify-center ${getStatusColor(event)}`}>\n                    {getStatusIcon(event)}\n                  </div>\n                </div>\n\n                {/* Event Content */}\n                <div className={`rounded-lg border-2 p-4 ${getStatusColor(event)}`}>\n                  <div className=\"flex items-start justify-between mb-2\">\n                    <div className=\"flex-1\">\n                      <h5 className=\"font-semibold text-gray-900 capitalize\">\n                        {event.type.replace(/_/g, ' ')}\n                      </h5>\n                      {event.description && (\n                        <p className=\"text-sm text-gray-600 mt-1\">{event.description}</p>\n                      )}\n                    </div>\n                    <div className=\"text-right ml-4\">\n                      <div className=\"text-sm font-medium text-gray-900\">\n                        {new Date(event.timestamp).toLocaleDateString()}\n                      </div>\n                      <div className=\"text-xs text-gray-600\">\n                        {new Date(event.timestamp).toLocaleTimeString()}\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Location */}\n                  {event.location && (\n                    <div className=\"flex items-center gap-2 text-sm text-gray-600 mt-2\">\n                      <MapPin className=\"w-4 h-4\" />\n                      <span>{event.location}</span>\n                    </div>\n                  )}\n\n                  {/* Exception Details */}\n                  {event.is_exception && event.exception_type && (\n                    <div className=\"mt-3 p-3 bg-red-100 border border-red-200 rounded-lg\">\n                      <div className=\"flex items-start gap-2\">\n                        <AlertTriangle className=\"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5\" />\n                        <div>\n                          <div className=\"font-medium text-red-900\">\n                            Exception: {event.exception_type}\n                          </div>\n                          {event.exception_description && (\n                            <div className=\"text-sm text-red-700 mt-1\">\n                              {event.exception_description}\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\n// Delayed Orders Component\nexport const DelayedOrders: React.FC = () => {\n  const [delayedOrders, setDelayedOrders] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    loadDelayedOrders();\n  }, []);\n\n  const loadDelayedOrders = async () => {\n    try {\n      setLoading(true);\n      const data = await shipmentTrackingService.getDelayedOrders();\n      setDelayedOrders(data.delayed_orders);\n      setError(null);\n    } catch (err: any) {\n      setError(err.message || 'Failed to load delayed orders');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900\">Delayed Shipments</h2>\n          <p className=\"text-gray-600 mt-1\">\n            Orders that haven't had updates in over 7 days\n          </p>\n        </div>\n        <button\n          onClick={loadDelayedOrders}\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n        >\n          Refresh\n        </button>\n      </div>\n\n      {error && (\n        <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg\">\n          {error}\n        </div>\n      )}\n\n      {delayedOrders.length === 0 ? (\n        <div className=\"text-center py-12 bg-green-50 rounded-lg border border-green-200\">\n          <CheckCircle className=\"w-12 h-12 text-green-600 mx-auto mb-4\" />\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No delayed orders!</h3>\n          <p className=\"text-gray-600\">All your shipments are on track</p>\n        </div>\n      ) : (\n        <div className=\"grid gap-4\">\n          {delayedOrders.map((order) => (\n            <div\n              key={order.order_id}\n              className=\"bg-white border-l-4 border-l-orange-500 border border-gray-200 rounded-lg p-6\"\n            >\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-3 mb-2\">\n                    <h3 className=\"text-lg font-semibold text-gray-900\">\n                      Order #{order.order_number}\n                    </h3>\n                    <span className=\"px-2 py-1 bg-orange-100 text-orange-700 text-xs font-medium rounded-full\">\n                      Delayed\n                    </span>\n                  </div>\n\n                  <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                    <div>\n                      <span className=\"text-gray-600\">Courier:</span>\n                      <span className=\"ml-2 font-medium text-gray-900\">\n                        {order.courier_name}\n                      </span>\n                    </div>\n                    <div>\n                      <span className=\"text-gray-600\">Tracking:</span>\n                      <span className=\"ml-2 font-medium text-gray-900\">\n                        {order.tracking_number}\n                      </span>\n                    </div>\n                    <div>\n                      <span className=\"text-gray-600\">Days Since Created:</span>\n                      <span className=\"ml-2 font-medium text-orange-600\">\n                        {order.days_since_created} days\n                      </span>\n                    </div>\n                    <div>\n                      <span className=\"text-gray-600\">Days Since Last Scan:</span>\n                      <span className=\"ml-2 font-medium text-orange-600\">\n                        {order.days_since_last_scan} days\n                      </span>\n                    </div>\n                    {order.latest_location && (\n                      <div className=\"col-span-2\">\n                        <span className=\"text-gray-600\">Last Location:</span>\n                        <span className=\"ml-2 font-medium text-gray-900\">\n                          {order.latest_location}\n                        </span>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                <button\n                  onClick={() => window.location.href = `/orders/${order.order_id}`}\n                  className=\"ml-4 px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors\"\n                >\n                  View Details\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\courier\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\dashboard\\ClaimsManagementWidget.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CheckCircle' is defined but never used.","line":43,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Cancel' is defined but never used.","line":44,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FilterList' is defined but never used.","line":46,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":46,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MoreVert' is defined but never used.","line":47,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":11}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ClaimsManagementWidget Component\n * Displays and manages claims with status updates\n * \n * Phase: Dashboard Analytics Enhancement - Phase 1.4\n * Created: October 18, 2025, 6:56 PM\n */\n\nimport React, { useState } from 'react';\nimport {\n  Card,\n  CardContent,\n  Typography,\n  Box,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Chip,\n  IconButton,\n  Button,\n  TextField,\n  InputAdornment,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Stack,\n  Tooltip,\n  CircularProgress,\n  Alert,\n  Pagination,\n} from '@mui/material';\nimport {\n  Visibility,\n  Edit,\n  CheckCircle,\n  Cancel,\n  Search,\n  FilterList,\n  MoreVert,\n} from '@mui/icons-material';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport { useAuthStore } from '@/store/authStore';\nimport toast from 'react-hot-toast';\n\ninterface ClaimsManagementWidgetProps {\n  entityType: 'courier' | 'merchant';\n  entityId?: string;\n  subscriptionTier?: string;\n}\n\ninterface Claim {\n  claim_id: string;\n  order_id: string;\n  claim_type: string;\n  status: string;\n  priority: string;\n  title: string;\n  description: string;\n  claim_amount: number;\n  created_at: string;\n  resolved_at?: string;\n  courier_name?: string;\n  merchant_name?: string;\n}\n\nconst STATUS_COLORS: Record<string, 'default' | 'warning' | 'info' | 'success' | 'error'> = {\n  open: 'warning',\n  in_review: 'info',\n  approved: 'success',\n  declined: 'error',\n  closed: 'default',\n};\n\nconst STATUS_ICONS: Record<string, string> = {\n  open: '',\n  in_review: '',\n  approved: '',\n  declined: '',\n  closed: '',\n};\n\nexport const ClaimsManagementWidget: React.FC<ClaimsManagementWidgetProps> = ({\n  entityType,\n  entityId,\n  subscriptionTier = 'tier1',\n}) => {\n  const { user } = useAuthStore();\n  const queryClient = useQueryClient();\n  \n  const [page, setPage] = useState(1);\n  const [statusFilter, setStatusFilter] = useState<string>('all');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedClaim, setSelectedClaim] = useState<Claim | null>(null);\n  const [detailsDialogOpen, setDetailsDialogOpen] = useState(false);\n  const [updateDialogOpen, setUpdateDialogOpen] = useState(false);\n  const [newStatus, setNewStatus] = useState('');\n  const [resolutionNotes, setResolutionNotes] = useState('');\n\n  // Determine limits based on subscription tier\n  const getClaimLimit = () => {\n    switch (subscriptionTier) {\n      case 'tier1':\n        return 10;\n      case 'tier2':\n        return 50;\n      case 'tier3':\n        return 1000;\n      default:\n        return 10;\n    }\n  };\n\n  const claimLimit = getClaimLimit();\n  const pageSize = 10;\n\n  // Fetch claims\n  const { data: claimsData, isLoading, error } = useQuery({\n    queryKey: ['claims', entityType, entityId || user?.user_id, statusFilter, searchQuery, page],\n    queryFn: async () => {\n      const response = await apiClient.get('/claims', {\n        params: {\n          entity_type: entityType,\n          entity_id: entityId || user?.user_id,\n          status: statusFilter !== 'all' ? statusFilter : undefined,\n          search: searchQuery || undefined,\n          page,\n          limit: pageSize,\n        },\n      });\n      return response.data;\n    },\n    enabled: !!user,\n  });\n\n  const claims = claimsData?.data || [];\n  const totalClaims = claimsData?.total || 0;\n  const totalPages = Math.ceil(totalClaims / pageSize);\n\n  // Update claim mutation\n  const updateClaimMutation = useMutation({\n    mutationFn: async ({ claimId, status, notes }: { claimId: string; status: string; notes?: string }) => {\n      const response = await apiClient.put(`/claims/${claimId}`, {\n        status,\n        resolution_notes: notes,\n        resolved_at: ['approved', 'declined', 'closed'].includes(status) ? new Date().toISOString() : undefined,\n      });\n      return response.data;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['claims'] });\n      queryClient.invalidateQueries({ queryKey: ['claims-trends'] });\n      toast.success('Claim updated successfully');\n      setUpdateDialogOpen(false);\n      setDetailsDialogOpen(false);\n    },\n    onError: () => {\n      toast.error('Failed to update claim');\n    },\n  });\n\n  const handleViewDetails = (claim: Claim) => {\n    setSelectedClaim(claim);\n    setDetailsDialogOpen(true);\n  };\n\n  const handleUpdateStatus = (claim: Claim) => {\n    setSelectedClaim(claim);\n    setNewStatus(claim.status);\n    setResolutionNotes('');\n    setUpdateDialogOpen(true);\n  };\n\n  const handleSubmitUpdate = () => {\n    if (selectedClaim) {\n      updateClaimMutation.mutate({\n        claimId: selectedClaim.claim_id,\n        status: newStatus,\n        notes: resolutionNotes,\n      });\n    }\n  };\n\n  const canManageClaims = subscriptionTier !== 'tier1';\n\n  if (isLoading) {\n    return (\n      <Card>\n        <CardContent>\n          <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: 300 }}>\n            <CircularProgress />\n          </Box>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (error) {\n    return (\n      <Card>\n        <CardContent>\n          <Alert severity=\"error\">\n            Failed to load claims. Please try again later.\n          </Alert>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <>\n      <Card>\n        <CardContent>\n          {/* Header */}\n          <Box sx={{ mb: 3 }}>\n            <Typography variant=\"h6\" gutterBottom>\n               Claims Management\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              View and manage claims (showing {Math.min(totalClaims, claimLimit)} of {totalClaims})\n            </Typography>\n          </Box>\n\n          {/* Filters */}\n          <Stack direction=\"row\" spacing={2} sx={{ mb: 3 }} flexWrap=\"wrap\">\n            <TextField\n              size=\"small\"\n              placeholder=\"Search by order ID...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              InputProps={{\n                startAdornment: (\n                  <InputAdornment position=\"start\">\n                    <Search />\n                  </InputAdornment>\n                ),\n              }}\n              sx={{ flexGrow: 1, minWidth: 200 }}\n            />\n            <FormControl size=\"small\" sx={{ minWidth: 150 }}>\n              <InputLabel>Status</InputLabel>\n              <Select\n                value={statusFilter}\n                label=\"Status\"\n                onChange={(e) => setStatusFilter(e.target.value)}\n              >\n                <MenuItem value=\"all\">All Status</MenuItem>\n                <MenuItem value=\"open\"> Open</MenuItem>\n                <MenuItem value=\"in_review\"> In Review</MenuItem>\n                <MenuItem value=\"approved\"> Approved</MenuItem>\n                <MenuItem value=\"declined\"> Declined</MenuItem>\n                <MenuItem value=\"closed\"> Closed</MenuItem>\n              </Select>\n            </FormControl>\n          </Stack>\n\n          {/* Claims Table */}\n          <TableContainer>\n            <Table size=\"small\">\n              <TableHead>\n                <TableRow>\n                  <TableCell>Status</TableCell>\n                  <TableCell>Order ID</TableCell>\n                  <TableCell>Type</TableCell>\n                  <TableCell>Title</TableCell>\n                  <TableCell align=\"right\">Amount</TableCell>\n                  <TableCell>Created</TableCell>\n                  <TableCell align=\"right\">Actions</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {claims.length === 0 ? (\n                  <TableRow>\n                    <TableCell colSpan={7} align=\"center\">\n                      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ py: 4 }}>\n                        No claims found\n                      </Typography>\n                    </TableCell>\n                  </TableRow>\n                ) : (\n                  claims.slice(0, claimLimit).map((claim: Claim) => (\n                    <TableRow key={claim.claim_id} hover>\n                      <TableCell>\n                        <Chip\n                          label={`${STATUS_ICONS[claim.status]} ${claim.status.replace('_', ' ')}`}\n                          color={STATUS_COLORS[claim.status]}\n                          size=\"small\"\n                        />\n                      </TableCell>\n                      <TableCell>\n                        <Typography variant=\"body2\" fontFamily=\"monospace\">\n                          {claim.order_id.substring(0, 8)}...\n                        </Typography>\n                      </TableCell>\n                      <TableCell>\n                        <Chip label={claim.claim_type} size=\"small\" variant=\"outlined\" />\n                      </TableCell>\n                      <TableCell>\n                        <Typography variant=\"body2\" noWrap sx={{ maxWidth: 200 }}>\n                          {claim.title}\n                        </Typography>\n                      </TableCell>\n                      <TableCell align=\"right\">\n                        <Typography variant=\"body2\" fontWeight=\"bold\">\n                          ${claim.claim_amount}\n                        </Typography>\n                      </TableCell>\n                      <TableCell>\n                        <Typography variant=\"caption\">\n                          {new Date(claim.created_at).toLocaleDateString()}\n                        </Typography>\n                      </TableCell>\n                      <TableCell align=\"right\">\n                        <Tooltip title=\"View Details\">\n                          <IconButton size=\"small\" onClick={() => handleViewDetails(claim)}>\n                            <Visibility fontSize=\"small\" />\n                          </IconButton>\n                        </Tooltip>\n                        {canManageClaims && claim.status !== 'closed' && (\n                          <Tooltip title=\"Update Status\">\n                            <IconButton size=\"small\" onClick={() => handleUpdateStatus(claim)}>\n                              <Edit fontSize=\"small\" />\n                            </IconButton>\n                          </Tooltip>\n                        )}\n                      </TableCell>\n                    </TableRow>\n                  ))\n                )}\n              </TableBody>\n            </Table>\n          </TableContainer>\n\n          {/* Pagination */}\n          {totalPages > 1 && (\n            <Box sx={{ display: 'flex', justifyContent: 'center', mt: 3 }}>\n              <Pagination\n                count={totalPages}\n                page={page}\n                onChange={(e, value) => setPage(value)}\n                color=\"primary\"\n              />\n            </Box>\n          )}\n\n          {/* Tier Limit Notice */}\n          {totalClaims > claimLimit && (\n            <Alert severity=\"info\" sx={{ mt: 2 }}>\n              <Typography variant=\"body2\">\n                <strong>Showing {claimLimit} of {totalClaims} claims.</strong>{' '}\n                {subscriptionTier === 'tier1' && 'Upgrade to Pro to view up to 50 claims.'}\n                {subscriptionTier === 'tier2' && 'Upgrade to Enterprise for unlimited claims.'}\n              </Typography>\n            </Alert>\n          )}\n\n          {/* View-Only Notice */}\n          {!canManageClaims && (\n            <Alert severity=\"warning\" sx={{ mt: 2 }}>\n              <Typography variant=\"body2\">\n                <strong>View-only mode.</strong> Upgrade to Pro or Enterprise to update claim statuses.\n              </Typography>\n            </Alert>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Details Dialog */}\n      <Dialog open={detailsDialogOpen} onClose={() => setDetailsDialogOpen(false)} maxWidth=\"sm\" fullWidth>\n        <DialogTitle>Claim Details</DialogTitle>\n        <DialogContent>\n          {selectedClaim && (\n            <Stack spacing={2} sx={{ mt: 1 }}>\n              <Box>\n                <Typography variant=\"caption\" color=\"text.secondary\">Status</Typography>\n                <Chip\n                  label={`${STATUS_ICONS[selectedClaim.status]} ${selectedClaim.status.replace('_', ' ')}`}\n                  color={STATUS_COLORS[selectedClaim.status]}\n                  size=\"small\"\n                  sx={{ ml: 1 }}\n                />\n              </Box>\n              <Box>\n                <Typography variant=\"caption\" color=\"text.secondary\">Order ID</Typography>\n                <Typography variant=\"body2\" fontFamily=\"monospace\">{selectedClaim.order_id}</Typography>\n              </Box>\n              <Box>\n                <Typography variant=\"caption\" color=\"text.secondary\">Type</Typography>\n                <Typography variant=\"body2\">{selectedClaim.claim_type}</Typography>\n              </Box>\n              <Box>\n                <Typography variant=\"caption\" color=\"text.secondary\">Title</Typography>\n                <Typography variant=\"body2\">{selectedClaim.title}</Typography>\n              </Box>\n              <Box>\n                <Typography variant=\"caption\" color=\"text.secondary\">Description</Typography>\n                <Typography variant=\"body2\">{selectedClaim.description}</Typography>\n              </Box>\n              <Box>\n                <Typography variant=\"caption\" color=\"text.secondary\">Claim Amount</Typography>\n                <Typography variant=\"body2\" fontWeight=\"bold\">${selectedClaim.claim_amount}</Typography>\n              </Box>\n              <Box>\n                <Typography variant=\"caption\" color=\"text.secondary\">Created</Typography>\n                <Typography variant=\"body2\">\n                  {new Date(selectedClaim.created_at).toLocaleString()}\n                </Typography>\n              </Box>\n              {selectedClaim.resolved_at && (\n                <Box>\n                  <Typography variant=\"caption\" color=\"text.secondary\">Resolved</Typography>\n                  <Typography variant=\"body2\">\n                    {new Date(selectedClaim.resolved_at).toLocaleString()}\n                  </Typography>\n                </Box>\n              )}\n            </Stack>\n          )}\n        </DialogContent>\n        <DialogActions>\n          {canManageClaims && selectedClaim?.status !== 'closed' && (\n            <Button onClick={() => {\n              setDetailsDialogOpen(false);\n              handleUpdateStatus(selectedClaim);\n            }}>\n              Update Status\n            </Button>\n          )}\n          <Button onClick={() => setDetailsDialogOpen(false)}>Close</Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* Update Status Dialog */}\n      <Dialog open={updateDialogOpen} onClose={() => setUpdateDialogOpen(false)} maxWidth=\"sm\" fullWidth>\n        <DialogTitle>Update Claim Status</DialogTitle>\n        <DialogContent>\n          <Stack spacing={2} sx={{ mt: 1 }}>\n            <FormControl fullWidth>\n              <InputLabel>New Status</InputLabel>\n              <Select\n                value={newStatus}\n                label=\"New Status\"\n                onChange={(e) => setNewStatus(e.target.value)}\n              >\n                <MenuItem value=\"open\"> Open</MenuItem>\n                <MenuItem value=\"in_review\"> In Review</MenuItem>\n                <MenuItem value=\"approved\"> Approved</MenuItem>\n                <MenuItem value=\"declined\"> Declined</MenuItem>\n                <MenuItem value=\"closed\"> Closed</MenuItem>\n              </Select>\n            </FormControl>\n            <TextField\n              fullWidth\n              multiline\n              rows={4}\n              label=\"Resolution Notes\"\n              value={resolutionNotes}\n              onChange={(e) => setResolutionNotes(e.target.value)}\n              placeholder=\"Add notes about this status change...\"\n            />\n          </Stack>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setUpdateDialogOpen(false)}>Cancel</Button>\n          <Button \n            onClick={handleSubmitUpdate} \n            variant=\"contained\"\n            disabled={updateClaimMutation.isPending}\n          >\n            {updateClaimMutation.isPending ? 'Updating...' : 'Update'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n};\n\nexport default ClaimsManagementWidget;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\dashboard\\ClaimsTrendsChart.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Cancel' is defined but never used.","line":27,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TrendingUp' is defined but never used.","line":29,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TrendingDown' is defined but never used.","line":30,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":15},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useMemo\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":187,"column":25,"nodeType":"Identifier","endLine":187,"endColumn":32},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useCallback\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":195,"column":25,"nodeType":"Identifier","endLine":195,"endColumn":36},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":195,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":195,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5246,5249],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5246,5249],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":200,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":200,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5387,5390],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5387,5390],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":220,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":220,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5968,5971],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5968,5971],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ClaimsTrendsChart Component\n * Displays claims trends over time by status\n * \n * Phase: Dashboard Analytics Enhancement - Phase 1.3\n * Created: October 18, 2025, 6:54 PM\n */\n\nimport React, { useState, useMemo, useCallback } from 'react';\nimport {\n  Card,\n  CardContent,\n  Typography,\n  Box,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Chip,\n  Stack,\n  CircularProgress,\n  Alert,\n} from '@mui/material';\nimport {\n  Warning,\n  CheckCircle,\n  Cancel,\n  Schedule,\n  TrendingUp,\n  TrendingDown,\n} from '@mui/icons-material';\nimport {\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  ResponsiveContainer,\n  LineChart,\n  Line,\n} from 'recharts';\nimport { useQuery } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport { useAuthStore } from '@/store/authStore';\nimport { useTheme } from '@mui/material/styles';\n\ninterface ClaimsTrendsChartProps {\n  entityType: 'courier' | 'merchant';\n  entityId?: string;\n  subscriptionTier?: string;\n}\n\ninterface ClaimTrendData {\n  date: string;\n  total_claims: number;\n  open_claims: number;\n  in_review_claims: number;\n  approved_claims: number;\n  declined_claims: number;\n  closed_claims: number;\n  avg_resolution_days: number;\n}\n\nexport const ClaimsTrendsChart: React.FC<ClaimsTrendsChartProps> = ({\n  entityType,\n  entityId,\n  subscriptionTier = 'tier1',\n}) => {\n  const { user } = useAuthStore();\n  const [period, setPeriod] = useState<string>('30d');\n  const [chartType, setChartType] = useState<'bar' | 'line'>('bar');\n  const theme = useTheme();\n\n  // Determine available periods based on subscription tier\n  const getAvailablePeriods = () => {\n    switch (subscriptionTier) {\n      case 'tier1':\n        return [{ value: '7d', label: 'Last 7 Days' }];\n      case 'tier2':\n        return [\n          { value: '7d', label: 'Last 7 Days' },\n          { value: '30d', label: 'Last 30 Days' },\n        ];\n      case 'tier3':\n        return [\n          { value: '7d', label: 'Last 7 Days' },\n          { value: '30d', label: 'Last 30 Days' },\n          { value: '90d', label: 'Last 90 Days' },\n          { value: '1y', label: 'Last Year' },\n        ];\n      default:\n        return [{ value: '7d', label: 'Last 7 Days' }];\n    }\n  };\n\n  const availablePeriods = getAvailablePeriods();\n\n  // Fetch claims trends data\n  const { data: trendsData, isLoading, error } = useQuery({\n    queryKey: ['claims-trends', entityType, entityId || user?.user_id, period],\n    queryFn: async () => {\n      const response = await apiClient.get('/analytics/claims-trends', {\n        params: {\n          entity_type: entityType,\n          entity_id: entityId || user?.user_id,\n          period,\n        },\n      });\n      return response.data.data as ClaimTrendData[];\n    },\n    enabled: !!user,\n  });\n\n  // Early return for loading state\n  if (isLoading) {\n    return (\n      <Card>\n        <CardContent>\n          <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: 300 }}>\n            <CircularProgress />\n          </Box>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (error) {\n    return (\n      <Card>\n        <CardContent>\n          <Alert severity=\"error\">\n            Failed to load claims trends. Please try again later.\n          </Alert>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  // Calculate summary statistics (only after data is loaded and validated)\n  const calculateSummary = () => {\n    if (!trendsData || trendsData.length === 0) {\n      return {\n        totalClaims: 0,\n        openClaims: 0,\n        resolvedClaims: 0,\n        avgResolutionDays: 0,\n        claimRate: 0,\n      };\n    }\n\n    const totalClaims = trendsData.reduce((sum, day) => sum + day.total_claims, 0);\n    const openClaims = trendsData.reduce((sum, day) => sum + day.open_claims, 0);\n    const approvedClaims = trendsData.reduce((sum, day) => sum + day.approved_claims, 0);\n    const declinedClaims = trendsData.reduce((sum, day) => sum + day.declined_claims, 0);\n    const closedClaims = trendsData.reduce((sum, day) => sum + day.closed_claims, 0);\n    const resolvedClaims = approvedClaims + declinedClaims + closedClaims;\n\n    const avgResolutionDays = trendsData\n      .filter(day => day.avg_resolution_days > 0)\n      .reduce((sum, day) => sum + day.avg_resolution_days, 0) / \n      trendsData.filter(day => day.avg_resolution_days > 0).length || 0;\n\n    return {\n      totalClaims,\n      openClaims,\n      resolvedClaims,\n      avgResolutionDays: Math.round(avgResolutionDays * 10) / 10,\n      claimRate: 0, // Would need order data to calculate\n    };\n  };\n\n  const summary = calculateSummary();\n\n  // Format data for chart\n  const chartData = trendsData?.map(item => ({\n    date: new Date(item.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' }),\n    Open: item.open_claims,\n    'In Review': item.in_review_claims,\n    Approved: item.approved_claims,\n    Declined: item.declined_claims,\n    Closed: item.closed_claims,\n    Total: item.total_claims,\n  })) || [];\n\n  const tooltipCursor = useMemo(\n    () => ({\n      fill: theme.palette.primary.main,\n      fillOpacity: 0.08,\n    }),\n    [theme.palette.primary.main],\n  );\n\n  const renderTooltip = useCallback(({ active, payload, label }: any) => {\n    if (!active || !payload || payload.length === 0) {\n      return null;\n    }\n\n    const visiblePayload = payload.filter((entry: any) => typeof entry?.value === 'number' && entry.value > 0);\n    if (visiblePayload.length === 0) {\n      return null;\n    }\n\n    return (\n      <Box\n        sx={{\n          bgcolor: theme.palette.background.paper,\n          borderRadius: 1,\n          boxShadow: theme.shadows[4],\n          border: `1px solid ${theme.palette.divider}`,\n          px: 1.5,\n          py: 1,\n          minWidth: 140,\n        }}\n      >\n        <Typography variant=\"caption\" color=\"text.secondary\" sx={{ fontWeight: 600 }}>\n          {label}\n        </Typography>\n        {visiblePayload.map((entry: any) => (\n          <Box key={entry.dataKey} sx={{ display: 'flex', justifyContent: 'space-between', gap: 1, mt: 0.5 }}>\n            <Typography variant=\"body2\" sx={{ color: entry.color }}>\n              {entry.name}\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.primary\">\n              {entry.value}\n            </Typography>\n          </Box>\n        ))}\n      </Box>\n    );\n  }, [theme.palette.background.paper, theme.palette.divider, theme.shadows]);\n\n  return (\n    <Card>\n      <CardContent>\n        {/* Header */}\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n          <Box>\n            <Typography variant=\"h6\" gutterBottom>\n               Claims Trends\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              Monitor claims and resolution performance\n            </Typography>\n          </Box>\n          <Stack direction=\"row\" spacing={1}>\n            <FormControl size=\"small\" sx={{ minWidth: 100 }}>\n              <InputLabel>Type</InputLabel>\n              <Select\n                value={chartType}\n                label=\"Type\"\n                onChange={(e) => setChartType(e.target.value as 'bar' | 'line')}\n              >\n                <MenuItem value=\"bar\">Bar</MenuItem>\n                <MenuItem value=\"line\">Line</MenuItem>\n              </Select>\n            </FormControl>\n            <FormControl size=\"small\" sx={{ minWidth: 150 }}>\n              <InputLabel>Period</InputLabel>\n              <Select\n                value={period}\n                label=\"Period\"\n                onChange={(e) => setPeriod(e.target.value)}\n              >\n                {availablePeriods.map(p => (\n                  <MenuItem key={p.value} value={p.value}>{p.label}</MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n          </Stack>\n        </Box>\n\n        {/* Summary Stats */}\n        <Stack direction=\"row\" spacing={2} sx={{ mb: 3 }} flexWrap=\"wrap\">\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n            <Warning sx={{ color: 'warning.main' }} />\n            <Box>\n              <Typography variant=\"h5\" fontWeight=\"bold\">\n                {summary.totalClaims}\n              </Typography>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Total Claims\n              </Typography>\n            </Box>\n          </Box>\n\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n            <Schedule sx={{ color: 'info.main' }} />\n            <Box>\n              <Typography variant=\"h5\" fontWeight=\"bold\">\n                {summary.openClaims}\n              </Typography>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Open Claims\n              </Typography>\n            </Box>\n          </Box>\n\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n            <CheckCircle sx={{ color: 'success.main' }} />\n            <Box>\n              <Typography variant=\"h5\" fontWeight=\"bold\">\n                {summary.resolvedClaims}\n              </Typography>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Resolved\n              </Typography>\n            </Box>\n          </Box>\n\n          {subscriptionTier !== 'tier1' && (\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n              <Typography variant=\"h5\" fontWeight=\"bold\">\n                {summary.avgResolutionDays}d\n              </Typography>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Avg Resolution\n              </Typography>\n            </Box>\n          )}\n        </Stack>\n\n        {/* Chart */}\n        <Box sx={{ width: '100%', height: 300 }}>\n          <ResponsiveContainer>\n            {chartType === 'bar' ? (\n              <BarChart data={chartData}>\n                <CartesianGrid strokeDasharray=\"3 3\" />\n                <XAxis \n                  dataKey=\"date\" \n                  tick={{ fontSize: 12 }}\n                  angle={-45}\n                  textAnchor=\"end\"\n                  height={60}\n                />\n                <YAxis tick={{ fontSize: 12 }} />\n                <Tooltip\n                  content={renderTooltip}\n                  cursor={tooltipCursor}\n                  wrapperStyle={{ outline: 'none' }}\n                />\n                <Legend />\n                <Bar dataKey=\"Open\" fill=\"#ffc658\" stackId=\"a\" />\n                <Bar dataKey=\"In Review\" fill=\"#8884d8\" stackId=\"a\" />\n                <Bar dataKey=\"Approved\" fill=\"#82ca9d\" stackId=\"a\" />\n                {subscriptionTier !== 'tier1' && (\n                  <>\n                    <Bar dataKey=\"Declined\" fill=\"#ff8042\" stackId=\"a\" />\n                    <Bar dataKey=\"Closed\" fill=\"#999999\" stackId=\"a\" />\n                  </>\n                )}\n              </BarChart>\n            ) : (\n              <LineChart data={chartData}>\n                <CartesianGrid strokeDasharray=\"3 3\" />\n                <XAxis \n                  dataKey=\"date\" \n                  tick={{ fontSize: 12 }}\n                  angle={-45}\n                  textAnchor=\"end\"\n                  height={60}\n                />\n                <YAxis tick={{ fontSize: 12 }} />\n                <Tooltip\n                  content={renderTooltip}\n                  cursor={tooltipCursor}\n                  wrapperStyle={{ outline: 'none' }}\n                />\n                <Legend />\n                <Line type=\"monotone\" dataKey=\"Total\" stroke=\"#8884d8\" strokeWidth={2} />\n                <Line type=\"monotone\" dataKey=\"Open\" stroke=\"#ffc658\" strokeWidth={2} />\n                <Line type=\"monotone\" dataKey=\"Approved\" stroke=\"#82ca9d\" strokeWidth={2} />\n                {subscriptionTier !== 'tier1' && (\n                  <>\n                    <Line type=\"monotone\" dataKey=\"Declined\" stroke=\"#ff8042\" strokeWidth={1} strokeDasharray=\"5 5\" />\n                    <Line type=\"monotone\" dataKey=\"Closed\" stroke=\"#999999\" strokeWidth={1} strokeDasharray=\"5 5\" />\n                  </>\n                )}\n              </LineChart>\n            )}\n          </ResponsiveContainer>\n        </Box>\n\n        {/* Status Legend */}\n        <Stack direction=\"row\" spacing={1} sx={{ mt: 2 }} flexWrap=\"wrap\">\n          <Chip label=\" Open\" size=\"small\" variant=\"outlined\" />\n          <Chip label=\" In Review\" size=\"small\" variant=\"outlined\" />\n          <Chip label=\" Approved\" size=\"small\" variant=\"outlined\" />\n          {subscriptionTier !== 'tier1' && (\n            <>\n              <Chip label=\" Declined\" size=\"small\" variant=\"outlined\" />\n              <Chip label=\" Closed\" size=\"small\" variant=\"outlined\" />\n            </>\n          )}\n        </Stack>\n\n        {/* Tier Upgrade Notice */}\n        {subscriptionTier === 'tier1' && (\n          <Alert severity=\"info\" sx={{ mt: 2 }}>\n            <Typography variant=\"body2\">\n              <strong>Upgrade to Pro</strong> to view declined/closed claims and resolution time metrics.\n            </Typography>\n          </Alert>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default ClaimsTrendsChart;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\dashboard\\CustomizableDashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FormControlLabel' is defined but never used.","line":21,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":19},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadDashboardLayout'. Either include it or remove the dependency array.","line":106,"column":6,"nodeType":"ArrayExpression","endLine":106,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [loadDashboardLayout, user.user_id]","fix":{"range":[4006,4021],"text":"[loadDashboardLayout, user.user_id]"}}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":253,"column":84,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[8352,8433],"text":" Drag widgets to reorder them. Click &quot;Add widgets\" to show/hide widgets.\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[8352,8433],"text":" Drag widgets to reorder them. Click &ldquo;Add widgets\" to show/hide widgets.\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[8352,8433],"text":" Drag widgets to reorder them. Click &#34;Add widgets\" to show/hide widgets.\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[8352,8433],"text":" Drag widgets to reorder them. Click &rdquo;Add widgets\" to show/hide widgets.\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":253,"column":96,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[8352,8433],"text":" Drag widgets to reorder them. Click \"Add widgets&quot; to show/hide widgets.\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[8352,8433],"text":" Drag widgets to reorder them. Click \"Add widgets&ldquo; to show/hide widgets.\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[8352,8433],"text":" Drag widgets to reorder them. Click \"Add widgets&#34; to show/hide widgets.\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[8352,8433],"text":" Drag widgets to reorder them. Click \"Add widgets&rdquo; to show/hide widgets.\n        "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * CUSTOMIZABLE DASHBOARD\n * Drag-and-drop dashboard with widget customization\n * Created: October 21, 2025\n */\n\nimport React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  Button,\n  IconButton,\n  Drawer,\n  Typography,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  ListItemButton,\n  Divider,\n  Switch,\n  FormControlLabel,\n  Alert,\n  Tooltip,\n  Paper,\n  Stack,\n} from '@mui/material';\nimport {\n  Settings,\n  Add,\n  Refresh,\n  RestartAlt,\n  Save,\n  Close,\n  DragIndicator,\n} from '@mui/icons-material';\nimport { Responsive, WidthProvider, Layout } from 'react-grid-layout';\nimport 'react-grid-layout/css/styles.css';\nimport 'react-resizable/css/styles.css';\nimport { useAuthStore } from '@/store/authStore';\nimport { apiClient } from '@/services/apiClient';\nimport toast from 'react-hot-toast';\nimport {\n  WIDGET_REGISTRY,\n  WidgetType,\n  WidgetConfig,\n} from './widgets/WidgetLibrary';\n\nconst ResponsiveGridLayout = WidthProvider(Responsive);\n\n// ============================================================================\n// DEFAULT LAYOUTS\n// ============================================================================\n\nconst DEFAULT_LAYOUTS: Record<string, WidgetConfig[]> = {\n  merchant: [\n    { id: '1', type: 'performance-stats', title: 'Performance Stats', size: 'medium', position: { x: 0, y: 0 } },\n    { id: '2', type: 'recent-orders', title: 'Recent Orders', size: 'medium', position: { x: 4, y: 0 } },\n    { id: '3', type: 'active-deliveries', title: 'Active Deliveries', size: 'medium', position: { x: 8, y: 0 } },\n    { id: '4', type: 'quick-actions', title: 'Quick Actions', size: 'small', position: { x: 0, y: 4 } },\n    { id: '5', type: 'notifications', title: 'Notifications', size: 'medium', position: { x: 4, y: 4 } },\n  ],\n  courier: [\n    { id: '1', type: 'active-deliveries', title: 'Active Deliveries', size: 'medium', position: { x: 0, y: 0 } },\n    { id: '2', type: 'performance-stats', title: 'Performance Stats', size: 'medium', position: { x: 4, y: 0 } },\n    { id: '3', type: 'recent-orders', title: 'Recent Orders', size: 'medium', position: { x: 8, y: 0 } },\n    { id: '4', type: 'notifications', title: 'Notifications', size: 'medium', position: { x: 0, y: 4 } },\n  ],\n  admin: [\n    { id: '1', type: 'performance-stats', title: 'Performance Stats', size: 'medium', position: { x: 0, y: 0 } },\n    { id: '2', type: 'recent-orders', title: 'Recent Orders', size: 'medium', position: { x: 4, y: 0 } },\n    { id: '3', type: 'active-deliveries', title: 'Active Deliveries', size: 'medium', position: { x: 8, y: 0 } },\n    { id: '4', type: 'notifications', title: 'Notifications', size: 'medium', position: { x: 0, y: 4 } },\n    { id: '5', type: 'quick-actions', title: 'Quick Actions', size: 'small', position: { x: 8, y: 4 } },\n  ],\n  consumer: [\n    { id: '1', type: 'active-deliveries', title: 'My Deliveries', size: 'medium', position: { x: 0, y: 0 } },\n    { id: '2', type: 'recent-orders', title: 'Recent Orders', size: 'medium', position: { x: 4, y: 0 } },\n    { id: '3', type: 'notifications', title: 'Notifications', size: 'medium', position: { x: 0, y: 4 } },\n  ],\n};\n\n// ============================================================================\n// SIZE CONFIGURATIONS\n// ============================================================================\n\nconst SIZE_CONFIG = {\n  small: { w: 4, h: 3 },\n  medium: { w: 4, h: 4 },\n  large: { w: 8, h: 4 },\n};\n\n// ============================================================================\n// MAIN COMPONENT\n// ============================================================================\n\nexport const CustomizableDashboard: React.FC = () => {\n  const { user } = useAuthStore();\n  const [widgets, setWidgets] = useState<WidgetConfig[]>([]);\n  const [isCustomizing, setIsCustomizing] = useState(false);\n  const [drawerOpen, setDrawerOpen] = useState(false);\n  const [hasChanges, setHasChanges] = useState(false);\n\n  // Load user's dashboard layout\n  useEffect(() => {\n    loadDashboardLayout();\n  }, [user?.user_id]);\n\n  const loadDashboardLayout = async () => {\n    try {\n      const response = await apiClient.get('/user/dashboard-layout');\n      if (response.data.data?.layout) {\n        setWidgets(response.data.data.layout);\n      } else {\n        // Use default layout for user's role\n        const defaultLayout = DEFAULT_LAYOUTS[user?.user_role || 'merchant'] || DEFAULT_LAYOUTS.merchant;\n        setWidgets(defaultLayout);\n      }\n    } catch (error) {\n      console.error('Failed to load dashboard layout:', error);\n      // Use default layout\n      const defaultLayout = DEFAULT_LAYOUTS[user?.user_role || 'merchant'] || DEFAULT_LAYOUTS.merchant;\n      setWidgets(defaultLayout);\n    }\n  };\n\n  const saveDashboardLayout = async () => {\n    try {\n      await apiClient.post('/user/dashboard-layout', { layout: widgets });\n      toast.success('Dashboard layout saved!');\n      setHasChanges(false);\n    } catch (error) {\n      console.error('Failed to save dashboard layout:', error);\n      toast.error('Failed to save layout');\n    }\n  };\n\n  const resetToDefault = () => {\n    const defaultLayout = DEFAULT_LAYOUTS[user?.user_role || 'merchant'] || DEFAULT_LAYOUTS.merchant;\n    setWidgets(defaultLayout);\n    setHasChanges(true);\n    toast.success('Reset to default layout');\n  };\n\n  const handleLayoutChange = (layout: Layout[]) => {\n    if (!isCustomizing) return;\n\n    const updatedWidgets = widgets.map(widget => {\n      const layoutItem = layout.find(l => l.i === widget.id);\n      if (layoutItem) {\n        return {\n          ...widget,\n          position: { x: layoutItem.x, y: layoutItem.y },\n        };\n      }\n      return widget;\n    });\n\n    setWidgets(updatedWidgets);\n    setHasChanges(true);\n  };\n\n  const toggleWidget = (widgetType: WidgetType) => {\n    const exists = widgets.find(w => w.type === widgetType);\n    \n    if (exists) {\n      // Remove widget\n      setWidgets(widgets.filter(w => w.type !== widgetType));\n    } else {\n      // Add widget\n      const newWidget: WidgetConfig = {\n        id: Date.now().toString(),\n        type: widgetType,\n        title: WIDGET_REGISTRY[widgetType].title,\n        size: WIDGET_REGISTRY[widgetType].defaultSize,\n        position: { x: 0, y: Infinity }, // Add to bottom\n      };\n      setWidgets([...widgets, newWidget]);\n    }\n    \n    setHasChanges(true);\n  };\n\n  const refreshAllWidgets = () => {\n    // Force re-render of all widgets\n    setWidgets([...widgets]);\n    toast.success('Refreshing all widgets...');\n  };\n\n  // Convert widgets to grid layout\n  const gridLayout: Layout[] = widgets.map(widget => ({\n    i: widget.id,\n    x: widget.position.x,\n    y: widget.position.y,\n    ...SIZE_CONFIG[widget.size],\n    minW: 2,\n    minH: 2,\n  }));\n\n  return (\n    <Box>\n      {/* Toolbar */}\n      <Paper sx={{ p: 2, mb: 3, display: 'flex', alignItems: 'center', gap: 2 }}>\n        <Typography variant=\"h5\" sx={{ flexGrow: 1, fontWeight: 'bold' }}>\n          My Dashboard\n        </Typography>\n\n        <Stack direction=\"row\" spacing={1}>\n          <Tooltip title=\"Refresh all widgets\">\n            <IconButton onClick={refreshAllWidgets} color=\"primary\">\n              <Refresh />\n            </IconButton>\n          </Tooltip>\n\n          <Tooltip title=\"Customize dashboard\">\n            <IconButton \n              onClick={() => setIsCustomizing(!isCustomizing)}\n              color={isCustomizing ? 'primary' : 'default'}\n            >\n              <Settings />\n            </IconButton>\n          </Tooltip>\n\n          <Tooltip title=\"Add widgets\">\n            <IconButton onClick={() => setDrawerOpen(true)} color=\"primary\">\n              <Add />\n            </IconButton>\n          </Tooltip>\n\n          {hasChanges && (\n            <>\n              <Button\n                variant=\"outlined\"\n                startIcon={<RestartAlt />}\n                onClick={resetToDefault}\n              >\n                Reset\n              </Button>\n              <Button\n                variant=\"contained\"\n                startIcon={<Save />}\n                onClick={saveDashboardLayout}\n              >\n                Save Layout\n              </Button>\n            </>\n          )}\n        </Stack>\n      </Paper>\n\n      {/* Customization Alert */}\n      {isCustomizing && (\n        <Alert severity=\"info\" sx={{ mb: 3 }}>\n          <strong>Customization Mode:</strong> Drag widgets to reorder them. Click \"Add widgets\" to show/hide widgets.\n        </Alert>\n      )}\n\n      {/* Grid Layout */}\n      <ResponsiveGridLayout\n        className=\"layout\"\n        layouts={{ lg: gridLayout }}\n        breakpoints={{ lg: 1200, md: 996, sm: 768, xs: 480, xxs: 0 }}\n        cols={{ lg: 12, md: 10, sm: 6, xs: 4, xxs: 2 }}\n        rowHeight={80}\n        isDraggable={isCustomizing}\n        isResizable={false}\n        onLayoutChange={handleLayoutChange}\n        draggableHandle=\".drag-handle\"\n      >\n        {widgets.map(widget => {\n          const WidgetComponent = WIDGET_REGISTRY[widget.type as WidgetType]?.component;\n          \n          if (!WidgetComponent) return null;\n\n          return (\n            <Box key={widget.id} sx={{ position: 'relative' }}>\n              {isCustomizing && (\n                <Box\n                  className=\"drag-handle\"\n                  sx={{\n                    position: 'absolute',\n                    top: 8,\n                    right: 8,\n                    zIndex: 10,\n                    cursor: 'move',\n                    bgcolor: 'background.paper',\n                    borderRadius: 1,\n                    p: 0.5,\n                  }}\n                >\n                  <DragIndicator fontSize=\"small\" />\n                </Box>\n              )}\n              <WidgetComponent\n                config={widget}\n                onRefresh={() => setWidgets([...widgets])}\n              />\n            </Box>\n          );\n        })}\n      </ResponsiveGridLayout>\n\n      {/* Widget Drawer */}\n      <Drawer\n        anchor=\"right\"\n        open={drawerOpen}\n        onClose={() => setDrawerOpen(false)}\n      >\n        <Box sx={{ width: 350, p: 3 }}>\n          <Box sx={{ display: 'flex', alignItems: 'center', mb: 3 }}>\n            <Typography variant=\"h6\" sx={{ flexGrow: 1 }}>\n              Available Widgets\n            </Typography>\n            <IconButton onClick={() => setDrawerOpen(false)}>\n              <Close />\n            </IconButton>\n          </Box>\n\n          <Divider sx={{ mb: 2 }} />\n\n          <List>\n            {Object.entries(WIDGET_REGISTRY).map(([type, widget]) => {\n              const isActive = widgets.some(w => w.type === type);\n              \n              return (\n                <ListItem key={type} disablePadding>\n                  <ListItemButton onClick={() => toggleWidget(type as WidgetType)}>\n                    <ListItemIcon>{widget.icon}</ListItemIcon>\n                    <ListItemText\n                      primary={widget.title}\n                      secondary={widget.description}\n                    />\n                    <Switch checked={isActive} edge=\"end\" />\n                  </ListItemButton>\n                </ListItem>\n              );\n            })}\n          </List>\n\n          <Divider sx={{ my: 2 }} />\n\n          <Button\n            fullWidth\n            variant=\"contained\"\n            startIcon={<Save />}\n            onClick={() => {\n              saveDashboardLayout();\n              setDrawerOpen(false);\n            }}\n            disabled={!hasChanges}\n          >\n            Save Changes\n          </Button>\n        </Box>\n      </Drawer>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\dashboard\\OrderTrendsChart.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Chip' is defined but never used.","line":19,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Cancel' is defined but never used.","line":29,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Schedule' is defined but never used.","line":30,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":11}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * OrderTrendsChart Component\n * Displays order trends over time with multiple series\n * \n * Phase: Dashboard Analytics Enhancement - Phase 1.2\n * Created: October 18, 2025, 6:52 PM\n */\n\nimport React, { useState } from 'react';\nimport {\n  Card,\n  CardContent,\n  Typography,\n  Box,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Chip,\n  Stack,\n  CircularProgress,\n  Alert,\n} from '@mui/material';\nimport {\n  TrendingUp,\n  TrendingDown,\n  LocalShipping,\n  CheckCircle,\n  Cancel,\n  Schedule,\n} from '@mui/icons-material';\nimport {\n  LineChart,\n  Line,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  ResponsiveContainer,\n} from 'recharts';\nimport { useQuery } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport { useAuthStore } from '@/store/authStore';\n\ninterface OrderTrendsChartProps {\n  entityType: 'courier' | 'merchant';\n  entityId?: string;\n  subscriptionTier?: string;\n}\n\ninterface OrderTrendData {\n  date: string;\n  total_orders: number;\n  delivered_orders: number;\n  in_transit_orders: number;\n  pending_orders: number;\n  cancelled_orders: number;\n  avg_order_value: number;\n}\n\nexport const OrderTrendsChart: React.FC<OrderTrendsChartProps> = ({\n  entityType,\n  entityId,\n  subscriptionTier = 'tier1',\n}) => {\n  const { user } = useAuthStore();\n  const [period, setPeriod] = useState<string>('30d');\n\n  // Determine available periods based on subscription tier\n  const getAvailablePeriods = () => {\n    switch (subscriptionTier) {\n      case 'tier1':\n        return [{ value: '7d', label: 'Last 7 Days' }];\n      case 'tier2':\n        return [\n          { value: '7d', label: 'Last 7 Days' },\n          { value: '30d', label: 'Last 30 Days' },\n        ];\n      case 'tier3':\n        return [\n          { value: '7d', label: 'Last 7 Days' },\n          { value: '30d', label: 'Last 30 Days' },\n          { value: '90d', label: 'Last 90 Days' },\n          { value: '1y', label: 'Last Year' },\n        ];\n      default:\n        return [{ value: '7d', label: 'Last 7 Days' }];\n    }\n  };\n\n  const availablePeriods = getAvailablePeriods();\n\n  // Fetch order trends data\n  const { data: trendsData, isLoading, error } = useQuery({\n    queryKey: ['order-trends', entityType, entityId || user?.user_id, period],\n    queryFn: async () => {\n      const response = await apiClient.get('/analytics/order-trends', {\n        params: {\n          entity_type: entityType,\n          entity_id: entityId || user?.user_id,\n          period,\n        },\n      });\n      return response.data.data as OrderTrendData[];\n    },\n    enabled: !!user,\n  });\n\n  // Early return for loading state\n  if (isLoading) {\n    return (\n      <Card>\n        <CardContent>\n          <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: 300 }}>\n            <CircularProgress />\n          </Box>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (error) {\n    return (\n      <Card>\n        <CardContent>\n          <Alert severity=\"error\">\n            Failed to load order trends. Please try again later.\n          </Alert>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  // Calculate summary statistics (only after data is loaded and validated)\n  const calculateSummary = () => {\n    if (!trendsData || trendsData.length === 0) {\n      return {\n        totalOrders: 0,\n        deliveredOrders: 0,\n        growthRate: 0,\n        avgOrderValue: 0,\n      };\n    }\n\n    const totalOrders = trendsData.reduce((sum, day) => sum + day.total_orders, 0);\n    const deliveredOrders = trendsData.reduce((sum, day) => sum + day.delivered_orders, 0);\n    const avgOrderValue = trendsData.reduce((sum, day) => sum + day.avg_order_value, 0) / trendsData.length;\n\n    // Calculate growth rate (compare first half vs second half)\n    const midPoint = Math.floor(trendsData.length / 2);\n    const firstHalf = trendsData.slice(0, midPoint);\n    const secondHalf = trendsData.slice(midPoint);\n    \n    const firstHalfTotal = firstHalf.reduce((sum, day) => sum + day.total_orders, 0);\n    const secondHalfTotal = secondHalf.reduce((sum, day) => sum + day.total_orders, 0);\n    \n    const growthRate = firstHalfTotal > 0 \n      ? ((secondHalfTotal - firstHalfTotal) / firstHalfTotal) * 100 \n      : 0;\n\n    return {\n      totalOrders,\n      deliveredOrders,\n      growthRate: Math.round(growthRate * 10) / 10,\n      avgOrderValue: Math.round(avgOrderValue * 100) / 100,\n    };\n  };\n\n  const summary = calculateSummary();\n\n  // Format data for chart\n  const chartData = trendsData?.map(item => ({\n    date: new Date(item.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' }),\n    Total: item.total_orders,\n    Delivered: item.delivered_orders,\n    'In Transit': item.in_transit_orders,\n    Pending: item.pending_orders,\n    Cancelled: item.cancelled_orders,\n  })) || [];\n\n  return (\n    <Card>\n      <CardContent>\n        {/* Header */}\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n          <Box>\n            <Typography variant=\"h6\" gutterBottom>\n               Order Trends\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              Track your order volume and status over time\n            </Typography>\n          </Box>\n          <FormControl size=\"small\" sx={{ minWidth: 150 }}>\n            <InputLabel>Period</InputLabel>\n            <Select\n              value={period}\n              label=\"Period\"\n              onChange={(e) => setPeriod(e.target.value)}\n            >\n              {availablePeriods.map(p => (\n                <MenuItem key={p.value} value={p.value}>{p.label}</MenuItem>\n              ))}\n            </Select>\n          </FormControl>\n        </Box>\n\n        {/* Summary Stats */}\n        <Stack direction=\"row\" spacing={2} sx={{ mb: 3 }} flexWrap=\"wrap\">\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n            <LocalShipping sx={{ color: 'primary.main' }} />\n            <Box>\n              <Typography variant=\"h5\" fontWeight=\"bold\">\n                {summary.totalOrders}\n              </Typography>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Total Orders\n              </Typography>\n            </Box>\n          </Box>\n\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n            <CheckCircle sx={{ color: 'success.main' }} />\n            <Box>\n              <Typography variant=\"h5\" fontWeight=\"bold\">\n                {summary.deliveredOrders}\n              </Typography>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Delivered\n              </Typography>\n            </Box>\n          </Box>\n\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n            {summary.growthRate >= 0 ? (\n              <TrendingUp sx={{ color: 'success.main' }} />\n            ) : (\n              <TrendingDown sx={{ color: 'error.main' }} />\n            )}\n            <Box>\n              <Typography variant=\"h5\" fontWeight=\"bold\" color={summary.growthRate >= 0 ? 'success.main' : 'error.main'}>\n                {summary.growthRate > 0 ? '+' : ''}{summary.growthRate}%\n              </Typography>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Growth Rate\n              </Typography>\n            </Box>\n          </Box>\n\n          {subscriptionTier !== 'tier1' && (\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n              <Typography variant=\"h5\" fontWeight=\"bold\">\n                ${summary.avgOrderValue}\n              </Typography>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Avg Order Value\n              </Typography>\n            </Box>\n          )}\n        </Stack>\n\n        {/* Chart */}\n        <Box sx={{ width: '100%', height: 300 }}>\n          <ResponsiveContainer>\n            <LineChart data={chartData}>\n              <CartesianGrid strokeDasharray=\"3 3\" />\n              <XAxis \n                dataKey=\"date\" \n                tick={{ fontSize: 12 }}\n                angle={-45}\n                textAnchor=\"end\"\n                height={60}\n              />\n              <YAxis tick={{ fontSize: 12 }} />\n              <Tooltip />\n              <Legend />\n              <Line \n                type=\"monotone\" \n                dataKey=\"Total\" \n                stroke=\"#8884d8\" \n                strokeWidth={2}\n                dot={{ r: 3 }}\n              />\n              <Line \n                type=\"monotone\" \n                dataKey=\"Delivered\" \n                stroke=\"#82ca9d\" \n                strokeWidth={2}\n                dot={{ r: 3 }}\n              />\n              <Line \n                type=\"monotone\" \n                dataKey=\"In Transit\" \n                stroke=\"#ffc658\" \n                strokeWidth={2}\n                dot={{ r: 3 }}\n              />\n              {subscriptionTier !== 'tier1' && (\n                <>\n                  <Line \n                    type=\"monotone\" \n                    dataKey=\"Pending\" \n                    stroke=\"#ff8042\" \n                    strokeWidth={1}\n                    strokeDasharray=\"5 5\"\n                  />\n                  <Line \n                    type=\"monotone\" \n                    dataKey=\"Cancelled\" \n                    stroke=\"#d32f2f\" \n                    strokeWidth={1}\n                    strokeDasharray=\"5 5\"\n                  />\n                </>\n              )}\n            </LineChart>\n          </ResponsiveContainer>\n        </Box>\n\n        {/* Tier Upgrade Notice */}\n        {subscriptionTier === 'tier1' && (\n          <Alert severity=\"info\" sx={{ mt: 2 }}>\n            <Typography variant=\"body2\">\n              <strong>Upgrade to Pro</strong> to view 30-day trends, cancelled orders, and average order value.\n            </Typography>\n          </Alert>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default OrderTrendsChart;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\dashboard\\PerformanceTrendsChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\dashboard\\QuickActionsPanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":125,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":125,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2680,2683],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2680,2683],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport {\n  Card,\n  CardContent,\n  Typography,\n  Grid,\n  Button,\n  Box,\n} from '@mui/material';\nimport {\n  Assessment,\n  LocalShipping,\n  Store,\n  Report,\n  Settings,\n  People,\n  Add,\n  TrendingUp,\n} from '@mui/icons-material';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuthStore } from '@/store/authStore';\n\ninterface QuickAction {\n  label: string;\n  icon: React.ReactNode;\n  path: string;\n  color: string;\n  roles?: string[];\n}\n\nexport const QuickActionsPanel: React.FC = () => {\n  const navigate = useNavigate();\n  const { user } = useAuthStore();\n\n  const allActions: QuickAction[] = [\n    {\n      label: 'View Analytics',\n      icon: <Assessment />,\n      path: '/analytics',\n      color: 'primary',\n      roles: ['admin'],\n    },\n    {\n      label: 'Manage Couriers',\n      icon: <LocalShipping />,\n      path: '/couriers',\n      color: 'info',\n      roles: ['admin'],\n    },\n    {\n      label: 'View Stores',\n      icon: <Store />,\n      path: '/stores',\n      color: 'success',\n      roles: ['admin', 'merchant'],\n    },\n    {\n      label: 'TrustScores',\n      icon: <TrendingUp />,\n      path: '/trustscores',\n      color: 'warning',\n      roles: ['admin', 'merchant', 'courier'],\n    },\n    {\n      label: 'Create Order',\n      icon: <Add />,\n      path: '/orders',\n      color: 'primary',\n      roles: ['merchant'],\n    },\n    {\n      label: 'View Reports',\n      icon: <Report />,\n      path: '/reports',\n      color: 'secondary',\n      roles: ['merchant'],\n    },\n    {\n      label: 'My Orders',\n      icon: <LocalShipping />,\n      path: '/orders',\n      color: 'info',\n      roles: ['courier'],\n    },\n    {\n      label: 'My TrustScore',\n      icon: <TrendingUp />,\n      path: '/trustscores',\n      color: 'warning',\n      roles: ['courier'],\n    },\n    {\n      label: 'Team',\n      icon: <People />,\n      path: '/team',\n      color: 'info',\n      roles: ['admin', 'merchant'],\n    },\n    {\n      label: 'Settings',\n      icon: <Settings />,\n      path: '/settings',\n      color: 'inherit',\n      roles: ['admin', 'merchant', 'courier'],\n    },\n  ];\n\n  // Filter actions based on user role\n  const actions = allActions.filter(action => \n    !action.roles || action.roles.includes(user?.user_role || '')\n  );\n\n  return (\n    <Card>\n      <CardContent>\n        <Typography variant=\"h6\" gutterBottom>\n          Quick Actions\n        </Typography>\n        <Grid container spacing={2} sx={{ mt: 1 }}>\n          {actions.map((action) => (\n            <Grid item xs={6} sm={4} md={3} key={action.label}>\n              <Button\n                fullWidth\n                variant=\"outlined\"\n                color={action.color as any}\n                startIcon={action.icon}\n                onClick={() => navigate(action.path)}\n                sx={{\n                  py: 1.5,\n                  flexDirection: 'column',\n                  gap: 0.5,\n                  '& .MuiButton-startIcon': {\n                    margin: 0,\n                  },\n                }}\n              >\n                <Box sx={{ fontSize: '0.875rem' }}>\n                  {action.label}\n                </Box>\n              </Button>\n            </Grid>\n          ))}\n        </Grid>\n      </CardContent>\n    </Card>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\dashboard\\RecentActivityWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\dashboard\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\dashboard\\widgets\\WidgetLibrary.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MoreVert' is defined but never used.","line":32,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ShowChart' is defined but never used.","line":34,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Map' is defined but never used.","line":37,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":37,"endColumn":6},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":53,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1013,1016],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1013,1016],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'config' is defined but never used.","line":67,"column":65,"nodeType":"Identifier","messageId":"unusedVar","endLine":67,"endColumn":71},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'config' is defined but never used.","line":139,"column":61,"nodeType":"Identifier","messageId":"unusedVar","endLine":139,"endColumn":67},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":181,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":181,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4802,4805],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4802,4805],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":197,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":197,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5573,5576],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5573,5576],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'config' is defined but never used.","line":219,"column":65,"nodeType":"Identifier","messageId":"unusedVar","endLine":219,"endColumn":71},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":250,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":250,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7232,7235],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7232,7235],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'config' is defined but never used.","line":286,"column":61,"nodeType":"Identifier","messageId":"unusedVar","endLine":286,"endColumn":67},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":303,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":303,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9418,9421],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9418,9421],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'config' is defined but never used.","line":322,"column":62,"nodeType":"Identifier","messageId":"unusedVar","endLine":322,"endColumn":68},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":353,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":353,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10940,10943],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10940,10943],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":14,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * WIDGET LIBRARY\n * Reusable dashboard widgets for custom layouts\n * Created: October 21, 2025\n */\n\nimport React from 'react';\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  Typography,\n  Box,\n  Avatar,\n  Chip,\n  IconButton,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemAvatar,\n  Divider,\n  LinearProgress,\n  Button,\n} from '@mui/material';\nimport {\n  TrendingUp,\n  LocalShipping,\n  Assessment,\n  Star,\n  Schedule,\n  CheckCircle,\n  MoreVert,\n  Refresh,\n  ShowChart,\n  ShoppingCart,\n  Notifications,\n  Map,\n  Speed,\n} from '@mui/icons-material';\nimport { useQuery } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\n\n// ============================================================================\n// WIDGET TYPES\n// ============================================================================\n\nexport interface WidgetConfig {\n  id: string;\n  type: string;\n  title: string;\n  size: 'small' | 'medium' | 'large';\n  position: { x: number; y: number };\n  settings?: Record<string, any>;\n}\n\nexport interface WidgetProps {\n  config: WidgetConfig;\n  onRefresh?: () => void;\n  onSettings?: () => void;\n  onRemove?: () => void;\n}\n\n// ============================================================================\n// PERFORMANCE STATS WIDGET\n// ============================================================================\n\nexport const PerformanceStatsWidget: React.FC<WidgetProps> = ({ config, onRefresh }) => {\n  const { data, isLoading } = useQuery({\n    queryKey: ['widget-performance-stats'],\n    queryFn: async () => {\n      const response = await apiClient.get('/trustscore/dashboard');\n      return response.data.data;\n    },\n    refetchInterval: 60000, // Refresh every minute\n  });\n\n  const stats = [\n    {\n      label: 'Avg Trust Score',\n      value: data?.avg_trust_score?.toFixed(1) || '0.0',\n      icon: <Star />,\n      color: '#ffc107',\n    },\n    {\n      label: 'On-Time Rate',\n      value: `${data?.avg_on_time_rate?.toFixed(1) || '0'}%`,\n      icon: <Schedule />,\n      color: '#4caf50',\n    },\n    {\n      label: 'Completion Rate',\n      value: `${data?.avg_completion_rate?.toFixed(1) || '0'}%`,\n      icon: <CheckCircle />,\n      color: '#2196f3',\n    },\n  ];\n\n  return (\n    <Card sx={{ height: '100%' }}>\n      <CardHeader\n        title=\"Performance Stats\"\n        action={\n          <IconButton size=\"small\" onClick={onRefresh}>\n            <Refresh />\n          </IconButton>\n        }\n      />\n      <CardContent>\n        {isLoading ? (\n          <LinearProgress />\n        ) : (\n          <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2 }}>\n            {stats.map((stat, index) => (\n              <Box key={index} sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n                <Avatar sx={{ bgcolor: stat.color, width: 40, height: 40 }}>\n                  {stat.icon}\n                </Avatar>\n                <Box sx={{ flexGrow: 1 }}>\n                  <Typography variant=\"h5\" sx={{ fontWeight: 'bold' }}>\n                    {stat.value}\n                  </Typography>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    {stat.label}\n                  </Typography>\n                </Box>\n              </Box>\n            ))}\n          </Box>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\n// ============================================================================\n// RECENT ORDERS WIDGET\n// ============================================================================\n\nexport const RecentOrdersWidget: React.FC<WidgetProps> = ({ config, onRefresh }) => {\n  const { data, isLoading } = useQuery({\n    queryKey: ['widget-recent-orders'],\n    queryFn: async () => {\n      const response = await apiClient.get('/orders/list?limit=5&sort=created_at:desc');\n      return response.data.data?.orders || [];\n    },\n    refetchInterval: 30000, // Refresh every 30 seconds\n  });\n\n  const orders = data || [];\n\n  const getStatusColor = (status: string) => {\n    const colors: Record<string, string> = {\n      pending: 'warning',\n      confirmed: 'info',\n      in_transit: 'primary',\n      delivered: 'success',\n      cancelled: 'error',\n    };\n    return colors[status] || 'default';\n  };\n\n  return (\n    <Card sx={{ height: '100%' }}>\n      <CardHeader\n        title=\"Recent Orders\"\n        action={\n          <IconButton size=\"small\" onClick={onRefresh}>\n            <Refresh />\n          </IconButton>\n        }\n      />\n      <CardContent sx={{ pt: 0 }}>\n        {isLoading ? (\n          <LinearProgress />\n        ) : orders.length === 0 ? (\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ textAlign: 'center', py: 4 }}>\n            No recent orders\n          </Typography>\n        ) : (\n          <List sx={{ p: 0 }}>\n            {orders.slice(0, 5).map((order: any, index: number) => (\n              <React.Fragment key={order.order_id}>\n                {index > 0 && <Divider />}\n                <ListItem sx={{ px: 0 }}>\n                  <ListItemAvatar>\n                    <Avatar sx={{ bgcolor: 'primary.main' }}>\n                      <ShoppingCart />\n                    </Avatar>\n                  </ListItemAvatar>\n                  <ListItemText\n                    primary={`Order #${order.order_id?.slice(0, 8)}`}\n                    secondary={\n                      <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mt: 0.5 }}>\n                        <Chip\n                          label={order.status}\n                          size=\"small\"\n                          color={getStatusColor(order.status) as any}\n                        />\n                        <Typography variant=\"caption\" color=\"text.secondary\">\n                          {new Date(order.created_at).toLocaleDateString()}\n                        </Typography>\n                      </Box>\n                    }\n                  />\n                </ListItem>\n              </React.Fragment>\n            ))}\n          </List>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\n// ============================================================================\n// ACTIVE DELIVERIES WIDGET\n// ============================================================================\n\nexport const ActiveDeliveriesWidget: React.FC<WidgetProps> = ({ config, onRefresh }) => {\n  const { data, isLoading } = useQuery({\n    queryKey: ['widget-active-deliveries'],\n    queryFn: async () => {\n      const response = await apiClient.get('/orders/list?status=in_transit&limit=5');\n      return response.data.data?.orders || [];\n    },\n    refetchInterval: 30000,\n  });\n\n  const deliveries = data || [];\n\n  return (\n    <Card sx={{ height: '100%' }}>\n      <CardHeader\n        title=\"Active Deliveries\"\n        action={\n          <IconButton size=\"small\" onClick={onRefresh}>\n            <Refresh />\n          </IconButton>\n        }\n      />\n      <CardContent sx={{ pt: 0 }}>\n        {isLoading ? (\n          <LinearProgress />\n        ) : deliveries.length === 0 ? (\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ textAlign: 'center', py: 4 }}>\n            No active deliveries\n          </Typography>\n        ) : (\n          <List sx={{ p: 0 }}>\n            {deliveries.slice(0, 5).map((delivery: any, index: number) => (\n              <React.Fragment key={delivery.order_id}>\n                {index > 0 && <Divider />}\n                <ListItem sx={{ px: 0 }}>\n                  <ListItemAvatar>\n                    <Avatar sx={{ bgcolor: 'success.main' }}>\n                      <LocalShipping />\n                    </Avatar>\n                  </ListItemAvatar>\n                  <ListItemText\n                    primary={delivery.tracking_number || 'No tracking'}\n                    secondary={\n                      <Box>\n                        <Typography variant=\"caption\" display=\"block\">\n                          {delivery.courier_name || 'Unknown courier'}\n                        </Typography>\n                        <Typography variant=\"caption\" color=\"text.secondary\">\n                          ETA: {delivery.estimated_delivery ? new Date(delivery.estimated_delivery).toLocaleDateString() : 'N/A'}\n                        </Typography>\n                      </Box>\n                    }\n                  />\n                </ListItem>\n              </React.Fragment>\n            ))}\n          </List>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\n// ============================================================================\n// QUICK ACTIONS WIDGET\n// ============================================================================\n\nexport const QuickActionsWidget: React.FC<WidgetProps> = ({ config }) => {\n  const actions = [\n    { label: 'Create Order', icon: <ShoppingCart />, color: 'primary', path: '/orders/create' },\n    { label: 'Track Package', icon: <LocalShipping />, color: 'success', path: '/tracking' },\n    { label: 'View Analytics', icon: <Assessment />, color: 'info', path: '/analytics' },\n    { label: 'Manage Couriers', icon: <Star />, color: 'warning', path: '/couriers' },\n  ];\n\n  return (\n    <Card sx={{ height: '100%' }}>\n      <CardHeader title=\"Quick Actions\" />\n      <CardContent>\n        <Box sx={{ display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: 2 }}>\n          {actions.map((action, index) => (\n            <Button\n              key={index}\n              variant=\"outlined\"\n              color={action.color as any}\n              startIcon={action.icon}\n              fullWidth\n              sx={{ py: 1.5 }}\n              onClick={() => window.location.href = `#${action.path}`}\n            >\n              {action.label}\n            </Button>\n          ))}\n        </Box>\n      </CardContent>\n    </Card>\n  );\n};\n\n// ============================================================================\n// NOTIFICATIONS WIDGET\n// ============================================================================\n\nexport const NotificationsWidget: React.FC<WidgetProps> = ({ config, onRefresh }) => {\n  const { data, isLoading } = useQuery({\n    queryKey: ['widget-notifications'],\n    queryFn: async () => {\n      const response = await apiClient.get('/notifications/list?limit=5');\n      return response.data.data?.notifications || [];\n    },\n    refetchInterval: 30000,\n  });\n\n  const notifications = data || [];\n\n  return (\n    <Card sx={{ height: '100%' }}>\n      <CardHeader\n        title=\"Recent Notifications\"\n        action={\n          <IconButton size=\"small\" onClick={onRefresh}>\n            <Refresh />\n          </IconButton>\n        }\n      />\n      <CardContent sx={{ pt: 0 }}>\n        {isLoading ? (\n          <LinearProgress />\n        ) : notifications.length === 0 ? (\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ textAlign: 'center', py: 4 }}>\n            No new notifications\n          </Typography>\n        ) : (\n          <List sx={{ p: 0 }}>\n            {notifications.slice(0, 5).map((notification: any, index: number) => (\n              <React.Fragment key={notification.notification_id}>\n                {index > 0 && <Divider />}\n                <ListItem sx={{ px: 0 }}>\n                  <ListItemAvatar>\n                    <Avatar sx={{ bgcolor: notification.is_read ? 'grey.400' : 'primary.main' }}>\n                      <Notifications />\n                    </Avatar>\n                  </ListItemAvatar>\n                  <ListItemText\n                    primary={notification.title}\n                    secondary={\n                      <Typography variant=\"caption\" color=\"text.secondary\">\n                        {new Date(notification.created_at).toLocaleString()}\n                      </Typography>\n                    }\n                  />\n                </ListItem>\n              </React.Fragment>\n            ))}\n          </List>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\n// ============================================================================\n// WIDGET REGISTRY\n// ============================================================================\n\nexport const WIDGET_REGISTRY = {\n  'performance-stats': {\n    component: PerformanceStatsWidget,\n    title: 'Performance Stats',\n    description: 'Key performance metrics',\n    icon: <Speed />,\n    defaultSize: 'medium' as const,\n  },\n  'recent-orders': {\n    component: RecentOrdersWidget,\n    title: 'Recent Orders',\n    description: 'Latest orders',\n    icon: <ShoppingCart />,\n    defaultSize: 'medium' as const,\n  },\n  'active-deliveries': {\n    component: ActiveDeliveriesWidget,\n    title: 'Active Deliveries',\n    description: 'In-transit packages',\n    icon: <LocalShipping />,\n    defaultSize: 'medium' as const,\n  },\n  'quick-actions': {\n    component: QuickActionsWidget,\n    title: 'Quick Actions',\n    description: 'Common tasks',\n    icon: <TrendingUp />,\n    defaultSize: 'small' as const,\n  },\n  'notifications': {\n    component: NotificationsWidget,\n    title: 'Notifications',\n    description: 'Recent alerts',\n    icon: <Notifications />,\n    defaultSize: 'medium' as const,\n  },\n};\n\nexport type WidgetType = keyof typeof WIDGET_REGISTRY;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\debug\\SentryTestButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\forms\\PostalCodeInput.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'IconButton' is defined but never used.","line":11,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":13},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":28,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[599,602],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[599,602],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback received a function whose dependencies are unknown. Pass an inline function instead.","line":68,"column":30,"nodeType":"Identifier","endLine":68,"endColumn":41}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Postal Code Input Component with Validation\n * Validates postal codes in real-time and auto-fills city\n */\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport {\n  TextField,\n  InputAdornment,\n  CircularProgress,\n  IconButton,\n  Tooltip,\n  Box,\n  Typography,\n  Alert,\n} from '@mui/material';\nimport {\n  CheckCircle,\n  Error,\n  Info,\n} from '@mui/icons-material';\nimport { debounce } from 'lodash';\n\ninterface PostalCodeInputProps {\n  value: string;\n  onChange: (value: string) => void;\n  onCityDetected?: (city: string) => void;\n  onValidation?: (isValid: boolean, data?: any) => void;\n  country?: string;\n  label?: string;\n  required?: boolean;\n  disabled?: boolean;\n  error?: boolean;\n  helperText?: string;\n  fullWidth?: boolean;\n}\n\ninterface ValidationResult {\n  valid: boolean;\n  postalCode?: string;\n  city?: string;\n  region?: string;\n  country?: string;\n  deliveryAvailable?: boolean;\n  courierCount?: number;\n  error?: string;\n  source?: 'cache' | 'api';\n}\n\nexport function PostalCodeInput({\n  value,\n  onChange,\n  onCityDetected,\n  onValidation,\n  country = 'SE',\n  label = 'Postal Code',\n  required = false,\n  disabled = false,\n  error: externalError = false,\n  helperText: externalHelperText,\n  fullWidth = true,\n}: PostalCodeInputProps) {\n  const [validation, setValidation] = useState<ValidationResult | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Debounced validation function\n  const validatePostalCode = useCallback(\n    debounce(async (code: string, countryCode: string) => {\n      if (!code || code.length < 4) {\n        setValidation(null);\n        setError(null);\n        return;\n      }\n\n      setLoading(true);\n      setError(null);\n\n      try {\n        const response = await fetch('https://performile-platform-main.vercel.app/api/postal-codes/validate', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            postalCode: code,\n            country: countryCode\n          })\n        });\n\n        if (!response.ok) {\n          throw new Error('Validation failed');\n        }\n\n        const data: ValidationResult = await response.json();\n        setValidation(data);\n\n        // Auto-fill city if valid\n        if (data.valid && data.city && onCityDetected) {\n          onCityDetected(data.city);\n        }\n\n        // Notify parent of validation result\n        if (onValidation) {\n          onValidation(data.valid, data);\n        }\n\n      } catch (err) {\n        console.error('Postal code validation error:', err);\n        setError('Unable to validate postal code');\n        setValidation(null);\n        \n        if (onValidation) {\n          onValidation(false);\n        }\n      } finally {\n        setLoading(false);\n      }\n    }, 500), // 500ms debounce\n    [onCityDetected, onValidation]\n  );\n\n  // Validate when value or country changes\n  useEffect(() => {\n    validatePostalCode(value, country);\n  }, [value, country, validatePostalCode]);\n\n  // Determine input adornment icon\n  const getEndAdornment = () => {\n    if (loading) {\n      return (\n        <InputAdornment position=\"end\">\n          <CircularProgress size={20} />\n        </InputAdornment>\n      );\n    }\n\n    if (validation) {\n      if (validation.valid) {\n        return (\n          <InputAdornment position=\"end\">\n            <Tooltip title={`Valid postal code for ${validation.city}`}>\n              <CheckCircle color=\"success\" />\n            </Tooltip>\n          </InputAdornment>\n        );\n      } else {\n        return (\n          <InputAdornment position=\"end\">\n            <Tooltip title={validation.error || 'Invalid postal code'}>\n              <Error color=\"error\" />\n            </Tooltip>\n          </InputAdornment>\n        );\n      }\n    }\n\n    return null;\n  };\n\n  // Determine helper text\n  const getHelperText = () => {\n    if (externalHelperText) {\n      return externalHelperText;\n    }\n\n    if (error) {\n      return error;\n    }\n\n    if (validation) {\n      if (validation.valid) {\n        const parts = [` ${validation.city}`];\n        if (validation.deliveryAvailable && validation.courierCount) {\n          parts.push(`${validation.courierCount} courier${validation.courierCount > 1 ? 's' : ''} available`);\n        }\n        return parts.join('  ');\n      } else {\n        return validation.error || 'Invalid postal code';\n      }\n    }\n\n    return `Enter ${country} postal code`;\n  };\n\n  // Determine if there's an error\n  const hasError = externalError || (validation !== null && !validation.valid) || error !== null;\n\n  return (\n    <Box>\n      <TextField\n        fullWidth={fullWidth}\n        label={label}\n        value={value}\n        onChange={(e) => onChange(e.target.value)}\n        required={required}\n        disabled={disabled}\n        error={hasError}\n        helperText={getHelperText()}\n        InputProps={{\n          endAdornment: getEndAdornment(),\n        }}\n        placeholder={country === 'SE' ? '11122' : country === 'NO' ? '0010' : country === 'DK' ? '1000' : '00100'}\n      />\n\n      {/* Delivery availability info */}\n      {validation && validation.valid && validation.deliveryAvailable && (\n        <Box mt={1}>\n          <Alert severity=\"success\" icon={<CheckCircle />}>\n            <Typography variant=\"body2\">\n              <strong>Delivery available</strong> to {validation.city}\n              {validation.courierCount && `  ${validation.courierCount} couriers in your area`}\n            </Typography>\n          </Alert>\n        </Box>\n      )}\n\n      {/* No delivery warning */}\n      {validation && validation.valid && !validation.deliveryAvailable && (\n        <Box mt={1}>\n          <Alert severity=\"warning\" icon={<Info />}>\n            <Typography variant=\"body2\">\n              <strong>Limited delivery</strong> to {validation.city}\n              {'  '}No couriers available yet\n            </Typography>\n          </Alert>\n        </Box>\n      )}\n    </Box>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\integrations\\ApiKeysManagement.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'EyeOff' is defined but never used.","line":7,"column":48,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":54},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":202,"column":60,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[5682,5784],"text":"\n                Make sure to copy your API key now. You won&apos;t be able to see it again!\n              "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[5682,5784],"text":"\n                Make sure to copy your API key now. You won&lsquo;t be able to see it again!\n              "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[5682,5784],"text":"\n                Make sure to copy your API key now. You won&#39;t be able to see it again!\n              "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[5682,5784],"text":"\n                Make sure to copy your API key now. You won&rsquo;t be able to see it again!\n              "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":223,"column":18,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[6631,6684],"text":"\n                I&apos;ve saved my API key\n              "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[6631,6684],"text":"\n                I&lsquo;ve saved my API key\n              "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[6631,6684],"text":"\n                I&#39;ve saved my API key\n              "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[6631,6684],"text":"\n                I&rsquo;ve saved my API key\n              "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * WEEK 3: API KEYS MANAGEMENT\n * Manage Performile API keys for merchant access\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { Plus, Trash2, Copy, CheckCircle, Eye, EyeOff, Loader, RefreshCw } from 'lucide-react';\n\ninterface ApiKey {\n  api_key_id: string;\n  key_name: string;\n  key_prefix: string;\n  permissions: string[];\n  rate_limit_per_hour: number;\n  is_active: boolean;\n  total_requests: number;\n  last_used_at?: string;\n  expires_at?: string;\n  created_at: string;\n}\n\nexport default function ApiKeysManagement() {\n  const [apiKeys, setApiKeys] = useState<ApiKey[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [newApiKey, setNewApiKey] = useState<string | null>(null);\n  const [copiedKey, setCopiedKey] = useState(false);\n\n  const [formData, setFormData] = useState({\n    key_name: '',\n    permissions: [] as string[],\n    rate_limit_per_hour: 1000,\n    expires_in_days: 365\n  });\n\n  const availablePermissions = [\n    'orders:read',\n    'orders:write',\n    'tracking:read',\n    'webhooks:read',\n    'webhooks:write',\n    'analytics:read',\n    'reviews:read',\n    'reviews:write'\n  ];\n\n  useEffect(() => {\n    fetchApiKeys();\n  }, []);\n\n  const fetchApiKeys = async () => {\n    try {\n      const response = await fetch('/api/week3-integrations/api-keys', {\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      \n      if (response.ok) {\n        const data = await response.json();\n        setApiKeys(data);\n      }\n    } catch (error) {\n      console.error('Failed to fetch API keys:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    try {\n      const response = await fetch('/api/week3-integrations/api-keys', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        },\n        body: JSON.stringify(formData)\n      });\n\n      if (response.ok) {\n        const result = await response.json();\n        setNewApiKey(result.api_key);\n        await fetchApiKeys();\n        resetForm();\n      }\n    } catch (error) {\n      console.error('Failed to create API key:', error);\n    }\n  };\n\n  const handleDelete = async (id: string) => {\n    if (!confirm('Are you sure you want to revoke this API key? This action cannot be undone.')) return;\n\n    try {\n      const response = await fetch(`/api/week3-integrations/api-keys/${id}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n\n      if (response.ok) {\n        await fetchApiKeys();\n      }\n    } catch (error) {\n      console.error('Failed to delete API key:', error);\n    }\n  };\n\n  const handleRegenerate = async (id: string) => {\n    if (!confirm('Are you sure you want to regenerate this API key? The old key will stop working immediately.')) return;\n\n    try {\n      const response = await fetch(`/api/week3-integrations/api-keys/${id}/regenerate`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n\n      if (response.ok) {\n        const result = await response.json();\n        setNewApiKey(result.api_key);\n        await fetchApiKeys();\n      }\n    } catch (error) {\n      console.error('Failed to regenerate API key:', error);\n    }\n  };\n\n  const copyToClipboard = async (text: string) => {\n    try {\n      await navigator.clipboard.writeText(text);\n      setCopiedKey(true);\n      setTimeout(() => setCopiedKey(false), 2000);\n    } catch (error) {\n      console.error('Failed to copy:', error);\n    }\n  };\n\n  const resetForm = () => {\n    setFormData({\n      key_name: '',\n      permissions: [],\n      rate_limit_per_hour: 1000,\n      expires_in_days: 365\n    });\n  };\n\n  const togglePermission = (permission: string) => {\n    setFormData(prev => ({\n      ...prev,\n      permissions: prev.permissions.includes(permission)\n        ? prev.permissions.filter(p => p !== permission)\n        : [...prev.permissions, permission]\n    }));\n  };\n\n  const isExpired = (expiresAt?: string) => {\n    if (!expiresAt) return false;\n    return new Date(expiresAt) < new Date();\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <Loader className=\"w-8 h-8 animate-spin text-blue-600\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900\">API Keys</h2>\n          <p className=\"text-gray-600 mt-1\">Manage API keys for programmatic access</p>\n        </div>\n        <button\n          onClick={() => setShowAddModal(true)}\n          className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\n        >\n          <Plus className=\"w-5 h-5\" />\n          Create API Key\n        </button>\n      </div>\n\n      {newApiKey && (\n        <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-6\">\n          <div className=\"flex items-start gap-3\">\n            <div className=\"flex-shrink-0 w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center\">\n              <Eye className=\"w-5 h-5 text-yellow-600\" />\n            </div>\n            <div className=\"flex-1\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n                Your new API key\n              </h3>\n              <p className=\"text-sm text-gray-600 mb-3\">\n                Make sure to copy your API key now. You won't be able to see it again!\n              </p>\n              <div className=\"flex items-center gap-2 p-3 bg-white border border-yellow-300 rounded-lg\">\n                <code className=\"flex-1 font-mono text-sm text-gray-900 break-all\">\n                  {newApiKey}\n                </code>\n                <button\n                  onClick={() => copyToClipboard(newApiKey)}\n                  className=\"flex-shrink-0 p-2 text-gray-600 hover:bg-gray-100 rounded\"\n                >\n                  {copiedKey ? (\n                    <CheckCircle className=\"w-5 h-5 text-green-600\" />\n                  ) : (\n                    <Copy className=\"w-5 h-5\" />\n                  )}\n                </button>\n              </div>\n              <button\n                onClick={() => setNewApiKey(null)}\n                className=\"mt-3 text-sm text-gray-600 hover:text-gray-900\"\n              >\n                I've saved my API key\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"grid gap-4\">\n        {apiKeys.length === 0 ? (\n          <div className=\"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300\">\n            <p className=\"text-gray-600\">No API keys created yet.</p>\n            <button\n              onClick={() => setShowAddModal(true)}\n              className=\"mt-4 text-blue-600 hover:text-blue-700 font-medium\"\n            >\n              Create your first API key\n            </button>\n          </div>\n        ) : (\n          apiKeys.map((apiKey) => (\n            <div\n              key={apiKey.api_key_id}\n              className=\"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow\"\n            >\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-3\">\n                    <h3 className=\"text-lg font-semibold text-gray-900\">\n                      {apiKey.key_name}\n                    </h3>\n                    {apiKey.is_active && !isExpired(apiKey.expires_at) ? (\n                      <span className=\"flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full\">\n                        <CheckCircle className=\"w-3 h-3\" />\n                        Active\n                      </span>\n                    ) : (\n                      <span className=\"px-2 py-1 bg-red-100 text-red-700 text-xs font-medium rounded-full\">\n                        {isExpired(apiKey.expires_at) ? 'Expired' : 'Inactive'}\n                      </span>\n                    )}\n                  </div>\n                  \n                  <div className=\"mt-3 p-3 bg-gray-50 rounded-lg\">\n                    <span className=\"text-xs text-gray-600\">Key Prefix:</span>\n                    <p className=\"font-mono text-sm text-gray-900\">\n                      {apiKey.key_prefix}\n                    </p>\n                  </div>\n\n                  <div className=\"mt-3\">\n                    <span className=\"text-xs text-gray-600\">Permissions:</span>\n                    <div className=\"flex flex-wrap gap-2 mt-1\">\n                      {apiKey.permissions.map((permission) => (\n                        <span\n                          key={permission}\n                          className=\"px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded\"\n                        >\n                          {permission}\n                        </span>\n                      ))}\n                    </div>\n                  </div>\n\n                  <div className=\"mt-3 grid grid-cols-3 gap-4 text-sm\">\n                    <div>\n                      <span className=\"text-gray-600\">Rate Limit:</span>\n                      <p className=\"font-medium text-gray-900\">{apiKey.rate_limit_per_hour}/hour</p>\n                    </div>\n                    <div>\n                      <span className=\"text-gray-600\">Total Requests:</span>\n                      <p className=\"font-medium text-gray-900\">{apiKey.total_requests.toLocaleString()}</p>\n                    </div>\n                    <div>\n                      <span className=\"text-gray-600\">Last Used:</span>\n                      <p className=\"font-medium text-gray-900\">\n                        {apiKey.last_used_at \n                          ? new Date(apiKey.last_used_at).toLocaleDateString()\n                          : 'Never'}\n                      </p>\n                    </div>\n                  </div>\n\n                  {apiKey.expires_at && (\n                    <p className=\"mt-3 text-xs text-gray-500\">\n                      {isExpired(apiKey.expires_at) ? 'Expired' : 'Expires'} on: {new Date(apiKey.expires_at).toLocaleDateString()}\n                    </p>\n                  )}\n                </div>\n\n                <div className=\"flex items-center gap-2 ml-4\">\n                  <button\n                    onClick={() => handleRegenerate(apiKey.api_key_id)}\n                    className=\"p-2 text-blue-600 hover:bg-blue-50 rounded-lg\"\n                    title=\"Regenerate\"\n                  >\n                    <RefreshCw className=\"w-5 h-5\" />\n                  </button>\n                  <button\n                    onClick={() => handleDelete(apiKey.api_key_id)}\n                    className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg\"\n                    title=\"Revoke\"\n                  >\n                    <Trash2 className=\"w-5 h-5\" />\n                  </button>\n                </div>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n\n      {showAddModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6 border-b border-gray-200\">\n              <h3 className=\"text-xl font-semibold text-gray-900\">\n                Create API Key\n              </h3>\n            </div>\n\n            <form onSubmit={handleSubmit} className=\"p-6 space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Key Name *\n                </label>\n                <input\n                  type=\"text\"\n                  required\n                  value={formData.key_name}\n                  onChange={(e) => setFormData({ ...formData, key_name: e.target.value })}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"Production API Key\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Permissions *\n                </label>\n                <div className=\"grid grid-cols-2 gap-2\">\n                  {availablePermissions.map((permission) => (\n                    <label\n                      key={permission}\n                      className=\"flex items-center gap-2 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer\"\n                    >\n                      <input\n                        type=\"checkbox\"\n                        checked={formData.permissions.includes(permission)}\n                        onChange={() => togglePermission(permission)}\n                        className=\"w-4 h-4 text-blue-600 rounded focus:ring-blue-500\"\n                      />\n                      <span className=\"text-sm text-gray-700\">{permission}</span>\n                    </label>\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Rate Limit (requests/hour)\n                  </label>\n                  <input\n                    type=\"number\"\n                    min=\"100\"\n                    max=\"10000\"\n                    value={formData.rate_limit_per_hour}\n                    onChange={(e) => setFormData({ ...formData, rate_limit_per_hour: parseInt(e.target.value) })}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Expires In (days)\n                  </label>\n                  <input\n                    type=\"number\"\n                    min=\"1\"\n                    max=\"3650\"\n                    value={formData.expires_in_days}\n                    onChange={(e) => setFormData({ ...formData, expires_in_days: parseInt(e.target.value) })}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex items-center justify-end gap-3 pt-4 border-t border-gray-200\">\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setShowAddModal(false);\n                    resetForm();\n                  }}\n                  className=\"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg\"\n                >\n                  Cancel\n                </button>\n                <button\n                  type=\"submit\"\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\n                >\n                  Create API Key\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\integrations\\CourierIntegrationSettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\integrations\\IntegrationDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\integrations\\WebhookManagement.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\integrations\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\landing\\AppStoreLinks.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":32,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":55,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":55,"endColumn":20}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Download, Smartphone } from 'lucide-react';\n\ninterface AppStoreLinksProps {\n  variant?: 'dark' | 'light';\n  size?: 'sm' | 'md' | 'lg';\n}\n\nexport function AppStoreLinks({ variant = 'dark', size = 'md' }: AppStoreLinksProps) {\n  // Replace these with actual App Store URLs when apps are published\n  const APP_STORE_URL = 'https://apps.apple.com/app/performile/id123456789';\n  const PLAY_STORE_URL = 'https://play.google.com/store/apps/details?id=com.performile.app';\n\n  const sizeClasses = {\n    sm: 'px-4 py-2 text-sm',\n    md: 'px-6 py-3 text-base',\n    lg: 'px-8 py-4 text-lg',\n  };\n\n  const buttonClass = `flex items-center gap-3 ${\n    variant === 'dark' ? 'bg-black text-white hover:bg-gray-900' : 'bg-white text-gray-900 hover:bg-gray-100'\n  } ${sizeClasses[size]} rounded-lg transition-colors shadow-lg`;\n\n  return (\n    <div className=\"flex flex-col sm:flex-row gap-4\">\n      {/* App Store Button */}\n      <a\n        href={APP_STORE_URL}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className={buttonClass}\n        onClick={(e) => {\n          // Track analytics\n          if (window.gtag) {\n            window.gtag('event', 'click', {\n              event_category: 'App Store',\n              event_label: 'iOS Download',\n            });\n          }\n        }}\n      >\n        <Download className=\"h-5 w-5\" />\n        <div className=\"text-left\">\n          <div className=\"text-xs opacity-80\">Download on the</div>\n          <div className=\"font-semibold\">App Store</div>\n        </div>\n      </a>\n\n      {/* Google Play Button */}\n      <a\n        href={PLAY_STORE_URL}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className={buttonClass}\n        onClick={(e) => {\n          // Track analytics\n          if (window.gtag) {\n            window.gtag('event', 'click', {\n              event_category: 'App Store',\n              event_label: 'Android Download',\n            });\n          }\n        }}\n      >\n        <Download className=\"h-5 w-5\" />\n        <div className=\"text-left\">\n          <div className=\"text-xs opacity-80\">GET IT ON</div>\n          <div className=\"font-semibold\">Google Play</div>\n        </div>\n      </a>\n    </div>\n  );\n}\n\n// Compact version for footer or sidebar\nexport function AppStoreLinksCompact() {\n  return (\n    <div className=\"flex gap-3\">\n      <a\n        href=\"https://apps.apple.com/app/performile/id123456789\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className=\"flex items-center justify-center w-12 h-12 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors\"\n        title=\"Download on App Store\"\n      >\n        <Smartphone className=\"h-6 w-6\" />\n      </a>\n      <a\n        href=\"https://play.google.com/store/apps/details?id=com.performile.app\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className=\"flex items-center justify-center w-12 h-12 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors\"\n        title=\"Get it on Google Play\"\n      >\n        <Smartphone className=\"h-6 w-6\" />\n      </a>\n    </div>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\landing\\BlogSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\landing\\CaseStudies.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\landing\\CoverageMap.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":96,"column":29,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[4220,4353],"text":"\n                          We&apos;re expanding rapidly! Enter your email to be notified when we reach your area.\n                        "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[4220,4353],"text":"\n                          We&lsquo;re expanding rapidly! Enter your email to be notified when we reach your area.\n                        "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[4220,4353],"text":"\n                          We&#39;re expanding rapidly! Enter your email to be notified when we reach your area.\n                        "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[4220,4353],"text":"\n                          We&rsquo;re expanding rapidly! Enter your email to be notified when we reach your area.\n                        "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":193,"column":16,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[9157,9240],"text":"\n            Don&apos;t see your area? We're expanding rapidly across Europe!\n          "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[9157,9240],"text":"\n            Don&lsquo;t see your area? We're expanding rapidly across Europe!\n          "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[9157,9240],"text":"\n            Don&#39;t see your area? We're expanding rapidly across Europe!\n          "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[9157,9240],"text":"\n            Don&rsquo;t see your area? We're expanding rapidly across Europe!\n          "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":193,"column":36,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[9157,9240],"text":"\n            Don't see your area? We&apos;re expanding rapidly across Europe!\n          "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[9157,9240],"text":"\n            Don't see your area? We&lsquo;re expanding rapidly across Europe!\n          "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[9157,9240],"text":"\n            Don't see your area? We&#39;re expanding rapidly across Europe!\n          "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[9157,9240],"text":"\n            Don't see your area? We&rsquo;re expanding rapidly across Europe!\n          "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { MapPin, Search, CheckCircle, X } from 'lucide-react';\n\nexport function CoverageMap() {\n  const [postalCode, setPostalCode] = useState('');\n  const [searchResult, setSearchResult] = useState<{\n    covered: boolean;\n    city?: string;\n    couriers?: string[];\n    deliveryTime?: string;\n  } | null>(null);\n\n  const handleSearch = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    // Simulate coverage check\n    const covered = postalCode.length >= 4;\n    setSearchResult({\n      covered,\n      city: covered ? 'Oslo' : undefined,\n      couriers: covered ? ['PostNord', 'Bring', 'Porterbuddy', 'Budbee'] : undefined,\n      deliveryTime: covered ? '1-2 days' : undefined,\n    });\n  };\n\n  const regions = [\n    { name: 'Norway', coverage: 98, cities: 'Oslo, Bergen, Trondheim, Stavanger', couriers: 8 },\n    { name: 'Sweden', coverage: 97, cities: 'Stockholm, Gothenburg, Malm, Uppsala', couriers: 9 },\n    { name: 'Denmark', coverage: 99, cities: 'Copenhagen, Aarhus, Odense, Aalborg', couriers: 7 },\n    { name: 'Finland', coverage: 95, cities: 'Helsinki, Espoo, Tampere, Vantaa', couriers: 6 },\n  ];\n\n  return (\n    <section id=\"coverage-map\" className=\"py-20 bg-white\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"text-center mb-12\">\n          <h2 className=\"text-3xl sm:text-4xl font-bold text-gray-900 mb-4\">\n            Nordic Coverage\n          </h2>\n          <p className=\"text-xl text-gray-600\">\n            Check if we deliver to your area\n          </p>\n        </div>\n\n        <div className=\"grid lg:grid-cols-2 gap-12\">\n          {/* Coverage Checker */}\n          <div>\n            <div className=\"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-8 mb-8\">\n              <h3 className=\"text-2xl font-bold text-gray-900 mb-6\">Check Your Postal Code</h3>\n              \n              <form onSubmit={handleSearch} className=\"mb-6\">\n                <div className=\"flex gap-3\">\n                  <input\n                    type=\"text\"\n                    value={postalCode}\n                    onChange={(e) => setPostalCode(e.target.value)}\n                    placeholder=\"Enter postal code (e.g., 0150)\"\n                    className=\"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  />\n                  <button\n                    type=\"submit\"\n                    className=\"px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors flex items-center gap-2\"\n                  >\n                    <Search className=\"h-5 w-5\" />\n                    Check\n                  </button>\n                </div>\n              </form>\n\n              {searchResult && (\n                <div className={`rounded-xl p-6 ${\n                  searchResult.covered \n                    ? 'bg-green-100 border-2 border-green-500' \n                    : 'bg-red-100 border-2 border-red-500'\n                }`}>\n                  <div className=\"flex items-start gap-3\">\n                    {searchResult.covered ? (\n                      <CheckCircle className=\"h-6 w-6 text-green-600 flex-shrink-0 mt-1\" />\n                    ) : (\n                      <X className=\"h-6 w-6 text-red-600 flex-shrink-0 mt-1\" />\n                    )}\n                    <div className=\"flex-1\">\n                      <h4 className={`font-bold text-lg mb-2 ${\n                        searchResult.covered ? 'text-green-900' : 'text-red-900'\n                      }`}>\n                        {searchResult.covered ? 'Great news! We deliver to your area' : 'Not covered yet'}\n                      </h4>\n                      {searchResult.covered ? (\n                        <div className=\"space-y-2 text-green-800\">\n                          <p><strong>City:</strong> {searchResult.city}</p>\n                          <p><strong>Available Couriers:</strong> {searchResult.couriers?.join(', ')}</p>\n                          <p><strong>Typical Delivery:</strong> {searchResult.deliveryTime}</p>\n                        </div>\n                      ) : (\n                        <p className=\"text-red-800\">\n                          We're expanding rapidly! Enter your email to be notified when we reach your area.\n                        </p>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {/* Regional Coverage */}\n            <div className=\"space-y-4\">\n              <h3 className=\"text-xl font-bold text-gray-900 mb-4\">Coverage by Country</h3>\n              {regions.map((region, index) => (\n                <div key={index} className=\"bg-white border border-gray-200 rounded-xl p-6\">\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <h4 className=\"text-lg font-semibold text-gray-900\">{region.name}</h4>\n                    <div className=\"text-2xl font-bold text-blue-600\">{region.coverage}%</div>\n                  </div>\n                  <div className=\"w-full bg-gray-200 rounded-full h-3 mb-3\">\n                    <div\n                      className=\"bg-gradient-to-r from-blue-500 to-indigo-600 h-3 rounded-full transition-all\"\n                      style={{ width: `${region.coverage}%` }}\n                    />\n                  </div>\n                  <p className=\"text-sm text-gray-600 mb-2\">\n                    <strong>Major Cities:</strong> {region.cities}\n                  </p>\n                  <p className=\"text-sm text-gray-600\">\n                    <strong>Partner Couriers:</strong> {region.couriers}\n                  </p>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Map Visualization */}\n          <div>\n            <div className=\"bg-gradient-to-br from-gray-100 to-gray-200 rounded-2xl p-8 h-full min-h-[600px] flex items-center justify-center relative overflow-hidden\">\n              {/* Simplified Nordic Map */}\n              <div className=\"relative w-full h-full\">\n                <div className=\"absolute inset-0 flex items-center justify-center\">\n                  <MapPin className=\"h-64 w-64 text-blue-600 opacity-20\" />\n                </div>\n                \n                {/* Coverage Points */}\n                <div className=\"absolute top-1/4 left-1/3 animate-pulse\">\n                  <div className=\"w-4 h-4 bg-blue-500 rounded-full shadow-lg\" />\n                  <div className=\"absolute -top-8 left-1/2 -translate-x-1/2 bg-white px-3 py-1 rounded-lg shadow-md text-xs font-semibold whitespace-nowrap\">\n                    Oslo\n                  </div>\n                </div>\n                \n                <div className=\"absolute top-1/3 right-1/4 animate-pulse\" style={{ animationDelay: '0.2s' }}>\n                  <div className=\"w-4 h-4 bg-blue-500 rounded-full shadow-lg\" />\n                  <div className=\"absolute -top-8 left-1/2 -translate-x-1/2 bg-white px-3 py-1 rounded-lg shadow-md text-xs font-semibold whitespace-nowrap\">\n                    Stockholm\n                  </div>\n                </div>\n                \n                <div className=\"absolute bottom-1/3 left-1/4 animate-pulse\" style={{ animationDelay: '0.4s' }}>\n                  <div className=\"w-4 h-4 bg-blue-500 rounded-full shadow-lg\" />\n                  <div className=\"absolute -top-8 left-1/2 -translate-x-1/2 bg-white px-3 py-1 rounded-lg shadow-md text-xs font-semibold whitespace-nowrap\">\n                    Copenhagen\n                  </div>\n                </div>\n                \n                <div className=\"absolute top-1/2 right-1/3 animate-pulse\" style={{ animationDelay: '0.6s' }}>\n                  <div className=\"w-4 h-4 bg-blue-500 rounded-full shadow-lg\" />\n                  <div className=\"absolute -top-8 left-1/2 -translate-x-1/2 bg-white px-3 py-1 rounded-lg shadow-md text-xs font-semibold whitespace-nowrap\">\n                    Helsinki\n                  </div>\n                </div>\n\n                {/* Stats Overlay */}\n                <div className=\"absolute bottom-8 left-8 right-8 bg-white/90 backdrop-blur-sm rounded-xl p-6 shadow-xl\">\n                  <div className=\"grid grid-cols-3 gap-4 text-center\">\n                    <div>\n                      <div className=\"text-3xl font-bold text-blue-600\">97%</div>\n                      <div className=\"text-sm text-gray-600\">Coverage</div>\n                    </div>\n                    <div>\n                      <div className=\"text-3xl font-bold text-blue-600\">30+</div>\n                      <div className=\"text-sm text-gray-600\">Couriers</div>\n                    </div>\n                    <div>\n                      <div className=\"text-3xl font-bold text-blue-600\">500K+</div>\n                      <div className=\"text-sm text-gray-600\">Deliveries/mo</div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"mt-12 text-center\">\n          <p className=\"text-gray-600 mb-4\">\n            Don't see your area? We're expanding rapidly across Europe!\n          </p>\n          <button className=\"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors\">\n            Request Coverage in Your Area\n          </button>\n        </div>\n      </div>\n    </section>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\landing\\DemoVideo.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\landing\\Newsletter.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":42,"column":56,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[1508,1526],"text":"You&apos;re subscribed!"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[1508,1526],"text":"You&lsquo;re subscribed!"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[1508,1526],"text":"You&#39;re subscribed!"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[1508,1526],"text":"You&rsquo;re subscribed!"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { Mail, CheckCircle, ArrowRight } from 'lucide-react';\n\nexport function Newsletter() {\n  const [email, setEmail] = useState('');\n  const [subscribed, setSubscribed] = useState(false);\n  const [loading, setLoading] = useState(false);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n\n    // Simulate API call\n    setTimeout(() => {\n      setSubscribed(true);\n      setLoading(false);\n      setEmail('');\n      \n      // Reset after 5 seconds\n      setTimeout(() => setSubscribed(false), 5000);\n    }, 1000);\n  };\n\n  return (\n    <section id=\"newsletter\" className=\"py-20 bg-gradient-to-r from-blue-600 to-indigo-600 text-white\">\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"text-center mb-8\">\n          <div className=\"inline-flex items-center justify-center w-16 h-16 bg-white/10 rounded-full mb-4\">\n            <Mail className=\"h-8 w-8\" />\n          </div>\n          <h2 className=\"text-3xl sm:text-4xl font-bold mb-4\">\n            Stay Updated with Performile\n          </h2>\n          <p className=\"text-xl text-blue-100\">\n            Get the latest features, tips, and industry insights delivered to your inbox\n          </p>\n        </div>\n\n        {subscribed ? (\n          <div className=\"bg-green-500 text-white rounded-2xl p-8 text-center\">\n            <CheckCircle className=\"h-16 w-16 mx-auto mb-4\" />\n            <h3 className=\"text-2xl font-bold mb-2\">You're subscribed!</h3>\n            <p className=\"text-green-100\">\n              Check your inbox for a confirmation email. Welcome to the Performile community!\n            </p>\n          </div>\n        ) : (\n          <form onSubmit={handleSubmit} className=\"max-w-2xl mx-auto\">\n            <div className=\"flex flex-col sm:flex-row gap-4\">\n              <input\n                type=\"email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                placeholder=\"Enter your email address\"\n                required\n                className=\"flex-1 px-6 py-4 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-white\"\n              />\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"inline-flex items-center justify-center px-8 py-4 bg-white text-blue-600 rounded-lg font-semibold hover:bg-blue-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap\"\n              >\n                {loading ? 'Subscribing...' : 'Subscribe'}\n                <ArrowRight className=\"ml-2 h-5 w-5\" />\n              </button>\n            </div>\n            <p className=\"text-sm text-blue-200 mt-4 text-center\">\n              Join 10,000+ subscribers  No spam  Unsubscribe anytime\n            </p>\n          </form>\n        )}\n\n        <div className=\"mt-12 grid sm:grid-cols-3 gap-6 text-center\">\n          <div>\n            <div className=\"text-3xl font-bold mb-2\">Weekly</div>\n            <div className=\"text-blue-200\">Product updates</div>\n          </div>\n          <div>\n            <div className=\"text-3xl font-bold mb-2\">Monthly</div>\n            <div className=\"text-blue-200\">Industry insights</div>\n          </div>\n          <div>\n            <div className=\"text-3xl font-bold mb-2\">Exclusive</div>\n            <div className=\"text-blue-200\">Early access</div>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\landing\\PartnerLogos.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\landing\\PricingComparison.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\landing\\ROICalculator.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'avgOrderValue' is assigned a value but never used.","line":13,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":41}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { Calculator, TrendingUp, DollarSign } from 'lucide-react';\n\nexport function ROICalculator() {\n  const [inputs, setInputs] = useState({\n    monthlyOrders: 1000,\n    avgOrderValue: 50,\n    currentShippingCost: 8,\n    currentProcessingTime: 5,\n  });\n\n  const calculateROI = () => {\n    const { monthlyOrders, avgOrderValue, currentShippingCost, currentProcessingTime } = inputs;\n    \n    // Current costs\n    const currentMonthlyShipping = monthlyOrders * currentShippingCost;\n    const currentLaborCost = (currentProcessingTime / 60) * 25 * monthlyOrders; // $25/hour\n    const currentTotalCost = currentMonthlyShipping + currentLaborCost;\n    \n    // With Performile\n    const performileShippingCost = monthlyOrders * (currentShippingCost * 0.75); // 25% savings\n    const performileLaborCost = (1 / 60) * 25 * monthlyOrders; // 1 min per order\n    const performileSubscription = 79;\n    const performileTotalCost = performileShippingCost + performileLaborCost + performileSubscription;\n    \n    // Savings\n    const monthlySavings = currentTotalCost - performileTotalCost;\n    const annualSavings = monthlySavings * 12;\n    const roi = ((annualSavings - (performileSubscription * 12)) / (performileSubscription * 12)) * 100;\n    \n    return {\n      currentMonthlyCost: currentTotalCost,\n      performileMonthlyCost: performileTotalCost,\n      monthlySavings,\n      annualSavings,\n      roi,\n      paybackMonths: (performileSubscription * 12) / monthlySavings,\n    };\n  };\n\n  const results = calculateROI();\n\n  return (\n    <section id=\"roi-calculator\" className=\"py-20 bg-white\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"text-center mb-12\">\n          <div className=\"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4\">\n            <Calculator className=\"h-8 w-8 text-blue-600\" />\n          </div>\n          <h2 className=\"text-3xl sm:text-4xl font-bold text-gray-900 mb-4\">\n            Calculate Your Savings\n          </h2>\n          <p className=\"text-xl text-gray-600\">\n            See how much you can save with Performile\n          </p>\n        </div>\n\n        <div className=\"grid lg:grid-cols-2 gap-12\">\n          {/* Input Section */}\n          <div className=\"bg-gray-50 rounded-2xl p-8\">\n            <h3 className=\"text-2xl font-bold text-gray-900 mb-6\">Your Current Situation</h3>\n            \n            <div className=\"space-y-6\">\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                  Monthly Orders\n                </label>\n                <input\n                  type=\"number\"\n                  value={inputs.monthlyOrders}\n                  onChange={(e) => setInputs({ ...inputs, monthlyOrders: parseInt(e.target.value) || 0 })}\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                  Average Order Value ()\n                </label>\n                <input\n                  type=\"number\"\n                  value={inputs.avgOrderValue}\n                  onChange={(e) => setInputs({ ...inputs, avgOrderValue: parseInt(e.target.value) || 0 })}\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                  Current Shipping Cost per Order ()\n                </label>\n                <input\n                  type=\"number\"\n                  value={inputs.currentShippingCost}\n                  onChange={(e) => setInputs({ ...inputs, currentShippingCost: parseInt(e.target.value) || 0 })}\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                  Processing Time per Order (minutes)\n                </label>\n                <input\n                  type=\"number\"\n                  value={inputs.currentProcessingTime}\n                  onChange={(e) => setInputs({ ...inputs, currentProcessingTime: parseInt(e.target.value) || 0 })}\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n              </div>\n            </div>\n          </div>\n\n          {/* Results Section */}\n          <div className=\"space-y-6\">\n            <div className=\"bg-gradient-to-br from-green-500 to-emerald-600 text-white rounded-2xl p-8\">\n              <div className=\"flex items-center gap-3 mb-4\">\n                <TrendingUp className=\"h-8 w-8\" />\n                <h3 className=\"text-2xl font-bold\">Your Potential Savings</h3>\n              </div>\n              \n              <div className=\"space-y-4\">\n                <div>\n                  <div className=\"text-green-100 text-sm mb-1\">Monthly Savings</div>\n                  <div className=\"text-4xl font-bold\">{results.monthlySavings.toLocaleString()}</div>\n                </div>\n                \n                <div>\n                  <div className=\"text-green-100 text-sm mb-1\">Annual Savings</div>\n                  <div className=\"text-3xl font-bold\">{results.annualSavings.toLocaleString()}</div>\n                </div>\n\n                <div className=\"pt-4 border-t border-green-400\">\n                  <div className=\"text-green-100 text-sm mb-1\">Return on Investment</div>\n                  <div className=\"text-2xl font-bold\">{results.roi.toFixed(0)}% ROI</div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"bg-blue-50 rounded-xl p-6\">\n                <DollarSign className=\"h-8 w-8 text-blue-600 mb-2\" />\n                <div className=\"text-sm text-gray-600 mb-1\">Current Monthly Cost</div>\n                <div className=\"text-2xl font-bold text-gray-900\">\n                  {results.currentMonthlyCost.toLocaleString()}\n                </div>\n              </div>\n\n              <div className=\"bg-green-50 rounded-xl p-6\">\n                <DollarSign className=\"h-8 w-8 text-green-600 mb-2\" />\n                <div className=\"text-sm text-gray-600 mb-1\">With Performile</div>\n                <div className=\"text-2xl font-bold text-gray-900\">\n                  {results.performileMonthlyCost.toLocaleString()}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-gray-50 rounded-xl p-6\">\n              <h4 className=\"font-semibold text-gray-900 mb-3\">What You Get:</h4>\n              <ul className=\"space-y-2 text-gray-700\">\n                <li> 25% lower shipping costs (better rates)</li>\n                <li> 80% faster processing (1 min vs {inputs.currentProcessingTime} min)</li>\n                <li> Automated label printing & tracking</li>\n                <li> Multi-courier comparison</li>\n                <li> Real-time analytics dashboard</li>\n              </ul>\n            </div>\n\n            <button className=\"w-full bg-blue-600 text-white py-4 rounded-lg font-semibold text-lg hover:bg-blue-700 transition-colors\">\n              Start Saving Today\n            </button>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\landing\\Testimonials.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":86,"column":17,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3491,3509],"text":"\n                &quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3491,3509],"text":"\n                &ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3491,3509],"text":"\n                &#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3491,3509],"text":"\n                &rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":86,"column":36,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3527,3543],"text":"&quot;\n              "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3527,3543],"text":"&ldquo;\n              "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3527,3543],"text":"&#34;\n              "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3527,3543],"text":"&rdquo;\n              "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Star, Quote } from 'lucide-react';\n\nexport function Testimonials() {\n  const testimonials = [\n    {\n      name: 'Sarah Johnson',\n      role: 'CEO, Nordic Fashion',\n      company: 'E-commerce Store',\n      rating: 5,\n      text: 'Performile transformed our delivery operations. We reduced shipping costs by 35% and customer satisfaction increased to 98%. The Shopify integration was seamless!',\n      avatar: 'SJ',\n    },\n    {\n      name: 'Lars Andersson',\n      role: 'Operations Manager',\n      company: 'SwiftDelivery AB',\n      rating: 5,\n      text: 'As a courier company, Performile\\'s route optimization saved us 30% in fuel costs. The real-time dispatch system is a game-changer. Best investment we\\'ve made.',\n      avatar: 'LA',\n    },\n    {\n      name: 'Emma Nielsen',\n      role: 'Founder',\n      company: 'Copenhagen Electronics',\n      rating: 5,\n      text: 'The WooCommerce plugin installed in 5 minutes. Our customers love the real-time tracking and multiple delivery options. Revenue increased 25% in 3 months!',\n      avatar: 'EN',\n    },\n    {\n      name: 'Michael Berg',\n      role: 'Logistics Director',\n      company: 'Oslo Wholesale',\n      rating: 5,\n      text: 'Managing 500+ daily shipments was chaos before Performile. Now everything is automated - labels, tracking, notifications. We process orders 3x faster.',\n      avatar: 'MB',\n    },\n    {\n      name: 'Sofia Karlsson',\n      role: 'Consumer',\n      company: 'Mobile App User',\n      rating: 5,\n      text: 'I use the app for all my C2C shipping. It\\'s so easy - just enter address, pay with Swish, and done! Tracking is accurate and I always know when my package arrives.',\n      avatar: 'SK',\n    },\n  ];\n\n  return (\n    <section id=\"testimonials\" className=\"py-20 bg-white\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"text-center mb-16\">\n          <h2 className=\"text-3xl sm:text-4xl font-bold text-gray-900 mb-4\">\n            Trusted by Thousands\n          </h2>\n          <p className=\"text-xl text-gray-600\">\n            See what our customers say about Performile\n          </p>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\n          {testimonials.map((testimonial, index) => (\n            <div\n              key={index}\n              className=\"bg-gradient-to-br from-gray-50 to-white border border-gray-200 rounded-2xl p-6 hover:shadow-xl transition-shadow relative\"\n            >\n              <Quote className=\"absolute top-4 right-4 h-8 w-8 text-blue-200\" />\n              \n              <div className=\"flex items-center gap-4 mb-4\">\n                <div className=\"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-bold\">\n                  {testimonial.avatar}\n                </div>\n                <div>\n                  <div className=\"font-semibold text-gray-900\">{testimonial.name}</div>\n                  <div className=\"text-sm text-gray-600\">{testimonial.role}</div>\n                  <div className=\"text-xs text-gray-500\">{testimonial.company}</div>\n                </div>\n              </div>\n\n              <div className=\"flex gap-1 mb-4\">\n                {[...Array(testimonial.rating)].map((_, i) => (\n                  <Star key={i} className=\"h-5 w-5 text-yellow-400 fill-yellow-400\" />\n                ))}\n              </div>\n\n              <p className=\"text-gray-700 leading-relaxed\">\n                \"{testimonial.text}\"\n              </p>\n            </div>\n          ))}\n        </div>\n\n        <div className=\"mt-12 text-center\">\n          <div className=\"inline-flex items-center gap-2 bg-green-50 text-green-700 px-6 py-3 rounded-full border border-green-200\">\n            <Star className=\"h-5 w-5 fill-green-500 text-green-500\" />\n            <span className=\"font-semibold\">4.9/5 average rating</span>\n            <span className=\"text-green-600\"> 2,500+ reviews</span>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\landing\\TrustBadges.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\layout\\AppLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\layout\\MobileNavigation.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\layout\\NavigationMenu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\layout\\PublicHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\maps\\ProximityMap.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":27,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[595,598],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[595,598],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[718,721],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[718,721],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":35,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[774,777],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[774,777],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":56,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":56,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1508,1511],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1508,1511],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":129,"column":40,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3835,3918],"text":"\n            Enter an address and click &quot;Get Coordinates\" to see the map\n          "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3835,3918],"text":"\n            Enter an address and click &ldquo;Get Coordinates\" to see the map\n          "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3835,3918],"text":"\n            Enter an address and click &#34;Get Coordinates\" to see the map\n          "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3835,3918],"text":"\n            Enter an address and click &rdquo;Get Coordinates\" to see the map\n          "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":129,"column":56,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3835,3918],"text":"\n            Enter an address and click \"Get Coordinates&quot; to see the map\n          "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3835,3918],"text":"\n            Enter an address and click \"Get Coordinates&ldquo; to see the map\n          "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3835,3918],"text":"\n            Enter an address and click \"Get Coordinates&#34; to see the map\n          "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3835,3918],"text":"\n            Enter an address and click \"Get Coordinates&rdquo; to see the map\n          "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":137,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":137,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4055,4058],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4055,4058],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useRef } from 'react';\nimport { Box, Typography, Alert } from '@mui/material';\n\ninterface ProximityMapProps {\n  latitude?: number;\n  longitude?: number;\n  radius?: number; // in kilometers\n  markers?: Array<{\n    lat: number;\n    lng: number;\n    label: string;\n    color?: string;\n  }>;\n  height?: number | string;\n  zoom?: number;\n}\n\nexport const ProximityMap: React.FC<ProximityMapProps> = ({\n  latitude,\n  longitude,\n  radius = 50,\n  markers = [],\n  height = 400,\n  zoom = 10,\n}) => {\n  const mapRef = useRef<HTMLDivElement>(null);\n  const mapInstanceRef = useRef<any>(null);\n\n  useEffect(() => {\n    // Check if Leaflet is available\n    if (typeof window === 'undefined' || !(window as any).L) {\n      return;\n    }\n\n    const L = (window as any).L;\n\n    // Initialize map only once\n    if (!mapInstanceRef.current && mapRef.current && latitude && longitude) {\n      // Create map\n      const map = L.map(mapRef.current).setView([latitude, longitude], zoom);\n\n      // Add OpenStreetMap tiles\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: ' OpenStreetMap contributors',\n        maxZoom: 19,\n      }).addTo(map);\n\n      mapInstanceRef.current = map;\n    }\n\n    // Update map view if coordinates change\n    if (mapInstanceRef.current && latitude && longitude) {\n      mapInstanceRef.current.setView([latitude, longitude], zoom);\n\n      // Clear existing layers (except tile layer)\n      mapInstanceRef.current.eachLayer((layer: any) => {\n        if (layer instanceof L.Marker || layer instanceof L.Circle) {\n          mapInstanceRef.current.removeLayer(layer);\n        }\n      });\n\n      // Add center marker\n      const centerMarker = L.marker([latitude, longitude], {\n        icon: L.divIcon({\n          className: 'custom-marker',\n          html: '<div style=\"background-color: #1976d2; width: 20px; height: 20px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.3);\"></div>',\n          iconSize: [20, 20],\n          iconAnchor: [10, 10],\n        }),\n      }).addTo(mapInstanceRef.current);\n\n      centerMarker.bindPopup('Your Location');\n\n      // Add radius circle\n      if (radius > 0) {\n        L.circle([latitude, longitude], {\n          radius: radius * 1000, // Convert km to meters\n          color: '#1976d2',\n          fillColor: '#1976d2',\n          fillOpacity: 0.1,\n          weight: 2,\n        }).addTo(mapInstanceRef.current);\n      }\n\n      // Add additional markers\n      markers.forEach((marker) => {\n        const markerIcon = L.divIcon({\n          className: 'custom-marker',\n          html: `<div style=\"background-color: ${marker.color || '#f44336'}; width: 16px; height: 16px; border-radius: 50%; border: 2px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.3);\"></div>`,\n          iconSize: [16, 16],\n          iconAnchor: [8, 8],\n        });\n\n        const markerInstance = L.marker([marker.lat, marker.lng], {\n          icon: markerIcon,\n        }).addTo(mapInstanceRef.current);\n\n        markerInstance.bindPopup(marker.label);\n      });\n    }\n\n    // Cleanup\n    return () => {\n      if (mapInstanceRef.current) {\n        mapInstanceRef.current.remove();\n        mapInstanceRef.current = null;\n      }\n    };\n  }, [latitude, longitude, radius, markers, zoom]);\n\n  // If no coordinates provided\n  if (!latitude || !longitude) {\n    return (\n      <Box\n        sx={{\n          height,\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          bgcolor: 'grey.100',\n          borderRadius: 1,\n        }}\n      >\n        <Box sx={{ textAlign: 'center', p: 3 }}>\n          <Typography variant=\"body1\" color=\"text.secondary\" gutterBottom>\n             No location set\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            Enter an address and click \"Get Coordinates\" to see the map\n          </Typography>\n        </Box>\n      </Box>\n    );\n  }\n\n  // Check if Leaflet is loaded\n  if (typeof window !== 'undefined' && !(window as any).L) {\n    return (\n      <Alert severity=\"warning\" sx={{ mb: 2 }}>\n        Map library not loaded. Please refresh the page.\n      </Alert>\n    );\n  }\n\n  return (\n    <Box\n      ref={mapRef}\n      sx={{\n        height,\n        width: '100%',\n        borderRadius: 1,\n        overflow: 'hidden',\n        '& .leaflet-container': {\n          height: '100%',\n          width: '100%',\n        },\n      }}\n    />\n  );\n};\n\nexport default ProximityMap;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\marketplace\\CourierMarketplace.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":150,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":150,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4293,4296],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4293,4296],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_leadData' is defined but never used.","line":309,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":309,"endColumn":43},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":309,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":309,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9419,9422],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9419,9422],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Card,\n  CardContent,\n  Typography,\n  Button,\n  Grid,\n  Box,\n  Chip,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  TextField,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Alert,\n  Avatar,\n  Rating\n} from '@mui/material';\nimport {\n  Lock,\n  Send,\n  LocalShipping\n} from '@mui/icons-material';\nimport { CompetitorData } from '@/types/analytics';\nimport { CourierLogo } from '@/components/courier/CourierLogo';\n\ninterface CourierCardProps {\n  courier: CompetitorData;\n  onUnlock: (courierId: string) => void;\n  onSendLead: (courierId: string) => void;\n}\n\nconst CourierCard: React.FC<CourierCardProps> = ({ courier, onUnlock, onSendLead }) => {\n  return (\n    <Card sx={{ height: '100%', position: 'relative' }}>\n      <CardContent>\n        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"flex-start\" mb={2}>\n          <Box display=\"flex\" alignItems=\"center\">\n            {courier.isUnlocked ? (\n              <Box sx={{ mr: 2 }}>\n                <CourierLogo\n                  courierCode={courier.courier_code || `Courier ${courier.anonymizedId}`}\n                  courierName={`Courier ${courier.anonymizedId}`}\n                  size=\"medium\"\n                  variant=\"rounded\"\n                />\n              </Box>\n            ) : (\n              <Avatar sx={{ bgcolor: 'primary.main', mr: 2 }}>\n                <LocalShipping />\n              </Avatar>\n            )}\n            <Box>\n              <Typography variant=\"h6\">\n                {courier.isUnlocked ? `Courier ${courier.anonymizedId}` : 'Anonymous Courier'}\n              </Typography>\n              <Chip \n                label={`TrustScore: ${courier.isUnlocked ? courier.trustScore : '***'}`}\n                color=\"primary\"\n                size=\"small\"\n              />\n            </Box>\n          </Box>\n          {!courier.isUnlocked && (\n            <Chip \n              icon={<Lock />}\n              label={`$${courier.unlockPrice}`}\n              color=\"warning\"\n              size=\"small\"\n            />\n          )}\n        </Box>\n\n        <Grid container spacing={2} sx={{ mb: 2 }}>\n          <Grid item xs={6}>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              Completion Rate\n            </Typography>\n            <Typography variant=\"h6\">\n              {courier.isUnlocked ? `${courier.completionRate}%` : '***%'}\n            </Typography>\n          </Grid>\n          <Grid item xs={6}>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              On-Time Rate\n            </Typography>\n            <Typography variant=\"h6\">\n              {courier.isUnlocked ? `${courier.onTimeRate}%` : '***%'}\n            </Typography>\n          </Grid>\n          <Grid item xs={6}>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              Market Share\n            </Typography>\n            <Typography variant=\"h6\">\n              {courier.isUnlocked ? `${courier.marketShare}%` : '***%'}\n            </Typography>\n          </Grid>\n          <Grid item xs={6}>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              Avg Price\n            </Typography>\n            <Typography variant=\"h6\">\n              {courier.isUnlocked ? `$${courier.priceRange.avg}` : '$***'}\n            </Typography>\n          </Grid>\n        </Grid>\n\n        <Rating \n          value={courier.isUnlocked ? courier.customerSatisfaction : 0} \n          readOnly \n          size=\"small\"\n          sx={{ mb: 2 }}\n        />\n\n        <Box display=\"flex\" gap={1}>\n          {!courier.isUnlocked ? (\n            <Button \n              variant=\"outlined\" \n              fullWidth\n              startIcon={<Lock />}\n              onClick={() => onUnlock(courier.anonymizedId)}\n            >\n              Unlock Data\n            </Button>\n          ) : (\n            <Button \n              variant=\"contained\" \n              fullWidth\n              startIcon={<Send />}\n              onClick={() => onSendLead(courier.anonymizedId)}\n            >\n              Send Lead\n            </Button>\n          )}\n        </Box>\n      </CardContent>\n    </Card>\n  );\n};\n\ninterface SendLeadDialogProps {\n  open: boolean;\n  onClose: () => void;\n  courierId: string;\n  onSend: (leadData: any) => void;\n}\n\nconst SendLeadDialog: React.FC<SendLeadDialogProps> = ({ open, onClose, courierId, onSend }) => {\n  const [leadData, setLeadData] = useState({\n    estimatedVolume: '',\n    avgOrderValue: '',\n    deliveryAreas: '',\n    requirements: '',\n    budgetMin: '',\n    budgetMax: '',\n    isAnonymized: true\n  });\n\n  const handleSend = () => {\n    onSend({\n      ...leadData,\n      courierId,\n      estimatedVolume: parseInt(leadData.estimatedVolume),\n      avgOrderValue: parseFloat(leadData.avgOrderValue),\n      budgetMin: parseFloat(leadData.budgetMin),\n      budgetMax: parseFloat(leadData.budgetMax),\n      deliveryAreas: leadData.deliveryAreas.split(',').map(area => area.trim())\n    });\n    onClose();\n  };\n\n  return (\n    <Dialog open={open} onClose={onClose} maxWidth=\"md\" fullWidth>\n      <DialogTitle>Send Lead to Courier</DialogTitle>\n      <DialogContent>\n        <Grid container spacing={3} sx={{ mt: 1 }}>\n          <Grid item xs={12} sm={6}>\n            <TextField\n              fullWidth\n              label=\"Estimated Monthly Volume\"\n              type=\"number\"\n              value={leadData.estimatedVolume}\n              onChange={(e) => setLeadData(prev => ({ ...prev, estimatedVolume: e.target.value }))}\n            />\n          </Grid>\n          <Grid item xs={12} sm={6}>\n            <TextField\n              fullWidth\n              label=\"Average Order Value ($)\"\n              type=\"number\"\n              value={leadData.avgOrderValue}\n              onChange={(e) => setLeadData(prev => ({ ...prev, avgOrderValue: e.target.value }))}\n            />\n          </Grid>\n          <Grid item xs={12} sm={6}>\n            <TextField\n              fullWidth\n              label=\"Budget Min ($)\"\n              type=\"number\"\n              value={leadData.budgetMin}\n              onChange={(e) => setLeadData(prev => ({ ...prev, budgetMin: e.target.value }))}\n            />\n          </Grid>\n          <Grid item xs={12} sm={6}>\n            <TextField\n              fullWidth\n              label=\"Budget Max ($)\"\n              type=\"number\"\n              value={leadData.budgetMax}\n              onChange={(e) => setLeadData(prev => ({ ...prev, budgetMax: e.target.value }))}\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <TextField\n              fullWidth\n              label=\"Delivery Areas\"\n              placeholder=\"e.g., Manhattan, Brooklyn, Queens\"\n              value={leadData.deliveryAreas}\n              onChange={(e) => setLeadData(prev => ({ ...prev, deliveryAreas: e.target.value }))}\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <TextField\n              fullWidth\n              multiline\n              rows={3}\n              label=\"Special Requirements\"\n              value={leadData.requirements}\n              onChange={(e) => setLeadData(prev => ({ ...prev, requirements: e.target.value }))}\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <FormControl fullWidth>\n              <InputLabel>Lead Visibility</InputLabel>\n              <Select\n                value={leadData.isAnonymized ? \"true\" : \"false\"}\n                label=\"Lead Visibility\"\n                onChange={(e) => setLeadData(prev => ({ ...prev, isAnonymized: e.target.value === \"true\" }))}\n              >\n                <MenuItem value={\"true\"}>Anonymous (Recommended)</MenuItem>\n                <MenuItem value={\"false\"}>Show Company Details</MenuItem>\n              </Select>\n            </FormControl>\n          </Grid>\n        </Grid>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose}>Cancel</Button>\n        <Button onClick={handleSend} variant=\"contained\">\n          Send Lead\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\ninterface CourierMarketplaceProps {\n  marketId: string;\n}\n\nexport const CourierMarketplace: React.FC<CourierMarketplaceProps> = ({ marketId: _marketId }) => {\n  const [selectedCourier, setSelectedCourier] = useState<string | null>(null);\n  const [sendLeadOpen, setSendLeadOpen] = useState(false);\n\n  // Mock data - would come from API\n  const couriers: CompetitorData[] = [\n    {\n      anonymizedId: 'ANON_ABC123',\n      trustScore: 92,\n      completionRate: 96,\n      onTimeRate: 89,\n      customerSatisfaction: 4.7,\n      marketShare: 15,\n      avgDeliveryTime: 24,\n      priceRange: { min: 5, max: 25, avg: 12 },\n      isUnlocked: false,\n      unlockPrice: 29\n    },\n    {\n      anonymizedId: 'ANON_DEF456',\n      trustScore: 87,\n      completionRate: 93,\n      onTimeRate: 85,\n      customerSatisfaction: 4.5,\n      marketShare: 12,\n      avgDeliveryTime: 28,\n      priceRange: { min: 4, max: 20, avg: 10 },\n      isUnlocked: true,\n      unlockPrice: 29\n    }\n  ];\n\n  const handleUnlock = (courierId: string) => {\n    console.log('Unlocking courier:', courierId);\n    // API call to unlock courier data\n  };\n\n  const handleSendLead = (courierId: string) => {\n    console.log('Sending lead to courier:', courierId, 'for market:', _marketId);\n    setSelectedCourier(courierId);\n    setSendLeadOpen(true);\n  };\n\n  const handleLeadSubmit = (_leadData: any) => {\n    console.log('Sending lead to:', _marketId);\n    // API call to send lead\n  };\n\n  return (\n    <Box>\n      <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={3}>\n        <Typography variant=\"h6\">\n          Available Couriers in Market\n        </Typography>\n        <Chip \n          label={`${couriers.length} couriers found`}\n          color=\"primary\"\n          variant=\"outlined\"\n        />\n      </Box>\n\n      <Alert severity=\"info\" sx={{ mb: 3 }}>\n        <Typography variant=\"body2\">\n          <strong>How it works:</strong> Research anonymized courier performance data. \n          Unlock detailed information for $29, then send leads to connect with top performers.\n        </Typography>\n      </Alert>\n\n      <Grid container spacing={3}>\n        {couriers.map((courier, index) => (\n          <Grid item xs={12} md={6} lg={4} key={index}>\n            <CourierCard \n              courier={courier}\n              onUnlock={handleUnlock}\n              onSendLead={handleSendLead}\n            />\n          </Grid>\n        ))}\n      </Grid>\n\n      <SendLeadDialog\n        open={sendLeadOpen}\n        onClose={() => setSendLeadOpen(false)}\n        courierId={selectedCourier || ''}\n        onSend={handleLeadSubmit}\n      />\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\marketplace\\LeadManagement.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\merchant\\MerchantLogo.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'shopId' is defined but never used.","line":100,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":100,"endColumn":9}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * MerchantLogo Component\n * Displays merchant/shop logo with fallback to initials\n * \n * Phase: B.4 - Frontend Components\n * Created: October 18, 2025, 5:30 PM\n * \n * Similar to CourierLogo but for merchant shops\n */\n\nimport React, { useState } from 'react';\nimport { Avatar, Box, Tooltip, Typography, Skeleton } from '@mui/material';\nimport { Store as StoreIcon } from '@mui/icons-material';\n\nexport interface MerchantLogoProps {\n  /** Shop ID (optional, for future use) */\n  shopId?: string;\n  \n  /** Shop/Merchant name (required) */\n  shopName: string;\n  \n  /** Logo URL from Supabase Storage */\n  logoUrl?: string | null;\n  \n  /** Size of the logo */\n  size?: 'small' | 'medium' | 'large' | 'xlarge';\n  \n  /** Shape variant */\n  variant?: 'circular' | 'rounded' | 'square';\n  \n  /** Show shop name next to logo */\n  showName?: boolean;\n  \n  /** Show tooltip on hover */\n  tooltip?: boolean;\n  \n  /** Loading state */\n  loading?: boolean;\n  \n  /** Custom className */\n  className?: string;\n  \n  /** Click handler */\n  onClick?: () => void;\n}\n\n// Size mappings (in pixels)\nconst SIZE_MAP = {\n  small: 32,\n  medium: 48,\n  large: 64,\n  xlarge: 80,\n};\n\n// Border radius mappings\nconst VARIANT_MAP = {\n  circular: '50%',\n  rounded: '8px',\n  square: '0px',\n};\n\n/**\n * Get initials from shop name\n */\nfunction getInitials(name: string): string {\n  if (!name) return 'S';\n  \n  const words = name.trim().split(/\\s+/);\n  if (words.length === 1) {\n    return words[0].substring(0, 2).toUpperCase();\n  }\n  \n  return (words[0][0] + words[words.length - 1][0]).toUpperCase();\n}\n\n/**\n * Generate consistent color from shop name\n */\nfunction getColorFromName(name: string): string {\n  const colors = [\n    '#1976d2', // blue\n    '#388e3c', // green\n    '#d32f2f', // red\n    '#f57c00', // orange\n    '#7b1fa2', // purple\n    '#0288d1', // light blue\n    '#c2185b', // pink\n    '#00796b', // teal\n  ];\n  \n  let hash = 0;\n  for (let i = 0; i < name.length; i++) {\n    hash = name.charCodeAt(i) + ((hash << 5) - hash);\n  }\n  \n  return colors[Math.abs(hash) % colors.length];\n}\n\nexport const MerchantLogo: React.FC<MerchantLogoProps> = ({\n  shopId,\n  shopName,\n  logoUrl,\n  size = 'medium',\n  variant = 'rounded',\n  showName = false,\n  tooltip = true,\n  loading = false,\n  className,\n  onClick,\n}) => {\n  const [imageError, setImageError] = useState(false);\n  const [imageLoading, setImageLoading] = useState(true);\n\n  const sizeInPx = SIZE_MAP[size];\n  const borderRadius = VARIANT_MAP[variant];\n  const initials = getInitials(shopName);\n  const backgroundColor = getColorFromName(shopName);\n\n  // Determine if we should show the logo or fallback\n  const showLogo = logoUrl && !imageError;\n\n  const logoElement = (\n    <Box\n      sx={{\n        display: 'inline-flex',\n        alignItems: 'center',\n        gap: showName ? 1.5 : 0,\n        cursor: onClick ? 'pointer' : 'default',\n      }}\n      className={className}\n      onClick={onClick}\n    >\n      {loading ? (\n        <Skeleton\n          variant={variant === 'circular' ? 'circular' : 'rectangular'}\n          width={sizeInPx}\n          height={sizeInPx}\n          sx={{ borderRadius }}\n        />\n      ) : (\n        <Avatar\n          src={showLogo ? logoUrl : undefined}\n          alt={shopName}\n          variant={variant === 'circular' ? 'circular' : 'rounded'}\n          sx={{\n            width: sizeInPx,\n            height: sizeInPx,\n            borderRadius,\n            bgcolor: showLogo ? 'transparent' : backgroundColor,\n            border: '1px solid',\n            borderColor: 'divider',\n            fontSize: size === 'small' ? '0.875rem' : size === 'xlarge' ? '1.5rem' : '1rem',\n            fontWeight: 600,\n            '& img': {\n              objectFit: 'contain',\n              padding: '4px',\n            },\n          }}\n          imgProps={{\n            onLoad: () => setImageLoading(false),\n            onError: () => {\n              setImageError(true);\n              setImageLoading(false);\n            },\n          }}\n        >\n          {!showLogo && (imageLoading ? <StoreIcon /> : initials)}\n        </Avatar>\n      )}\n\n      {showName && !loading && (\n        <Box>\n          <Typography\n            variant={size === 'small' ? 'body2' : 'subtitle1'}\n            fontWeight={600}\n            noWrap\n          >\n            {shopName}\n          </Typography>\n        </Box>\n      )}\n    </Box>\n  );\n\n  // Wrap with tooltip if enabled\n  if (tooltip && !loading) {\n    return (\n      <Tooltip title={shopName} arrow>\n        {logoElement}\n      </Tooltip>\n    );\n  }\n\n  return logoElement;\n};\n\n// Export default\nexport default MerchantLogo;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\merchant\\MerchantLogoUpload.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'IconButton' is defined but never used.","line":16,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SuccessIcon' is defined but never used.","line":28,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":29},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'uploadFile' and 'validateFile'. Either include them or remove the dependency array.","line":116,"column":6,"nodeType":"ArrayExpression","endLine":116,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [uploadFile, validateFile]","fix":{"range":[2865,2873],"text":"[uploadFile, validateFile]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":156,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":156,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3997,4000],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3997,4000],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":220,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":220,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5528,5531],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5528,5531],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * MerchantLogoUpload Component\n * Allows merchants to upload/manage their shop logo\n * \n * Phase: B.5 - Upload Component\n * Created: October 18, 2025, 5:32 PM\n */\n\nimport React, { useState, useRef, useCallback } from 'react';\nimport {\n  Box,\n  Button,\n  Card,\n  CardContent,\n  Typography,\n  IconButton,\n  LinearProgress,\n  Alert,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n} from '@mui/material';\nimport {\n  CloudUpload as UploadIcon,\n  Delete as DeleteIcon,\n  Edit as EditIcon,\n  CheckCircle as SuccessIcon,\n} from '@mui/icons-material';\nimport { MerchantLogo } from './MerchantLogo';\nimport { apiClient } from '@/services/apiClient';\nimport toast from 'react-hot-toast';\n\nexport interface MerchantLogoUploadProps {\n  /** Shop ID */\n  shopId: string;\n  \n  /** Shop name */\n  shopName: string;\n  \n  /** Current logo URL */\n  currentLogoUrl?: string | null;\n  \n  /** Callback when upload succeeds */\n  onUploadSuccess?: (logoUrl: string) => void;\n  \n  /** Callback when delete succeeds */\n  onDeleteSuccess?: () => void;\n  \n  /** Max file size in MB */\n  maxSizeMB?: number;\n}\n\nconst ALLOWED_TYPES = ['image/png', 'image/jpeg', 'image/jpg', 'image/svg+xml'];\nconst DEFAULT_MAX_SIZE_MB = 2;\n\nexport const MerchantLogoUpload: React.FC<MerchantLogoUploadProps> = ({\n  shopId,\n  shopName,\n  currentLogoUrl,\n  onUploadSuccess,\n  onDeleteSuccess,\n  maxSizeMB = DEFAULT_MAX_SIZE_MB,\n}) => {\n  const [logoUrl, setLogoUrl] = useState<string | null>(currentLogoUrl || null);\n  const [uploading, setUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [error, setError] = useState<string | null>(null);\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const [dragActive, setDragActive] = useState(false);\n  const [previewUrl, setPreviewUrl] = useState<string | null>(null);\n  \n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  /**\n   * Validate file\n   */\n  const validateFile = (file: File): string | null => {\n    // Check file type\n    if (!ALLOWED_TYPES.includes(file.type)) {\n      return `Invalid file type. Allowed: PNG, JPG, JPEG, SVG`;\n    }\n\n    // Check file size\n    const maxSizeBytes = maxSizeMB * 1024 * 1024;\n    if (file.size > maxSizeBytes) {\n      return `File size exceeds ${maxSizeMB}MB limit`;\n    }\n\n    return null;\n  };\n\n  /**\n   * Handle file selection\n   */\n  const handleFileSelect = useCallback(async (file: File) => {\n    setError(null);\n\n    // Validate file\n    const validationError = validateFile(file);\n    if (validationError) {\n      setError(validationError);\n      toast.error(validationError);\n      return;\n    }\n\n    // Create preview\n    const reader = new FileReader();\n    reader.onload = (e) => {\n      setPreviewUrl(e.target?.result as string);\n    };\n    reader.readAsDataURL(file);\n\n    // Upload file\n    await uploadFile(file);\n  }, [shopId]);\n\n  /**\n   * Upload file to server\n   */\n  const uploadFile = async (file: File) => {\n    setUploading(true);\n    setUploadProgress(0);\n    setError(null);\n\n    try {\n      // Create form data\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('shop_id', shopId);\n\n      // Simulate progress (since we can't track actual upload progress easily)\n      const progressInterval = setInterval(() => {\n        setUploadProgress((prev) => Math.min(prev + 10, 90));\n      }, 200);\n\n      // Upload\n      const response = await apiClient.post('/merchant/logo', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      });\n\n      clearInterval(progressInterval);\n      setUploadProgress(100);\n\n      if (response.data.success) {\n        const newLogoUrl = response.data.data.logo_url;\n        setLogoUrl(newLogoUrl);\n        setPreviewUrl(null);\n        toast.success('Logo uploaded successfully!');\n        onUploadSuccess?.(newLogoUrl);\n      } else {\n        throw new Error(response.data.error || 'Upload failed');\n      }\n    } catch (err: any) {\n      console.error('Upload error:', err);\n      const errorMessage = err.response?.data?.error || err.message || 'Upload failed';\n      setError(errorMessage);\n      toast.error(errorMessage);\n      setPreviewUrl(null);\n    } finally {\n      setUploading(false);\n      setUploadProgress(0);\n    }\n  };\n\n  /**\n   * Handle file input change\n   */\n  const handleFileInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      handleFileSelect(file);\n    }\n  };\n\n  /**\n   * Handle drag events\n   */\n  const handleDrag = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === 'dragenter' || e.type === 'dragover') {\n      setDragActive(true);\n    } else if (e.type === 'dragleave') {\n      setDragActive(false);\n    }\n  };\n\n  /**\n   * Handle drop\n   */\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n\n    const file = e.dataTransfer.files?.[0];\n    if (file) {\n      handleFileSelect(file);\n    }\n  };\n\n  /**\n   * Handle delete logo\n   */\n  const handleDelete = async () => {\n    try {\n      const response = await apiClient.delete(`/merchant/logo?shop_id=${shopId}`);\n\n      if (response.data.success) {\n        setLogoUrl(null);\n        setDeleteDialogOpen(false);\n        toast.success('Logo deleted successfully');\n        onDeleteSuccess?.();\n      } else {\n        throw new Error(response.data.error || 'Delete failed');\n      }\n    } catch (err: any) {\n      console.error('Delete error:', err);\n      const errorMessage = err.response?.data?.error || err.message || 'Delete failed';\n      toast.error(errorMessage);\n    }\n  };\n\n  return (\n    <Card>\n      <CardContent>\n        <Typography variant=\"h6\" gutterBottom>\n          Shop Logo\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n          Upload your shop logo. It will be visible to couriers and administrators.\n        </Typography>\n\n        {/* Current Logo or Upload Area */}\n        <Box sx={{ mb: 2 }}>\n          {logoUrl ? (\n            // Show current logo\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, mb: 2 }}>\n              <MerchantLogo\n                shopId={shopId}\n                shopName={shopName}\n                logoUrl={logoUrl}\n                size=\"xlarge\"\n                variant=\"rounded\"\n              />\n              <Box sx={{ flexGrow: 1 }}>\n                <Typography variant=\"subtitle2\" gutterBottom>\n                  Current Logo\n                </Typography>\n                <Box sx={{ display: 'flex', gap: 1 }}>\n                  <Button\n                    size=\"small\"\n                    variant=\"outlined\"\n                    startIcon={<EditIcon />}\n                    onClick={() => fileInputRef.current?.click()}\n                    disabled={uploading}\n                  >\n                    Replace\n                  </Button>\n                  <Button\n                    size=\"small\"\n                    variant=\"outlined\"\n                    color=\"error\"\n                    startIcon={<DeleteIcon />}\n                    onClick={() => setDeleteDialogOpen(true)}\n                    disabled={uploading}\n                  >\n                    Delete\n                  </Button>\n                </Box>\n              </Box>\n            </Box>\n          ) : (\n            // Show upload area\n            <Box\n              onDragEnter={handleDrag}\n              onDragLeave={handleDrag}\n              onDragOver={handleDrag}\n              onDrop={handleDrop}\n              sx={{\n                border: '2px dashed',\n                borderColor: dragActive ? 'primary.main' : 'divider',\n                borderRadius: 2,\n                p: 4,\n                textAlign: 'center',\n                bgcolor: dragActive ? 'action.hover' : 'background.paper',\n                cursor: 'pointer',\n                transition: 'all 0.2s',\n                '&:hover': {\n                  borderColor: 'primary.main',\n                  bgcolor: 'action.hover',\n                },\n              }}\n              onClick={() => fileInputRef.current?.click()}\n            >\n              {previewUrl ? (\n                <Box>\n                  <img\n                    src={previewUrl}\n                    alt=\"Preview\"\n                    style={{\n                      maxWidth: '200px',\n                      maxHeight: '200px',\n                      objectFit: 'contain',\n                    }}\n                  />\n                  <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 2 }}>\n                    Uploading...\n                  </Typography>\n                </Box>\n              ) : (\n                <>\n                  <UploadIcon sx={{ fontSize: 48, color: 'text.secondary', mb: 2 }} />\n                  <Typography variant=\"h6\" gutterBottom>\n                    Drag & drop your logo here\n                  </Typography>\n                  <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\n                    or click to browse\n                  </Typography>\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    PNG, JPG, JPEG, SVG  Max {maxSizeMB}MB  Recommended: 400x400px\n                  </Typography>\n                </>\n              )}\n            </Box>\n          )}\n        </Box>\n\n        {/* Upload Progress */}\n        {uploading && (\n          <Box sx={{ mb: 2 }}>\n            <LinearProgress variant=\"determinate\" value={uploadProgress} />\n            <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mt: 0.5 }}>\n              Uploading... {uploadProgress}%\n            </Typography>\n          </Box>\n        )}\n\n        {/* Error Message */}\n        {error && (\n          <Alert severity=\"error\" sx={{ mb: 2 }} onClose={() => setError(null)}>\n            {error}\n          </Alert>\n        )}\n\n        {/* File Input (Hidden) */}\n        <input\n          ref={fileInputRef}\n          type=\"file\"\n          accept={ALLOWED_TYPES.join(',')}\n          style={{ display: 'none' }}\n          onChange={handleFileInputChange}\n          disabled={uploading}\n        />\n\n        {/* Guidelines */}\n        <Box sx={{ mt: 3, p: 2, bgcolor: 'action.hover', borderRadius: 1 }}>\n          <Typography variant=\"subtitle2\" gutterBottom>\n            Logo Guidelines:\n          </Typography>\n          <Typography variant=\"body2\" component=\"ul\" sx={{ pl: 2, m: 0 }}>\n            <li>Use a square image (400x400px recommended)</li>\n            <li>Ensure good contrast and readability</li>\n            <li>Avoid text-heavy logos</li>\n            <li>Use transparent background (PNG) for best results</li>\n          </Typography>\n        </Box>\n      </CardContent>\n\n      {/* Delete Confirmation Dialog */}\n      <Dialog open={deleteDialogOpen} onClose={() => setDeleteDialogOpen(false)}>\n        <DialogTitle>Delete Logo?</DialogTitle>\n        <DialogContent>\n          <Typography>\n            Are you sure you want to delete your shop logo? This action cannot be undone.\n          </Typography>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setDeleteDialogOpen(false)}>Cancel</Button>\n          <Button onClick={handleDelete} color=\"error\" variant=\"contained\">\n            Delete\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Card>\n  );\n};\n\nexport default MerchantLogoUpload;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\merchant\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\messaging\\MessagingCenter.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":70,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":70,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1421,1424],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1421,1424],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'messages' conditional could make the dependencies of useEffect Hook (at line 152) change on every render. To fix this, wrap the initialization of 'messages' in its own useMemo() Hook.","line":114,"column":9,"nodeType":"VariableDeclarator","endLine":114,"endColumn":89}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\nimport {\n  Box,\n  Card,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  Avatar,\n  Typography,\n  TextField,\n  IconButton,\n  Badge,\n  InputAdornment,\n  Menu,\n  MenuItem,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  Paper,\n  Tooltip,\n} from '@mui/material';\nimport {\n  Send as SendIcon,\n  Search as SearchIcon,\n  AttachFile as AttachIcon,\n  MoreVert as MoreIcon,\n  Archive as ArchiveIcon,\n  Delete as DeleteIcon,\n  Check as CheckIcon,\n  DoneAll as DoneAllIcon,\n  Add as AddIcon,\n} from '@mui/icons-material';\nimport { useQuery, useMutation } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport { useAuthStore } from '@/store/authStore';\nimport { formatDistanceToNow } from 'date-fns';\n\ninterface Conversation {\n  conversation_id: string;\n  subject: string;\n  last_message_at: string;\n  unread_count: number;\n  participants: Array<{\n    user_id: string;\n    first_name: string;\n    last_name: string;\n    email: string;\n    user_role: string;\n  }>;\n  last_message: {\n    message_text: string;\n    sender_id: string;\n    created_at: string;\n  };\n}\n\ninterface Message {\n  message_id: string;\n  sender_id: string;\n  message_text: string;\n  created_at: string;\n  is_edited: boolean;\n  sender_first_name: string;\n  sender_last_name: string;\n  sender_role: string;\n  read_count: number;\n  attachments: any;\n}\n\nexport const MessagingCenter: React.FC = () => {\n  const { user } = useAuthStore();\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  \n  const [selectedConversation, setSelectedConversation] = useState<string | null>(null);\n  const [messageText, setMessageText] = useState('');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n  const [newConversationOpen, setNewConversationOpen] = useState(false);\n  const [newConvSubject, setNewConvSubject] = useState('');\n  const [newConvRecipient, setNewConvRecipient] = useState('');\n  const [newConvMessage, setNewConvMessage] = useState('');\n\n  // Fetch conversations\n  const { data: conversationsData, refetch: refetchConversations } = useQuery({\n    queryKey: ['conversations'],\n    queryFn: async () => {\n      const response = await apiClient.get('/messages/conversations');\n      return response.data;\n    },\n    refetchInterval: 30000, // Poll every 30 seconds\n    retry: false,\n  });\n\n  const conversations: Conversation[] = Array.isArray(conversationsData?.data) ? conversationsData.data : [];\n\n  // Fetch messages for selected conversation\n  const { data: messagesData, refetch: refetchMessages } = useQuery({\n    queryKey: ['messages', selectedConversation],\n    queryFn: async () => {\n      if (!selectedConversation) return null;\n      const response = await apiClient.get('/messages', {\n        params: { conversation_id: selectedConversation }\n      });\n      return response.data;\n    },\n    enabled: !!selectedConversation,\n    refetchInterval: 10000, // Poll every 10 seconds\n    retry: false,\n  });\n\n  const messages: Message[] = Array.isArray(messagesData?.data) ? messagesData.data : [];\n\n  // Send message mutation\n  const sendMessageMutation = useMutation({\n    mutationFn: async (data: { conversation_id: string; message_text: string }) => {\n      const response = await apiClient.post('/messages', data);\n      return response.data;\n    },\n    onSuccess: () => {\n      setMessageText('');\n      refetchMessages();\n      refetchConversations();\n      scrollToBottom();\n    },\n  });\n\n  // Create conversation mutation\n  const createConversationMutation = useMutation({\n    mutationFn: async (data: { participant_emails: string[]; subject: string; initial_message: string }) => {\n      const response = await apiClient.post('/messages/conversations', data);\n      return response.data;\n    },\n    onSuccess: (data) => {\n      setNewConversationOpen(false);\n      setNewConvSubject('');\n      setNewConvRecipient('');\n      setNewConvMessage('');\n      setSelectedConversation(data.data.conversation_id);\n      refetchConversations();\n    },\n  });\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const handleSendMessage = () => {\n    if (!messageText.trim() || !selectedConversation) return;\n\n    sendMessageMutation.mutate({\n      conversation_id: selectedConversation,\n      message_text: messageText.trim(),\n    });\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  const getOtherParticipants = (conversation: Conversation) => {\n    return conversation.participants?.filter(p => p.user_id !== user?.user_id) || [];\n  };\n\n  const getConversationTitle = (conversation: Conversation) => {\n    const others = getOtherParticipants(conversation);\n    if (others.length === 0) return 'You';\n    if (others.length === 1) return `${others[0].first_name} ${others[0].last_name}`;\n    return `${others[0].first_name} +${others.length - 1} others`;\n  };\n\n  const filteredConversations = conversations.filter(conv =>\n    getConversationTitle(conv).toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const selectedConv = conversations.find(c => c.conversation_id === selectedConversation);\n\n  return (\n    <Box sx={{ height: 'calc(100vh - 100px)', display: 'flex', gap: 0 }}>\n      {/* Conversations List */}\n      <Card sx={{ width: 350, display: 'flex', flexDirection: 'column', borderRadius: 0 }}>\n        <Box sx={{ p: 2, borderBottom: 1, borderColor: 'divider' }}>\n          <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n            <Typography variant=\"h6\">Messages</Typography>\n            <Tooltip title=\"New Conversation\">\n              <IconButton size=\"small\" onClick={() => setNewConversationOpen(true)}>\n                <AddIcon />\n              </IconButton>\n            </Tooltip>\n          </Box>\n          <TextField\n            fullWidth\n            size=\"small\"\n            placeholder=\"Search conversations...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  <SearchIcon fontSize=\"small\" />\n                </InputAdornment>\n              ),\n            }}\n          />\n        </Box>\n\n        <List sx={{ flexGrow: 1, overflow: 'auto', p: 0 }}>\n          {filteredConversations.length === 0 ? (\n            <Box sx={{ p: 3, textAlign: 'center' }}>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                No conversations yet\n              </Typography>\n            </Box>\n          ) : (\n            filteredConversations.map((conversation) => {\n              const others = getOtherParticipants(conversation);\n              const isSelected = conversation.conversation_id === selectedConversation;\n\n              return (\n                <ListItem\n                  key={conversation.conversation_id}\n                  button\n                  selected={isSelected}\n                  onClick={() => setSelectedConversation(conversation.conversation_id)}\n                  sx={{\n                    borderLeft: isSelected ? 3 : 0,\n                    borderColor: 'primary.main',\n                    bgcolor: isSelected ? 'action.selected' : 'transparent',\n                  }}\n                >\n                  <ListItemAvatar>\n                    <Badge badgeContent={conversation.unread_count} color=\"error\">\n                      <Avatar sx={{ bgcolor: 'primary.main' }}>\n                        {others[0]?.first_name?.[0] || 'U'}\n                      </Avatar>\n                    </Badge>\n                  </ListItemAvatar>\n                  <ListItemText\n                    primary={\n                      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                        <Typography variant=\"body2\" fontWeight={conversation.unread_count > 0 ? 'bold' : 'normal'}>\n                          {getConversationTitle(conversation)}\n                        </Typography>\n                        {conversation.last_message_at && (\n                          <Typography variant=\"caption\" color=\"text.secondary\">\n                            {formatDistanceToNow(new Date(conversation.last_message_at), { addSuffix: true })}\n                          </Typography>\n                        )}\n                      </Box>\n                    }\n                    secondary={\n                      <Typography\n                        variant=\"body2\"\n                        color=\"text.secondary\"\n                        noWrap\n                        sx={{ fontWeight: conversation.unread_count > 0 ? 'bold' : 'normal' }}\n                      >\n                        {conversation.last_message?.message_text || 'No messages yet'}\n                      </Typography>\n                    }\n                  />\n                </ListItem>\n              );\n            })\n          )}\n        </List>\n      </Card>\n\n      {/* Messages Area */}\n      <Card sx={{ flexGrow: 1, display: 'flex', flexDirection: 'column', borderRadius: 0 }}>\n        {selectedConversation && selectedConv ? (\n          <>\n            {/* Header */}\n            <Box sx={{ p: 2, borderBottom: 1, borderColor: 'divider', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n                <Avatar sx={{ bgcolor: 'primary.main' }}>\n                  {getOtherParticipants(selectedConv)[0]?.first_name?.[0] || 'U'}\n                </Avatar>\n                <Box>\n                  <Typography variant=\"subtitle1\" fontWeight=\"medium\">\n                    {getConversationTitle(selectedConv)}\n                  </Typography>\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    {getOtherParticipants(selectedConv).map(p => p.user_role).join(', ')}\n                  </Typography>\n                </Box>\n              </Box>\n              <IconButton size=\"small\" onClick={(e) => setAnchorEl(e.currentTarget)}>\n                <MoreIcon />\n              </IconButton>\n            </Box>\n\n            {/* Messages */}\n            <Box sx={{ flexGrow: 1, overflow: 'auto', p: 2, bgcolor: 'grey.50' }}>\n              {messages.map((message, index) => {\n                const isOwn = message.sender_id === user?.user_id;\n                const showAvatar = index === 0 || messages[index - 1].sender_id !== message.sender_id;\n\n                return (\n                  <Box\n                    key={message.message_id}\n                    sx={{\n                      display: 'flex',\n                      justifyContent: isOwn ? 'flex-end' : 'flex-start',\n                      mb: 1,\n                      gap: 1,\n                    }}\n                  >\n                    {!isOwn && showAvatar && (\n                      <Avatar sx={{ width: 32, height: 32, bgcolor: 'secondary.main' }}>\n                        {message.sender_first_name?.[0]}\n                      </Avatar>\n                    )}\n                    {!isOwn && !showAvatar && <Box sx={{ width: 32 }} />}\n\n                    <Box sx={{ maxWidth: '70%' }}>\n                      {!isOwn && showAvatar && (\n                        <Typography variant=\"caption\" color=\"text.secondary\" sx={{ ml: 1 }}>\n                          {message.sender_first_name} {message.sender_last_name}\n                        </Typography>\n                      )}\n                      <Paper\n                        sx={{\n                          p: 1.5,\n                          bgcolor: isOwn ? 'primary.main' : 'white',\n                          color: isOwn ? 'white' : 'text.primary',\n                          borderRadius: 2,\n                          borderTopLeftRadius: !isOwn && showAvatar ? 0 : 2,\n                          borderTopRightRadius: isOwn && showAvatar ? 0 : 2,\n                        }}\n                      >\n                        <Typography variant=\"body2\" sx={{ whiteSpace: 'pre-wrap' }}>\n                          {message.message_text}\n                        </Typography>\n                        {message.is_edited && (\n                          <Typography variant=\"caption\" sx={{ opacity: 0.7, fontStyle: 'italic' }}>\n                            (edited)\n                          </Typography>\n                        )}\n                      </Paper>\n                      <Box sx={{ display: 'flex', gap: 0.5, alignItems: 'center', mt: 0.5, px: 1 }}>\n                        <Typography variant=\"caption\" color=\"text.secondary\">\n                          {formatDistanceToNow(new Date(message.created_at), { addSuffix: true })}\n                        </Typography>\n                        {isOwn && (\n                          <Tooltip title={message.read_count > 0 ? 'Read' : 'Sent'}>\n                            {message.read_count > 0 ? (\n                              <DoneAllIcon sx={{ fontSize: 14, color: 'primary.main' }} />\n                            ) : (\n                              <CheckIcon sx={{ fontSize: 14, color: 'text.secondary' }} />\n                            )}\n                          </Tooltip>\n                        )}\n                      </Box>\n                    </Box>\n                  </Box>\n                );\n              })}\n              <div ref={messagesEndRef} />\n            </Box>\n\n            {/* Message Input */}\n            <Box sx={{ p: 2, borderTop: 1, borderColor: 'divider' }}>\n              <TextField\n                fullWidth\n                multiline\n                maxRows={4}\n                placeholder=\"Type a message...\"\n                value={messageText}\n                onChange={(e) => setMessageText(e.target.value)}\n                onKeyPress={handleKeyPress}\n                InputProps={{\n                  endAdornment: (\n                    <InputAdornment position=\"end\">\n                      <IconButton size=\"small\">\n                        <AttachIcon />\n                      </IconButton>\n                      <IconButton\n                        color=\"primary\"\n                        onClick={handleSendMessage}\n                        disabled={!messageText.trim() || sendMessageMutation.isPending}\n                      >\n                        <SendIcon />\n                      </IconButton>\n                    </InputAdornment>\n                  ),\n                }}\n              />\n            </Box>\n          </>\n        ) : (\n          <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'center', height: '100%' }}>\n            <Typography variant=\"body1\" color=\"text.secondary\">\n              Select a conversation to start messaging\n            </Typography>\n          </Box>\n        )}\n      </Card>\n\n      {/* Conversation Menu */}\n      <Menu anchorEl={anchorEl} open={Boolean(anchorEl)} onClose={() => setAnchorEl(null)}>\n        <MenuItem onClick={() => setAnchorEl(null)}>\n          <ArchiveIcon fontSize=\"small\" sx={{ mr: 1 }} />\n          Archive\n        </MenuItem>\n        <MenuItem onClick={() => setAnchorEl(null)}>\n          <DeleteIcon fontSize=\"small\" sx={{ mr: 1 }} />\n          Delete\n        </MenuItem>\n      </Menu>\n\n      {/* New Conversation Dialog */}\n      <Dialog open={newConversationOpen} onClose={() => setNewConversationOpen(false)} maxWidth=\"sm\" fullWidth>\n        <DialogTitle>New Conversation</DialogTitle>\n        <DialogContent>\n          <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2, pt: 1 }}>\n            <TextField\n              label=\"Recipient Email\"\n              fullWidth\n              value={newConvRecipient}\n              onChange={(e) => setNewConvRecipient(e.target.value)}\n              placeholder=\"user@example.com\"\n              helperText=\"Enter the email address of the person you want to message\"\n            />\n            <TextField\n              label=\"Subject\"\n              fullWidth\n              value={newConvSubject}\n              onChange={(e) => setNewConvSubject(e.target.value)}\n              placeholder=\"What's this conversation about?\"\n            />\n            <TextField\n              label=\"Message\"\n              fullWidth\n              multiline\n              rows={4}\n              value={newConvMessage}\n              onChange={(e) => setNewConvMessage(e.target.value)}\n              placeholder=\"Type your message here...\"\n            />\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => {\n            setNewConversationOpen(false);\n            setNewConvSubject('');\n            setNewConvRecipient('');\n            setNewConvMessage('');\n          }}>Cancel</Button>\n          <Button \n            onClick={() => {\n              if (newConvRecipient && newConvSubject && newConvMessage) {\n                createConversationMutation.mutate({\n                  participant_emails: [newConvRecipient],\n                  subject: newConvSubject,\n                  initial_message: newConvMessage\n                });\n              }\n            }}\n            variant=\"contained\"\n            disabled={!newConvRecipient || !newConvSubject || !newConvMessage || createConversationMutation.isPending}\n          >\n            {createConversationMutation.isPending ? 'Creating...' : 'Create'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\notifications\\NotificationBell.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[679,682],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[679,682],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'type' is defined but never used.","line":106,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":106,"endColumn":44}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  IconButton,\n  Badge,\n  Menu,\n  MenuItem,\n  Box,\n  Typography,\n  Divider,\n  Button,\n  CircularProgress,\n  ListItemText,\n  ListItemIcon,\n} from '@mui/material';\nimport {\n  Notifications as NotificationsIcon,\n  Circle as CircleIcon,\n  CheckCircle as CheckCircleIcon,\n} from '@mui/icons-material';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport { useNavigate } from 'react-router-dom';\n\ninterface Notification {\n  notification_id: string;\n  type: string;\n  title: string;\n  message: string;\n  is_read: boolean;\n  created_at: string;\n  data?: any;\n}\n\nexport const NotificationBell: React.FC = () => {\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n  const navigate = useNavigate();\n  const queryClient = useQueryClient();\n  const open = Boolean(anchorEl);\n\n  // Fetch notifications\n  const { data, isLoading } = useQuery({\n    queryKey: ['notifications', 'recent'],\n    queryFn: async () => {\n      const response = await apiClient.get('/notifications/list?limit=5');\n      return response.data.data;\n    },\n    refetchInterval: 30000, // Refresh every 30 seconds\n  });\n\n  const notifications = data?.notifications || [];\n  const unreadCount = data?.unreadCount || 0;\n\n  // Mark as read mutation\n  const markAsReadMutation = useMutation({\n    mutationFn: async (notificationId: string) => {\n      await apiClient.put('/notifications/mark-read', {\n        notification_id: notificationId,\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['notifications'] });\n    },\n  });\n\n  // Mark all as read mutation\n  const markAllAsReadMutation = useMutation({\n    mutationFn: async () => {\n      await apiClient.put('/notifications/mark-read', {\n        mark_all: true,\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['notifications'] });\n    },\n  });\n\n  const handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleNotificationClick = (notification: Notification) => {\n    if (!notification.is_read) {\n      markAsReadMutation.mutate(notification.notification_id);\n    }\n    handleClose();\n    \n    // Navigate based on notification type\n    if (notification.data?.url) {\n      navigate(notification.data.url);\n    }\n  };\n\n  const handleViewAll = () => {\n    handleClose();\n    navigate('/notifications');\n  };\n\n  const handleMarkAllAsRead = () => {\n    markAllAsReadMutation.mutate();\n  };\n\n  const getNotificationIcon = (type: string) => {\n    // Return icon based on notification type\n    return <CircleIcon fontSize=\"small\" color=\"primary\" />;\n  };\n\n  const formatTime = (dateString: string) => {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diffMs = now.getTime() - date.getTime();\n    const diffMins = Math.floor(diffMs / 60000);\n    const diffHours = Math.floor(diffMs / 3600000);\n    const diffDays = Math.floor(diffMs / 86400000);\n\n    if (diffMins < 1) return 'Just now';\n    if (diffMins < 60) return `${diffMins}m ago`;\n    if (diffHours < 24) return `${diffHours}h ago`;\n    if (diffDays < 7) return `${diffDays}d ago`;\n    return date.toLocaleDateString();\n  };\n\n  return (\n    <>\n      <IconButton\n        color=\"inherit\"\n        onClick={handleClick}\n        aria-label=\"notifications\"\n        aria-controls={open ? 'notification-menu' : undefined}\n        aria-haspopup=\"true\"\n        aria-expanded={open ? 'true' : undefined}\n      >\n        <Badge badgeContent={unreadCount} color=\"error\">\n          <NotificationsIcon />\n        </Badge>\n      </IconButton>\n\n      <Menu\n        id=\"notification-menu\"\n        anchorEl={anchorEl}\n        open={open}\n        onClose={handleClose}\n        PaperProps={{\n          sx: {\n            width: 360,\n            maxHeight: 480,\n          },\n        }}\n        transformOrigin={{ horizontal: 'right', vertical: 'top' }}\n        anchorOrigin={{ horizontal: 'right', vertical: 'bottom' }}\n      >\n        <Box sx={{ px: 2, py: 1.5, display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n          <Typography variant=\"h6\">Notifications</Typography>\n          {unreadCount > 0 && (\n            <Button\n              size=\"small\"\n              onClick={handleMarkAllAsRead}\n              disabled={markAllAsReadMutation.isPending}\n            >\n              Mark all read\n            </Button>\n          )}\n        </Box>\n        <Divider />\n\n        {isLoading ? (\n          <Box sx={{ display: 'flex', justifyContent: 'center', py: 4 }}>\n            <CircularProgress size={24} />\n          </Box>\n        ) : notifications.length === 0 ? (\n          <Box sx={{ py: 4, textAlign: 'center' }}>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              No notifications\n            </Typography>\n          </Box>\n        ) : (\n          <>\n            {notifications.map((notification: Notification) => (\n              <MenuItem\n                key={notification.notification_id}\n                onClick={() => handleNotificationClick(notification)}\n                sx={{\n                  py: 1.5,\n                  px: 2,\n                  bgcolor: notification.is_read ? 'transparent' : 'action.hover',\n                  '&:hover': {\n                    bgcolor: notification.is_read ? 'action.hover' : 'action.selected',\n                  },\n                }}\n              >\n                <ListItemIcon>\n                  {notification.is_read ? (\n                    <CheckCircleIcon fontSize=\"small\" color=\"disabled\" />\n                  ) : (\n                    getNotificationIcon(notification.type)\n                  )}\n                </ListItemIcon>\n                <ListItemText\n                  primary={notification.title}\n                  secondary={\n                    <>\n                      <Typography\n                        component=\"span\"\n                        variant=\"body2\"\n                        color=\"text.primary\"\n                        sx={{\n                          display: 'block',\n                          overflow: 'hidden',\n                          textOverflow: 'ellipsis',\n                          whiteSpace: 'nowrap',\n                        }}\n                      >\n                        {notification.message}\n                      </Typography>\n                      <Typography\n                        component=\"span\"\n                        variant=\"caption\"\n                        color=\"text.secondary\"\n                      >\n                        {formatTime(notification.created_at)}\n                      </Typography>\n                    </>\n                  }\n                  primaryTypographyProps={{\n                    variant: 'body2',\n                    fontWeight: notification.is_read ? 'normal' : 'bold',\n                  }}\n                />\n              </MenuItem>\n            ))}\n            <Divider />\n            <Box sx={{ p: 1 }}>\n              <Button fullWidth onClick={handleViewAll}>\n                View All Notifications\n              </Button>\n            </Box>\n          </>\n        )}\n      </Menu>\n    </>\n  );\n};\n\nexport default NotificationBell;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\onboarding\\EmailCustomizer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\onboarding\\LogoUploader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\onboarding\\PlatformSelector.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":101,"column":62,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[1954,2059],"text":"\n        Choose the platform you use for your online store. We&apos;ll help you set up the integration.\n      "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[1954,2059],"text":"\n        Choose the platform you use for your online store. We&lsquo;ll help you set up the integration.\n      "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[1954,2059],"text":"\n        Choose the platform you use for your online store. We&#39;ll help you set up the integration.\n      "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[1954,2059],"text":"\n        Choose the platform you use for your online store. We&rsquo;ll help you set up the integration.\n      "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Grid,\n  Radio,\n  FormControlLabel,\n  RadioGroup,\n  Chip\n} from '@mui/material';\nimport {\n  ShoppingCart,\n  Store,\n  Storefront,\n  LocalMall,\n  ShoppingBag,\n  Shop\n} from '@mui/icons-material';\n\ninterface PlatformSelectorProps {\n  value: string;\n  onChange: (platform: string) => void;\n}\n\nconst platforms = [\n  {\n    id: 'shopify',\n    name: 'Shopify',\n    icon: ShoppingCart,\n    description: 'Leading e-commerce platform',\n    marketShare: '25%',\n    popular: true\n  },\n  {\n    id: 'woocommerce',\n    name: 'WooCommerce',\n    icon: Store,\n    description: 'WordPress e-commerce plugin',\n    marketShare: '30%',\n    popular: true\n  },\n  {\n    id: 'wix',\n    name: 'Wix',\n    icon: Storefront,\n    description: 'Website builder with e-commerce',\n    marketShare: '10%',\n    popular: false\n  },\n  {\n    id: 'squarespace',\n    name: 'Squarespace',\n    icon: LocalMall,\n    description: 'Premium website builder',\n    marketShare: '5%',\n    popular: false\n  },\n  {\n    id: 'magento',\n    name: 'Magento',\n    icon: ShoppingBag,\n    description: 'Adobe Commerce (Enterprise)',\n    marketShare: '8%',\n    popular: false\n  },\n  {\n    id: 'opencart',\n    name: 'OpenCart',\n    icon: Shop,\n    description: 'Free shopping cart solution',\n    marketShare: '5%',\n    popular: false\n  },\n  {\n    id: 'prestashop',\n    name: 'PrestaShop',\n    icon: Store,\n    description: 'Open-source e-commerce',\n    marketShare: '7%',\n    popular: false\n  },\n  {\n    id: 'other',\n    name: 'Other / Custom',\n    icon: Store,\n    description: 'Manual integration',\n    marketShare: '10%',\n    popular: false\n  }\n];\n\nconst PlatformSelector: React.FC<PlatformSelectorProps> = ({ value, onChange }) => {\n  return (\n    <Box>\n      <Typography variant=\"h6\" gutterBottom>\n        Select Your E-commerce Platform\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        Choose the platform you use for your online store. We'll help you set up the integration.\n      </Typography>\n\n      <RadioGroup value={value} onChange={(e) => onChange(e.target.value)}>\n        <Grid container spacing={2}>\n          {platforms.map((platform) => {\n            const Icon = platform.icon;\n            const isSelected = value === platform.id;\n\n            return (\n              <Grid item xs={12} sm={6} md={4} key={platform.id}>\n                <Card\n                  sx={{\n                    cursor: 'pointer',\n                    border: isSelected ? 2 : 1,\n                    borderColor: isSelected ? 'primary.main' : 'divider',\n                    transition: 'all 0.2s',\n                    '&:hover': {\n                      borderColor: 'primary.main',\n                      transform: 'translateY(-2px)',\n                      boxShadow: 3\n                    }\n                  }}\n                  onClick={() => onChange(platform.id)}\n                >\n                  <CardContent>\n                    <Box sx={{ display: 'flex', alignItems: 'start', justifyContent: 'space-between', mb: 2 }}>\n                      <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                        <Icon color={isSelected ? 'primary' : 'action'} />\n                        <FormControlLabel\n                          value={platform.id}\n                          control={<Radio />}\n                          label=\"\"\n                          sx={{ m: 0 }}\n                        />\n                      </Box>\n                      {platform.popular && (\n                        <Chip label=\"Popular\" size=\"small\" color=\"primary\" />\n                      )}\n                    </Box>\n\n                    <Typography variant=\"h6\" gutterBottom>\n                      {platform.name}\n                    </Typography>\n\n                    <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 1 }}>\n                      {platform.description}\n                    </Typography>\n\n                    <Typography variant=\"caption\" color=\"text.secondary\">\n                      Market Share: {platform.marketShare}\n                    </Typography>\n                  </CardContent>\n                </Card>\n              </Grid>\n            );\n          })}\n        </Grid>\n      </RadioGroup>\n    </Box>\n  );\n};\n\nexport default PlatformSelector;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\onboarding\\SubscriptionSelector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\orders\\BookShipmentModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Link' is defined but never used.","line":23,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":7},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":40,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[652,655],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[652,655],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":71,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1788,1791],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1788,1791],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":138,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":138,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4183,4186],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4183,4186],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Checkbox' is not defined.","line":256,"column":24,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":256,"endColumn":32}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  Stepper,\n  Step,\n  StepLabel,\n  Box,\n  Typography,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  TextField,\n  Grid,\n  Card,\n  CardContent,\n  Alert,\n  CircularProgress,\n  Link,\n  Chip,\n} from '@mui/material';\nimport {\n  LocalShipping,\n  Store,\n  Home,\n  CheckCircle,\n  Download,\n  Print,\n} from '@mui/icons-material';\nimport { CourierLogo } from '../courier/CourierLogo';\nimport { apiClient } from '@/services/apiClient';\nimport { toast } from 'react-hot-toast';\n\ninterface BookShipmentModalProps {\n  open: boolean;\n  order: any;\n  onClose: () => void;\n  onSuccess: (trackingNumber: string, labelUrl: string) => void;\n  preSelectedCourier?: string; // From checkout\n  preSelectedService?: string; // From checkout\n}\n\nconst steps = ['Select Courier', 'Confirm Details', 'Book & Label'];\n\nexport const BookShipmentModal: React.FC<BookShipmentModalProps> = ({\n  open,\n  order,\n  onClose,\n  onSuccess,\n  preSelectedCourier,\n  preSelectedService,\n}) => {\n  const [activeStep, setActiveStep] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [selectedCourier, setSelectedCourier] = useState(preSelectedCourier || order?.courier_id || '');\n  const [serviceType, setServiceType] = useState(preSelectedService || order?.level_of_service || 'home_delivery');\n  const [courierChanged, setCourierChanged] = useState(false);\n  const [serviceChanged, setServiceChanged] = useState(false);\n  const [sendNotifications, setSendNotifications] = useState(true);\n  const [packageDetails, setPackageDetails] = useState({\n    weight: 1.0,\n    length: 30,\n    width: 20,\n    height: 10,\n    value: 500,\n  });\n  const [bookingResult, setBookingResult] = useState<any>(null);\n\n  // Mock couriers - replace with actual data\n  const couriers = [\n    { id: '1', name: 'PostNord', code: 'POSTNORD', services: ['home_delivery', 'parcel_shop', 'parcel_locker'] },\n    { id: '2', name: 'Bring', code: 'BRING', services: ['home_delivery', 'parcel_shop'] },\n    { id: '3', name: 'Budbee', code: 'BUDBEE', services: ['home_delivery'] },\n    { id: '4', name: 'DHL', code: 'DHL', services: ['home_delivery', 'express'] },\n  ];\n\n  const serviceTypes = {\n    home_delivery: { label: 'Home Delivery', icon: <Home /> },\n    parcel_shop: { label: 'Parcel Shop', icon: <Store /> },\n    parcel_locker: { label: 'Parcel Locker', icon: <LocalShipping /> },\n    express: { label: 'Express', icon: <LocalShipping /> },\n  };\n\n  const handleNext = () => {\n    setActiveStep((prev) => prev + 1);\n  };\n\n  const handleBack = () => {\n    setActiveStep((prev) => prev - 1);\n  };\n\n  const handleBookShipment = async () => {\n    setLoading(true);\n    try {\n      // Check if courier or service changed from checkout selection\n      const hasChanges = courierChanged || serviceChanged;\n\n      const response = await apiClient.post('/shipments/book', {\n        order_id: order.order_id,\n        courier_id: selectedCourier,\n        service_type: serviceType,\n        send_notifications: sendNotifications && hasChanges, // Only if changed\n        pickup_address: {\n          name: order.store_name,\n          street: order.store_address,\n          postal_code: order.store_postal_code,\n          city: order.store_city,\n          country: order.store_country || 'NO',\n        },\n        delivery_address: {\n          name: order.customer_name,\n          street: order.delivery_address,\n          postal_code: order.postal_code,\n          city: order.city,\n          country: order.country || 'NO',\n        },\n        package_details: packageDetails,\n      });\n\n      setBookingResult(response.data);\n      handleNext();\n      \n      // Show appropriate success message\n      if (hasChanges && sendNotifications) {\n        toast.success('Shipment booked! Notifications sent to customer and webshop.');\n      } else {\n        toast.success('Shipment booked successfully!');\n      }\n      \n      // Call onSuccess callback\n      if (response.data.tracking_number && response.data.label_url) {\n        onSuccess(response.data.tracking_number, response.data.label_url);\n      }\n    } catch (error: any) {\n      toast.error(error.response?.data?.error || 'Failed to book shipment');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClose = () => {\n    setActiveStep(0);\n    setSelectedCourier('');\n    setServiceType('home_delivery');\n    setBookingResult(null);\n    onClose();\n  };\n\n  const renderStepContent = () => {\n    switch (activeStep) {\n      case 0:\n        return (\n          <Box>\n            {/* Show pre-selected info from checkout */}\n            {(preSelectedCourier || preSelectedService) && (\n              <Alert severity=\"info\" sx={{ mb: 3 }}>\n                <Typography variant=\"body2\" sx={{ fontWeight: 'bold', mb: 1 }}>\n                  Selected at Checkout:\n                </Typography>\n                <Typography variant=\"body2\">\n                  {preSelectedCourier && `Courier: ${couriers.find(c => c.id === preSelectedCourier)?.name || 'Selected'}`}\n                  {preSelectedCourier && preSelectedService && '  '}\n                  {preSelectedService && `Service: ${serviceTypes[preSelectedService as keyof typeof serviceTypes]?.label || preSelectedService}`}\n                </Typography>\n                <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mt: 1, display: 'block' }}>\n                  You can change these selections below. Customer will be notified of changes.\n                </Typography>\n              </Alert>\n            )}\n\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n              Select a courier and service type for this shipment\n            </Typography>\n\n            <FormControl fullWidth sx={{ mb: 3 }}>\n              <InputLabel>Courier</InputLabel>\n              <Select\n                value={selectedCourier}\n                onChange={(e) => {\n                  setSelectedCourier(e.target.value);\n                  if (preSelectedCourier && e.target.value !== preSelectedCourier) {\n                    setCourierChanged(true);\n                  }\n                }}\n                label=\"Courier\"\n              >\n                {couriers.map((courier) => (\n                  <MenuItem key={courier.id} value={courier.id}>\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                      <CourierLogo\n                        courierCode={courier.code}\n                        courierName={courier.name}\n                        size=\"small\"\n                        showName={false}\n                      />\n                      {courier.name}\n                      {preSelectedCourier === courier.id && (\n                        <Chip label=\"From Checkout\" size=\"small\" color=\"primary\" sx={{ ml: 1 }} />\n                      )}\n                    </Box>\n                  </MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n\n            {selectedCourier && (\n              <FormControl fullWidth sx={{ mb: 3 }}>\n                <InputLabel>Service Type</InputLabel>\n                <Select\n                  value={serviceType}\n                  onChange={(e) => {\n                    setServiceType(e.target.value);\n                    if (preSelectedService && e.target.value !== preSelectedService) {\n                      setServiceChanged(true);\n                    }\n                  }}\n                  label=\"Service Type\"\n                >\n                  {couriers\n                    .find((c) => c.id === selectedCourier)\n                    ?.services.map((service) => (\n                      <MenuItem key={service} value={service}>\n                        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                          {serviceTypes[service as keyof typeof serviceTypes]?.icon}\n                          {serviceTypes[service as keyof typeof serviceTypes]?.label}\n                          {preSelectedService === service && (\n                            <Chip label=\"From Checkout\" size=\"small\" color=\"primary\" sx={{ ml: 1 }} />\n                          )}\n                        </Box>\n                      </MenuItem>\n                    ))}\n                </Select>\n              </FormControl>\n            )}\n\n            {/* Show warning if changes were made */}\n            {(courierChanged || serviceChanged) && (\n              <Alert severity=\"warning\" sx={{ mb: 2 }}>\n                <Typography variant=\"body2\" sx={{ fontWeight: 'bold', mb: 1 }}>\n                  Changes Detected\n                </Typography>\n                <Typography variant=\"body2\">\n                  {courierChanged && 'Courier has been changed. '}\n                  {serviceChanged && 'Service type has been changed. '}\n                </Typography>\n                <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mt: 1, display: 'block' }}>\n                  Notifications will be sent to customer and webshop about these changes.\n                </Typography>\n                <Box sx={{ mt: 2 }}>\n                  <FormControl>\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                      <Checkbox\n                        checked={sendNotifications}\n                        onChange={(e) => setSendNotifications(e.target.checked)}\n                      />\n                      <Typography variant=\"body2\">\n                        Send notifications about changes\n                      </Typography>\n                    </Box>\n                  </FormControl>\n                </Box>\n              </Alert>\n            )}\n          </Box>\n        );\n\n      case 1:\n        return (\n          <Box>\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n              Confirm addresses and package details\n            </Typography>\n\n            <Grid container spacing={2}>\n              {/* Pickup Address */}\n              <Grid item xs={12} md={6}>\n                <Card variant=\"outlined\">\n                  <CardContent>\n                    <Typography variant=\"subtitle2\" gutterBottom>\n                      Pickup Address\n                    </Typography>\n                    <Typography variant=\"body2\">\n                      {order.store_name}<br />\n                      {order.store_address}<br />\n                      {order.store_postal_code} {order.store_city}<br />\n                      {order.store_country || 'Norway'}\n                    </Typography>\n                  </CardContent>\n                </Card>\n              </Grid>\n\n              {/* Delivery Address */}\n              <Grid item xs={12} md={6}>\n                <Card variant=\"outlined\">\n                  <CardContent>\n                    <Typography variant=\"subtitle2\" gutterBottom>\n                      Delivery Address\n                    </Typography>\n                    <Typography variant=\"body2\">\n                      {order.customer_name}<br />\n                      {order.delivery_address}<br />\n                      {order.postal_code} {order.city}<br />\n                      {order.country || 'Norway'}\n                    </Typography>\n                  </CardContent>\n                </Card>\n              </Grid>\n\n              {/* Package Details */}\n              <Grid item xs={12}>\n                <Typography variant=\"subtitle2\" gutterBottom sx={{ mt: 2 }}>\n                  Package Details\n                </Typography>\n              </Grid>\n\n              <Grid item xs={6} md={3}>\n                <TextField\n                  fullWidth\n                  label=\"Weight (kg)\"\n                  type=\"number\"\n                  value={packageDetails.weight}\n                  onChange={(e) =>\n                    setPackageDetails({ ...packageDetails, weight: parseFloat(e.target.value) })\n                  }\n                  inputProps={{ step: 0.1, min: 0.1 }}\n                />\n              </Grid>\n\n              <Grid item xs={6} md={3}>\n                <TextField\n                  fullWidth\n                  label=\"Length (cm)\"\n                  type=\"number\"\n                  value={packageDetails.length}\n                  onChange={(e) =>\n                    setPackageDetails({ ...packageDetails, length: parseInt(e.target.value) })\n                  }\n                  inputProps={{ min: 1 }}\n                />\n              </Grid>\n\n              <Grid item xs={6} md={3}>\n                <TextField\n                  fullWidth\n                  label=\"Width (cm)\"\n                  type=\"number\"\n                  value={packageDetails.width}\n                  onChange={(e) =>\n                    setPackageDetails({ ...packageDetails, width: parseInt(e.target.value) })\n                  }\n                  inputProps={{ min: 1 }}\n                />\n              </Grid>\n\n              <Grid item xs={6} md={3}>\n                <TextField\n                  fullWidth\n                  label=\"Height (cm)\"\n                  type=\"number\"\n                  value={packageDetails.height}\n                  onChange={(e) =>\n                    setPackageDetails({ ...packageDetails, height: parseInt(e.target.value) })\n                  }\n                  inputProps={{ min: 1 }}\n                />\n              </Grid>\n\n              <Grid item xs={12}>\n                <TextField\n                  fullWidth\n                  label=\"Package Value (NOK)\"\n                  type=\"number\"\n                  value={packageDetails.value}\n                  onChange={(e) =>\n                    setPackageDetails({ ...packageDetails, value: parseFloat(e.target.value) })\n                  }\n                  inputProps={{ min: 0 }}\n                />\n              </Grid>\n            </Grid>\n          </Box>\n        );\n\n      case 2:\n        return (\n          <Box>\n            {loading ? (\n              <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'center', py: 4 }}>\n                <CircularProgress size={60} sx={{ mb: 2 }} />\n                <Typography variant=\"body1\">Booking shipment...</Typography>\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  This may take a few seconds\n                </Typography>\n              </Box>\n            ) : bookingResult ? (\n              <Box>\n                <Alert severity=\"success\" icon={<CheckCircle />} sx={{ mb: 3 }}>\n                  Shipment booked successfully!\n                </Alert>\n\n                <Card variant=\"outlined\" sx={{ mb: 2 }}>\n                  <CardContent>\n                    <Grid container spacing={2}>\n                      <Grid item xs={12}>\n                        <Typography variant=\"subtitle2\" color=\"text.secondary\">\n                          Tracking Number\n                        </Typography>\n                        <Typography variant=\"h6\" sx={{ fontFamily: 'monospace' }}>\n                          {bookingResult.tracking_number}\n                        </Typography>\n                      </Grid>\n\n                      {bookingResult.estimated_delivery && (\n                        <Grid item xs={12}>\n                          <Typography variant=\"subtitle2\" color=\"text.secondary\">\n                            Estimated Delivery\n                          </Typography>\n                          <Typography variant=\"body1\">\n                            {new Date(bookingResult.estimated_delivery).toLocaleDateString()}\n                          </Typography>\n                        </Grid>\n                      )}\n\n                      {bookingResult.label_url && (\n                        <Grid item xs={12}>\n                          <Box sx={{ display: 'flex', gap: 1 }}>\n                            <Button\n                              variant=\"outlined\"\n                              startIcon={<Download />}\n                              href={bookingResult.label_url}\n                              target=\"_blank\"\n                              fullWidth\n                            >\n                              Download Label\n                            </Button>\n                            <Button\n                              variant=\"outlined\"\n                              startIcon={<Print />}\n                              onClick={() => window.print()}\n                              fullWidth\n                            >\n                              Print Label\n                            </Button>\n                          </Box>\n                        </Grid>\n                      )}\n                    </Grid>\n                  </CardContent>\n                </Card>\n\n                <Alert severity=\"info\">\n                  The tracking number has been added to the order. You can now track the shipment\n                  in real-time.\n                </Alert>\n              </Box>\n            ) : null}\n          </Box>\n        );\n\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <Dialog open={open} onClose={handleClose} maxWidth=\"md\" fullWidth>\n      <DialogTitle>\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n          <LocalShipping />\n          Book Shipment\n        </Box>\n        <Typography variant=\"body2\" color=\"text.secondary\">\n          Order: {order?.order_number || order?.order_id}\n        </Typography>\n      </DialogTitle>\n\n      <DialogContent>\n        <Stepper activeStep={activeStep} sx={{ mb: 4 }}>\n          {steps.map((label) => (\n            <Step key={label}>\n              <StepLabel>{label}</StepLabel>\n            </Step>\n          ))}\n        </Stepper>\n\n        {renderStepContent()}\n      </DialogContent>\n\n      <DialogActions>\n        <Button onClick={handleClose}>\n          {bookingResult ? 'Close' : 'Cancel'}\n        </Button>\n        {activeStep > 0 && activeStep < 2 && (\n          <Button onClick={handleBack}>Back</Button>\n        )}\n        {activeStep === 0 && (\n          <Button\n            variant=\"contained\"\n            onClick={handleNext}\n            disabled={!selectedCourier}\n          >\n            Next\n          </Button>\n        )}\n        {activeStep === 1 && (\n          <Button\n            variant=\"contained\"\n            onClick={handleBookShipment}\n            disabled={loading}\n          >\n            Book Shipment\n          </Button>\n        )}\n      </DialogActions>\n    </Dialog>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\orders\\BulkActionsBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\orders\\OrderDetailsDrawer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\orders\\OrderFilters.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\parcel-points\\CoverageChecker.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CheckCircle' is defined but never used.","line":30,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Cancel' is defined but never used.","line":31,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TrendingUp' is defined but never used.","line":37,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":37,"endColumn":13}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Coverage Checker Component\n * Week 4 Phase 7 - Map Integration\n * \n * Check delivery coverage for a postal code\n */\n\nimport React, { useState } from 'react';\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  Typography,\n  Box,\n  TextField,\n  Button,\n  Chip,\n  Alert,\n  CircularProgress,\n  Paper,\n  Grid,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemIcon,\n  Divider\n} from '@mui/material';\nimport {\n  Search,\n  CheckCircle,\n  Cancel,\n  Home,\n  Store,\n  Lock,\n  LocalShipping,\n  Speed,\n  TrendingUp\n} from '@mui/icons-material';\n\ninterface CoverageData {\n  courier_id: string;\n  courier_name: string;\n  service_type_id: string;\n  service_name: string;\n  is_covered: boolean;\n  standard_delivery_days: number;\n  home_delivery_available: boolean;\n  parcel_shop_available: boolean;\n  parcel_locker_available: boolean;\n}\n\ninterface ParcelPoint {\n  parcel_point_id: string;\n  point_name: string;\n  point_type: string;\n  street_address: string;\n  city: string;\n  courier_name: string;\n  latitude: number;\n  longitude: number;\n}\n\ninterface CoverageResponse {\n  success: boolean;\n  coverage: CoverageData[];\n  parcel_points: ParcelPoint[];\n  postal_code: string;\n  summary: {\n    total_couriers: number;\n    home_delivery_available: number;\n    parcel_shop_available: number;\n    parcel_locker_available: number;\n    fastest_delivery: number | null;\n  };\n}\n\nexport const CoverageChecker: React.FC = () => {\n  const [postalCode, setPostalCode] = useState('');\n  const [data, setData] = useState<CoverageResponse | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const checkCoverage = async () => {\n    if (!postalCode.trim()) {\n      setError('Please enter a postal code');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const response = await fetch(`/api/parcel-points?action=coverage&postal_code=${postalCode}`);\n      const result = await response.json();\n\n      if (result.success) {\n        setData(result);\n      } else {\n        setError('No coverage information found for this postal code');\n      }\n    } catch (err) {\n      setError('Error checking coverage');\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      checkCoverage();\n    }\n  };\n\n  return (\n    <Card>\n      <CardHeader\n        title=\"Delivery Coverage Checker\"\n        subheader=\"Check which couriers deliver to your area\"\n      />\n\n      <CardContent>\n        {/* Search Input */}\n        <Box display=\"flex\" gap={2} mb={3}>\n          <TextField\n            fullWidth\n            label=\"Postal Code\"\n            placeholder=\"e.g., 11120\"\n            value={postalCode}\n            onChange={(e) => setPostalCode(e.target.value)}\n            onKeyPress={handleKeyPress}\n            disabled={loading}\n          />\n          <Button\n            variant=\"contained\"\n            onClick={checkCoverage}\n            disabled={loading}\n            startIcon={loading ? <CircularProgress size={20} /> : <Search />}\n            sx={{ minWidth: 120 }}\n          >\n            Check\n          </Button>\n        </Box>\n\n        {/* Error Message */}\n        {error && (\n          <Alert severity=\"error\" sx={{ mb: 2 }}>\n            {error}\n          </Alert>\n        )}\n\n        {/* Results */}\n        {data && (\n          <>\n            {/* Summary */}\n            <Paper variant=\"outlined\" sx={{ p: 2, mb: 3, bgcolor: 'primary.light' }}>\n              <Typography variant=\"subtitle2\" gutterBottom fontWeight=\"bold\">\n                Coverage Summary for {data.postal_code}\n              </Typography>\n              <Grid container spacing={2} mt={1}>\n                <Grid item xs={6} sm={3}>\n                  <Box textAlign=\"center\">\n                    <Typography variant=\"h4\" color=\"primary\">\n                      {data.summary.total_couriers}\n                    </Typography>\n                    <Typography variant=\"caption\" color=\"text.secondary\">\n                      Couriers Available\n                    </Typography>\n                  </Box>\n                </Grid>\n                <Grid item xs={6} sm={3}>\n                  <Box textAlign=\"center\">\n                    <Typography variant=\"h4\" color=\"success.main\">\n                      {data.summary.home_delivery_available}\n                    </Typography>\n                    <Typography variant=\"caption\" color=\"text.secondary\">\n                      Home Delivery\n                    </Typography>\n                  </Box>\n                </Grid>\n                <Grid item xs={6} sm={3}>\n                  <Box textAlign=\"center\">\n                    <Typography variant=\"h4\" color=\"info.main\">\n                      {data.summary.parcel_shop_available}\n                    </Typography>\n                    <Typography variant=\"caption\" color=\"text.secondary\">\n                      Parcel Shops\n                    </Typography>\n                  </Box>\n                </Grid>\n                <Grid item xs={6} sm={3}>\n                  <Box textAlign=\"center\">\n                    <Typography variant=\"h4\" color=\"warning.main\">\n                      {data.summary.parcel_locker_available}\n                    </Typography>\n                    <Typography variant=\"caption\" color=\"text.secondary\">\n                      Parcel Lockers\n                    </Typography>\n                  </Box>\n                </Grid>\n              </Grid>\n              {data.summary.fastest_delivery && (\n                <Box display=\"flex\" alignItems=\"center\" justifyContent=\"center\" gap={1} mt={2}>\n                  <Speed color=\"primary\" />\n                  <Typography variant=\"body2\">\n                    Fastest delivery: <strong>{data.summary.fastest_delivery} day{data.summary.fastest_delivery !== 1 ? 's' : ''}</strong>\n                  </Typography>\n                </Box>\n              )}\n            </Paper>\n\n            {/* Courier Coverage List */}\n            {data.coverage.length > 0 ? (\n              <Paper variant=\"outlined\" sx={{ mb: 3 }}>\n                <Box p={2} bgcolor=\"grey.50\">\n                  <Typography variant=\"subtitle2\" fontWeight=\"bold\">\n                    Available Couriers\n                  </Typography>\n                </Box>\n                <List>\n                  {data.coverage.map((courier, index) => (\n                    <React.Fragment key={courier.courier_id}>\n                      {index > 0 && <Divider />}\n                      <ListItem>\n                        <ListItemIcon>\n                          <Box\n                            sx={{\n                              width: 40,\n                              height: 40,\n                              borderRadius: '50%',\n                              bgcolor: 'primary.main',\n                              display: 'flex',\n                              alignItems: 'center',\n                              justifyContent: 'center',\n                              color: 'white',\n                              fontWeight: 'bold'\n                            }}\n                          >\n                            {courier.courier_name.charAt(0)}\n                          </Box>\n                        </ListItemIcon>\n                        <ListItemText\n                          primary={\n                            <Box display=\"flex\" alignItems=\"center\" gap={1}>\n                              <Typography variant=\"subtitle2\" fontWeight=\"bold\">\n                                {courier.courier_name}\n                              </Typography>\n                              <Chip\n                                label={`${courier.standard_delivery_days} day${courier.standard_delivery_days !== 1 ? 's' : ''}`}\n                                size=\"small\"\n                                color=\"primary\"\n                                variant=\"outlined\"\n                              />\n                            </Box>\n                          }\n                          secondary={\n                            <Box mt={1} display=\"flex\" gap={1} flexWrap=\"wrap\">\n                              {courier.home_delivery_available && (\n                                <Chip\n                                  icon={<Home />}\n                                  label=\"Home Delivery\"\n                                  size=\"small\"\n                                  color=\"success\"\n                                  variant=\"outlined\"\n                                />\n                              )}\n                              {courier.parcel_shop_available && (\n                                <Chip\n                                  icon={<Store />}\n                                  label=\"Parcel Shop\"\n                                  size=\"small\"\n                                  color=\"info\"\n                                  variant=\"outlined\"\n                                />\n                              )}\n                              {courier.parcel_locker_available && (\n                                <Chip\n                                  icon={<Lock />}\n                                  label=\"Parcel Locker\"\n                                  size=\"small\"\n                                  color=\"warning\"\n                                  variant=\"outlined\"\n                                />\n                              )}\n                            </Box>\n                          }\n                        />\n                      </ListItem>\n                    </React.Fragment>\n                  ))}\n                </List>\n              </Paper>\n            ) : (\n              <Alert severity=\"warning\" sx={{ mb: 3 }}>\n                No couriers currently deliver to this postal code\n              </Alert>\n            )}\n\n            {/* Nearby Parcel Points */}\n            {data.parcel_points.length > 0 && (\n              <Paper variant=\"outlined\">\n                <Box p={2} bgcolor=\"grey.50\">\n                  <Typography variant=\"subtitle2\" fontWeight=\"bold\">\n                    Nearby Parcel Points ({data.parcel_points.length})\n                  </Typography>\n                </Box>\n                <List>\n                  {data.parcel_points.map((point, index) => (\n                    <React.Fragment key={point.parcel_point_id}>\n                      {index > 0 && <Divider />}\n                      <ListItem>\n                        <ListItemIcon>\n                          {point.point_type === 'parcel_shop' ? <Store color=\"info\" /> :\n                           point.point_type === 'parcel_locker' ? <Lock color=\"success\" /> :\n                           <LocalShipping color=\"primary\" />}\n                        </ListItemIcon>\n                        <ListItemText\n                          primary={\n                            <Box>\n                              <Typography variant=\"subtitle2\">\n                                {point.point_name}\n                              </Typography>\n                              <Chip\n                                label={point.courier_name}\n                                size=\"small\"\n                                sx={{ mt: 0.5 }}\n                              />\n                            </Box>\n                          }\n                          secondary={\n                            <Box mt={0.5}>\n                              <Typography variant=\"caption\" display=\"block\">\n                                {point.street_address}\n                              </Typography>\n                              <Typography variant=\"caption\" color=\"text.secondary\">\n                                {point.city}\n                              </Typography>\n                            </Box>\n                          }\n                        />\n                      </ListItem>\n                    </React.Fragment>\n                  ))}\n                </List>\n              </Paper>\n            )}\n          </>\n        )}\n\n        {/* Initial State */}\n        {!data && !loading && !error && (\n          <Box textAlign=\"center\" py={4}>\n            <LocalShipping sx={{ fontSize: 64, color: 'text.secondary', mb: 2 }} />\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              Enter a postal code to check delivery coverage\n            </Typography>\n          </Box>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default CoverageChecker;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\parcel-points\\ParcelPointDetails.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Divider' is defined but never used.","line":16,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ListItemIcon' is defined but never used.","line":19,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Store' is defined but never used.","line":28,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Lock' is defined but never used.","line":29,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Schedule' is defined but never used.","line":31,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Info' is defined but never used.","line":42,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":42,"endColumn":7},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchDetails'. Either include it or remove the dependency array.","line":99,"column":6,"nodeType":"ArrayExpression","endLine":99,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [fetchDetails, parcelPointId]","fix":{"range":[1889,1904],"text":"[fetchDetails, parcelPointId]"}}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Parcel Point Details Component\n * Week 4 Phase 7 - Map Integration\n * \n * Display detailed information about a parcel point\n */\n\nimport React, { useState, useEffect } from 'react';\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  Typography,\n  Box,\n  Chip,\n  Divider,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Button,\n  Alert,\n  CircularProgress,\n  Grid,\n  Paper\n} from '@mui/material';\nimport {\n  Store,\n  Lock,\n  Room,\n  Schedule,\n  Phone,\n  Email,\n  DirectionsWalk,\n  Accessible,\n  LocalParking,\n  Wifi,\n  AcUnit,\n  Security,\n  CheckCircle,\n  Cancel,\n  Info\n} from '@mui/icons-material';\n\ninterface OpeningHours {\n  day_of_week: number;\n  day_name: string;\n  opens_at: string | null;\n  closes_at: string | null;\n  is_closed: boolean;\n  is_24_hours: boolean;\n  notes: string | null;\n}\n\ninterface Facility {\n  facility_type: string;\n  is_available: boolean;\n  description: string | null;\n}\n\ninterface ParcelPointDetailsData {\n  parcel_point: {\n    parcel_point_id: string;\n    point_name: string;\n    point_type: string;\n    street_address: string;\n    postal_code: string;\n    city: string;\n    phone: string | null;\n    email: string | null;\n    courier_name: string;\n    is_active: boolean;\n    is_temporarily_closed: boolean;\n    closure_reason: string | null;\n  };\n  opening_hours: OpeningHours[];\n  facilities: Facility[];\n  status: {\n    is_open_now: boolean;\n    is_temporarily_closed: boolean;\n    closure_reason: string | null;\n    today_hours: OpeningHours | null;\n  };\n}\n\ninterface ParcelPointDetailsProps {\n  parcelPointId: string;\n}\n\nexport const ParcelPointDetails: React.FC<ParcelPointDetailsProps> = ({\n  parcelPointId\n}) => {\n  const [data, setData] = useState<ParcelPointDetailsData | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    fetchDetails();\n  }, [parcelPointId]);\n\n  const fetchDetails = async () => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      const response = await fetch(`/api/parcel-points?action=hours&parcel_point_id=${parcelPointId}`);\n      const result = await response.json();\n\n      if (result.success) {\n        setData(result);\n      } else {\n        setError('Failed to load parcel point details');\n      }\n    } catch (err) {\n      setError('Error loading details');\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Get facility icon\n  const getFacilityIcon = (type: string) => {\n    switch (type) {\n      case 'wheelchair_access':\n        return <Accessible />;\n      case 'parking':\n        return <LocalParking />;\n      case 'wifi':\n        return <Wifi />;\n      case 'climate_controlled':\n        return <AcUnit />;\n      case 'security_camera':\n        return <Security />;\n      default:\n        return <CheckCircle />;\n    }\n  };\n\n  // Format facility name\n  const formatFacilityName = (type: string): string => {\n    return type.split('_').map(word => \n      word.charAt(0).toUpperCase() + word.slice(1)\n    ).join(' ');\n  };\n\n  if (loading) {\n    return (\n      <Card>\n        <CardContent>\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight={300}>\n            <CircularProgress />\n          </Box>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (error || !data) {\n    return (\n      <Card>\n        <CardContent>\n          <Alert severity=\"error\">{error || 'No data available'}</Alert>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  const { parcel_point, opening_hours, facilities, status } = data;\n\n  return (\n    <Card>\n      <CardHeader\n        title={\n          <Box>\n            <Typography variant=\"h6\">\n              {parcel_point.point_name}\n            </Typography>\n            <Box display=\"flex\" gap={1} mt={1}>\n              <Chip\n                label={parcel_point.courier_name}\n                color=\"primary\"\n                size=\"small\"\n              />\n              <Chip\n                label={parcel_point.point_type.replace('_', ' ')}\n                size=\"small\"\n                variant=\"outlined\"\n              />\n              {status.is_open_now && !status.is_temporarily_closed && (\n                <Chip\n                  label=\"Open Now\"\n                  color=\"success\"\n                  size=\"small\"\n                  icon={<CheckCircle />}\n                />\n              )}\n              {status.is_temporarily_closed && (\n                <Chip\n                  label=\"Temporarily Closed\"\n                  color=\"error\"\n                  size=\"small\"\n                  icon={<Cancel />}\n                />\n              )}\n            </Box>\n          </Box>\n        }\n      />\n\n      <CardContent>\n        {/* Closure Notice */}\n        {status.is_temporarily_closed && status.closure_reason && (\n          <Alert severity=\"warning\" sx={{ mb: 2 }}>\n            {status.closure_reason}\n          </Alert>\n        )}\n\n        {/* Location Info */}\n        <Paper variant=\"outlined\" sx={{ p: 2, mb: 2 }}>\n          <Typography variant=\"subtitle2\" gutterBottom fontWeight=\"bold\">\n            Location\n          </Typography>\n          <Box display=\"flex\" alignItems=\"start\" gap={1} mb={1}>\n            <Room sx={{ fontSize: 20, color: 'text.secondary' }} />\n            <Box>\n              <Typography variant=\"body2\">\n                {parcel_point.street_address}\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                {parcel_point.postal_code} {parcel_point.city}\n              </Typography>\n            </Box>\n          </Box>\n          <Box display=\"flex\" gap={1} mt={2}>\n            <Button\n              size=\"small\"\n              variant=\"outlined\"\n              startIcon={<DirectionsWalk />}\n              fullWidth\n            >\n              Get Directions\n            </Button>\n          </Box>\n        </Paper>\n\n        {/* Contact Info */}\n        {(parcel_point.phone || parcel_point.email) && (\n          <Paper variant=\"outlined\" sx={{ p: 2, mb: 2 }}>\n            <Typography variant=\"subtitle2\" gutterBottom fontWeight=\"bold\">\n              Contact\n            </Typography>\n            {parcel_point.phone && (\n              <Box display=\"flex\" alignItems=\"center\" gap={1} mb={1}>\n                <Phone sx={{ fontSize: 20, color: 'text.secondary' }} />\n                <Typography variant=\"body2\">\n                  {parcel_point.phone}\n                </Typography>\n              </Box>\n            )}\n            {parcel_point.email && (\n              <Box display=\"flex\" alignItems=\"center\" gap={1}>\n                <Email sx={{ fontSize: 20, color: 'text.secondary' }} />\n                <Typography variant=\"body2\">\n                  {parcel_point.email}\n                </Typography>\n              </Box>\n            )}\n          </Paper>\n        )}\n\n        {/* Opening Hours */}\n        <Paper variant=\"outlined\" sx={{ p: 2, mb: 2 }}>\n          <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={1}>\n            <Typography variant=\"subtitle2\" fontWeight=\"bold\">\n              Opening Hours\n            </Typography>\n            {status.today_hours && (\n              <Chip\n                label={status.is_open_now ? 'Open Now' : 'Closed'}\n                color={status.is_open_now ? 'success' : 'default'}\n                size=\"small\"\n              />\n            )}\n          </Box>\n          <List dense>\n            {opening_hours.map((hours) => (\n              <ListItem\n                key={hours.day_of_week}\n                sx={{\n                  bgcolor: status.today_hours?.day_of_week === hours.day_of_week ? 'action.selected' : 'transparent',\n                  borderRadius: 1,\n                  mb: 0.5\n                }}\n              >\n                <ListItemText\n                  primary={\n                    <Box display=\"flex\" justifyContent=\"space-between\">\n                      <Typography variant=\"body2\" fontWeight={status.today_hours?.day_of_week === hours.day_of_week ? 'bold' : 'normal'}>\n                        {hours.day_name}\n                      </Typography>\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        {hours.is_24_hours ? '24 Hours' :\n                         hours.is_closed ? 'Closed' :\n                         `${hours.opens_at} - ${hours.closes_at}`}\n                      </Typography>\n                    </Box>\n                  }\n                  secondary={hours.notes ? (\n                    <Typography variant=\"caption\" color=\"text.secondary\">\n                      {hours.notes}\n                    </Typography>\n                  ) : null}\n                />\n              </ListItem>\n            ))}\n          </List>\n        </Paper>\n\n        {/* Facilities */}\n        {facilities.length > 0 && (\n          <Paper variant=\"outlined\" sx={{ p: 2 }}>\n            <Typography variant=\"subtitle2\" gutterBottom fontWeight=\"bold\">\n              Facilities & Amenities\n            </Typography>\n            <Grid container spacing={1}>\n              {facilities.map((facility) => (\n                <Grid item xs={6} key={facility.facility_type}>\n                  <Box display=\"flex\" alignItems=\"center\" gap={1}>\n                    <Box\n                      sx={{\n                        width: 32,\n                        height: 32,\n                        borderRadius: 1,\n                        bgcolor: 'primary.light',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        color: 'primary.main'\n                      }}\n                    >\n                      {getFacilityIcon(facility.facility_type)}\n                    </Box>\n                    <Box>\n                      <Typography variant=\"caption\" display=\"block\">\n                        {formatFacilityName(facility.facility_type)}\n                      </Typography>\n                      {facility.description && (\n                        <Typography variant=\"caption\" color=\"text.secondary\" display=\"block\">\n                          {facility.description}\n                        </Typography>\n                      )}\n                    </Box>\n                  </Box>\n                </Grid>\n              ))}\n            </Grid>\n          </Paper>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default ParcelPointDetails;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\parcel-points\\ParcelPointMap.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useEffect' is defined but never used.","line":8,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'IconButton' is defined but never used.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FilterList' is defined but never used.","line":33,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Phone' is defined but never used.","line":39,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":39,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'initialCenter' is assigned a value but never used.","line":68,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":68,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'initialZoom' is assigned a value but never used.","line":69,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":69,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'userLocation' is assigned a value but never used.","line":75,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":75,"endColumn":22}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Parcel Point Map Component\n * Week 4 Phase 7 - Map Integration\n * \n * Interactive map displaying parcel points with search and filters\n */\n\nimport React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  TextField,\n  InputAdornment,\n  IconButton,\n  Chip,\n  Typography,\n  Button,\n  Paper,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemIcon,\n  Divider,\n  ToggleButtonGroup,\n  ToggleButton,\n  CircularProgress,\n  Alert\n} from '@mui/material';\nimport {\n  Search,\n  MyLocation,\n  FilterList,\n  Store,\n  Lock,\n  Room,\n  DirectionsWalk,\n  Schedule,\n  Phone,\n  Info\n} from '@mui/icons-material';\n\ninterface ParcelPoint {\n  parcel_point_id: string;\n  courier_name: string;\n  point_name: string;\n  point_type: 'parcel_shop' | 'parcel_locker' | 'service_point';\n  street_address: string;\n  postal_code: string;\n  city: string;\n  latitude: number;\n  longitude: number;\n  distance_km?: number;\n  facilities: string[];\n  hours_type: string;\n  total_compartments?: number;\n  available_compartments?: number;\n}\n\ninterface ParcelPointMapProps {\n  onLocationSelect?: (point: ParcelPoint) => void;\n  initialCenter?: { lat: number; lng: number };\n  initialZoom?: number;\n}\n\nexport const ParcelPointMap: React.FC<ParcelPointMapProps> = ({\n  onLocationSelect,\n  initialCenter = { lat: 59.3293, lng: 18.0686 }, // Stockholm\n  initialZoom = 12\n}) => {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [pointType, setPointType] = useState<string>('all');\n  const [parcelPoints, setParcelPoints] = useState<ParcelPoint[]>([]);\n  const [selectedPoint, setSelectedPoint] = useState<ParcelPoint | null>(null);\n  const [userLocation, setUserLocation] = useState<{ lat: number; lng: number } | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Get user's current location\n  const getUserLocation = () => {\n    if ('geolocation' in navigator) {\n      setLoading(true);\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          const location = {\n            lat: position.coords.latitude,\n            lng: position.coords.longitude\n          };\n          setUserLocation(location);\n          searchNearbyPoints(location.lat, location.lng);\n          setLoading(false);\n        },\n        (error) => {\n          console.error('Error getting location:', error);\n          setError('Unable to get your location. Please enable location services.');\n          setLoading(false);\n        }\n      );\n    } else {\n      setError('Geolocation is not supported by your browser');\n    }\n  };\n\n  // Search nearby parcel points\n  const searchNearbyPoints = async (lat: number, lng: number, radius: number = 5) => {\n    setLoading(true);\n    setError(null);\n    \n    try {\n      const params = new URLSearchParams({\n        action: 'nearby',\n        latitude: lat.toString(),\n        longitude: lng.toString(),\n        radius_km: radius.toString()\n      });\n\n      if (pointType !== 'all') {\n        params.append('point_type', pointType);\n      }\n\n      const response = await fetch(`/api/parcel-points?${params}`);\n      const data = await response.json();\n\n      if (data.success) {\n        setParcelPoints(data.data);\n      } else {\n        setError('Failed to load parcel points');\n      }\n    } catch (err) {\n      setError('Error loading parcel points');\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Search by city/postal code\n  const searchByQuery = async () => {\n    if (!searchQuery.trim()) return;\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const params = new URLSearchParams({\n        city: searchQuery\n      });\n\n      if (pointType !== 'all') {\n        params.append('point_type', pointType);\n      }\n\n      const response = await fetch(`/api/parcel-points?${params}`);\n      const data = await response.json();\n\n      if (data.success) {\n        setParcelPoints(data.data);\n      } else {\n        setError('No results found');\n      }\n    } catch (err) {\n      setError('Error searching parcel points');\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Get icon for point type\n  const getPointIcon = (type: string) => {\n    switch (type) {\n      case 'parcel_shop':\n        return <Store />;\n      case 'parcel_locker':\n        return <Lock />;\n      default:\n        return <Room />;\n    }\n  };\n\n  // Get color for point type\n  const getPointColor = (type: string): string => {\n    switch (type) {\n      case 'parcel_shop':\n        return '#2196f3'; // Blue\n      case 'parcel_locker':\n        return '#4caf50'; // Green\n      default:\n        return '#ff9800'; // Orange\n    }\n  };\n\n  // Handle point selection\n  const handlePointSelect = (point: ParcelPoint) => {\n    setSelectedPoint(point);\n    if (onLocationSelect) {\n      onLocationSelect(point);\n    }\n  };\n\n  return (\n    <Box display=\"flex\" gap={2} height=\"600px\">\n      {/* Sidebar */}\n      <Paper sx={{ width: 400, display: 'flex', flexDirection: 'column', overflow: 'hidden' }}>\n        {/* Search Controls */}\n        <Box p={2}>\n          <Typography variant=\"h6\" gutterBottom>\n            Find Parcel Points\n          </Typography>\n\n          {/* Search Input */}\n          <TextField\n            fullWidth\n            size=\"small\"\n            placeholder=\"Search by city or postal code...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            onKeyPress={(e) => e.key === 'Enter' && searchByQuery()}\n            sx={{ mb: 2 }}\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  <Search />\n                </InputAdornment>\n              ),\n              endAdornment: (\n                <InputAdornment position=\"end\">\n                  <Button size=\"small\" onClick={searchByQuery}>\n                    Search\n                  </Button>\n                </InputAdornment>\n              )\n            }}\n          />\n\n          {/* Location Button */}\n          <Button\n            fullWidth\n            variant=\"outlined\"\n            startIcon={<MyLocation />}\n            onClick={getUserLocation}\n            disabled={loading}\n            sx={{ mb: 2 }}\n          >\n            Use My Location\n          </Button>\n\n          {/* Point Type Filter */}\n          <ToggleButtonGroup\n            value={pointType}\n            exclusive\n            onChange={(_, newType) => newType && setPointType(newType)}\n            fullWidth\n            size=\"small\"\n          >\n            <ToggleButton value=\"all\">\n              All\n            </ToggleButton>\n            <ToggleButton value=\"parcel_shop\">\n              <Store sx={{ mr: 0.5 }} /> Shop\n            </ToggleButton>\n            <ToggleButton value=\"parcel_locker\">\n              <Lock sx={{ mr: 0.5 }} /> Locker\n            </ToggleButton>\n          </ToggleButtonGroup>\n        </Box>\n\n        <Divider />\n\n        {/* Error Message */}\n        {error && (\n          <Box p={2}>\n            <Alert severity=\"error\" onClose={() => setError(null)}>\n              {error}\n            </Alert>\n          </Box>\n        )}\n\n        {/* Results List */}\n        <Box flexGrow={1} overflow=\"auto\">\n          {loading ? (\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"100%\">\n              <CircularProgress />\n            </Box>\n          ) : parcelPoints.length === 0 ? (\n            <Box p={3} textAlign=\"center\">\n              <Room sx={{ fontSize: 48, color: 'text.secondary', mb: 1 }} />\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Search for parcel points or use your location\n              </Typography>\n            </Box>\n          ) : (\n            <List>\n              {parcelPoints.map((point) => (\n                <React.Fragment key={point.parcel_point_id}>\n                  <ListItem\n                    button\n                    selected={selectedPoint?.parcel_point_id === point.parcel_point_id}\n                    onClick={() => handlePointSelect(point)}\n                  >\n                    <ListItemIcon>\n                      <Box\n                        sx={{\n                          width: 40,\n                          height: 40,\n                          borderRadius: '50%',\n                          bgcolor: getPointColor(point.point_type),\n                          display: 'flex',\n                          alignItems: 'center',\n                          justifyContent: 'center',\n                          color: 'white'\n                        }}\n                      >\n                        {getPointIcon(point.point_type)}\n                      </Box>\n                    </ListItemIcon>\n                    <ListItemText\n                      primary={\n                        <Box>\n                          <Typography variant=\"subtitle2\" fontWeight=\"bold\">\n                            {point.point_name}\n                          </Typography>\n                          <Chip\n                            label={point.courier_name}\n                            size=\"small\"\n                            sx={{ mt: 0.5 }}\n                          />\n                        </Box>\n                      }\n                      secondary={\n                        <Box mt={1}>\n                          <Typography variant=\"caption\" display=\"block\">\n                            {point.street_address}\n                          </Typography>\n                          <Typography variant=\"caption\" display=\"block\" color=\"text.secondary\">\n                            {point.postal_code} {point.city}\n                          </Typography>\n                          {point.distance_km !== undefined && (\n                            <Box display=\"flex\" alignItems=\"center\" gap={0.5} mt={0.5}>\n                              <DirectionsWalk sx={{ fontSize: 14 }} />\n                              <Typography variant=\"caption\">\n                                {point.distance_km.toFixed(2)} km away\n                              </Typography>\n                            </Box>\n                          )}\n                          {point.hours_type && (\n                            <Box display=\"flex\" alignItems=\"center\" gap={0.5} mt={0.5}>\n                              <Schedule sx={{ fontSize: 14 }} />\n                              <Typography variant=\"caption\">\n                                {point.hours_type}\n                              </Typography>\n                            </Box>\n                          )}\n                        </Box>\n                      }\n                    />\n                  </ListItem>\n                  <Divider />\n                </React.Fragment>\n              ))}\n            </List>\n          )}\n        </Box>\n\n        {/* Results Count */}\n        {parcelPoints.length > 0 && (\n          <Box p={2} borderTop={1} borderColor=\"divider\">\n            <Typography variant=\"caption\" color=\"text.secondary\">\n              Found {parcelPoints.length} parcel point{parcelPoints.length !== 1 ? 's' : ''}\n            </Typography>\n          </Box>\n        )}\n      </Paper>\n\n      {/* Map Container */}\n      <Card sx={{ flexGrow: 1 }}>\n        <CardContent sx={{ height: '100%', p: 0 }}>\n          {/* Placeholder for actual map integration */}\n          <Box\n            sx={{\n              height: '100%',\n              display: 'flex',\n              flexDirection: 'column',\n              alignItems: 'center',\n              justifyContent: 'center',\n              bgcolor: 'grey.100',\n              position: 'relative'\n            }}\n          >\n            {/* Map placeholder */}\n            <Room sx={{ fontSize: 64, color: 'text.secondary', mb: 2 }} />\n            <Typography variant=\"h6\" gutterBottom>\n              Interactive Map View\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\" textAlign=\"center\" maxWidth={400}>\n              Integrate with Google Maps or Mapbox to display parcel points on an interactive map\n            </Typography>\n\n            {/* Selected Point Info Overlay */}\n            {selectedPoint && (\n              <Paper\n                sx={{\n                  position: 'absolute',\n                  bottom: 16,\n                  left: 16,\n                  right: 16,\n                  p: 2,\n                  maxWidth: 400\n                }}\n                elevation={3}\n              >\n                <Box display=\"flex\" alignItems=\"start\" gap={2}>\n                  <Box\n                    sx={{\n                      width: 48,\n                      height: 48,\n                      borderRadius: '50%',\n                      bgcolor: getPointColor(selectedPoint.point_type),\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      color: 'white',\n                      flexShrink: 0\n                    }}\n                  >\n                    {getPointIcon(selectedPoint.point_type)}\n                  </Box>\n                  <Box flexGrow={1}>\n                    <Typography variant=\"subtitle1\" fontWeight=\"bold\">\n                      {selectedPoint.point_name}\n                    </Typography>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      {selectedPoint.street_address}\n                    </Typography>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      {selectedPoint.postal_code} {selectedPoint.city}\n                    </Typography>\n                    {selectedPoint.distance_km !== undefined && (\n                      <Typography variant=\"caption\" display=\"block\" mt={1}>\n                        <DirectionsWalk sx={{ fontSize: 14, verticalAlign: 'middle', mr: 0.5 }} />\n                        {selectedPoint.distance_km.toFixed(2)} km away\n                      </Typography>\n                    )}\n                    <Box display=\"flex\" gap={1} mt={1} flexWrap=\"wrap\">\n                      {selectedPoint.facilities?.slice(0, 3).map((facility) => (\n                        <Chip\n                          key={facility}\n                          label={facility.replace(/_/g, ' ')}\n                          size=\"small\"\n                          variant=\"outlined\"\n                        />\n                      ))}\n                    </Box>\n                  </Box>\n                </Box>\n                <Box display=\"flex\" gap={1} mt={2}>\n                  <Button\n                    size=\"small\"\n                    variant=\"outlined\"\n                    startIcon={<Info />}\n                    fullWidth\n                  >\n                    Details\n                  </Button>\n                  <Button\n                    size=\"small\"\n                    variant=\"contained\"\n                    fullWidth\n                  >\n                    Select\n                  </Button>\n                </Box>\n              </Paper>\n            )}\n\n            {/* Map Legend */}\n            <Paper\n              sx={{\n                position: 'absolute',\n                top: 16,\n                right: 16,\n                p: 2\n              }}\n              elevation={2}\n            >\n              <Typography variant=\"caption\" fontWeight=\"bold\" display=\"block\" mb={1}>\n                Legend\n              </Typography>\n              <Box display=\"flex\" flexDirection=\"column\" gap={1}>\n                <Box display=\"flex\" alignItems=\"center\" gap={1}>\n                  <Box\n                    sx={{\n                      width: 20,\n                      height: 20,\n                      borderRadius: '50%',\n                      bgcolor: '#2196f3'\n                    }}\n                  />\n                  <Typography variant=\"caption\">Parcel Shop</Typography>\n                </Box>\n                <Box display=\"flex\" alignItems=\"center\" gap={1}>\n                  <Box\n                    sx={{\n                      width: 20,\n                      height: 20,\n                      borderRadius: '50%',\n                      bgcolor: '#4caf50'\n                    }}\n                  />\n                  <Typography variant=\"caption\">Parcel Locker</Typography>\n                </Box>\n                <Box display=\"flex\" alignItems=\"center\" gap={1}>\n                  <Box\n                    sx={{\n                      width: 20,\n                      height: 20,\n                      borderRadius: '50%',\n                      bgcolor: '#ff9800'\n                    }}\n                  />\n                  <Typography variant=\"caption\">Service Point</Typography>\n                </Box>\n              </Box>\n            </Paper>\n          </Box>\n        </CardContent>\n      </Card>\n    </Box>\n  );\n};\n\nexport default ParcelPointMap;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\parcel-points\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\rating\\ServiceRatingForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":86,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":86,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1872,1875],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1872,1875],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Rating,\n  TextField,\n  Button,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Alert,\n  Grid,\n  Chip,\n  Paper\n} from '@mui/material';\nimport {\n  Home,\n  Store,\n  Lock,\n  LocationOn,\n  Business,\n  CheckCircle,\n  Warning\n} from '@mui/icons-material';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { apiClient } from '@/services/apiClient';\n\ninterface ServiceRatingFormProps {\n  token?: string;\n}\n\nconst serviceTypeIcons = {\n  home_delivery: <Home />,\n  parcelshop: <Store />,\n  parcellocker: <Lock />,\n  pickup_point: <LocationOn />,\n  office_delivery: <Business />\n};\n\nconst serviceTypeLabels = {\n  home_delivery: 'Home Delivery',\n  parcelshop: 'Parcel Shop',\n  parcellocker: 'Parcel Locker',\n  pickup_point: 'Pickup Point',\n  office_delivery: 'Office Delivery'\n};\n\nconst ServiceRatingForm: React.FC<ServiceRatingFormProps> = ({ token: propToken }) => {\n  const { token: urlToken } = useParams<{ token: string }>();\n  const navigate = useNavigate();\n  const token = propToken || urlToken;\n\n  const [formData, setFormData] = useState({\n    rating: 0,\n    reviewText: '',\n    requestedService: '',\n    actualService: '',\n    serviceAccuracyRating: 0,\n    serviceSatisfactionRating: 0,\n    deliveryMethodFeedback: '',\n    onTimeDeliveryScore: 0,\n    communicationScore: 0,\n    packageConditionScore: 0,\n    overallSatisfactionScore: 0\n  });\n\n  const [loading, setLoading] = useState(false);\n  const [submitted, setSubmitted] = useState(false);\n  const [error, setError] = useState('');\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n\n    try {\n      await apiClient.post('/rating/submit', { \n        token,\n        ...formData\n      });\n\n      setSubmitted(true);\n    } catch (err: any) {\n      setError(err.response?.data?.error || 'Failed to submit rating');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleServiceChange = (field: 'requestedService' | 'actualService', value: string) => {\n    setFormData(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n\n  const isServiceAccurate = formData.requestedService === formData.actualService;\n\n  if (submitted) {\n    return (\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight=\"60vh\">\n        <Card sx={{ maxWidth: 500, textAlign: 'center', p: 3 }}>\n          <CardContent>\n            <CheckCircle color=\"success\" sx={{ fontSize: 64, mb: 2 }} />\n            <Typography variant=\"h5\" gutterBottom>\n              Thank You!\n            </Typography>\n            <Typography variant=\"body1\" color=\"text.secondary\">\n              Your rating has been submitted successfully. Your feedback helps us improve our delivery services.\n            </Typography>\n            <Button\n              variant=\"contained\"\n              onClick={() => navigate('/')}\n              sx={{ mt: 3 }}\n            >\n              Return to Home\n            </Button>\n          </CardContent>\n        </Card>\n      </Box>\n    );\n  }\n\n  return (\n    <Box maxWidth=\"800px\" mx=\"auto\" p={3}>\n      <Typography variant=\"h4\" gutterBottom align=\"center\">\n        Rate Your Delivery Experience\n      </Typography>\n      \n      <Typography variant=\"body1\" color=\"text.secondary\" align=\"center\" mb={4}>\n        Help us improve our service by sharing your delivery experience\n      </Typography>\n\n      {error && (\n        <Alert severity=\"error\" sx={{ mb: 3 }}>\n          {error}\n        </Alert>\n      )}\n\n      <form onSubmit={handleSubmit}>\n        <Grid container spacing={3}>\n          {/* Overall Rating */}\n          <Grid item xs={12}>\n            <Paper sx={{ p: 3 }}>\n              <Typography variant=\"h6\" gutterBottom>\n                Overall Rating\n              </Typography>\n              <Box display=\"flex\" alignItems=\"center\" gap={2}>\n                <Rating\n                  value={formData.rating}\n                  onChange={(_, value) => setFormData(prev => ({ ...prev, rating: value || 0 }))}\n                  size=\"large\"\n                />\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  {formData.rating === 0 ? 'Select rating' : `${formData.rating} out of 5 stars`}\n                </Typography>\n              </Box>\n            </Paper>\n          </Grid>\n\n          {/* Service Type Verification */}\n          <Grid item xs={12}>\n            <Paper sx={{ p: 3 }}>\n              <Typography variant=\"h6\" gutterBottom>\n                y Service Verification\n              </Typography>\n              \n              <Grid container spacing={2}>\n                <Grid item xs={12} md={6}>\n                  <FormControl fullWidth>\n                    <InputLabel>Service You Requested</InputLabel>\n                    <Select\n                      value={formData.requestedService}\n                      onChange={(e) => handleServiceChange('requestedService', e.target.value)}\n                      required\n                    >\n                      {Object.entries(serviceTypeLabels).map(([key, label]) => (\n                        <MenuItem key={key} value={key}>\n                          <Box display=\"flex\" alignItems=\"center\" gap={1}>\n                            {serviceTypeIcons[key as keyof typeof serviceTypeIcons]}\n                            {label}\n                          </Box>\n                        </MenuItem>\n                      ))}\n                    </Select>\n                  </FormControl>\n                </Grid>\n\n                <Grid item xs={12} md={6}>\n                  <FormControl fullWidth>\n                    <InputLabel>Service You Actually Received</InputLabel>\n                    <Select\n                      value={formData.actualService}\n                      onChange={(e) => handleServiceChange('actualService', e.target.value)}\n                      required\n                    >\n                      {Object.entries(serviceTypeLabels).map(([key, label]) => (\n                        <MenuItem key={key} value={key}>\n                          <Box display=\"flex\" alignItems=\"center\" gap={1}>\n                            {serviceTypeIcons[key as keyof typeof serviceTypeIcons]}\n                            {label}\n                          </Box>\n                        </MenuItem>\n                      ))}\n                    </Select>\n                  </FormControl>\n                </Grid>\n              </Grid>\n\n              {formData.requestedService && formData.actualService && (\n                <Box mt={2}>\n                  <Chip\n                    icon={isServiceAccurate ? <CheckCircle /> : <Warning />}\n                    label={isServiceAccurate ? 'Service as requested' : 'Different service provided'}\n                    color={isServiceAccurate ? 'success' : 'warning'}\n                    variant=\"outlined\"\n                  />\n                </Box>\n              )}\n            </Paper>\n          </Grid>\n\n          {/* Service-Specific Ratings */}\n          <Grid item xs={12}>\n            <Paper sx={{ p: 3 }}>\n              <Typography variant=\"h6\" gutterBottom>\n                Service Quality Ratings\n              </Typography>\n              \n              <Grid container spacing={3}>\n                <Grid item xs={12} md={6}>\n                  <Typography variant=\"body2\" gutterBottom>\n                    Service Accuracy\n                  </Typography>\n                  <Rating\n                    value={formData.serviceAccuracyRating}\n                    onChange={(_, value) => setFormData(prev => ({ \n                      ...prev, \n                      serviceAccuracyRating: value || 0 \n                    }))}\n                  />\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    Did you receive the service you requested?\n                  </Typography>\n                </Grid>\n\n                <Grid item xs={12} md={6}>\n                  <Typography variant=\"body2\" gutterBottom>\n                    Service Satisfaction\n                  </Typography>\n                  <Rating\n                    value={formData.serviceSatisfactionRating}\n                    onChange={(_, value) => setFormData(prev => ({ \n                      ...prev, \n                      serviceSatisfactionRating: value || 0 \n                    }))}\n                  />\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    How satisfied are you with the delivery method?\n                  </Typography>\n                </Grid>\n\n                <Grid item xs={12} md={6}>\n                  <Typography variant=\"body2\" gutterBottom>\n                    On-Time Delivery\n                  </Typography>\n                  <Rating\n                    value={formData.onTimeDeliveryScore}\n                    onChange={(_, value) => setFormData(prev => ({ \n                      ...prev, \n                      onTimeDeliveryScore: value || 0 \n                    }))}\n                  />\n                </Grid>\n\n                <Grid item xs={12} md={6}>\n                  <Typography variant=\"body2\" gutterBottom>\n                    Communication\n                  </Typography>\n                  <Rating\n                    value={formData.communicationScore}\n                    onChange={(_, value) => setFormData(prev => ({ \n                      ...prev, \n                      communicationScore: value || 0 \n                    }))}\n                  />\n                </Grid>\n\n                <Grid item xs={12} md={6}>\n                  <Typography variant=\"body2\" gutterBottom>\n                    Package Condition\n                  </Typography>\n                  <Rating\n                    value={formData.packageConditionScore}\n                    onChange={(_, value) => setFormData(prev => ({ \n                      ...prev, \n                      packageConditionScore: value || 0 \n                    }))}\n                  />\n                </Grid>\n\n                <Grid item xs={12} md={6}>\n                  <Typography variant=\"body2\" gutterBottom>\n                    Overall Satisfaction\n                  </Typography>\n                  <Rating\n                    value={formData.overallSatisfactionScore}\n                    onChange={(_, value) => setFormData(prev => ({ \n                      ...prev, \n                      overallSatisfactionScore: value || 0 \n                    }))}\n                  />\n                </Grid>\n              </Grid>\n            </Paper>\n          </Grid>\n\n          {/* Feedback Text */}\n          <Grid item xs={12}>\n            <Paper sx={{ p: 3 }}>\n              <Typography variant=\"h6\" gutterBottom>\n                Additional Feedback\n              </Typography>\n              \n              <TextField\n                fullWidth\n                multiline\n                rows={3}\n                label=\"Review Comments\"\n                value={formData.reviewText}\n                onChange={(e) => setFormData(prev => ({ ...prev, reviewText: e.target.value }))}\n                placeholder=\"Share your experience with this delivery...\"\n                sx={{ mb: 2 }}\n              />\n\n              <TextField\n                fullWidth\n                multiline\n                rows={2}\n                label=\"Delivery Method Feedback\"\n                value={formData.deliveryMethodFeedback}\n                onChange={(e) => setFormData(prev => ({ ...prev, deliveryMethodFeedback: e.target.value }))}\n                placeholder=\"Any specific feedback about the delivery method used?\"\n              />\n            </Paper>\n          </Grid>\n\n          {/* Submit Button */}\n          <Grid item xs={12}>\n            <Box display=\"flex\" justifyContent=\"center\">\n              <Button\n                type=\"submit\"\n                variant=\"contained\"\n                size=\"large\"\n                disabled={loading || formData.rating === 0 || !formData.requestedService || !formData.actualService}\n                sx={{ minWidth: 200 }}\n              >\n                {loading ? 'Submitting...' : 'Submit Rating'}\n              </Button>\n            </Box>\n          </Grid>\n        </Grid>\n      </form>\n    </Box>\n  );\n};\n\nexport default ServiceRatingForm;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\reviews\\ReviewSubmissionForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":59,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":59,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1372,1375],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1372,1375],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Rating,\n  TextField,\n  Button,\n  Grid,\n  Alert,\n  Divider,\n  FormGroup,\n  FormControlLabel,\n  Checkbox,\n  LinearProgress,\n} from '@mui/material';\nimport {\n  Send as SendIcon,\n  CheckCircle as SuccessIcon,\n} from '@mui/icons-material';\nimport { useMutation } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\n\ninterface ReviewFormProps {\n  orderId: string;\n  courierId: string;\n  courierName: string;\n  onSuccess?: () => void;\n}\n\ninterface ReviewCriteria {\n  delivery_speed: number;\n  communication: number;\n  professionalism: number;\n  package_condition: number;\n}\n\nexport const ReviewSubmissionForm: React.FC<ReviewFormProps> = ({\n  orderId,\n  courierId,\n  courierName,\n  onSuccess,\n}) => {\n  const [overallRating, setOverallRating] = useState<number>(0);\n  const [criteria, setCriteria] = useState<ReviewCriteria>({\n    delivery_speed: 0,\n    communication: 0,\n    professionalism: 0,\n    package_condition: 0,\n  });\n  const [reviewText, setReviewText] = useState('');\n  const [isAnonymous, setIsAnonymous] = useState(false);\n  const [wouldRecommend, setWouldRecommend] = useState(true);\n  const [submitted, setSubmitted] = useState(false);\n\n  // Submit review mutation\n  const submitReviewMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const response = await apiClient.post('/reviews', data);\n      return response.data;\n    },\n    onSuccess: () => {\n      setSubmitted(true);\n      if (onSuccess) {\n        setTimeout(onSuccess, 2000);\n      }\n    },\n  });\n\n  const handleCriteriaChange = (criterion: keyof ReviewCriteria, value: number) => {\n    setCriteria(prev => ({ ...prev, [criterion]: value }));\n  };\n\n  const handleSubmit = () => {\n    if (overallRating === 0) {\n      alert('Please provide an overall rating');\n      return;\n    }\n\n    submitReviewMutation.mutate({\n      order_id: orderId,\n      courier_id: courierId,\n      rating: overallRating,\n      review_text: reviewText,\n      criteria: criteria,\n      is_anonymous: isAnonymous,\n      would_recommend: wouldRecommend,\n    });\n  };\n\n  const averageCriteriaRating = Object.values(criteria).reduce((a, b) => a + b, 0) / 4;\n  const isFormValid = overallRating > 0;\n\n  if (submitted) {\n    return (\n      <Card>\n        <CardContent sx={{ textAlign: 'center', py: 6 }}>\n          <SuccessIcon sx={{ fontSize: 80, color: 'success.main', mb: 2 }} />\n          <Typography variant=\"h5\" gutterBottom>\n            Thank You for Your Review!\n          </Typography>\n          <Typography variant=\"body1\" color=\"text.secondary\">\n            Your feedback helps us improve our service and helps other customers make informed decisions.\n          </Typography>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card>\n      <CardContent>\n        <Typography variant=\"h5\" gutterBottom>\n          Review Your Delivery Experience\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\n          Share your experience with <strong>{courierName}</strong>\n        </Typography>\n\n        <Divider sx={{ my: 3 }} />\n\n        {/* Overall Rating */}\n        <Box sx={{ mb: 4, textAlign: 'center' }}>\n          <Typography variant=\"h6\" gutterBottom>\n            Overall Rating\n          </Typography>\n          <Rating\n            value={overallRating}\n            onChange={(_, value) => setOverallRating(value || 0)}\n            size=\"large\"\n            sx={{ fontSize: '3rem' }}\n          />\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1 }}>\n            {overallRating === 0 && 'Click to rate'}\n            {overallRating === 1 && 'Poor'}\n            {overallRating === 2 && 'Fair'}\n            {overallRating === 3 && 'Good'}\n            {overallRating === 4 && 'Very Good'}\n            {overallRating === 5 && 'Excellent'}\n          </Typography>\n        </Box>\n\n        <Divider sx={{ my: 3 }} />\n\n        {/* Detailed Criteria */}\n        <Typography variant=\"h6\" gutterBottom>\n          Rate Specific Aspects\n        </Typography>\n        <Grid container spacing={3} sx={{ mb: 3 }}>\n          <Grid item xs={12} sm={6}>\n            <Box>\n              <Typography variant=\"body2\" gutterBottom>\n                Delivery Speed\n              </Typography>\n              <Rating\n                value={criteria.delivery_speed}\n                onChange={(_, value) => handleCriteriaChange('delivery_speed', value || 0)}\n              />\n            </Box>\n          </Grid>\n\n          <Grid item xs={12} sm={6}>\n            <Box>\n              <Typography variant=\"body2\" gutterBottom>\n                Communication\n              </Typography>\n              <Rating\n                value={criteria.communication}\n                onChange={(_, value) => handleCriteriaChange('communication', value || 0)}\n              />\n            </Box>\n          </Grid>\n\n          <Grid item xs={12} sm={6}>\n            <Box>\n              <Typography variant=\"body2\" gutterBottom>\n                Professionalism\n              </Typography>\n              <Rating\n                value={criteria.professionalism}\n                onChange={(_, value) => handleCriteriaChange('professionalism', value || 0)}\n              />\n            </Box>\n          </Grid>\n\n          <Grid item xs={12} sm={6}>\n            <Box>\n              <Typography variant=\"body2\" gutterBottom>\n                Package Condition\n              </Typography>\n              <Rating\n                value={criteria.package_condition}\n                onChange={(_, value) => handleCriteriaChange('package_condition', value || 0)}\n              />\n            </Box>\n          </Grid>\n        </Grid>\n\n        {averageCriteriaRating > 0 && (\n          <Box sx={{ mb: 3 }}>\n            <Typography variant=\"caption\" color=\"text.secondary\">\n              Average criteria rating: {averageCriteriaRating.toFixed(1)} / 5\n            </Typography>\n            <LinearProgress\n              variant=\"determinate\"\n              value={(averageCriteriaRating / 5) * 100}\n              sx={{ mt: 1 }}\n            />\n          </Box>\n        )}\n\n        <Divider sx={{ my: 3 }} />\n\n        {/* Written Review */}\n        <Typography variant=\"h6\" gutterBottom>\n          Share Your Experience (Optional)\n        </Typography>\n        <TextField\n          fullWidth\n          multiline\n          rows={4}\n          placeholder=\"Tell us about your delivery experience...\"\n          value={reviewText}\n          onChange={(e) => setReviewText(e.target.value)}\n          helperText={`${reviewText.length} / 500 characters`}\n          inputProps={{ maxLength: 500 }}\n          sx={{ mb: 3 }}\n        />\n\n        {/* Additional Options */}\n        <FormGroup sx={{ mb: 3 }}>\n          <FormControlLabel\n            control={\n              <Checkbox\n                checked={wouldRecommend}\n                onChange={(e) => setWouldRecommend(e.target.checked)}\n              />\n            }\n            label=\"I would recommend this courier to others\"\n          />\n          <FormControlLabel\n            control={\n              <Checkbox\n                checked={isAnonymous}\n                onChange={(e) => setIsAnonymous(e.target.checked)}\n              />\n            }\n            label=\"Post this review anonymously\"\n          />\n        </FormGroup>\n\n        {/* Submit Button */}\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n          <Typography variant=\"caption\" color=\"text.secondary\">\n            Your review will be public and help other customers\n          </Typography>\n          <Button\n            variant=\"contained\"\n            size=\"large\"\n            startIcon={<SendIcon />}\n            onClick={handleSubmit}\n            disabled={!isFormValid || submitReviewMutation.isPending}\n          >\n            {submitReviewMutation.isPending ? 'Submitting...' : 'Submit Review'}\n          </Button>\n        </Box>\n\n        {submitReviewMutation.isError && (\n          <Alert severity=\"error\" sx={{ mt: 2 }}>\n            Failed to submit review. Please try again.\n          </Alert>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\service-performance\\GeographicHeatmap.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FilterList' is defined but never used.","line":36,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":13},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":308,"column":84,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":308,"endColumn":87,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11113,11116],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11113,11116],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Geographic Heatmap Component\n * Week 4 Phase 6 - Frontend Components\n * \n * Display performance metrics by geographic area\n */\n\nimport React, { useState } from 'react';\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  Typography,\n  Box,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Chip,\n  TextField,\n  InputAdornment,\n  IconButton,\n  Tooltip,\n  LinearProgress,\n  Paper,\n  ToggleButtonGroup,\n  ToggleButton\n} from '@mui/material';\nimport {\n  Search,\n  LocationOn,\n  TrendingUp,\n  TrendingDown,\n  FilterList,\n  Map as MapIcon,\n  ViewList\n} from '@mui/icons-material';\n\ninterface GeographicData {\n  geo_performance_id: string;\n  courier_name: string;\n  service_name: string;\n  postal_code: string;\n  city: string;\n  region: string;\n  total_deliveries: number;\n  successful_deliveries: number;\n  on_time_rate: number;\n  avg_rating: number;\n  area_trust_score: number;\n}\n\ninterface GeographicHeatmapProps {\n  data: GeographicData[];\n  courierName: string;\n  serviceName?: string;\n}\n\nexport const GeographicHeatmap: React.FC<GeographicHeatmapProps> = ({\n  data,\n  courierName,\n  serviceName\n}) => {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [viewMode, setViewMode] = useState<'list' | 'heatmap'>('list');\n  const [sortBy, setSortBy] = useState<'trust_score' | 'deliveries' | 'on_time'>('trust_score');\n\n  // Filter data based on search\n  const filteredData = data.filter(item =>\n    item.city.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    item.postal_code.includes(searchTerm) ||\n    item.region.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  // Sort data\n  const sortedData = [...filteredData].sort((a, b) => {\n    switch (sortBy) {\n      case 'trust_score':\n        return b.area_trust_score - a.area_trust_score;\n      case 'deliveries':\n        return b.total_deliveries - a.total_deliveries;\n      case 'on_time':\n        return b.on_time_rate - a.on_time_rate;\n      default:\n        return 0;\n    }\n  });\n\n  // Get color based on trust score\n  const getTrustScoreColor = (score: number): string => {\n    if (score >= 90) return '#4caf50';\n    if (score >= 80) return '#8bc34a';\n    if (score >= 70) return '#ffc107';\n    if (score >= 60) return '#ff9800';\n    return '#f44336';\n  };\n\n  // Get performance indicator\n  const getPerformanceIndicator = (score: number) => {\n    if (score >= 90) return { icon: <TrendingUp />, color: 'success' };\n    if (score >= 70) return { icon: <TrendingUp />, color: 'warning' };\n    return { icon: <TrendingDown />, color: 'error' };\n  };\n\n  // Calculate summary stats\n  const summaryStats = {\n    totalAreas: filteredData.length,\n    avgTrustScore: filteredData.reduce((sum, item) => sum + item.area_trust_score, 0) / filteredData.length || 0,\n    totalDeliveries: filteredData.reduce((sum, item) => sum + item.total_deliveries, 0),\n    avgOnTimeRate: filteredData.reduce((sum, item) => sum + item.on_time_rate, 0) / filteredData.length || 0,\n    bestArea: sortedData[0]?.city || 'N/A'\n  };\n\n  return (\n    <Card>\n      <CardHeader\n        title={\n          <Box display=\"flex\" alignItems=\"center\" justifyContent=\"space-between\" flexWrap=\"wrap\" gap={2}>\n            <Box>\n              <Typography variant=\"h6\">\n                Geographic Performance\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                {courierName} {serviceName && `- ${serviceName}`}\n              </Typography>\n            </Box>\n            <ToggleButtonGroup\n              value={viewMode}\n              exclusive\n              onChange={(_, newMode) => newMode && setViewMode(newMode)}\n              size=\"small\"\n            >\n              <ToggleButton value=\"list\">\n                <ViewList />\n              </ToggleButton>\n              <ToggleButton value=\"heatmap\">\n                <MapIcon />\n              </ToggleButton>\n            </ToggleButtonGroup>\n          </Box>\n        }\n      />\n\n      <CardContent>\n        {/* Summary Stats */}\n        <Box mb={3} p={2} bgcolor=\"grey.50\" borderRadius={2}>\n          <Box display=\"flex\" gap={3} flexWrap=\"wrap\">\n            <Box>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Total Areas\n              </Typography>\n              <Typography variant=\"h6\">\n                {summaryStats.totalAreas}\n              </Typography>\n            </Box>\n            <Box>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Avg Trust Score\n              </Typography>\n              <Typography variant=\"h6\" sx={{ color: getTrustScoreColor(summaryStats.avgTrustScore) }}>\n                {summaryStats.avgTrustScore.toFixed(1)}\n              </Typography>\n            </Box>\n            <Box>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Total Deliveries\n              </Typography>\n              <Typography variant=\"h6\">\n                {summaryStats.totalDeliveries.toLocaleString()}\n              </Typography>\n            </Box>\n            <Box>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Avg On-Time Rate\n              </Typography>\n              <Typography variant=\"h6\">\n                {summaryStats.avgOnTimeRate.toFixed(1)}%\n              </Typography>\n            </Box>\n            <Box>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Best Performing Area\n              </Typography>\n              <Typography variant=\"h6\">\n                {summaryStats.bestArea}\n              </Typography>\n            </Box>\n          </Box>\n        </Box>\n\n        {/* Search and Filter */}\n        <Box display=\"flex\" gap={2} mb={3} flexWrap=\"wrap\">\n          <TextField\n            placeholder=\"Search by city, postal code, or region...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            size=\"small\"\n            sx={{ flexGrow: 1, minWidth: 250 }}\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  <Search />\n                </InputAdornment>\n              )\n            }}\n          />\n          <ToggleButtonGroup\n            value={sortBy}\n            exclusive\n            onChange={(_, newSort) => newSort && setSortBy(newSort)}\n            size=\"small\"\n          >\n            <ToggleButton value=\"trust_score\">\n              Trust Score\n            </ToggleButton>\n            <ToggleButton value=\"deliveries\">\n              Deliveries\n            </ToggleButton>\n            <ToggleButton value=\"on_time\">\n              On-Time\n            </ToggleButton>\n          </ToggleButtonGroup>\n        </Box>\n\n        {/* Data Display */}\n        {viewMode === 'list' ? (\n          <TableContainer component={Paper} variant=\"outlined\">\n            <Table size=\"small\">\n              <TableHead>\n                <TableRow>\n                  <TableCell>Location</TableCell>\n                  <TableCell align=\"center\">Postal Code</TableCell>\n                  <TableCell align=\"center\">Deliveries</TableCell>\n                  <TableCell align=\"center\">Success Rate</TableCell>\n                  <TableCell align=\"center\">On-Time Rate</TableCell>\n                  <TableCell align=\"center\">Rating</TableCell>\n                  <TableCell align=\"center\">Trust Score</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {sortedData.length === 0 ? (\n                  <TableRow>\n                    <TableCell colSpan={7} align=\"center\">\n                      <Typography variant=\"body2\" color=\"text.secondary\" py={3}>\n                        No data available for the selected filters\n                      </Typography>\n                    </TableCell>\n                  </TableRow>\n                ) : (\n                  sortedData.map((item) => {\n                    const indicator = getPerformanceIndicator(item.area_trust_score);\n                    const successRate = (item.successful_deliveries / item.total_deliveries * 100) || 0;\n\n                    return (\n                      <TableRow key={item.geo_performance_id} hover>\n                        <TableCell>\n                          <Box display=\"flex\" alignItems=\"center\" gap={1}>\n                            <LocationOn sx={{ fontSize: 16, color: 'text.secondary' }} />\n                            <Box>\n                              <Typography variant=\"body2\" fontWeight=\"medium\">\n                                {item.city}\n                              </Typography>\n                              <Typography variant=\"caption\" color=\"text.secondary\">\n                                {item.region}\n                              </Typography>\n                            </Box>\n                          </Box>\n                        </TableCell>\n                        <TableCell align=\"center\">\n                          <Chip label={item.postal_code} size=\"small\" variant=\"outlined\" />\n                        </TableCell>\n                        <TableCell align=\"center\">\n                          <Typography variant=\"body2\">\n                            {item.total_deliveries.toLocaleString()}\n                          </Typography>\n                        </TableCell>\n                        <TableCell align=\"center\">\n                          <Box>\n                            <Typography variant=\"body2\" fontWeight=\"medium\">\n                              {successRate.toFixed(1)}%\n                            </Typography>\n                            <Typography variant=\"caption\" color=\"text.secondary\">\n                              {item.successful_deliveries}/{item.total_deliveries}\n                            </Typography>\n                          </Box>\n                        </TableCell>\n                        <TableCell align=\"center\">\n                          <Typography variant=\"body2\" fontWeight=\"medium\">\n                            {item.on_time_rate.toFixed(1)}%\n                          </Typography>\n                        </TableCell>\n                        <TableCell align=\"center\">\n                          <Box display=\"flex\" alignItems=\"center\" justifyContent=\"center\" gap={0.5}>\n                            <Typography variant=\"body2\" fontWeight=\"medium\">\n                              {item.avg_rating.toFixed(1)}\n                            </Typography>\n                            <Typography variant=\"caption\" color=\"text.secondary\">\n                              / 5.0\n                            </Typography>\n                          </Box>\n                        </TableCell>\n                        <TableCell align=\"center\">\n                          <Box>\n                            <Box display=\"flex\" alignItems=\"center\" justifyContent=\"center\" gap={0.5} mb={0.5}>\n                              <Tooltip title={indicator.color === 'success' ? 'Excellent' : indicator.color === 'warning' ? 'Good' : 'Needs Improvement'}>\n                                <IconButton size=\"small\" color={indicator.color as any}>\n                                  {indicator.icon}\n                                </IconButton>\n                              </Tooltip>\n                              <Typography \n                                variant=\"body2\" \n                                fontWeight=\"bold\"\n                                sx={{ color: getTrustScoreColor(item.area_trust_score) }}\n                              >\n                                {item.area_trust_score.toFixed(1)}\n                              </Typography>\n                            </Box>\n                            <LinearProgress\n                              variant=\"determinate\"\n                              value={item.area_trust_score}\n                              sx={{\n                                height: 4,\n                                borderRadius: 2,\n                                backgroundColor: 'rgba(0,0,0,0.1)',\n                                '& .MuiLinearProgress-bar': {\n                                  backgroundColor: getTrustScoreColor(item.area_trust_score),\n                                  borderRadius: 2\n                                }\n                              }}\n                            />\n                          </Box>\n                        </TableCell>\n                      </TableRow>\n                    );\n                  })\n                )}\n              </TableBody>\n            </Table>\n          </TableContainer>\n        ) : (\n          // Heatmap view (simplified - would integrate with actual map library)\n          <Box>\n            <Paper variant=\"outlined\" sx={{ p: 3, textAlign: 'center', minHeight: 400 }}>\n              <MapIcon sx={{ fontSize: 64, color: 'text.secondary', mb: 2 }} />\n              <Typography variant=\"h6\" gutterBottom>\n                Interactive Map View\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\" mb={2}>\n                Integrate with Google Maps or Mapbox to display performance heatmap\n              </Typography>\n              <Box display=\"flex\" gap={2} justifyContent=\"center\" flexWrap=\"wrap\">\n                {sortedData.slice(0, 5).map((item) => (\n                  <Chip\n                    key={item.geo_performance_id}\n                    icon={<LocationOn />}\n                    label={`${item.city}: ${item.area_trust_score.toFixed(1)}`}\n                    sx={{\n                      backgroundColor: getTrustScoreColor(item.area_trust_score),\n                      color: 'white',\n                      fontWeight: 'bold'\n                    }}\n                  />\n                ))}\n              </Box>\n            </Paper>\n          </Box>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default GeographicHeatmap;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\service-performance\\ServiceComparisonChart.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'idx' is defined but never used.","line":73,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":73,"endColumn":37}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Service Comparison Chart Component\n * Week 4 Phase 6 - Frontend Components\n * \n * Compare performance metrics across multiple courier services\n */\n\nimport React from 'react';\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  Typography,\n  Box,\n  ToggleButtonGroup,\n  ToggleButton,\n  Chip\n} from '@mui/material';\nimport {\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  ResponsiveContainer,\n  RadarChart,\n  PolarGrid,\n  PolarAngleAxis,\n  PolarRadiusAxis,\n  Radar\n} from 'recharts';\nimport { TrendingUp, Speed, Star, CheckCircle } from '@mui/icons-material';\n\ninterface ServiceData {\n  courier_name: string;\n  service_name: string;\n  trust_score: number;\n  completion_rate: number;\n  on_time_rate: number;\n  avg_rating: number;\n  customer_satisfaction_score: number;\n}\n\ninterface ServiceComparisonChartProps {\n  data: ServiceData[];\n  title?: string;\n  defaultView?: 'bar' | 'radar';\n}\n\nexport const ServiceComparisonChart: React.FC<ServiceComparisonChartProps> = ({\n  data,\n  title = 'Service Performance Comparison',\n  defaultView = 'bar'\n}) => {\n  const [chartType, setChartType] = React.useState<'bar' | 'radar'>(defaultView);\n\n  // Transform data for bar chart\n  const barChartData = data.map(item => ({\n    name: `${item.courier_name}\\n${item.service_name}`,\n    'Trust Score': item.trust_score,\n    'Completion Rate': item.completion_rate,\n    'On-Time Rate': item.on_time_rate,\n    'Avg Rating': item.avg_rating * 20, // Scale to 100\n    'Satisfaction': item.customer_satisfaction_score\n  }));\n\n  // Transform data for radar chart\n  const radarChartData = [\n    {\n      metric: 'Trust Score',\n      ...data.reduce((acc, item, idx) => ({\n        ...acc,\n        [item.courier_name]: item.trust_score\n      }), {})\n    },\n    {\n      metric: 'Completion',\n      ...data.reduce((acc, item) => ({\n        ...acc,\n        [item.courier_name]: item.completion_rate\n      }), {})\n    },\n    {\n      metric: 'On-Time',\n      ...data.reduce((acc, item) => ({\n        ...acc,\n        [item.courier_name]: item.on_time_rate\n      }), {})\n    },\n    {\n      metric: 'Rating',\n      ...data.reduce((acc, item) => ({\n        ...acc,\n        [item.courier_name]: item.avg_rating * 20\n      }), {})\n    },\n    {\n      metric: 'Satisfaction',\n      ...data.reduce((acc, item) => ({\n        ...acc,\n        [item.courier_name]: item.customer_satisfaction_score\n      }), {})\n    }\n  ];\n\n  // Colors for different couriers\n  const colors = ['#8884d8', '#82ca9d', '#ffc658', '#ff7c7c', '#8dd1e1'];\n\n  // Get best performer for each metric\n  const getBestPerformer = (metric: keyof ServiceData): string => {\n    const best = data.reduce((prev, current) => \n      (current[metric] as number) > (prev[metric] as number) ? current : prev\n    );\n    return best.courier_name;\n  };\n\n  return (\n    <Card>\n      <CardHeader\n        title={\n          <Box display=\"flex\" alignItems=\"center\" justifyContent=\"space-between\" flexWrap=\"wrap\" gap={2}>\n            <Typography variant=\"h6\">{title}</Typography>\n            <ToggleButtonGroup\n              value={chartType}\n              exclusive\n              onChange={(_, newType) => newType && setChartType(newType)}\n              size=\"small\"\n            >\n              <ToggleButton value=\"bar\">\n                Bar Chart\n              </ToggleButton>\n              <ToggleButton value=\"radar\">\n                Radar Chart\n              </ToggleButton>\n            </ToggleButtonGroup>\n          </Box>\n        }\n        subheader={\n          <Box display=\"flex\" gap={1} mt={1} flexWrap=\"wrap\">\n            <Chip\n              icon={<TrendingUp />}\n              label={`Best Trust Score: ${getBestPerformer('trust_score')}`}\n              size=\"small\"\n              color=\"success\"\n              variant=\"outlined\"\n            />\n            <Chip\n              icon={<CheckCircle />}\n              label={`Best Completion: ${getBestPerformer('completion_rate')}`}\n              size=\"small\"\n              color=\"primary\"\n              variant=\"outlined\"\n            />\n            <Chip\n              icon={<Speed />}\n              label={`Best On-Time: ${getBestPerformer('on_time_rate')}`}\n              size=\"small\"\n              color=\"info\"\n              variant=\"outlined\"\n            />\n            <Chip\n              icon={<Star />}\n              label={`Best Rating: ${getBestPerformer('avg_rating')}`}\n              size=\"small\"\n              color=\"warning\"\n              variant=\"outlined\"\n            />\n          </Box>\n        }\n      />\n\n      <CardContent>\n        {chartType === 'bar' ? (\n          <ResponsiveContainer width=\"100%\" height={400}>\n            <BarChart data={barChartData}>\n              <CartesianGrid strokeDasharray=\"3 3\" />\n              <XAxis \n                dataKey=\"name\" \n                angle={-45}\n                textAnchor=\"end\"\n                height={100}\n                interval={0}\n                style={{ fontSize: '12px' }}\n              />\n              <YAxis \n                label={{ value: 'Score', angle: -90, position: 'insideLeft' }}\n                domain={[0, 100]}\n              />\n              <Tooltip \n                formatter={(value: number) => value.toFixed(1)}\n                contentStyle={{ backgroundColor: 'rgba(255, 255, 255, 0.95)', borderRadius: 8 }}\n              />\n              <Legend />\n              <Bar dataKey=\"Trust Score\" fill=\"#8884d8\" />\n              <Bar dataKey=\"Completion Rate\" fill=\"#82ca9d\" />\n              <Bar dataKey=\"On-Time Rate\" fill=\"#ffc658\" />\n              <Bar dataKey=\"Avg Rating\" fill=\"#ff7c7c\" />\n              <Bar dataKey=\"Satisfaction\" fill=\"#8dd1e1\" />\n            </BarChart>\n          </ResponsiveContainer>\n        ) : (\n          <ResponsiveContainer width=\"100%\" height={400}>\n            <RadarChart data={radarChartData}>\n              <PolarGrid />\n              <PolarAngleAxis dataKey=\"metric\" />\n              <PolarRadiusAxis angle={90} domain={[0, 100]} />\n              <Tooltip \n                formatter={(value: number) => value.toFixed(1)}\n                contentStyle={{ backgroundColor: 'rgba(255, 255, 255, 0.95)', borderRadius: 8 }}\n              />\n              <Legend />\n              {data.map((item, index) => (\n                <Radar\n                  key={item.courier_name}\n                  name={item.courier_name}\n                  dataKey={item.courier_name}\n                  stroke={colors[index % colors.length]}\n                  fill={colors[index % colors.length]}\n                  fillOpacity={0.3}\n                />\n              ))}\n            </RadarChart>\n          </ResponsiveContainer>\n        )}\n\n        {/* Summary Statistics */}\n        <Box mt={3} p={2} bgcolor=\"grey.50\" borderRadius={2}>\n          <Typography variant=\"subtitle2\" gutterBottom>\n            Comparison Summary\n          </Typography>\n          <Box display=\"flex\" gap={3} flexWrap=\"wrap\">\n            <Box>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Services Compared\n              </Typography>\n              <Typography variant=\"h6\">\n                {data.length}\n              </Typography>\n            </Box>\n            <Box>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Avg Trust Score\n              </Typography>\n              <Typography variant=\"h6\">\n                {(data.reduce((sum, item) => sum + item.trust_score, 0) / data.length).toFixed(1)}\n              </Typography>\n            </Box>\n            <Box>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Avg Completion Rate\n              </Typography>\n              <Typography variant=\"h6\">\n                {(data.reduce((sum, item) => sum + item.completion_rate, 0) / data.length).toFixed(1)}%\n              </Typography>\n            </Box>\n            <Box>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Avg On-Time Rate\n              </Typography>\n              <Typography variant=\"h6\">\n                {(data.reduce((sum, item) => sum + item.on_time_rate, 0) / data.length).toFixed(1)}%\n              </Typography>\n            </Box>\n          </Box>\n        </Box>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default ServiceComparisonChart;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\service-performance\\ServicePerformanceCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'onViewDetails' is defined but never used.","line":62,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":62,"endColumn":16},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":110,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":110,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2631,2634],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2631,2634],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Service Performance Card Component\n * Week 4 Phase 6 - Frontend Components\n * \n * Displays performance metrics for a specific courier service type\n */\n\nimport React from 'react';\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  Typography,\n  Box,\n  Chip,\n  LinearProgress,\n  Grid,\n  Tooltip,\n  IconButton\n} from '@mui/material';\nimport {\n  TrendingUp,\n  TrendingDown,\n  CheckCircle,\n  Schedule,\n  Star,\n  People,\n  Info\n} from '@mui/icons-material';\n\ninterface ServicePerformanceData {\n  performance_id: string;\n  courier_id: string;\n  courier_name: string;\n  service_type_id: string;\n  service_name: string;\n  service_code: string;\n  total_orders: number;\n  completed_orders: number;\n  completion_rate: number;\n  on_time_rate: number;\n  avg_delivery_days: number;\n  total_reviews: number;\n  avg_rating: number;\n  trust_score: number;\n  trust_score_grade: string;\n  customer_satisfaction_score: number;\n  coverage_area_count: number;\n  period_start: string;\n  period_end: string;\n}\n\ninterface ServicePerformanceCardProps {\n  data: ServicePerformanceData;\n  showDetails?: boolean;\n  onViewDetails?: () => void;\n}\n\nexport const ServicePerformanceCard: React.FC<ServicePerformanceCardProps> = ({\n  data,\n  showDetails = true,\n  onViewDetails\n}) => {\n  // Get color based on trust score\n  const getTrustScoreColor = (score: number): string => {\n    if (score >= 90) return '#4caf50'; // Green\n    if (score >= 80) return '#8bc34a'; // Light Green\n    if (score >= 70) return '#ffc107'; // Yellow\n    if (score >= 60) return '#ff9800'; // Orange\n    return '#f44336'; // Red\n  };\n\n  // Get grade color\n  const getGradeColor = (grade: string): string => {\n    if (grade.startsWith('A')) return 'success';\n    if (grade.startsWith('B')) return 'info';\n    if (grade.startsWith('C')) return 'warning';\n    return 'error';\n  };\n\n  // Format percentage\n  const formatPercentage = (value: number): string => {\n    return `${value.toFixed(1)}%`;\n  };\n\n  // Format rating\n  const formatRating = (value: number): string => {\n    return value.toFixed(1);\n  };\n\n  return (\n    <Card \n      sx={{ \n        height: '100%',\n        transition: 'transform 0.2s, box-shadow 0.2s',\n        '&:hover': {\n          transform: 'translateY(-4px)',\n          boxShadow: 4\n        }\n      }}\n    >\n      <CardHeader\n        title={\n          <Box display=\"flex\" alignItems=\"center\" justifyContent=\"space-between\">\n            <Typography variant=\"h6\" component=\"div\">\n              {data.courier_name}\n            </Typography>\n            <Chip\n              label={data.trust_score_grade}\n              color={getGradeColor(data.trust_score_grade) as any}\n              size=\"small\"\n            />\n          </Box>\n        }\n        subheader={\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            {data.service_name}\n          </Typography>\n        }\n      />\n\n      <CardContent>\n        {/* Trust Score */}\n        <Box mb={3}>\n          <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={1}>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              TrustScore\n            </Typography>\n            <Typography \n              variant=\"h5\" \n              fontWeight=\"bold\"\n              sx={{ color: getTrustScoreColor(data.trust_score) }}\n            >\n              {data.trust_score.toFixed(1)}\n            </Typography>\n          </Box>\n          <LinearProgress\n            variant=\"determinate\"\n            value={data.trust_score}\n            sx={{\n              height: 8,\n              borderRadius: 4,\n              backgroundColor: 'rgba(0,0,0,0.1)',\n              '& .MuiLinearProgress-bar': {\n                backgroundColor: getTrustScoreColor(data.trust_score),\n                borderRadius: 4\n              }\n            }}\n          />\n        </Box>\n\n        {/* Key Metrics */}\n        <Grid container spacing={2}>\n          {/* Completion Rate */}\n          <Grid item xs={6}>\n            <Box>\n              <Box display=\"flex\" alignItems=\"center\" gap={0.5} mb={0.5}>\n                <CheckCircle sx={{ fontSize: 16, color: 'success.main' }} />\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  Completion\n                </Typography>\n                <Tooltip title=\"Percentage of orders successfully completed\">\n                  <IconButton size=\"small\" sx={{ p: 0 }}>\n                    <Info sx={{ fontSize: 14 }} />\n                  </IconButton>\n                </Tooltip>\n              </Box>\n              <Typography variant=\"h6\" fontWeight=\"bold\">\n                {formatPercentage(data.completion_rate)}\n              </Typography>\n              <Box display=\"flex\" alignItems=\"center\" gap={0.5}>\n                {data.completion_rate >= 95 ? (\n                  <TrendingUp sx={{ fontSize: 14, color: 'success.main' }} />\n                ) : (\n                  <TrendingDown sx={{ fontSize: 14, color: 'error.main' }} />\n                )}\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  {data.completed_orders} / {data.total_orders}\n                </Typography>\n              </Box>\n            </Box>\n          </Grid>\n\n          {/* On-Time Rate */}\n          <Grid item xs={6}>\n            <Box>\n              <Box display=\"flex\" alignItems=\"center\" gap={0.5} mb={0.5}>\n                <Schedule sx={{ fontSize: 16, color: 'primary.main' }} />\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  On-Time\n                </Typography>\n                <Tooltip title=\"Percentage of deliveries on time\">\n                  <IconButton size=\"small\" sx={{ p: 0 }}>\n                    <Info sx={{ fontSize: 14 }} />\n                  </IconButton>\n                </Tooltip>\n              </Box>\n              <Typography variant=\"h6\" fontWeight=\"bold\">\n                {formatPercentage(data.on_time_rate)}\n              </Typography>\n              <Box display=\"flex\" alignItems=\"center\" gap={0.5}>\n                {data.on_time_rate >= 90 ? (\n                  <TrendingUp sx={{ fontSize: 14, color: 'success.main' }} />\n                ) : (\n                  <TrendingDown sx={{ fontSize: 14, color: 'error.main' }} />\n                )}\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  Avg {data.avg_delivery_days.toFixed(1)} days\n                </Typography>\n              </Box>\n            </Box>\n          </Grid>\n\n          {/* Average Rating */}\n          <Grid item xs={6}>\n            <Box>\n              <Box display=\"flex\" alignItems=\"center\" gap={0.5} mb={0.5}>\n                <Star sx={{ fontSize: 16, color: 'warning.main' }} />\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  Rating\n                </Typography>\n              </Box>\n              <Typography variant=\"h6\" fontWeight=\"bold\">\n                {formatRating(data.avg_rating)} / 5.0\n              </Typography>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                {data.total_reviews} reviews\n              </Typography>\n            </Box>\n          </Grid>\n\n          {/* Customer Satisfaction */}\n          <Grid item xs={6}>\n            <Box>\n              <Box display=\"flex\" alignItems=\"center\" gap={0.5} mb={0.5}>\n                <People sx={{ fontSize: 16, color: 'info.main' }} />\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  Satisfaction\n                </Typography>\n              </Box>\n              <Typography variant=\"h6\" fontWeight=\"bold\">\n                {formatPercentage(data.customer_satisfaction_score)}\n              </Typography>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                {data.coverage_area_count} areas\n              </Typography>\n            </Box>\n          </Grid>\n        </Grid>\n\n        {/* Period Info */}\n        {showDetails && (\n          <Box mt={2} pt={2} borderTop={1} borderColor=\"divider\">\n            <Typography variant=\"caption\" color=\"text.secondary\">\n              Period: {new Date(data.period_start).toLocaleDateString()} - {new Date(data.period_end).toLocaleDateString()}\n            </Typography>\n          </Box>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default ServicePerformanceCard;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\service-performance\\ServiceReviewsList.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Divider' is defined but never used.","line":18,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FilterList' is defined but never used.","line":31,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":13},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Tooltip' is not defined.","line":265,"column":28,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":265,"endColumn":35},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":277,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":277,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9476,9479],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9476,9479],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Service Reviews List Component\n * Week 4 Phase 6 - Frontend Components\n * \n * Display service-specific customer reviews\n */\n\nimport React, { useState } from 'react';\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  Typography,\n  Box,\n  Rating,\n  Chip,\n  Avatar,\n  Divider,\n  Button,\n  TextField,\n  InputAdornment,\n  Select,\n  MenuItem,\n  FormControl,\n  InputLabel,\n  Paper,\n  LinearProgress\n} from '@mui/material';\nimport {\n  Search,\n  FilterList,\n  VerifiedUser,\n  ThumbUp,\n  Schedule,\n  LocalShipping,\n  ChatBubble\n} from '@mui/icons-material';\n\ninterface ServiceReview {\n  service_review_id: string;\n  review_id: string;\n  service_name: string;\n  courier_name: string;\n  rating: number;\n  review_text: string;\n  delivery_speed_rating: number;\n  package_condition_rating: number;\n  communication_rating: number;\n  service_quality_rating?: number;\n  location_convenience_rating?: number;\n  facility_condition_rating?: number;\n  staff_helpfulness_rating?: number;\n  service_comment?: string;\n  is_verified: boolean;\n  created_at: string;\n}\n\ninterface ServiceReviewsListProps {\n  reviews: ServiceReview[];\n  serviceName: string;\n  stats?: {\n    total_reviews: number;\n    avg_rating: number;\n    avg_service_quality: number;\n    verified_count: number;\n    rating_distribution: {\n      5: number;\n      4: number;\n      3: number;\n      2: number;\n      1: number;\n    };\n  };\n}\n\nexport const ServiceReviewsList: React.FC<ServiceReviewsListProps> = ({\n  reviews,\n  serviceName,\n  stats\n}) => {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterRating, setFilterRating] = useState<number | 'all'>('all');\n  const [showVerifiedOnly, setShowVerifiedOnly] = useState(false);\n\n  // Filter reviews\n  const filteredReviews = reviews.filter(review => {\n    const matchesSearch = review.review_text?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         review.service_comment?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         review.courier_name.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesRating = filterRating === 'all' || review.rating === filterRating;\n    const matchesVerified = !showVerifiedOnly || review.is_verified;\n    \n    return matchesSearch && matchesRating && matchesVerified;\n  });\n\n  // Format date\n  const formatDate = (dateString: string): string => {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diffTime = Math.abs(now.getTime() - date.getTime());\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    \n    if (diffDays === 0) return 'Today';\n    if (diffDays === 1) return 'Yesterday';\n    if (diffDays < 7) return `${diffDays} days ago`;\n    if (diffDays < 30) return `${Math.floor(diffDays / 7)} weeks ago`;\n    if (diffDays < 365) return `${Math.floor(diffDays / 30)} months ago`;\n    return date.toLocaleDateString();\n  };\n\n  // Get rating color\n  const getRatingColor = (rating: number): string => {\n    if (rating >= 4.5) return 'success';\n    if (rating >= 3.5) return 'info';\n    if (rating >= 2.5) return 'warning';\n    return 'error';\n  };\n\n  return (\n    <Card>\n      <CardHeader\n        title={\n          <Box>\n            <Typography variant=\"h6\">\n              Service Reviews\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              {serviceName}\n            </Typography>\n          </Box>\n        }\n      />\n\n      <CardContent>\n        {/* Statistics Summary */}\n        {stats && (\n          <Box mb={3} p={2} bgcolor=\"grey.50\" borderRadius={2}>\n            <Box display=\"flex\" gap={3} flexWrap=\"wrap\" mb={2}>\n              <Box>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  Total Reviews\n                </Typography>\n                <Typography variant=\"h6\">\n                  {stats.total_reviews}\n                </Typography>\n              </Box>\n              <Box>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  Average Rating\n                </Typography>\n                <Box display=\"flex\" alignItems=\"center\" gap={1}>\n                  <Typography variant=\"h6\">\n                    {stats.avg_rating.toFixed(1)}\n                  </Typography>\n                  <Rating value={stats.avg_rating} readOnly size=\"small\" precision={0.1} />\n                </Box>\n              </Box>\n              <Box>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  Service Quality\n                </Typography>\n                <Typography variant=\"h6\">\n                  {stats.avg_service_quality.toFixed(1)} / 5.0\n                </Typography>\n              </Box>\n              <Box>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  Verified Reviews\n                </Typography>\n                <Typography variant=\"h6\">\n                  {stats.verified_count} ({((stats.verified_count / stats.total_reviews) * 100).toFixed(0)}%)\n                </Typography>\n              </Box>\n            </Box>\n\n            {/* Rating Distribution */}\n            <Box>\n              <Typography variant=\"caption\" color=\"text.secondary\" gutterBottom>\n                Rating Distribution\n              </Typography>\n              {[5, 4, 3, 2, 1].map((star) => (\n                <Box key={star} display=\"flex\" alignItems=\"center\" gap={1} mb={0.5}>\n                  <Typography variant=\"caption\" sx={{ minWidth: 20 }}>\n                    {star}\n                  </Typography>\n                  <LinearProgress\n                    variant=\"determinate\"\n                    value={(stats.rating_distribution[star as keyof typeof stats.rating_distribution] / stats.total_reviews) * 100}\n                    sx={{ flexGrow: 1, height: 6, borderRadius: 3 }}\n                  />\n                  <Typography variant=\"caption\" sx={{ minWidth: 30 }}>\n                    {stats.rating_distribution[star as keyof typeof stats.rating_distribution]}\n                  </Typography>\n                </Box>\n              ))}\n            </Box>\n          </Box>\n        )}\n\n        {/* Filters */}\n        <Box display=\"flex\" gap={2} mb={3} flexWrap=\"wrap\">\n          <TextField\n            placeholder=\"Search reviews...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            size=\"small\"\n            sx={{ flexGrow: 1, minWidth: 200 }}\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  <Search />\n                </InputAdornment>\n              )\n            }}\n          />\n          <FormControl size=\"small\" sx={{ minWidth: 120 }}>\n            <InputLabel>Rating</InputLabel>\n            <Select\n              value={filterRating}\n              label=\"Rating\"\n              onChange={(e) => setFilterRating(e.target.value as number | 'all')}\n            >\n              <MenuItem value=\"all\">All Ratings</MenuItem>\n              <MenuItem value={5}>5 Stars</MenuItem>\n              <MenuItem value={4}>4 Stars</MenuItem>\n              <MenuItem value={3}>3 Stars</MenuItem>\n              <MenuItem value={2}>2 Stars</MenuItem>\n              <MenuItem value={1}>1 Star</MenuItem>\n            </Select>\n          </FormControl>\n          <Button\n            variant={showVerifiedOnly ? 'contained' : 'outlined'}\n            size=\"small\"\n            startIcon={<VerifiedUser />}\n            onClick={() => setShowVerifiedOnly(!showVerifiedOnly)}\n          >\n            Verified Only\n          </Button>\n        </Box>\n\n        {/* Reviews List */}\n        <Box display=\"flex\" flexDirection=\"column\" gap={2}>\n          {filteredReviews.length === 0 ? (\n            <Paper variant=\"outlined\" sx={{ p: 3, textAlign: 'center' }}>\n              <ChatBubble sx={{ fontSize: 48, color: 'text.secondary', mb: 1 }} />\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                No reviews match your filters\n              </Typography>\n            </Paper>\n          ) : (\n            filteredReviews.map((review) => (\n              <Paper key={review.service_review_id} variant=\"outlined\" sx={{ p: 2 }}>\n                {/* Review Header */}\n                <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"start\" mb={2}>\n                  <Box display=\"flex\" gap={2} alignItems=\"center\">\n                    <Avatar sx={{ bgcolor: 'primary.main' }}>\n                      {review.courier_name.charAt(0)}\n                    </Avatar>\n                    <Box>\n                      <Box display=\"flex\" alignItems=\"center\" gap={1}>\n                        <Typography variant=\"subtitle2\" fontWeight=\"bold\">\n                          {review.courier_name}\n                        </Typography>\n                        {review.is_verified && (\n                          <Tooltip title=\"Verified Purchase\">\n                            <VerifiedUser sx={{ fontSize: 16, color: 'success.main' }} />\n                          </Tooltip>\n                        )}\n                      </Box>\n                      <Typography variant=\"caption\" color=\"text.secondary\">\n                        {formatDate(review.created_at)}\n                      </Typography>\n                    </Box>\n                  </Box>\n                  <Chip\n                    label={`${review.rating.toFixed(1)} / 5.0`}\n                    color={getRatingColor(review.rating) as any}\n                    size=\"small\"\n                  />\n                </Box>\n\n                {/* Overall Rating */}\n                <Box mb={2}>\n                  <Rating value={review.rating} readOnly size=\"small\" precision={0.5} />\n                </Box>\n\n                {/* Review Text */}\n                {review.review_text && (\n                  <Typography variant=\"body2\" paragraph>\n                    {review.review_text}\n                  </Typography>\n                )}\n\n                {/* Service Comment */}\n                {review.service_comment && (\n                  <Box mb={2} p={1.5} bgcolor=\"grey.50\" borderRadius={1}>\n                    <Typography variant=\"caption\" color=\"text.secondary\" display=\"block\" mb={0.5}>\n                      Service-Specific Feedback:\n                    </Typography>\n                    <Typography variant=\"body2\">\n                      {review.service_comment}\n                    </Typography>\n                  </Box>\n                )}\n\n                {/* Detailed Ratings */}\n                <Box display=\"flex\" gap={2} flexWrap=\"wrap\">\n                  {review.delivery_speed_rating && (\n                    <Box>\n                      <Box display=\"flex\" alignItems=\"center\" gap={0.5} mb={0.5}>\n                        <Schedule sx={{ fontSize: 14, color: 'text.secondary' }} />\n                        <Typography variant=\"caption\" color=\"text.secondary\">\n                          Delivery Speed\n                        </Typography>\n                      </Box>\n                      <Rating value={review.delivery_speed_rating} readOnly size=\"small\" />\n                    </Box>\n                  )}\n                  {review.package_condition_rating && (\n                    <Box>\n                      <Box display=\"flex\" alignItems=\"center\" gap={0.5} mb={0.5}>\n                        <LocalShipping sx={{ fontSize: 14, color: 'text.secondary' }} />\n                        <Typography variant=\"caption\" color=\"text.secondary\">\n                          Package Condition\n                        </Typography>\n                      </Box>\n                      <Rating value={review.package_condition_rating} readOnly size=\"small\" />\n                    </Box>\n                  )}\n                  {review.communication_rating && (\n                    <Box>\n                      <Box display=\"flex\" alignItems=\"center\" gap={0.5} mb={0.5}>\n                        <ChatBubble sx={{ fontSize: 14, color: 'text.secondary' }} />\n                        <Typography variant=\"caption\" color=\"text.secondary\">\n                          Communication\n                        </Typography>\n                      </Box>\n                      <Rating value={review.communication_rating} readOnly size=\"small\" />\n                    </Box>\n                  )}\n                  {review.service_quality_rating && (\n                    <Box>\n                      <Box display=\"flex\" alignItems=\"center\" gap={0.5} mb={0.5}>\n                        <ThumbUp sx={{ fontSize: 14, color: 'text.secondary' }} />\n                        <Typography variant=\"caption\" color=\"text.secondary\">\n                          Service Quality\n                        </Typography>\n                      </Box>\n                      <Rating value={review.service_quality_rating} readOnly size=\"small\" />\n                    </Box>\n                  )}\n                </Box>\n              </Paper>\n            ))\n          )}\n        </Box>\n\n        {/* Load More (if needed) */}\n        {filteredReviews.length > 0 && filteredReviews.length < reviews.length && (\n          <Box textAlign=\"center\" mt={3}>\n            <Button variant=\"outlined\">\n              Load More Reviews\n            </Button>\n          </Box>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default ServiceReviewsList;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\service-performance\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\ChangePasswordForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":75,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":75,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2306,2309],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2306,2309],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  TextField,\n  Button,\n  Alert,\n  InputAdornment,\n  IconButton,\n  LinearProgress,\n} from '@mui/material';\nimport {\n  Visibility,\n  VisibilityOff,\n  Lock,\n  CheckCircle,\n} from '@mui/icons-material';\nimport { useMutation } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport { toast } from 'react-hot-toast';\n\ninterface PasswordStrength {\n  score: number;\n  label: string;\n  color: string;\n}\n\nexport const ChangePasswordForm: React.FC = () => {\n  const [currentPassword, setCurrentPassword] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [showCurrentPassword, setShowCurrentPassword] = useState(false);\n  const [showNewPassword, setShowNewPassword] = useState(false);\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\n  const [error, setError] = useState('');\n\n  // Password strength calculator\n  const calculatePasswordStrength = (password: string): PasswordStrength => {\n    let score = 0;\n    \n    if (password.length >= 8) score++;\n    if (password.length >= 12) score++;\n    if (/[a-z]/.test(password) && /[A-Z]/.test(password)) score++;\n    if (/\\d/.test(password)) score++;\n    if (/[^a-zA-Z0-9]/.test(password)) score++;\n\n    const strengths: PasswordStrength[] = [\n      { score: 0, label: 'Very Weak', color: '#f44336' },\n      { score: 1, label: 'Weak', color: '#ff9800' },\n      { score: 2, label: 'Fair', color: '#ffc107' },\n      { score: 3, label: 'Good', color: '#8bc34a' },\n      { score: 4, label: 'Strong', color: '#4caf50' },\n      { score: 5, label: 'Very Strong', color: '#2e7d32' },\n    ];\n\n    return strengths[score];\n  };\n\n  const passwordStrength = calculatePasswordStrength(newPassword);\n\n  // Change password mutation\n  const changePasswordMutation = useMutation({\n    mutationFn: async (data: { currentPassword: string; newPassword: string }) => {\n      return await apiClient.put('/auth/change-password', data);\n    },\n    onSuccess: () => {\n      toast.success('Password changed successfully!');\n      setCurrentPassword('');\n      setNewPassword('');\n      setConfirmPassword('');\n      setError('');\n    },\n    onError: (error: any) => {\n      const message = error.response?.data?.message || 'Failed to change password';\n      setError(message);\n      toast.error(message);\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n\n    // Validation\n    if (!currentPassword || !newPassword || !confirmPassword) {\n      setError('All fields are required');\n      return;\n    }\n\n    if (newPassword.length < 8) {\n      setError('New password must be at least 8 characters long');\n      return;\n    }\n\n    if (newPassword === currentPassword) {\n      setError('New password must be different from current password');\n      return;\n    }\n\n    if (newPassword !== confirmPassword) {\n      setError('New passwords do not match');\n      return;\n    }\n\n    if (passwordStrength.score < 2) {\n      setError('Password is too weak. Please choose a stronger password');\n      return;\n    }\n\n    changePasswordMutation.mutate({\n      currentPassword,\n      newPassword,\n    });\n  };\n\n  const isFormValid = \n    currentPassword && \n    newPassword && \n    confirmPassword && \n    newPassword === confirmPassword &&\n    newPassword.length >= 8 &&\n    passwordStrength.score >= 2;\n\n  return (\n    <Card>\n      <CardContent sx={{ p: 3 }}>\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, mb: 3 }}>\n          <Lock sx={{ fontSize: 24 }} />\n          <Typography variant=\"h5\">Change Password</Typography>\n        </Box>\n\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n          Keep your account secure by using a strong, unique password\n        </Typography>\n\n        {error && (\n          <Alert severity=\"error\" sx={{ mb: 3 }}>\n            {error}\n          </Alert>\n        )}\n\n        <form onSubmit={handleSubmit}>\n          <Box sx={{ display: 'flex', flexDirection: 'column', gap: 3 }}>\n            {/* Current Password */}\n            <TextField\n              fullWidth\n              label=\"Current Password\"\n              type={showCurrentPassword ? 'text' : 'password'}\n              value={currentPassword}\n              onChange={(e) => setCurrentPassword(e.target.value)}\n              required\n              InputProps={{\n                endAdornment: (\n                  <InputAdornment position=\"end\">\n                    <IconButton\n                      onClick={() => setShowCurrentPassword(!showCurrentPassword)}\n                      edge=\"end\"\n                    >\n                      {showCurrentPassword ? <VisibilityOff /> : <Visibility />}\n                    </IconButton>\n                  </InputAdornment>\n                ),\n              }}\n            />\n\n            {/* New Password */}\n            <Box>\n              <TextField\n                fullWidth\n                label=\"New Password\"\n                type={showNewPassword ? 'text' : 'password'}\n                value={newPassword}\n                onChange={(e) => setNewPassword(e.target.value)}\n                required\n                helperText=\"At least 8 characters with uppercase, lowercase, numbers, and symbols\"\n                InputProps={{\n                  endAdornment: (\n                    <InputAdornment position=\"end\">\n                      <IconButton\n                        onClick={() => setShowNewPassword(!showNewPassword)}\n                        edge=\"end\"\n                      >\n                        {showNewPassword ? <VisibilityOff /> : <Visibility />}\n                      </IconButton>\n                    </InputAdornment>\n                  ),\n                }}\n              />\n              \n              {/* Password Strength Indicator */}\n              {newPassword && (\n                <Box sx={{ mt: 1 }}>\n                  <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 0.5 }}>\n                    <Typography variant=\"caption\" color=\"text.secondary\">\n                      Password Strength:\n                    </Typography>\n                    <Typography \n                      variant=\"caption\" \n                      sx={{ color: passwordStrength.color, fontWeight: 'bold' }}\n                    >\n                      {passwordStrength.label}\n                    </Typography>\n                  </Box>\n                  <LinearProgress\n                    variant=\"determinate\"\n                    value={(passwordStrength.score / 5) * 100}\n                    sx={{\n                      height: 6,\n                      borderRadius: 3,\n                      backgroundColor: '#e0e0e0',\n                      '& .MuiLinearProgress-bar': {\n                        backgroundColor: passwordStrength.color,\n                      },\n                    }}\n                  />\n                </Box>\n              )}\n            </Box>\n\n            {/* Confirm Password */}\n            <TextField\n              fullWidth\n              label=\"Confirm New Password\"\n              type={showConfirmPassword ? 'text' : 'password'}\n              value={confirmPassword}\n              onChange={(e) => setConfirmPassword(e.target.value)}\n              required\n              error={confirmPassword !== '' && newPassword !== confirmPassword}\n              helperText={\n                confirmPassword !== '' && newPassword !== confirmPassword\n                  ? 'Passwords do not match'\n                  : ''\n              }\n              InputProps={{\n                endAdornment: (\n                  <InputAdornment position=\"end\">\n                    <IconButton\n                      onClick={() => setShowConfirmPassword(!showConfirmPassword)}\n                      edge=\"end\"\n                    >\n                      {showConfirmPassword ? <VisibilityOff /> : <Visibility />}\n                    </IconButton>\n                  </InputAdornment>\n                ),\n              }}\n            />\n\n            {/* Password Requirements */}\n            <Box sx={{ p: 2, bgcolor: 'background.default', borderRadius: 1 }}>\n              <Typography variant=\"subtitle2\" gutterBottom>\n                Password Requirements:\n              </Typography>\n              <Box sx={{ display: 'flex', flexDirection: 'column', gap: 0.5 }}>\n                {[\n                  { met: newPassword.length >= 8, text: 'At least 8 characters' },\n                  { met: /[a-z]/.test(newPassword) && /[A-Z]/.test(newPassword), text: 'Uppercase and lowercase letters' },\n                  { met: /\\d/.test(newPassword), text: 'At least one number' },\n                  { met: /[^a-zA-Z0-9]/.test(newPassword), text: 'At least one special character' },\n                ].map((req, index) => (\n                  <Box key={index} sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                    <CheckCircle \n                      sx={{ \n                        fontSize: 16, \n                        color: req.met ? 'success.main' : 'text.disabled' \n                      }} \n                    />\n                    <Typography \n                      variant=\"caption\" \n                      sx={{ color: req.met ? 'text.primary' : 'text.secondary' }}\n                    >\n                      {req.text}\n                    </Typography>\n                  </Box>\n                ))}\n              </Box>\n            </Box>\n\n            {/* Submit Button */}\n            <Button\n              type=\"submit\"\n              variant=\"contained\"\n              size=\"large\"\n              disabled={!isFormValid || changePasswordMutation.isPending}\n              sx={{ mt: 1 }}\n            >\n              {changePasswordMutation.isPending ? 'Changing Password...' : 'Change Password'}\n            </Button>\n          </Box>\n        </form>\n      </CardContent>\n    </Card>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\EmailTemplateEditor.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":153,"column":68,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[4090,4207],"text":"\n            Your order was recently delivered by [Courier Name]. We&apos;d love to hear about your experience!\n          "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[4090,4207],"text":"\n            Your order was recently delivered by [Courier Name]. We&lsquo;d love to hear about your experience!\n          "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[4090,4207],"text":"\n            Your order was recently delivered by [Courier Name]. We&#39;d love to hear about your experience!\n          "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[4090,4207],"text":"\n            Your order was recently delivered by [Courier Name]. We&rsquo;d love to hear about your experience!\n          "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  TextField,\n  Button,\n  Grid,\n  Alert,\n  CircularProgress,\n  Divider,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Paper,\n} from '@mui/material';\nimport {\n  Save,\n  Refresh,\n  Preview,\n  Email,\n} from '@mui/icons-material';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport { toast } from 'react-hot-toast';\n\ninterface EmailTemplate {\n  template_id?: string;\n  template_type: string;\n  custom_text: string;\n  logo_url: string;\n  primary_color: string;\n  secondary_color: string;\n}\n\nexport const EmailTemplateEditor: React.FC = () => {\n  const queryClient = useQueryClient();\n  const [selectedType, setSelectedType] = useState('review_request');\n  const [customText, setCustomText] = useState('');\n  const [logoUrl, setLogoUrl] = useState('');\n  const [primaryColor, setPrimaryColor] = useState('#667eea');\n  const [secondaryColor, setSecondaryColor] = useState('#764ba2');\n  const [showPreview, setShowPreview] = useState(false);\n\n  // Fetch existing templates\n  const { data: templates, isLoading } = useQuery({\n    queryKey: ['email-templates'],\n    queryFn: async () => {\n      const response = await apiClient.get('/email-templates');\n      return response.data.templates || [];\n    },\n  });\n\n  // Load template when type changes\n  useEffect(() => {\n    if (templates && templates.length > 0) {\n      const template = templates.find((t: EmailTemplate) => t.template_type === selectedType);\n      if (template) {\n        setCustomText(template.custom_text || '');\n        setLogoUrl(template.logo_url || '');\n        setPrimaryColor(template.primary_color || '#667eea');\n        setSecondaryColor(template.secondary_color || '#764ba2');\n      } else {\n        // Reset to defaults\n        setCustomText('');\n        setLogoUrl('');\n        setPrimaryColor('#667eea');\n        setSecondaryColor('#764ba2');\n      }\n    }\n  }, [selectedType, templates]);\n\n  // Save template mutation\n  const saveMutation = useMutation({\n    mutationFn: async (data: EmailTemplate) => {\n      return await apiClient.post('/email-templates', data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['email-templates'] });\n      toast.success('Email template saved successfully!');\n    },\n    onError: () => {\n      toast.error('Failed to save email template');\n    },\n  });\n\n  const handleSave = () => {\n    saveMutation.mutate({\n      template_type: selectedType,\n      custom_text: customText,\n      logo_url: logoUrl,\n      primary_color: primaryColor,\n      secondary_color: secondaryColor,\n    });\n  };\n\n  const handleReset = () => {\n    setCustomText('');\n    setLogoUrl('');\n    setPrimaryColor('#667eea');\n    setSecondaryColor('#764ba2');\n  };\n\n  // Email preview component\n  const EmailPreview = () => (\n    <Paper\n      elevation={3}\n      sx={{\n        p: 3,\n        background: '#f5f5f5',\n        maxWidth: 600,\n        mx: 'auto',\n      }}\n    >\n      <Box\n        sx={{\n          background: 'white',\n          borderRadius: 2,\n          overflow: 'hidden',\n        }}\n      >\n        {/* Header */}\n        <Box\n          sx={{\n            background: `linear-gradient(135deg, ${primaryColor} 0%, ${secondaryColor} 100%)`,\n            p: 3,\n            textAlign: 'center',\n          }}\n        >\n          {logoUrl && (\n            <img\n              src={logoUrl}\n              alt=\"Logo\"\n              style={{ maxHeight: '60px', marginBottom: '16px' }}\n              onError={(e) => {\n                (e.target as HTMLImageElement).style.display = 'none';\n              }}\n            />\n          )}\n          <Typography variant=\"h5\" sx={{ color: 'white', fontWeight: 'bold' }}>\n            How was your delivery?\n          </Typography>\n        </Box>\n\n        {/* Body */}\n        <Box sx={{ p: 3 }}>\n          <Typography variant=\"body1\" paragraph>\n            Hi [Customer Name],\n          </Typography>\n          <Typography variant=\"body1\" paragraph>\n            Your order was recently delivered by [Courier Name]. We'd love to hear about your experience!\n          </Typography>\n          \n          {customText && (\n            <Box\n              sx={{\n                p: 2,\n                background: '#f9f9f9',\n                borderRadius: 1,\n                borderLeft: `4px solid ${primaryColor}`,\n                mb: 2,\n              }}\n            >\n              <Typography variant=\"body2\" sx={{ fontStyle: 'italic' }}>\n                {customText}\n              </Typography>\n            </Box>\n          )}\n\n          <Typography variant=\"body1\" paragraph>\n            Please take a moment to rate your delivery experience:\n          </Typography>\n\n          {/* Rating buttons */}\n          <Box sx={{ display: 'flex', gap: 1, justifyContent: 'center', my: 3 }}>\n            {[1, 2, 3, 4, 5].map((star) => (\n              <Box\n                key={star}\n                sx={{\n                  width: 40,\n                  height: 40,\n                  borderRadius: '50%',\n                  background: primaryColor,\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  color: 'white',\n                  fontWeight: 'bold',\n                  cursor: 'pointer',\n                }}\n              >\n                \n              </Box>\n            ))}\n          </Box>\n\n          <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\">\n            Your feedback helps us improve our delivery service\n          </Typography>\n        </Box>\n\n        {/* Footer */}\n        <Box\n          sx={{\n            p: 2,\n            background: '#f9f9f9',\n            borderTop: '1px solid #e0e0e0',\n            textAlign: 'center',\n          }}\n        >\n          <Typography variant=\"caption\" color=\"text.secondary\">\n             2025 Your Company. All rights reserved.\n          </Typography>\n        </Box>\n      </Box>\n    </Paper>\n  );\n\n  if (isLoading) {\n    return (\n      <Box sx={{ display: 'flex', justifyContent: 'center', p: 4 }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom>\n        Email Template Customization\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\n        Customize your review request emails with your branding\n      </Typography>\n\n      <Grid container spacing={3}>\n        {/* Editor */}\n        <Grid item xs={12} md={showPreview ? 6 : 12}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Template Editor\n              </Typography>\n\n              {/* Template Type Selector */}\n              <FormControl fullWidth sx={{ mb: 3 }}>\n                <InputLabel>Template Type</InputLabel>\n                <Select\n                  value={selectedType}\n                  label=\"Template Type\"\n                  onChange={(e) => setSelectedType(e.target.value)}\n                >\n                  <MenuItem value=\"review_request\">Review Request</MenuItem>\n                  <MenuItem value=\"order_confirmation\">Order Confirmation</MenuItem>\n                  <MenuItem value=\"delivery_notification\">Delivery Notification</MenuItem>\n                </Select>\n              </FormControl>\n\n              <Divider sx={{ my: 2 }} />\n\n              {/* Logo URL */}\n              <TextField\n                fullWidth\n                label=\"Logo URL\"\n                value={logoUrl}\n                onChange={(e) => setLogoUrl(e.target.value)}\n                placeholder=\"https://example.com/logo.png\"\n                helperText=\"Enter the URL of your company logo\"\n                sx={{ mb: 2 }}\n              />\n\n              {/* Custom Message */}\n              <TextField\n                fullWidth\n                label=\"Custom Message\"\n                value={customText}\n                onChange={(e) => setCustomText(e.target.value)}\n                placeholder=\"Add a personal message to your customers...\"\n                multiline\n                rows={4}\n                helperText=\"This message will appear in the email body\"\n                sx={{ mb: 2 }}\n              />\n\n              {/* Color Pickers */}\n              <Grid container spacing={2} sx={{ mb: 2 }}>\n                <Grid item xs={6}>\n                  <Typography variant=\"subtitle2\" gutterBottom>\n                    Primary Color\n                  </Typography>\n                  <Box sx={{ display: 'flex', gap: 1, alignItems: 'center' }}>\n                    <input\n                      type=\"color\"\n                      value={primaryColor}\n                      onChange={(e) => setPrimaryColor(e.target.value)}\n                      style={{\n                        width: '60px',\n                        height: '40px',\n                        border: '1px solid #ccc',\n                        borderRadius: '4px',\n                        cursor: 'pointer',\n                      }}\n                    />\n                    <TextField\n                      value={primaryColor}\n                      onChange={(e) => setPrimaryColor(e.target.value)}\n                      size=\"small\"\n                      sx={{ flex: 1 }}\n                    />\n                  </Box>\n                </Grid>\n                <Grid item xs={6}>\n                  <Typography variant=\"subtitle2\" gutterBottom>\n                    Secondary Color\n                  </Typography>\n                  <Box sx={{ display: 'flex', gap: 1, alignItems: 'center' }}>\n                    <input\n                      type=\"color\"\n                      value={secondaryColor}\n                      onChange={(e) => setSecondaryColor(e.target.value)}\n                      style={{\n                        width: '60px',\n                        height: '40px',\n                        border: '1px solid #ccc',\n                        borderRadius: '4px',\n                        cursor: 'pointer',\n                      }}\n                    />\n                    <TextField\n                      value={secondaryColor}\n                      onChange={(e) => setSecondaryColor(e.target.value)}\n                      size=\"small\"\n                      sx={{ flex: 1 }}\n                    />\n                  </Box>\n                </Grid>\n              </Grid>\n\n              <Alert severity=\"info\" sx={{ mb: 2 }}>\n                <Typography variant=\"body2\">\n                  <strong>Tip:</strong> Use your brand colors to make emails recognizable to your customers\n                </Typography>\n              </Alert>\n\n              {/* Action Buttons */}\n              <Box sx={{ display: 'flex', gap: 2 }}>\n                <Button\n                  variant=\"contained\"\n                  startIcon={<Save />}\n                  onClick={handleSave}\n                  disabled={saveMutation.isPending}\n                >\n                  {saveMutation.isPending ? 'Saving...' : 'Save Template'}\n                </Button>\n                <Button\n                  variant=\"outlined\"\n                  startIcon={<Refresh />}\n                  onClick={handleReset}\n                >\n                  Reset\n                </Button>\n                <Button\n                  variant=\"outlined\"\n                  startIcon={<Preview />}\n                  onClick={() => setShowPreview(!showPreview)}\n                >\n                  {showPreview ? 'Hide' : 'Show'} Preview\n                </Button>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        {/* Preview */}\n        {showPreview && (\n          <Grid item xs={12} md={6}>\n            <Card>\n              <CardContent>\n                <Typography variant=\"h6\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                  <Email /> Live Preview\n                </Typography>\n                <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\n                  This is how your email will look to customers\n                </Typography>\n                <EmailPreview />\n              </CardContent>\n            </Card>\n          </Grid>\n        )}\n      </Grid>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\SessionManagement.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":138,"column":52,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[4032,4110],"text":"\n              Manage devices and sessions where you&apos;re logged in\n            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[4032,4110],"text":"\n              Manage devices and sessions where you&lsquo;re logged in\n            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[4032,4110],"text":"\n              Manage devices and sessions where you&#39;re logged in\n            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[4032,4110],"text":"\n              Manage devices and sessions where you&rsquo;re logged in\n            "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport { apiClient } from '@/services/apiClient';\nimport { \n  Monitor, \n  Smartphone, \n  Tablet, \n  MapPin, \n  Clock, \n  LogOut, \n  Shield,\n  AlertCircle,\n  CheckCircle\n} from 'lucide-react';\nimport toast from 'react-hot-toast';\n\ninterface Session {\n  session_id: string;\n  device_type: string;\n  device_name: string;\n  browser: string;\n  os: string;\n  ip_address: string;\n  location: string;\n  last_active: string;\n  created_at: string;\n  is_current: boolean;\n}\n\nexport const SessionManagement = () => {\n  const [sessions, setSessions] = useState<Session[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [revoking, setRevoking] = useState<string | null>(null);\n\n  useEffect(() => {\n    fetchSessions();\n  }, []);\n\n  const fetchSessions = async () => {\n    try {\n      setLoading(true);\n      const response = await apiClient.get('/auth/sessions');\n      setSessions(response.data.sessions || []);\n    } catch (error) {\n      console.error('Failed to fetch sessions:', error);\n      toast.error('Failed to load active sessions');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const revokeSession = async (sessionId: string) => {\n    if (!confirm('Are you sure you want to revoke this session? The device will be logged out immediately.')) {\n      return;\n    }\n\n    try {\n      setRevoking(sessionId);\n      await apiClient.delete(`/auth/sessions/${sessionId}`);\n      toast.success('Session revoked successfully');\n      fetchSessions();\n    } catch (error) {\n      console.error('Failed to revoke session:', error);\n      toast.error('Failed to revoke session');\n    } finally {\n      setRevoking(null);\n    }\n  };\n\n  const revokeAllOtherSessions = async () => {\n    if (!confirm('Are you sure you want to log out all other devices? This will end all sessions except your current one.')) {\n      return;\n    }\n\n    try {\n      setLoading(true);\n      await apiClient.post('/auth/sessions/revoke-all');\n      toast.success('All other sessions have been revoked');\n      fetchSessions();\n    } catch (error) {\n      console.error('Failed to revoke sessions:', error);\n      toast.error('Failed to revoke sessions');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getDeviceIcon = (deviceType: string) => {\n    switch (deviceType.toLowerCase()) {\n      case 'mobile':\n        return <Smartphone className=\"w-5 h-5\" />;\n      case 'tablet':\n        return <Tablet className=\"w-5 h-5\" />;\n      default:\n        return <Monitor className=\"w-5 h-5\" />;\n    }\n  };\n\n  const formatLastActive = (timestamp: string) => {\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diffMs = now.getTime() - date.getTime();\n    const diffMins = Math.floor(diffMs / 60000);\n    const diffHours = Math.floor(diffMins / 60);\n    const diffDays = Math.floor(diffHours / 24);\n\n    if (diffMins < 1) return 'Just now';\n    if (diffMins < 60) return `${diffMins} minute${diffMins > 1 ? 's' : ''} ago`;\n    if (diffHours < 24) return `${diffHours} hour${diffHours > 1 ? 's' : ''} ago`;\n    return `${diffDays} day${diffDays > 1 ? 's' : ''} ago`;\n  };\n\n  if (loading && sessions.length === 0) {\n    return (\n      <div className=\"bg-white rounded-lg shadow p-6\">\n        <div className=\"animate-pulse space-y-4\">\n          <div className=\"h-4 bg-gray-200 rounded w-1/4\"></div>\n          <div className=\"space-y-3\">\n            {[1, 2, 3].map(i => (\n              <div key={i} className=\"h-20 bg-gray-200 rounded\"></div>\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white rounded-lg shadow\">\n      {/* Header */}\n      <div className=\"p-6 border-b border-gray-200\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-xl font-semibold text-gray-900 flex items-center gap-2\">\n              <Shield className=\"w-6 h-6 text-blue-600\" />\n              Active Sessions\n            </h2>\n            <p className=\"text-sm text-gray-600 mt-1\">\n              Manage devices and sessions where you're logged in\n            </p>\n          </div>\n          {sessions.length > 1 && (\n            <button\n              onClick={revokeAllOtherSessions}\n              disabled={loading}\n              className=\"px-4 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50\"\n            >\n              Revoke All Other Sessions\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Sessions List */}\n      <div className=\"p-6\">\n        {sessions.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <AlertCircle className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n            <p className=\"text-gray-600\">No active sessions found</p>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {sessions.map((session) => (\n              <div\n                key={session.session_id}\n                className={`p-4 rounded-lg border-2 transition-all ${\n                  session.is_current\n                    ? 'border-blue-500 bg-blue-50'\n                    : 'border-gray-200 hover:border-gray-300'\n                }`}\n              >\n                <div className=\"flex items-start justify-between\">\n                  {/* Device Info */}\n                  <div className=\"flex items-start gap-4 flex-1\">\n                    <div className=\"p-3 bg-white rounded-lg shadow-sm\">\n                      {getDeviceIcon(session.device_type)}\n                    </div>\n                    \n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-2 mb-1\">\n                        <h3 className=\"font-semibold text-gray-900\">\n                          {session.device_name || `${session.device_type} Device`}\n                        </h3>\n                        {session.is_current && (\n                          <span className=\"flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded-full\">\n                            <CheckCircle className=\"w-3 h-3\" />\n                            Current Session\n                          </span>\n                        )}\n                      </div>\n                      \n                      <div className=\"space-y-1 text-sm text-gray-600\">\n                        <p>{session.browser} on {session.os}</p>\n                        \n                        <div className=\"flex items-center gap-4 flex-wrap\">\n                          <span className=\"flex items-center gap-1\">\n                            <MapPin className=\"w-4 h-4\" />\n                            {session.location || session.ip_address}\n                          </span>\n                          \n                          <span className=\"flex items-center gap-1\">\n                            <Clock className=\"w-4 h-4\" />\n                            {formatLastActive(session.last_active)}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Actions */}\n                  {!session.is_current && (\n                    <button\n                      onClick={() => revokeSession(session.session_id)}\n                      disabled={revoking === session.session_id}\n                      className=\"flex items-center gap-2 px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50\"\n                    >\n                      <LogOut className=\"w-4 h-4\" />\n                      {revoking === session.session_id ? 'Revoking...' : 'Revoke'}\n                    </button>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* Info Box */}\n        <div className=\"mt-6 p-4 bg-gray-50 rounded-lg\">\n          <h4 className=\"font-medium text-gray-900 mb-2 flex items-center gap-2\">\n            <Shield className=\"w-4 h-4\" />\n            Security Tips\n          </h4>\n          <ul className=\"space-y-1 text-sm text-gray-600\">\n            <li> Review your active sessions regularly</li>\n            <li> Revoke sessions from devices you no longer use</li>\n            <li> If you see suspicious activity, revoke all sessions and change your password</li>\n            <li> Sessions automatically expire after 30 days of inactivity</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SessionManagement;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\admin\\AdminAnalyticsSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":5,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[141,144],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[141,144],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'platformStats' is defined but never used.","line":8,"column":81,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":94}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Box, Typography, Paper } from '@mui/material';\n\ninterface AdminAnalyticsSettingsProps {\n  platformStats: any;\n}\n\nexport const AdminAnalyticsSettings: React.FC<AdminAnalyticsSettingsProps> = ({ platformStats }) => {\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom>Analytics Settings</Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>Configure analytics and reporting</Typography>\n      <Paper sx={{ p: 3 }}><Typography>Analytics configuration coming soon.</Typography></Paper>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\admin\\AdminCouriersSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":5,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[140,143],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[140,143],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Box, Typography, Paper } from '@mui/material';\n\ninterface AdminCouriersSettingsProps {\n  platformStats: any;\n}\n\nexport const AdminCouriersSettings: React.FC<AdminCouriersSettingsProps> = ({ platformStats }) => {\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom>Courier Management</Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>Manage courier companies and delivery services</Typography>\n      <Paper sx={{ p: 3 }}><Typography>Courier management features coming soon. Total couriers: {platformStats?.totalCouriers || 0}</Typography></Paper>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\admin\\AdminDatabaseSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":5,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[140,143],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[140,143],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'platformStats' is defined but never used.","line":8,"column":79,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":92}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Box, Typography, Paper } from '@mui/material';\n\ninterface AdminDatabaseSettingsProps {\n  platformStats: any;\n}\n\nexport const AdminDatabaseSettings: React.FC<AdminDatabaseSettingsProps> = ({ platformStats }) => {\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom>Database Settings</Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>Manage database backups and maintenance</Typography>\n      <Paper sx={{ p: 3 }}><Typography>Database management coming soon.</Typography></Paper>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\admin\\AdminEmailSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":5,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[137,140],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[137,140],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'platformStats' is defined but never used.","line":8,"column":73,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":86}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Box, Typography, Paper } from '@mui/material';\n\ninterface AdminEmailSettingsProps {\n  platformStats: any;\n}\n\nexport const AdminEmailSettings: React.FC<AdminEmailSettingsProps> = ({ platformStats }) => {\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom>Email Settings</Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>Configure email templates and SMTP settings</Typography>\n      <Paper sx={{ p: 3 }}><Typography>Email configuration coming soon.</Typography></Paper>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\admin\\AdminLogsSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":5,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[136,139],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[136,139],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'platformStats' is defined but never used.","line":8,"column":71,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":84}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Box, Typography, Paper } from '@mui/material';\n\ninterface AdminLogsSettingsProps {\n  platformStats: any;\n}\n\nexport const AdminLogsSettings: React.FC<AdminLogsSettingsProps> = ({ platformStats }) => {\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom>Logs & Monitoring</Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>View system logs and monitoring data</Typography>\n      <Paper sx={{ p: 3 }}><Typography>Logs and monitoring coming soon.</Typography></Paper>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\admin\\AdminMerchantsSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":5,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[141,144],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[141,144],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Box, Typography, Paper } from '@mui/material';\n\ninterface AdminMerchantsSettingsProps {\n  platformStats: any;\n}\n\nexport const AdminMerchantsSettings: React.FC<AdminMerchantsSettingsProps> = ({ platformStats }) => {\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom>Merchant Management</Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        Manage merchants, shops, and merchant subscriptions\n      </Typography>\n      <Paper sx={{ p: 3 }}>\n        <Typography>Merchant management features coming soon. Total merchants: {platformStats?.totalMerchants || 0}</Typography>\n      </Paper>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\admin\\AdminNotificationSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":5,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[144,147],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[144,147],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'platformStats' is defined but never used.","line":8,"column":87,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":100}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Box, Typography, Paper } from '@mui/material';\n\ninterface AdminNotificationSettingsProps {\n  platformStats: any;\n}\n\nexport const AdminNotificationSettings: React.FC<AdminNotificationSettingsProps> = ({ platformStats }) => {\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom>Notification Settings</Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>Configure platform notifications and alerts</Typography>\n      <Paper sx={{ p: 3 }}><Typography>Notification settings coming soon.</Typography></Paper>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\admin\\AdminPlatformSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[247,250],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[247,250],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Box, Paper, Typography, Grid, Card, CardContent } from '@mui/material';\nimport { Dashboard, TrendingUp, People, ShoppingBag } from '@mui/icons-material';\n\ninterface AdminPlatformSettingsProps {\n  platformStats: any;\n}\n\nexport const AdminPlatformSettings: React.FC<AdminPlatformSettingsProps> = ({ platformStats }) => {\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom>\n        Platform Overview\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        Monitor overall platform health and key metrics\n      </Typography>\n\n      <Grid container spacing={3}>\n        <Grid item xs={12} md={6} lg={3}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\n                <Dashboard color=\"primary\" />\n                <Typography variant=\"h6\" sx={{ ml: 1 }}>\n                  Total Users\n                </Typography>\n              </Box>\n              <Typography variant=\"h4\">\n                {platformStats?.totalUsers || 0}\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} md={6} lg={3}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\n                <ShoppingBag color=\"success\" />\n                <Typography variant=\"h6\" sx={{ ml: 1 }}>\n                  Total Orders\n                </Typography>\n              </Box>\n              <Typography variant=\"h4\">\n                {platformStats?.totalOrders || 0}\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} md={6} lg={3}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\n                <People color=\"info\" />\n                <Typography variant=\"h6\" sx={{ ml: 1 }}>\n                  Active Merchants\n                </Typography>\n              </Box>\n              <Typography variant=\"h4\">\n                {platformStats?.activeMerchants || 0}\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} md={6} lg={3}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\n                <TrendingUp color=\"warning\" />\n                <Typography variant=\"h6\" sx={{ ml: 1 }}>\n                  Revenue\n                </Typography>\n              </Box>\n              <Typography variant=\"h4\">\n                ${platformStats?.totalRevenue || 0}\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n\n      <Paper sx={{ p: 3, mt: 3 }}>\n        <Typography variant=\"h6\" gutterBottom>\n          Platform Settings\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\">\n          Platform-wide configuration options will be available here.\n        </Typography>\n      </Paper>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\admin\\AdminSecuritySettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":5,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[140,143],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[140,143],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'platformStats' is defined but never used.","line":8,"column":79,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":92}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Box, Typography, Paper } from '@mui/material';\n\ninterface AdminSecuritySettingsProps {\n  platformStats: any;\n}\n\nexport const AdminSecuritySettings: React.FC<AdminSecuritySettingsProps> = ({ platformStats }) => {\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom>Security Settings</Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>Configure security policies and access controls</Typography>\n      <Paper sx={{ p: 3 }}><Typography>Security settings coming soon.</Typography></Paper>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\admin\\AdminSubscriptionsSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Add' is defined but never used.","line":28,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":33},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":48,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1018,1021],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1018,1021],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":55,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":55,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1157,1160],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1157,1160],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'platformStats' is defined but never used.","line":58,"column":89,"nodeType":"Identifier","messageId":"unusedVar","endLine":58,"endColumn":102},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'loading' is assigned a value but never used.","line":60,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":60,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":73,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":73,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1838,1841],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1838,1841],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":95,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":95,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2388,2391],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2388,2391],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":101,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":101,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2541,2544],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2541,2544],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":109,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":109,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2780,2783],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2780,2783],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  Typography,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Button,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  TextField,\n  Grid,\n  Chip,\n  IconButton,\n  Switch,\n  FormControlLabel,\n  Alert,\n  Tabs,\n  Tab,\n  InputAdornment,\n} from '@mui/material';\nimport { Edit, Save, Cancel, Add } from '@mui/icons-material';\nimport { toast } from 'react-hot-toast';\nimport { apiClient } from '@/services/apiClient';\n\ninterface SubscriptionPlan {\n  plan_id: number;\n  plan_name: string;\n  plan_slug: string;\n  user_type: 'merchant' | 'courier';\n  tier: number;\n  monthly_price: number;\n  annual_price: number;\n  max_orders_per_month: number | null;\n  max_emails_per_month: number | null;\n  max_sms_per_month: number | null;\n  max_push_notifications_per_month: number | null;\n  max_couriers: number | null;\n  max_team_members: number | null;\n  max_shops: number | null;\n  description: string;\n  features: any;\n  is_popular: boolean;\n  is_active: boolean;\n  display_order: number;\n}\n\ninterface AdminSubscriptionsSettingsProps {\n  platformStats: any;\n}\n\nexport const AdminSubscriptionsSettings: React.FC<AdminSubscriptionsSettingsProps> = ({ platformStats }) => {\n  const [plans, setPlans] = useState<SubscriptionPlan[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [editingPlan, setEditingPlan] = useState<SubscriptionPlan | null>(null);\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [userTypeFilter, setUserTypeFilter] = useState<'merchant' | 'courier'>('merchant');\n\n  useEffect(() => {\n    fetchPlans();\n  }, []);\n\n  const fetchPlans = async () => {\n    try {\n      const response = await apiClient.get('/admin/subscription-plans');\n      setPlans(response.data.plans);\n    } catch (error: any) {\n      toast.error('Failed to load subscription plans');\n      console.error(error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleEdit = (plan: SubscriptionPlan) => {\n    setEditingPlan({ ...plan });\n    setDialogOpen(true);\n  };\n\n  const handleSave = async () => {\n    if (!editingPlan) return;\n\n    try {\n      await apiClient.put('/admin/subscription-plans', editingPlan);\n      toast.success('Plan updated successfully');\n      setDialogOpen(false);\n      setEditingPlan(null);\n      fetchPlans();\n    } catch (error: any) {\n      toast.error('Failed to update plan');\n      console.error(error);\n    }\n  };\n\n  const handleChange = (field: keyof SubscriptionPlan, value: any) => {\n    if (!editingPlan) return;\n    setEditingPlan({ ...editingPlan, [field]: value });\n  };\n\n  const filteredPlans = plans.filter(p => p.user_type === userTypeFilter);\n\n  const getTierBadge = (tier: number) => {\n    const colors: any = { 1: 'default', 2: 'primary', 3: 'secondary' };\n    const labels = { 1: 'Tier 1', 2: 'Tier 2', 3: 'Tier 3' };\n    return <Chip label={labels[tier as keyof typeof labels]} color={colors[tier]} size=\"small\" />;\n  };\n\n  return (\n    <Box>\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n        <Box>\n          <Typography variant=\"h5\" gutterBottom>Subscription Plans Management</Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            Manage pricing, limits, and features for Merchant and Courier subscription tiers\n          </Typography>\n        </Box>\n      </Box>\n\n      <Paper sx={{ mb: 3 }}>\n        <Tabs value={userTypeFilter} onChange={(e, v) => setUserTypeFilter(v)}>\n          <Tab label=\"Merchant Plans\" value=\"merchant\" />\n          <Tab label=\"Courier Plans\" value=\"courier\" />\n        </Tabs>\n      </Paper>\n\n      <TableContainer component={Paper}>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>Tier</TableCell>\n              <TableCell>Plan Name</TableCell>\n              <TableCell>Monthly Price</TableCell>\n              <TableCell>Annual Price</TableCell>\n              <TableCell>Max Orders/Month</TableCell>\n              {userTypeFilter === 'merchant' ? (\n                <>\n                  <TableCell>Max Shops</TableCell>\n                  <TableCell>Max Couriers</TableCell>\n                </>\n              ) : (\n                <TableCell>Max Team Members</TableCell>\n              )}\n              <TableCell>Status</TableCell>\n              <TableCell>Actions</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {filteredPlans.map((plan) => (\n              <TableRow key={plan.plan_id}>\n                <TableCell>{getTierBadge(plan.tier)}</TableCell>\n                <TableCell>\n                  <Typography variant=\"body2\" fontWeight={600}>{plan.plan_name}</Typography>\n                  {plan.is_popular && <Chip label=\"Popular\" color=\"success\" size=\"small\" sx={{ ml: 1 }} />}\n                </TableCell>\n                <TableCell>${plan.monthly_price.toFixed(2)}</TableCell>\n                <TableCell>${plan.annual_price.toFixed(2)}</TableCell>\n                <TableCell>{plan.max_orders_per_month ?? ''}</TableCell>\n                {userTypeFilter === 'merchant' ? (\n                  <>\n                    <TableCell>{plan.max_shops ?? ''}</TableCell>\n                    <TableCell>{plan.max_couriers ?? ''}</TableCell>\n                  </>\n                ) : (\n                  <TableCell>{plan.max_team_members ?? ''}</TableCell>\n                )}\n                <TableCell>\n                  <Chip \n                    label={plan.is_active ? 'Active' : 'Inactive'} \n                    color={plan.is_active ? 'success' : 'default'} \n                    size=\"small\" \n                  />\n                </TableCell>\n                <TableCell>\n                  <IconButton size=\"small\" onClick={() => handleEdit(plan)} color=\"primary\">\n                    <Edit fontSize=\"small\" />\n                  </IconButton>\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </TableContainer>\n\n      {/* Edit Dialog */}\n      <Dialog open={dialogOpen} onClose={() => setDialogOpen(false)} maxWidth=\"md\" fullWidth>\n        <DialogTitle>Edit Subscription Plan: {editingPlan?.plan_name}</DialogTitle>\n        <DialogContent>\n          {editingPlan && (\n            <Grid container spacing={2} sx={{ mt: 1 }}>\n              <Grid item xs={12}>\n                <Alert severity=\"info\">\n                  Editing <strong>{editingPlan.user_type === 'merchant' ? 'Merchant' : 'Courier'}</strong> plan - Tier {editingPlan.tier}\n                </Alert>\n              </Grid>\n\n              <Grid item xs={12} md={6}>\n                <TextField\n                  fullWidth\n                  label=\"Plan Name\"\n                  value={editingPlan.plan_name}\n                  onChange={(e) => handleChange('plan_name', e.target.value)}\n                />\n              </Grid>\n\n              <Grid item xs={12} md={6}>\n                <TextField\n                  fullWidth\n                  label=\"Description\"\n                  value={editingPlan.description}\n                  onChange={(e) => handleChange('description', e.target.value)}\n                  multiline\n                  rows={2}\n                />\n              </Grid>\n\n              <Grid item xs={12} md={6}>\n                <TextField\n                  fullWidth\n                  label=\"Monthly Price\"\n                  type=\"number\"\n                  value={editingPlan.monthly_price}\n                  onChange={(e) => handleChange('monthly_price', parseFloat(e.target.value))}\n                  InputProps={{\n                    startAdornment: <InputAdornment position=\"start\">$</InputAdornment>,\n                  }}\n                />\n              </Grid>\n\n              <Grid item xs={12} md={6}>\n                <TextField\n                  fullWidth\n                  label=\"Annual Price\"\n                  type=\"number\"\n                  value={editingPlan.annual_price}\n                  onChange={(e) => handleChange('annual_price', parseFloat(e.target.value))}\n                  InputProps={{\n                    startAdornment: <InputAdornment position=\"start\">$</InputAdornment>,\n                  }}\n                />\n              </Grid>\n\n              <Grid item xs={12}>\n                <Typography variant=\"subtitle2\" gutterBottom sx={{ mt: 2 }}>Usage Limits (leave empty for unlimited)</Typography>\n              </Grid>\n\n              <Grid item xs={12} md={6}>\n                <TextField\n                  fullWidth\n                  label=\"Max Orders per Month\"\n                  type=\"number\"\n                  value={editingPlan.max_orders_per_month ?? ''}\n                  onChange={(e) => handleChange('max_orders_per_month', e.target.value ? parseInt(e.target.value) : null)}\n                  placeholder=\"Unlimited\"\n                />\n              </Grid>\n\n              <Grid item xs={12} md={6}>\n                <TextField\n                  fullWidth\n                  label=\"Max Emails per Month\"\n                  type=\"number\"\n                  value={editingPlan.max_emails_per_month ?? ''}\n                  onChange={(e) => handleChange('max_emails_per_month', e.target.value ? parseInt(e.target.value) : null)}\n                  placeholder=\"Unlimited\"\n                />\n              </Grid>\n\n              {editingPlan.user_type === 'merchant' ? (\n                <>\n                  <Grid item xs={12} md={6}>\n                    <TextField\n                      fullWidth\n                      label=\"Max Shops\"\n                      type=\"number\"\n                      value={editingPlan.max_shops ?? ''}\n                      onChange={(e) => handleChange('max_shops', e.target.value ? parseInt(e.target.value) : null)}\n                      placeholder=\"Unlimited\"\n                    />\n                  </Grid>\n\n                  <Grid item xs={12} md={6}>\n                    <TextField\n                      fullWidth\n                      label=\"Max Couriers\"\n                      type=\"number\"\n                      value={editingPlan.max_couriers ?? ''}\n                      onChange={(e) => handleChange('max_couriers', e.target.value ? parseInt(e.target.value) : null)}\n                      placeholder=\"Unlimited\"\n                    />\n                  </Grid>\n                </>\n              ) : (\n                <Grid item xs={12} md={6}>\n                  <TextField\n                    fullWidth\n                    label=\"Max Team Members\"\n                    type=\"number\"\n                    value={editingPlan.max_team_members ?? ''}\n                    onChange={(e) => handleChange('max_team_members', e.target.value ? parseInt(e.target.value) : null)}\n                    placeholder=\"Unlimited\"\n                  />\n                </Grid>\n              )}\n\n              <Grid item xs={12} md={6}>\n                <TextField\n                  fullWidth\n                  label=\"Max SMS per Month\"\n                  type=\"number\"\n                  value={editingPlan.max_sms_per_month ?? ''}\n                  onChange={(e) => handleChange('max_sms_per_month', e.target.value ? parseInt(e.target.value) : null)}\n                  placeholder=\"Unlimited\"\n                />\n              </Grid>\n\n              <Grid item xs={12} md={6}>\n                <FormControlLabel\n                  control={\n                    <Switch\n                      checked={editingPlan.is_popular}\n                      onChange={(e) => handleChange('is_popular', e.target.checked)}\n                    />\n                  }\n                  label=\"Mark as Popular\"\n                />\n              </Grid>\n\n              <Grid item xs={12} md={6}>\n                <FormControlLabel\n                  control={\n                    <Switch\n                      checked={editingPlan.is_active}\n                      onChange={(e) => handleChange('is_active', e.target.checked)}\n                    />\n                  }\n                  label=\"Active\"\n                />\n              </Grid>\n            </Grid>\n          )}\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setDialogOpen(false)} startIcon={<Cancel />}>\n            Cancel\n          </Button>\n          <Button onClick={handleSave} variant=\"contained\" startIcon={<Save />}>\n            Save Changes\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\admin\\AdminSystemSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":5,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[138,141],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[138,141],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'platformStats' is defined but never used.","line":8,"column":75,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":88}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Box, Typography, Paper } from '@mui/material';\n\ninterface AdminSystemSettingsProps {\n  platformStats: any;\n}\n\nexport const AdminSystemSettings: React.FC<AdminSystemSettingsProps> = ({ platformStats }) => {\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom>System Settings</Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>Configure system-wide settings and preferences</Typography>\n      <Paper sx={{ p: 3 }}><Typography>System settings coming soon.</Typography></Paper>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\admin\\AdminUsersSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":5,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[137,140],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[137,140],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Box, Typography, Paper } from '@mui/material';\n\ninterface AdminUsersSettingsProps {\n  platformStats: any;\n}\n\nexport const AdminUsersSettings: React.FC<AdminUsersSettingsProps> = ({ platformStats }) => {\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom>\n        User Management\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        Manage platform users, roles, and permissions\n      </Typography>\n\n      <Paper sx={{ p: 3 }}>\n        <Typography variant=\"body1\">\n          User management features coming soon. Total users: {platformStats?.totalUsers || 0}\n        </Typography>\n      </Paper>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\consumer\\ConsumerAddressSettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\consumer\\ConsumerFavoritesSettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\consumer\\ConsumerNotificationSettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\consumer\\ConsumerOrderSettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\consumer\\ConsumerPaymentSettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\consumer\\ConsumerPreferencesSettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\consumer\\ConsumerPrivacySettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\consumer\\ConsumerProfileSettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\consumer\\ConsumerSecuritySettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\courier\\CourierAPISettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[239,242],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[239,242],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Box, Typography, Paper, Button, TextField, Alert, Chip } from '@mui/material';\nimport { Code, ContentCopy, Refresh } from '@mui/icons-material';\n\ninterface CourierAPISettingsProps {\n  subscriptionInfo?: any;\n}\n\nexport const CourierAPISettings: React.FC<CourierAPISettingsProps> = ({ subscriptionInfo }) => {\n  const hasAPIAccess = subscriptionInfo?.has_api_access || false;\n\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n        <Code /> API Access\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        Manage your API keys and integration settings\n      </Typography>\n\n      {!hasAPIAccess ? (\n        <Alert severity=\"warning\" sx={{ mb: 3 }}>\n          API access is not available on your current plan. Upgrade to Professional or higher to enable API access.\n        </Alert>\n      ) : (\n        <>\n          <Paper sx={{ p: 3, mb: 3 }}>\n            <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n              <Typography variant=\"h6\">API Key</Typography>\n              <Chip label=\"Active\" color=\"success\" size=\"small\" />\n            </Box>\n            \n            <TextField\n              fullWidth\n              value=\"pk_live_\"\n              InputProps={{\n                readOnly: true,\n                endAdornment: (\n                  <Button startIcon={<ContentCopy />} size=\"small\">\n                    Copy\n                  </Button>\n                ),\n              }}\n              sx={{ mb: 2 }}\n            />\n\n            <Box sx={{ display: 'flex', gap: 2 }}>\n              <Button variant=\"outlined\" startIcon={<Refresh />}>\n                Regenerate Key\n              </Button>\n              <Button variant=\"outlined\" color=\"error\">\n                Revoke Key\n              </Button>\n            </Box>\n          </Paper>\n\n          <Paper sx={{ p: 3 }}>\n            <Typography variant=\"h6\" gutterBottom>API Documentation</Typography>\n            <Typography color=\"text.secondary\" paragraph>\n              Use our API to integrate Performile with your existing systems.\n            </Typography>\n            <Button variant=\"contained\">\n              View Documentation\n            </Button>\n          </Paper>\n        </>\n      )}\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\courier\\CourierAnalyticsSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TrendingUp' is defined but never used.","line":3,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":31},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[268,271],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[268,271],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Box, Typography, Paper, Grid, Card, CardContent, Alert } from '@mui/material';\nimport { Analytics, TrendingUp, LocalShipping, AttachMoney } from '@mui/icons-material';\n\ninterface CourierAnalyticsSettingsProps {\n  subscriptionInfo?: any;\n}\n\nexport const CourierAnalyticsSettings: React.FC<CourierAnalyticsSettingsProps> = ({ subscriptionInfo }) => {\n  const hasAdvancedAnalytics = subscriptionInfo?.has_advanced_analytics || false;\n\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n        <Analytics /> Analytics Settings\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        Configure your analytics preferences and data retention\n      </Typography>\n\n      {!hasAdvancedAnalytics && (\n        <Alert severity=\"info\" sx={{ mb: 3 }}>\n          Upgrade to Professional or higher to unlock advanced analytics features\n        </Alert>\n      )}\n\n      <Grid container spacing={3}>\n        <Grid item xs={12} md={6}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 2 }}>\n                <LocalShipping color=\"primary\" />\n                <Typography variant=\"h6\">Delivery Analytics</Typography>\n              </Box>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Track delivery times, routes, and efficiency metrics\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} md={6}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 2 }}>\n                <AttachMoney color=\"success\" />\n                <Typography variant=\"h6\">Revenue Analytics</Typography>\n              </Box>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Monitor earnings, trends, and financial performance\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12}>\n          <Paper sx={{ p: 3 }}>\n            <Typography variant=\"h6\" gutterBottom>Data Retention</Typography>\n            <Typography color=\"text.secondary\">\n              Your analytics data is retained for 12 months\n            </Typography>\n          </Paper>\n        </Grid>\n      </Grid>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\courier\\CourierCompanySettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[261,264],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[261,264],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'subscriptionInfo' is defined but never used.","line":17,"column":81,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":97}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Box,\n  Typography,\n  Paper,\n  TextField,\n  Button,\n  Grid,\n  Avatar,\n} from '@mui/material';\nimport { Business, Save } from '@mui/icons-material';\n\ninterface CourierCompanySettingsProps {\n  subscriptionInfo?: any;\n}\n\nexport const CourierCompanySettings: React.FC<CourierCompanySettingsProps> = ({ subscriptionInfo }) => {\n  const [companyData, setCompanyData] = useState({\n    company_name: '',\n    business_number: '',\n    vat_number: '',\n    address: '',\n    city: '',\n    postal_code: '',\n    country: '',\n    phone: '',\n    email: '',\n    website: '',\n  });\n\n  const handleSave = () => {\n    // TODO: Implement save functionality\n    console.log('Saving company settings:', companyData);\n  };\n\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n        <Business /> Company Information\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        Manage your courier company details and business information\n      </Typography>\n\n      <Paper sx={{ p: 3 }}>\n        <Grid container spacing={3}>\n          <Grid item xs={12}>\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, mb: 3 }}>\n              <Avatar sx={{ width: 80, height: 80, bgcolor: 'primary.main' }}>\n                <Business sx={{ fontSize: 40 }} />\n              </Avatar>\n              <Button variant=\"outlined\">Upload Logo</Button>\n            </Box>\n          </Grid>\n\n          <Grid item xs={12} md={6}>\n            <TextField\n              fullWidth\n              label=\"Company Name\"\n              value={companyData.company_name}\n              onChange={(e) => setCompanyData({ ...companyData, company_name: e.target.value })}\n            />\n          </Grid>\n\n          <Grid item xs={12} md={6}>\n            <TextField\n              fullWidth\n              label=\"Business Registration Number\"\n              value={companyData.business_number}\n              onChange={(e) => setCompanyData({ ...companyData, business_number: e.target.value })}\n            />\n          </Grid>\n\n          <Grid item xs={12} md={6}>\n            <TextField\n              fullWidth\n              label=\"VAT Number\"\n              value={companyData.vat_number}\n              onChange={(e) => setCompanyData({ ...companyData, vat_number: e.target.value })}\n            />\n          </Grid>\n\n          <Grid item xs={12} md={6}>\n            <TextField\n              fullWidth\n              label=\"Phone Number\"\n              value={companyData.phone}\n              onChange={(e) => setCompanyData({ ...companyData, phone: e.target.value })}\n            />\n          </Grid>\n\n          <Grid item xs={12} md={6}>\n            <TextField\n              fullWidth\n              label=\"Email\"\n              type=\"email\"\n              value={companyData.email}\n              onChange={(e) => setCompanyData({ ...companyData, email: e.target.value })}\n            />\n          </Grid>\n\n          <Grid item xs={12} md={6}>\n            <TextField\n              fullWidth\n              label=\"Website\"\n              value={companyData.website}\n              onChange={(e) => setCompanyData({ ...companyData, website: e.target.value })}\n            />\n          </Grid>\n\n          <Grid item xs={12}>\n            <TextField\n              fullWidth\n              label=\"Address\"\n              value={companyData.address}\n              onChange={(e) => setCompanyData({ ...companyData, address: e.target.value })}\n            />\n          </Grid>\n\n          <Grid item xs={12} md={4}>\n            <TextField\n              fullWidth\n              label=\"City\"\n              value={companyData.city}\n              onChange={(e) => setCompanyData({ ...companyData, city: e.target.value })}\n            />\n          </Grid>\n\n          <Grid item xs={12} md={4}>\n            <TextField\n              fullWidth\n              label=\"Postal Code\"\n              value={companyData.postal_code}\n              onChange={(e) => setCompanyData({ ...companyData, postal_code: e.target.value })}\n            />\n          </Grid>\n\n          <Grid item xs={12} md={4}>\n            <TextField\n              fullWidth\n              label=\"Country\"\n              value={companyData.country}\n              onChange={(e) => setCompanyData({ ...companyData, country: e.target.value })}\n            />\n          </Grid>\n\n          <Grid item xs={12}>\n            <Button\n              variant=\"contained\"\n              startIcon={<Save />}\n              onClick={handleSave}\n            >\n              Save Changes\n            </Button>\n          </Grid>\n        </Grid>\n      </Paper>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\courier\\CourierFleetSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Chip' is defined but never used.","line":2,"column":108,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":112},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[281,284],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[281,284],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'subscriptionInfo' is defined but never used.","line":9,"column":77,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":93}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Box, Typography, Paper, Button, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Chip } from '@mui/material';\nimport { LocalShipping, Add } from '@mui/icons-material';\n\ninterface CourierFleetSettingsProps {\n  subscriptionInfo?: any;\n}\n\nexport const CourierFleetSettings: React.FC<CourierFleetSettingsProps> = ({ subscriptionInfo }) => {\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n        <LocalShipping /> Fleet Management\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        Manage your delivery vehicles and fleet information\n      </Typography>\n\n      <Paper sx={{ p: 3 }}>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n          <Typography variant=\"h6\">Vehicles</Typography>\n          <Button variant=\"contained\" startIcon={<Add />}>\n            Add Vehicle\n          </Button>\n        </Box>\n\n        <TableContainer>\n          <Table>\n            <TableHead>\n              <TableRow>\n                <TableCell>Vehicle ID</TableCell>\n                <TableCell>Type</TableCell>\n                <TableCell>License Plate</TableCell>\n                <TableCell>Status</TableCell>\n                <TableCell>Driver</TableCell>\n                <TableCell>Actions</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              <TableRow>\n                <TableCell colSpan={6} align=\"center\">\n                  <Typography color=\"text.secondary\">No vehicles added yet</Typography>\n                </TableCell>\n              </TableRow>\n            </TableBody>\n          </Table>\n        </TableContainer>\n      </Paper>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\courier\\CourierGeneralSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[281,284],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[281,284],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'subscriptionInfo' is defined but never used.","line":9,"column":81,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":97}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { Box, Typography, Paper, TextField, Button, Grid, FormControl, InputLabel, Select, MenuItem } from '@mui/material';\nimport { Settings, Save } from '@mui/icons-material';\n\ninterface CourierGeneralSettingsProps {\n  subscriptionInfo?: any;\n}\n\nexport const CourierGeneralSettings: React.FC<CourierGeneralSettingsProps> = ({ subscriptionInfo }) => {\n  const [settings, setSettings] = useState({\n    displayName: '',\n    timezone: 'UTC',\n    language: 'en',\n    dateFormat: 'MM/DD/YYYY',\n  });\n\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n        <Settings /> General Settings\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        Configure general account preferences\n      </Typography>\n\n      <Paper sx={{ p: 3 }}>\n        <Grid container spacing={3}>\n          <Grid item xs={12} md={6}>\n            <TextField\n              fullWidth\n              label=\"Display Name\"\n              value={settings.displayName}\n              onChange={(e) => setSettings({...settings, displayName: e.target.value})}\n              helperText=\"This name will be shown to merchants and customers\"\n            />\n          </Grid>\n\n          <Grid item xs={12} md={6}>\n            <FormControl fullWidth>\n              <InputLabel>Timezone</InputLabel>\n              <Select\n                value={settings.timezone}\n                label=\"Timezone\"\n                onChange={(e) => setSettings({...settings, timezone: e.target.value})}\n              >\n                <MenuItem value=\"UTC\">UTC</MenuItem>\n                <MenuItem value=\"America/New_York\">Eastern Time</MenuItem>\n                <MenuItem value=\"America/Chicago\">Central Time</MenuItem>\n                <MenuItem value=\"America/Denver\">Mountain Time</MenuItem>\n                <MenuItem value=\"America/Los_Angeles\">Pacific Time</MenuItem>\n              </Select>\n            </FormControl>\n          </Grid>\n\n          <Grid item xs={12} md={6}>\n            <FormControl fullWidth>\n              <InputLabel>Language</InputLabel>\n              <Select\n                value={settings.language}\n                label=\"Language\"\n                onChange={(e) => setSettings({...settings, language: e.target.value})}\n              >\n                <MenuItem value=\"en\">English</MenuItem>\n                <MenuItem value=\"es\">Spanish</MenuItem>\n                <MenuItem value=\"fr\">French</MenuItem>\n                <MenuItem value=\"de\">German</MenuItem>\n              </Select>\n            </FormControl>\n          </Grid>\n\n          <Grid item xs={12} md={6}>\n            <FormControl fullWidth>\n              <InputLabel>Date Format</InputLabel>\n              <Select\n                value={settings.dateFormat}\n                label=\"Date Format\"\n                onChange={(e) => setSettings({...settings, dateFormat: e.target.value})}\n              >\n                <MenuItem value=\"MM/DD/YYYY\">MM/DD/YYYY</MenuItem>\n                <MenuItem value=\"DD/MM/YYYY\">DD/MM/YYYY</MenuItem>\n                <MenuItem value=\"YYYY-MM-DD\">YYYY-MM-DD</MenuItem>\n              </Select>\n            </FormControl>\n          </Grid>\n\n          <Grid item xs={12}>\n            <Button variant=\"contained\" startIcon={<Save />}>\n              Save Changes\n            </Button>\n          </Grid>\n        </Grid>\n      </Paper>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\courier\\CourierLeadsSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Chip' is defined but never used.","line":2,"column":108,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":112},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Visibility' is defined but never used.","line":3,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":32},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[285,288],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[285,288],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'subscriptionInfo' is defined but never used.","line":9,"column":77,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":93}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Box, Typography, Paper, Button, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Chip } from '@mui/material';\nimport { Storefront, Visibility } from '@mui/icons-material';\n\ninterface CourierLeadsSettingsProps {\n  subscriptionInfo?: any;\n}\n\nexport const CourierLeadsSettings: React.FC<CourierLeadsSettingsProps> = ({ subscriptionInfo }) => {\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n        <Storefront /> Merchant Leads\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        View and manage merchant leads from the marketplace\n      </Typography>\n\n      <Paper sx={{ p: 3 }}>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n          <Typography variant=\"h6\">Available Leads</Typography>\n          <Button variant=\"contained\" startIcon={<Storefront />}>\n            Browse Marketplace\n          </Button>\n        </Box>\n\n        <TableContainer>\n          <Table>\n            <TableHead>\n              <TableRow>\n                <TableCell>Merchant</TableCell>\n                <TableCell>Location</TableCell>\n                <TableCell>Order Volume</TableCell>\n                <TableCell>Status</TableCell>\n                <TableCell>Actions</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              <TableRow>\n                <TableCell colSpan={5} align=\"center\">\n                  <Typography color=\"text.secondary\">No leads available</Typography>\n                </TableCell>\n              </TableRow>\n            </TableBody>\n          </Table>\n        </TableContainer>\n      </Paper>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\courier\\CourierNotificationSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[252,255],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[252,255],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'subscriptionInfo' is defined but never used.","line":9,"column":91,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":107}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { Box, Typography, Paper, FormControlLabel, Switch, Divider } from '@mui/material';\nimport { Notifications } from '@mui/icons-material';\n\ninterface CourierNotificationSettingsProps {\n  subscriptionInfo?: any;\n}\n\nexport const CourierNotificationSettings: React.FC<CourierNotificationSettingsProps> = ({ subscriptionInfo }) => {\n  const [notifications, setNotifications] = useState({\n    newOrders: true,\n    orderUpdates: true,\n    payments: true,\n    leads: true,\n    performance: false,\n    marketing: false,\n  });\n\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n        <Notifications /> Notification Preferences\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        Choose how you want to receive notifications\n      </Typography>\n\n      <Paper sx={{ p: 3 }}>\n        <Typography variant=\"h6\" gutterBottom>Email Notifications</Typography>\n        \n        <FormControlLabel\n          control={<Switch checked={notifications.newOrders} onChange={(e) => setNotifications({...notifications, newOrders: e.target.checked})} />}\n          label=\"New order assignments\"\n        />\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ ml: 4, mb: 2 }}>\n          Get notified when you receive new delivery orders\n        </Typography>\n\n        <Divider sx={{ my: 2 }} />\n\n        <FormControlLabel\n          control={<Switch checked={notifications.orderUpdates} onChange={(e) => setNotifications({...notifications, orderUpdates: e.target.checked})} />}\n          label=\"Order status updates\"\n        />\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ ml: 4, mb: 2 }}>\n          Updates about order pickups, deliveries, and issues\n        </Typography>\n\n        <Divider sx={{ my: 2 }} />\n\n        <FormControlLabel\n          control={<Switch checked={notifications.payments} onChange={(e) => setNotifications({...notifications, payments: e.target.checked})} />}\n          label=\"Payment notifications\"\n        />\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ ml: 4, mb: 2 }}>\n          Payout confirmations and payment updates\n        </Typography>\n\n        <Divider sx={{ my: 2 }} />\n\n        <FormControlLabel\n          control={<Switch checked={notifications.leads} onChange={(e) => setNotifications({...notifications, leads: e.target.checked})} />}\n          label=\"New merchant leads\"\n        />\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ ml: 4, mb: 2 }}>\n          Notifications about new merchants in your area\n        </Typography>\n\n        <Divider sx={{ my: 2 }} />\n\n        <FormControlLabel\n          control={<Switch checked={notifications.performance} onChange={(e) => setNotifications({...notifications, performance: e.target.checked})} />}\n          label=\"Performance reports\"\n        />\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ ml: 4, mb: 2 }}>\n          Weekly performance summaries and insights\n        </Typography>\n\n        <Divider sx={{ my: 2 }} />\n\n        <FormControlLabel\n          control={<Switch checked={notifications.marketing} onChange={(e) => setNotifications({...notifications, marketing: e.target.checked})} />}\n          label=\"Marketing and tips\"\n        />\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ ml: 4 }}>\n          Tips, best practices, and platform updates\n        </Typography>\n      </Paper>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\courier\\CourierPaymentSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[246,249],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[246,249],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'subscriptionInfo' is defined but never used.","line":9,"column":81,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":97}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Box, Typography, Paper, TextField, Button, Grid, Alert } from '@mui/material';\nimport { Payment, AccountBalance, Save } from '@mui/icons-material';\n\ninterface CourierPaymentSettingsProps {\n  subscriptionInfo?: any;\n}\n\nexport const CourierPaymentSettings: React.FC<CourierPaymentSettingsProps> = ({ subscriptionInfo }) => {\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n        <Payment /> Payment Settings\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        Manage your payment methods and payout preferences\n      </Typography>\n\n      <Alert severity=\"info\" sx={{ mb: 3 }}>\n        Payments are processed weekly. Minimum payout threshold is $50.\n      </Alert>\n\n      <Paper sx={{ p: 3, mb: 3 }}>\n        <Typography variant=\"h6\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n          <AccountBalance /> Bank Account\n        </Typography>\n        \n        <Grid container spacing={3} sx={{ mt: 1 }}>\n          <Grid item xs={12} md={6}>\n            <TextField fullWidth label=\"Account Holder Name\" />\n          </Grid>\n          <Grid item xs={12} md={6}>\n            <TextField fullWidth label=\"Bank Name\" />\n          </Grid>\n          <Grid item xs={12} md={6}>\n            <TextField fullWidth label=\"Account Number\" />\n          </Grid>\n          <Grid item xs={12} md={6}>\n            <TextField fullWidth label=\"Routing Number\" />\n          </Grid>\n          <Grid item xs={12} md={6}>\n            <TextField fullWidth label=\"SWIFT/BIC Code\" />\n          </Grid>\n          <Grid item xs={12} md={6}>\n            <TextField fullWidth label=\"IBAN\" />\n          </Grid>\n          <Grid item xs={12}>\n            <Button variant=\"contained\" startIcon={<Save />}>\n              Save Payment Details\n            </Button>\n          </Grid>\n        </Grid>\n      </Paper>\n\n      <Paper sx={{ p: 3 }}>\n        <Typography variant=\"h6\" gutterBottom>Payout History</Typography>\n        <Typography color=\"text.secondary\">No payouts yet</Typography>\n      </Paper>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\courier\\CourierPerformanceSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[250,253],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[250,253],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'subscriptionInfo' is defined but never used.","line":9,"column":89,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":105}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Box, Typography, Paper, Grid, Card, CardContent } from '@mui/material';\nimport { TrendingUp, Star, Speed, CheckCircle } from '@mui/icons-material';\n\ninterface CourierPerformanceSettingsProps {\n  subscriptionInfo?: any;\n}\n\nexport const CourierPerformanceSettings: React.FC<CourierPerformanceSettingsProps> = ({ subscriptionInfo }) => {\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n        <TrendingUp /> Performance Metrics\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        View and manage your courier performance metrics\n      </Typography>\n\n      <Grid container spacing={3}>\n        <Grid item xs={12} md={3}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1 }}>\n                <Star color=\"primary\" />\n                <Typography variant=\"h6\">4.8</Typography>\n              </Box>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Average Rating\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} md={3}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1 }}>\n                <Speed color=\"success\" />\n                <Typography variant=\"h6\">95%</Typography>\n              </Box>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                On-Time Delivery\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} md={3}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1 }}>\n                <CheckCircle color=\"success\" />\n                <Typography variant=\"h6\">1,234</Typography>\n              </Box>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Completed Deliveries\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} md={3}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1 }}>\n                <TrendingUp color=\"primary\" />\n                <Typography variant=\"h6\">Trust Score</Typography>\n              </Box>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Excellent\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12}>\n          <Paper sx={{ p: 3 }}>\n            <Typography variant=\"h6\" gutterBottom>Performance Goals</Typography>\n            <Typography color=\"text.secondary\">\n              Set and track your performance goals to improve your trust score\n            </Typography>\n          </Paper>\n        </Grid>\n      </Grid>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\courier\\CourierPreferencesSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[250,253],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[250,253],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'subscriptionInfo' is defined but never used.","line":9,"column":89,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":105}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { Box, Typography, Paper, FormControlLabel, Switch, Divider, Slider } from '@mui/material';\nimport { Tune } from '@mui/icons-material';\n\ninterface CourierPreferencesSettingsProps {\n  subscriptionInfo?: any;\n}\n\nexport const CourierPreferencesSettings: React.FC<CourierPreferencesSettingsProps> = ({ subscriptionInfo }) => {\n  const [preferences, setPreferences] = useState({\n    autoAcceptOrders: false,\n    showInMarketplace: true,\n    allowDirectContact: true,\n    maxDailyOrders: 20,\n  });\n\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n        <Tune /> Preferences\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        Customize your courier experience\n      </Typography>\n\n      <Paper sx={{ p: 3 }}>\n        <Typography variant=\"h6\" gutterBottom>Order Preferences</Typography>\n        \n        <FormControlLabel\n          control={\n            <Switch\n              checked={preferences.autoAcceptOrders}\n              onChange={(e) => setPreferences({...preferences, autoAcceptOrders: e.target.checked})}\n            />\n          }\n          label=\"Auto-accept orders\"\n        />\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ ml: 4, mb: 2 }}>\n          Automatically accept orders that match your criteria\n        </Typography>\n\n        <Divider sx={{ my: 3 }} />\n\n        <Typography gutterBottom>Maximum daily orders</Typography>\n        <Slider\n          value={preferences.maxDailyOrders}\n          onChange={(e, value) => setPreferences({...preferences, maxDailyOrders: value as number})}\n          min={1}\n          max={50}\n          marks\n          valueLabelDisplay=\"on\"\n          sx={{ mb: 3 }}\n        />\n\n        <Divider sx={{ my: 3 }} />\n\n        <Typography variant=\"h6\" gutterBottom sx={{ mt: 3 }}>Visibility Preferences</Typography>\n\n        <FormControlLabel\n          control={\n            <Switch\n              checked={preferences.showInMarketplace}\n              onChange={(e) => setPreferences({...preferences, showInMarketplace: e.target.checked})}\n            />\n          }\n          label=\"Show in marketplace\"\n        />\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ ml: 4, mb: 2 }}>\n          Allow merchants to discover and select you\n        </Typography>\n\n        <Divider sx={{ my: 2 }} />\n\n        <FormControlLabel\n          control={\n            <Switch\n              checked={preferences.allowDirectContact}\n              onChange={(e) => setPreferences({...preferences, allowDirectContact: e.target.checked})}\n            />\n          }\n          label=\"Allow direct contact\"\n        />\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ ml: 4 }}>\n          Let merchants contact you directly\n        </Typography>\n      </Paper>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\courier\\CourierSecuritySettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":7,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[354,357],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[354,357],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'subscriptionInfo' is defined but never used.","line":10,"column":83,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":99}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Box, Typography, Paper, Button, List, ListItem, ListItemText, ListItemSecondaryAction, Switch, Divider } from '@mui/material';\nimport { Security, VpnKey, Smartphone } from '@mui/icons-material';\nimport { ChangePasswordForm } from '../ChangePasswordForm';\n\ninterface CourierSecuritySettingsProps {\n  subscriptionInfo?: any;\n}\n\nexport const CourierSecuritySettings: React.FC<CourierSecuritySettingsProps> = ({ subscriptionInfo }) => {\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n        <Security /> Security Settings\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        Manage your account security and authentication\n      </Typography>\n\n      <Paper sx={{ p: 3, mb: 3 }}>\n        <Typography variant=\"h6\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n          <VpnKey /> Password\n        </Typography>\n        <ChangePasswordForm />\n      </Paper>\n\n      <Paper sx={{ p: 3, mb: 3 }}>\n        <Typography variant=\"h6\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n          <Smartphone /> Two-Factor Authentication\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\n          Add an extra layer of security to your account\n        </Typography>\n        <Button variant=\"outlined\">\n          Enable 2FA\n        </Button>\n      </Paper>\n\n      <Paper sx={{ p: 3 }}>\n        <Typography variant=\"h6\" gutterBottom>Security Preferences</Typography>\n        <List>\n          <ListItem>\n            <ListItemText\n              primary=\"Login notifications\"\n              secondary=\"Get notified when someone logs into your account\"\n            />\n            <ListItemSecondaryAction>\n              <Switch defaultChecked />\n            </ListItemSecondaryAction>\n          </ListItem>\n          <Divider />\n          <ListItem>\n            <ListItemText\n              primary=\"Suspicious activity alerts\"\n              secondary=\"Receive alerts for unusual account activity\"\n            />\n            <ListItemSecondaryAction>\n              <Switch defaultChecked />\n            </ListItemSecondaryAction>\n          </ListItem>\n        </List>\n      </Paper>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\courier\\CourierTeamSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Add' is defined but never used.","line":3,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":20},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[218,221],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[218,221],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Box, Typography, Paper, Button, Alert } from '@mui/material';\nimport { Group, Add, PersonAdd } from '@mui/icons-material';\n\ninterface CourierTeamSettingsProps {\n  subscriptionInfo?: any;\n}\n\nexport const CourierTeamSettings: React.FC<CourierTeamSettingsProps> = ({ subscriptionInfo }) => {\n  const maxTeamMembers = subscriptionInfo?.max_team_members || 1;\n\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n        <Group /> Team Members\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        Manage your courier team and assign roles\n      </Typography>\n\n      {subscriptionInfo && (\n        <Alert severity=\"info\" sx={{ mb: 3 }}>\n          Your plan allows up to {maxTeamMembers} team member{maxTeamMembers !== 1 ? 's' : ''}\n        </Alert>\n      )}\n\n      <Paper sx={{ p: 3 }}>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n          <Typography variant=\"h6\">Team Members</Typography>\n          <Button variant=\"contained\" startIcon={<PersonAdd />}>\n            Invite Team Member\n          </Button>\n        </Box>\n\n        <Box sx={{ textAlign: 'center', py: 4 }}>\n          <Group sx={{ fontSize: 60, color: 'text.secondary', mb: 2 }} />\n          <Typography color=\"text.secondary\">No team members yet</Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1 }}>\n            Invite team members to help manage deliveries\n          </Typography>\n        </Box>\n      </Paper>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\merchant\\APISettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[256,259],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[256,259],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Box, Typography, Paper, Button, TextField, Alert, Chip, Tabs, Tab } from '@mui/material';\nimport { Code, ContentCopy, Refresh, Description } from '@mui/icons-material';\n\ninterface APISettingsProps {\n  subscriptionInfo?: any;\n}\n\nexport const APISettings: React.FC<APISettingsProps> = ({ subscriptionInfo }) => {\n  const [tabValue, setTabValue] = React.useState(0);\n  const hasAPIAccess = subscriptionInfo?.has_api_access || false;\n\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n        <Code /> API Access\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        Integrate Performile with your e-commerce platform\n      </Typography>\n\n      {!hasAPIAccess ? (\n        <Alert severity=\"warning\" sx={{ mb: 3 }}>\n          API access is not available on your current plan. Upgrade to Professional or higher to enable API access.\n        </Alert>\n      ) : (\n        <>\n          <Tabs value={tabValue} onChange={(e, v) => setTabValue(v)} sx={{ mb: 3 }}>\n            <Tab label=\"API Keys\" />\n            <Tab label=\"Webhooks\" />\n            <Tab label=\"Documentation\" />\n          </Tabs>\n\n          {tabValue === 0 && (\n            <Paper sx={{ p: 3 }}>\n              <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n                <Typography variant=\"h6\">Production API Key</Typography>\n                <Chip label=\"Active\" color=\"success\" size=\"small\" />\n              </Box>\n              \n              <TextField\n                fullWidth\n                value=\"pk_live_\"\n                InputProps={{\n                  readOnly: true,\n                  endAdornment: (\n                    <Button startIcon={<ContentCopy />} size=\"small\">\n                      Copy\n                    </Button>\n                  ),\n                }}\n                sx={{ mb: 2 }}\n              />\n\n              <Box sx={{ display: 'flex', gap: 2, mb: 3 }}>\n                <Button variant=\"outlined\" startIcon={<Refresh />}>\n                  Regenerate Key\n                </Button>\n                <Button variant=\"outlined\" color=\"error\">\n                  Revoke Key\n                </Button>\n              </Box>\n\n              <Typography variant=\"h6\" sx={{ mt: 3, mb: 2 }}>Test API Key</Typography>\n              <TextField\n                fullWidth\n                value=\"pk_test_\"\n                InputProps={{\n                  readOnly: true,\n                  endAdornment: (\n                    <Button startIcon={<ContentCopy />} size=\"small\">\n                      Copy\n                    </Button>\n                  ),\n                }}\n              />\n            </Paper>\n          )}\n\n          {tabValue === 1 && (\n            <Paper sx={{ p: 3 }}>\n              <Typography variant=\"h6\" gutterBottom>Webhook Endpoints</Typography>\n              <Typography color=\"text.secondary\" paragraph>\n                Configure webhook endpoints to receive real-time updates\n              </Typography>\n              <Button variant=\"contained\">Add Webhook</Button>\n            </Paper>\n          )}\n\n          {tabValue === 2 && (\n            <Paper sx={{ p: 3 }}>\n              <Typography variant=\"h6\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                <Description /> API Documentation\n              </Typography>\n              <Typography color=\"text.secondary\" paragraph>\n                Learn how to integrate Performile with your platform\n              </Typography>\n              <Button variant=\"contained\">\n                View Documentation\n              </Button>\n            </Paper>\n          )}\n        </>\n      )}\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\merchant\\CouriersSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":5,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[166,169],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[166,169],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'subscriptionInfo' is defined but never used.","line":8,"column":69,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":85}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { MerchantCourierSettings } from '@/pages/settings/MerchantCourierSettings';\n\ninterface CouriersSettingsProps {\n  subscriptionInfo: any;\n}\n\nexport const CouriersSettings: React.FC<CouriersSettingsProps> = ({ subscriptionInfo }) => {\n  // Simply render the existing MerchantCourierSettings component\n  // but without the container wrapper since it's already in a tab\n  return <MerchantCourierSettings />;\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\merchant\\EmailTemplatesSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[282,285],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[282,285],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Box, Typography, Paper, Button, List, ListItem, ListItemText, ListItemSecondaryAction, IconButton, Chip } from '@mui/material';\nimport { Email, Edit, Add } from '@mui/icons-material';\n\ninterface EmailTemplatesSettingsProps {\n  subscriptionInfo?: any;\n}\n\nexport const EmailTemplatesSettings: React.FC<EmailTemplatesSettingsProps> = ({ subscriptionInfo }) => {\n  const hasCustomTemplates = subscriptionInfo?.has_custom_templates || false;\n\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n        <Email /> Email Templates\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        Customize email templates for customer communications\n      </Typography>\n\n      {!hasCustomTemplates && (\n        <Paper sx={{ p: 2, mb: 3, bgcolor: 'warning.50', border: '1px solid', borderColor: 'warning.200' }}>\n          <Typography variant=\"body2\">\n            Custom email templates are available on Professional and Enterprise plans\n          </Typography>\n        </Paper>\n      )}\n\n      <Paper sx={{ p: 3 }}>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n          <Typography variant=\"h6\">Templates</Typography>\n          <Button variant=\"contained\" startIcon={<Add />} disabled={!hasCustomTemplates}>\n            Create Template\n          </Button>\n        </Box>\n\n        <List>\n          <ListItem>\n            <ListItemText\n              primary=\"Order Confirmation\"\n              secondary=\"Sent when a customer places an order\"\n            />\n            <ListItemSecondaryAction>\n              <Chip label=\"Default\" size=\"small\" sx={{ mr: 1 }} />\n              <IconButton edge=\"end\" disabled={!hasCustomTemplates}>\n                <Edit />\n              </IconButton>\n            </ListItemSecondaryAction>\n          </ListItem>\n\n          <ListItem>\n            <ListItemText\n              primary=\"Shipping Notification\"\n              secondary=\"Sent when an order is shipped\"\n            />\n            <ListItemSecondaryAction>\n              <Chip label=\"Default\" size=\"small\" sx={{ mr: 1 }} />\n              <IconButton edge=\"end\" disabled={!hasCustomTemplates}>\n                <Edit />\n              </IconButton>\n            </ListItemSecondaryAction>\n          </ListItem>\n\n          <ListItem>\n            <ListItemText\n              primary=\"Delivery Confirmation\"\n              secondary=\"Sent when an order is delivered\"\n            />\n            <ListItemSecondaryAction>\n              <Chip label=\"Default\" size=\"small\" sx={{ mr: 1 }} />\n              <IconButton edge=\"end\" disabled={!hasCustomTemplates}>\n                <Edit />\n              </IconButton>\n            </ListItemSecondaryAction>\n          </ListItem>\n        </List>\n      </Paper>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\merchant\\GeneralSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[274,277],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[274,277],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'subscriptionInfo' is defined but never used.","line":9,"column":67,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":83}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { Box, Typography, Paper, TextField, Button, Grid, FormControl, InputLabel, Select, MenuItem } from '@mui/material';\nimport { Settings, Save } from '@mui/icons-material';\n\ninterface GeneralSettingsProps {\n  subscriptionInfo?: any;\n}\n\nexport const GeneralSettings: React.FC<GeneralSettingsProps> = ({ subscriptionInfo }) => {\n  const [settings, setSettings] = useState({\n    businessName: '',\n    timezone: 'UTC',\n    language: 'en',\n    currency: 'USD',\n    dateFormat: 'MM/DD/YYYY',\n  });\n\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n        <Settings /> General Settings\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        Configure general account preferences\n      </Typography>\n\n      <Paper sx={{ p: 3 }}>\n        <Grid container spacing={3}>\n          <Grid item xs={12} md={6}>\n            <TextField\n              fullWidth\n              label=\"Business Name\"\n              value={settings.businessName}\n              onChange={(e) => setSettings({...settings, businessName: e.target.value})}\n            />\n          </Grid>\n\n          <Grid item xs={12} md={6}>\n            <FormControl fullWidth>\n              <InputLabel>Currency</InputLabel>\n              <Select\n                value={settings.currency}\n                label=\"Currency\"\n                onChange={(e) => setSettings({...settings, currency: e.target.value})}\n              >\n                <MenuItem value=\"USD\">USD - US Dollar</MenuItem>\n                <MenuItem value=\"EUR\">EUR - Euro</MenuItem>\n                <MenuItem value=\"GBP\">GBP - British Pound</MenuItem>\n                <MenuItem value=\"CAD\">CAD - Canadian Dollar</MenuItem>\n              </Select>\n            </FormControl>\n          </Grid>\n\n          <Grid item xs={12} md={6}>\n            <FormControl fullWidth>\n              <InputLabel>Timezone</InputLabel>\n              <Select\n                value={settings.timezone}\n                label=\"Timezone\"\n                onChange={(e) => setSettings({...settings, timezone: e.target.value})}\n              >\n                <MenuItem value=\"UTC\">UTC</MenuItem>\n                <MenuItem value=\"America/New_York\">Eastern Time</MenuItem>\n                <MenuItem value=\"America/Chicago\">Central Time</MenuItem>\n                <MenuItem value=\"America/Denver\">Mountain Time</MenuItem>\n                <MenuItem value=\"America/Los_Angeles\">Pacific Time</MenuItem>\n              </Select>\n            </FormControl>\n          </Grid>\n\n          <Grid item xs={12} md={6}>\n            <FormControl fullWidth>\n              <InputLabel>Language</InputLabel>\n              <Select\n                value={settings.language}\n                label=\"Language\"\n                onChange={(e) => setSettings({...settings, language: e.target.value})}\n              >\n                <MenuItem value=\"en\">English</MenuItem>\n                <MenuItem value=\"es\">Spanish</MenuItem>\n                <MenuItem value=\"fr\">French</MenuItem>\n                <MenuItem value=\"de\">German</MenuItem>\n              </Select>\n            </FormControl>\n          </Grid>\n\n          <Grid item xs={12} md={6}>\n            <FormControl fullWidth>\n              <InputLabel>Date Format</InputLabel>\n              <Select\n                value={settings.dateFormat}\n                label=\"Date Format\"\n                onChange={(e) => setSettings({...settings, dateFormat: e.target.value})}\n              >\n                <MenuItem value=\"MM/DD/YYYY\">MM/DD/YYYY</MenuItem>\n                <MenuItem value=\"DD/MM/YYYY\">DD/MM/YYYY</MenuItem>\n                <MenuItem value=\"YYYY-MM-DD\">YYYY-MM-DD</MenuItem>\n              </Select>\n            </FormControl>\n          </Grid>\n\n          <Grid item xs={12}>\n            <Button variant=\"contained\" startIcon={<Save />}>\n              Save Changes\n            </Button>\n          </Grid>\n        </Grid>\n      </Paper>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\merchant\\NotificationSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[245,248],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[245,248],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'subscriptionInfo' is defined but never used.","line":9,"column":77,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":93}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { Box, Typography, Paper, FormControlLabel, Switch, Divider } from '@mui/material';\nimport { Notifications } from '@mui/icons-material';\n\ninterface NotificationSettingsProps {\n  subscriptionInfo?: any;\n}\n\nexport const NotificationSettings: React.FC<NotificationSettingsProps> = ({ subscriptionInfo }) => {\n  const [notifications, setNotifications] = useState({\n    newOrders: true,\n    orderUpdates: true,\n    lowStock: true,\n    courierUpdates: true,\n    reviews: true,\n    marketing: false,\n  });\n\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n        <Notifications /> Notification Preferences\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        Choose how you want to receive notifications\n      </Typography>\n\n      <Paper sx={{ p: 3 }}>\n        <Typography variant=\"h6\" gutterBottom>Email Notifications</Typography>\n        \n        <FormControlLabel\n          control={<Switch checked={notifications.newOrders} onChange={(e) => setNotifications({...notifications, newOrders: e.target.checked})} />}\n          label=\"New orders\"\n        />\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ ml: 4, mb: 2 }}>\n          Get notified when you receive new orders\n        </Typography>\n\n        <Divider sx={{ my: 2 }} />\n\n        <FormControlLabel\n          control={<Switch checked={notifications.orderUpdates} onChange={(e) => setNotifications({...notifications, orderUpdates: e.target.checked})} />}\n          label=\"Order status updates\"\n        />\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ ml: 4, mb: 2 }}>\n          Updates about order shipping, delivery, and issues\n        </Typography>\n\n        <Divider sx={{ my: 2 }} />\n\n        <FormControlLabel\n          control={<Switch checked={notifications.lowStock} onChange={(e) => setNotifications({...notifications, lowStock: e.target.checked})} />}\n          label=\"Low stock alerts\"\n        />\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ ml: 4, mb: 2 }}>\n          Alerts when products are running low on stock\n        </Typography>\n\n        <Divider sx={{ my: 2 }} />\n\n        <FormControlLabel\n          control={<Switch checked={notifications.courierUpdates} onChange={(e) => setNotifications({...notifications, courierUpdates: e.target.checked})} />}\n          label=\"Courier updates\"\n        />\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ ml: 4, mb: 2 }}>\n          Updates from your selected couriers\n        </Typography>\n\n        <Divider sx={{ my: 2 }} />\n\n        <FormControlLabel\n          control={<Switch checked={notifications.reviews} onChange={(e) => setNotifications({...notifications, reviews: e.target.checked})} />}\n          label=\"New reviews\"\n        />\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ ml: 4, mb: 2 }}>\n          Notifications when customers leave reviews\n        </Typography>\n\n        <Divider sx={{ my: 2 }} />\n\n        <FormControlLabel\n          control={<Switch checked={notifications.marketing} onChange={(e) => setNotifications({...notifications, marketing: e.target.checked})} />}\n          label=\"Marketing and tips\"\n        />\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ ml: 4 }}>\n          Tips, best practices, and platform updates\n        </Typography>\n      </Paper>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\merchant\\PaymentSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[245,248],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[245,248],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'subscriptionInfo' is defined but never used.","line":9,"column":67,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":83}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Box, Typography, Paper, Button, Grid, TextField, Alert } from '@mui/material';\nimport { Payment, CreditCard, AccountBalance } from '@mui/icons-material';\n\ninterface PaymentSettingsProps {\n  subscriptionInfo?: any;\n}\n\nexport const PaymentSettings: React.FC<PaymentSettingsProps> = ({ subscriptionInfo }) => {\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n        <Payment /> Payment Settings\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        Manage payment methods and billing information\n      </Typography>\n\n      <Alert severity=\"info\" sx={{ mb: 3 }}>\n        Payments are processed securely through Stripe\n      </Alert>\n\n      <Paper sx={{ p: 3, mb: 3 }}>\n        <Typography variant=\"h6\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n          <CreditCard /> Payment Methods\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\n          No payment methods added yet\n        </Typography>\n        <Button variant=\"outlined\" startIcon={<CreditCard />}>\n          Add Payment Method\n        </Button>\n      </Paper>\n\n      <Paper sx={{ p: 3, mb: 3 }}>\n        <Typography variant=\"h6\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n          <AccountBalance /> Bank Account\n        </Typography>\n        <Grid container spacing={3} sx={{ mt: 1 }}>\n          <Grid item xs={12} md={6}>\n            <TextField fullWidth label=\"Account Holder Name\" />\n          </Grid>\n          <Grid item xs={12} md={6}>\n            <TextField fullWidth label=\"Bank Name\" />\n          </Grid>\n          <Grid item xs={12} md={6}>\n            <TextField fullWidth label=\"Account Number\" />\n          </Grid>\n          <Grid item xs={12} md={6}>\n            <TextField fullWidth label=\"Routing Number\" />\n          </Grid>\n          <Grid item xs={12}>\n            <Button variant=\"contained\">\n              Save Bank Details\n            </Button>\n          </Grid>\n        </Grid>\n      </Paper>\n\n      <Paper sx={{ p: 3 }}>\n        <Typography variant=\"h6\" gutterBottom>Billing History</Typography>\n        <Typography color=\"text.secondary\">No billing history yet</Typography>\n      </Paper>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\merchant\\PreferencesSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[252,255],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[252,255],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'subscriptionInfo' is defined but never used.","line":9,"column":75,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":91}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { Box, Typography, Paper, FormControlLabel, Switch, Divider, TextField, Grid } from '@mui/material';\nimport { Tune } from '@mui/icons-material';\n\ninterface PreferencesSettingsProps {\n  subscriptionInfo?: any;\n}\n\nexport const PreferencesSettings: React.FC<PreferencesSettingsProps> = ({ subscriptionInfo }) => {\n  const [preferences, setPreferences] = useState({\n    autoConfirmOrders: false,\n    requireSignature: true,\n    allowPartialShipments: true,\n    trackInventory: true,\n    lowStockThreshold: 10,\n  });\n\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n        <Tune /> Preferences\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        Customize your merchant experience\n      </Typography>\n\n      <Paper sx={{ p: 3 }}>\n        <Typography variant=\"h6\" gutterBottom>Order Preferences</Typography>\n        \n        <FormControlLabel\n          control={\n            <Switch\n              checked={preferences.autoConfirmOrders}\n              onChange={(e) => setPreferences({...preferences, autoConfirmOrders: e.target.checked})}\n            />\n          }\n          label=\"Auto-confirm orders\"\n        />\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ ml: 4, mb: 2 }}>\n          Automatically confirm orders when received\n        </Typography>\n\n        <Divider sx={{ my: 2 }} />\n\n        <FormControlLabel\n          control={\n            <Switch\n              checked={preferences.requireSignature}\n              onChange={(e) => setPreferences({...preferences, requireSignature: e.target.checked})}\n            />\n          }\n          label=\"Require delivery signature\"\n        />\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ ml: 4, mb: 2 }}>\n          Require customer signature for all deliveries\n        </Typography>\n\n        <Divider sx={{ my: 2 }} />\n\n        <FormControlLabel\n          control={\n            <Switch\n              checked={preferences.allowPartialShipments}\n              onChange={(e) => setPreferences({...preferences, allowPartialShipments: e.target.checked})}\n            />\n          }\n          label=\"Allow partial shipments\"\n        />\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ ml: 4, mb: 3 }}>\n          Ship available items before the full order is ready\n        </Typography>\n\n        <Divider sx={{ my: 3 }} />\n\n        <Typography variant=\"h6\" gutterBottom sx={{ mt: 3 }}>Inventory Preferences</Typography>\n\n        <FormControlLabel\n          control={\n            <Switch\n              checked={preferences.trackInventory}\n              onChange={(e) => setPreferences({...preferences, trackInventory: e.target.checked})}\n            />\n          }\n          label=\"Track inventory\"\n        />\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ ml: 4, mb: 2 }}>\n          Enable inventory tracking for your products\n        </Typography>\n\n        <Grid container spacing={3} sx={{ mt: 1 }}>\n          <Grid item xs={12} md={6}>\n            <TextField\n              fullWidth\n              label=\"Low stock threshold\"\n              type=\"number\"\n              value={preferences.lowStockThreshold}\n              onChange={(e) => setPreferences({...preferences, lowStockThreshold: parseInt(e.target.value)})}\n              helperText=\"Get notified when stock falls below this number\"\n            />\n          </Grid>\n        </Grid>\n      </Paper>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\merchant\\RatingSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TrendingUp' is defined but never used.","line":3,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":26},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[242,245],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[242,245],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'subscriptionInfo' is defined but never used.","line":9,"column":65,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":81}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Box, Typography, Paper, Grid, Card, CardContent, Rating, LinearProgress } from '@mui/material';\nimport { Star, TrendingUp } from '@mui/icons-material';\n\ninterface RatingSettingsProps {\n  subscriptionInfo?: any;\n}\n\nexport const RatingSettings: React.FC<RatingSettingsProps> = ({ subscriptionInfo }) => {\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n        <Star /> Ratings & Reviews\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        Manage your shop ratings and customer reviews\n      </Typography>\n\n      <Grid container spacing={3}>\n        <Grid item xs={12} md={4}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h3\" align=\"center\">4.8</Typography>\n              <Box sx={{ display: 'flex', justifyContent: 'center', my: 1 }}>\n                <Rating value={4.8} precision={0.1} readOnly />\n              </Box>\n              <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\">\n                Based on 234 reviews\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} md={8}>\n          <Paper sx={{ p: 3 }}>\n            <Typography variant=\"h6\" gutterBottom>Rating Breakdown</Typography>\n            {[5, 4, 3, 2, 1].map((stars) => (\n              <Box key={stars} sx={{ display: 'flex', alignItems: 'center', gap: 2, mb: 1 }}>\n                <Typography sx={{ minWidth: 60 }}>{stars} stars</Typography>\n                <LinearProgress\n                  variant=\"determinate\"\n                  value={stars === 5 ? 75 : stars === 4 ? 20 : 5}\n                  sx={{ flexGrow: 1, height: 8, borderRadius: 1 }}\n                />\n                <Typography sx={{ minWidth: 40 }} variant=\"body2\" color=\"text.secondary\">\n                  {stars === 5 ? '75%' : stars === 4 ? '20%' : '5%'}\n                </Typography>\n              </Box>\n            ))}\n          </Paper>\n        </Grid>\n\n        <Grid item xs={12}>\n          <Paper sx={{ p: 3 }}>\n            <Typography variant=\"h6\" gutterBottom>Recent Reviews</Typography>\n            <Typography color=\"text.secondary\">No reviews yet</Typography>\n          </Paper>\n        </Grid>\n      </Grid>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\merchant\\ReturnsSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[253,256],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[253,256],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'subscriptionInfo' is defined but never used.","line":9,"column":67,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":83}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { Box, Typography, Paper, TextField, Button, Grid, FormControlLabel, Switch } from '@mui/material';\nimport { Undo, Save } from '@mui/icons-material';\n\ninterface ReturnsSettingsProps {\n  subscriptionInfo?: any;\n}\n\nexport const ReturnsSettings: React.FC<ReturnsSettingsProps> = ({ subscriptionInfo }) => {\n  const [settings, setSettings] = useState({\n    acceptReturns: true,\n    returnWindow: 30,\n    returnAddress: '',\n    requireReason: true,\n    autoApprove: false,\n  });\n\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n        <Undo /> Returns & Refunds\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        Configure your return and refund policies\n      </Typography>\n\n      <Paper sx={{ p: 3 }}>\n        <Grid container spacing={3}>\n          <Grid item xs={12}>\n            <FormControlLabel\n              control={\n                <Switch\n                  checked={settings.acceptReturns}\n                  onChange={(e) => setSettings({...settings, acceptReturns: e.target.checked})}\n                />\n              }\n              label=\"Accept returns\"\n            />\n          </Grid>\n\n          <Grid item xs={12} md={6}>\n            <TextField\n              fullWidth\n              label=\"Return window (days)\"\n              type=\"number\"\n              value={settings.returnWindow}\n              onChange={(e) => setSettings({...settings, returnWindow: parseInt(e.target.value)})}\n              helperText=\"Number of days customers can request returns\"\n            />\n          </Grid>\n\n          <Grid item xs={12}>\n            <TextField\n              fullWidth\n              label=\"Return address\"\n              multiline\n              rows={3}\n              value={settings.returnAddress}\n              onChange={(e) => setSettings({...settings, returnAddress: e.target.value})}\n              helperText=\"Address where customers should send returns\"\n            />\n          </Grid>\n\n          <Grid item xs={12}>\n            <FormControlLabel\n              control={\n                <Switch\n                  checked={settings.requireReason}\n                  onChange={(e) => setSettings({...settings, requireReason: e.target.checked})}\n                />\n              }\n              label=\"Require return reason\"\n            />\n          </Grid>\n\n          <Grid item xs={12}>\n            <FormControlLabel\n              control={\n                <Switch\n                  checked={settings.autoApprove}\n                  onChange={(e) => setSettings({...settings, autoApprove: e.target.checked})}\n                />\n              }\n              label=\"Auto-approve returns\"\n            />\n          </Grid>\n\n          <Grid item xs={12}>\n            <Button variant=\"contained\" startIcon={<Save />}>\n              Save Return Policy\n            </Button>\n          </Grid>\n        </Grid>\n      </Paper>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\merchant\\SecuritySettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":7,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[347,350],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[347,350],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'subscriptionInfo' is defined but never used.","line":10,"column":69,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":85}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Box, Typography, Paper, Button, List, ListItem, ListItemText, ListItemSecondaryAction, Switch, Divider } from '@mui/material';\nimport { Security, VpnKey, Smartphone } from '@mui/icons-material';\nimport { ChangePasswordForm } from '../ChangePasswordForm';\n\ninterface SecuritySettingsProps {\n  subscriptionInfo?: any;\n}\n\nexport const SecuritySettings: React.FC<SecuritySettingsProps> = ({ subscriptionInfo }) => {\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n        <Security /> Security Settings\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        Manage your account security and authentication\n      </Typography>\n\n      <Paper sx={{ p: 3, mb: 3 }}>\n        <Typography variant=\"h6\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n          <VpnKey /> Password\n        </Typography>\n        <ChangePasswordForm />\n      </Paper>\n\n      <Paper sx={{ p: 3, mb: 3 }}>\n        <Typography variant=\"h6\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n          <Smartphone /> Two-Factor Authentication\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\n          Add an extra layer of security to your account\n        </Typography>\n        <Button variant=\"outlined\">\n          Enable 2FA\n        </Button>\n      </Paper>\n\n      <Paper sx={{ p: 3 }}>\n        <Typography variant=\"h6\" gutterBottom>Security Preferences</Typography>\n        <List>\n          <ListItem>\n            <ListItemText\n              primary=\"Login notifications\"\n              secondary=\"Get notified when someone logs into your account\"\n            />\n            <ListItemSecondaryAction>\n              <Switch defaultChecked />\n            </ListItemSecondaryAction>\n          </ListItem>\n          <Divider />\n          <ListItem>\n            <ListItemText\n              primary=\"Suspicious activity alerts\"\n              secondary=\"Receive alerts for unusual account activity\"\n            />\n            <ListItemSecondaryAction>\n              <Switch defaultChecked />\n            </ListItemSecondaryAction>\n          </ListItem>\n        </List>\n      </Paper>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\merchant\\ShopsSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getUsageColor' is defined but never used.","line":37,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":37,"endColumn":43},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":56,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":56,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1017,1020],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1017,1020],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":154,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":154,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3621,3624],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3621,3624],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":275,"column":14,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[7695,7738],"text":"\n          You&apos;ve reached your shop limit ("},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[7695,7738],"text":"\n          You&lsquo;ve reached your shop limit ("},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[7695,7738],"text":"\n          You&#39;ve reached your shop limit ("},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[7695,7738],"text":"\n          You&rsquo;ve reached your shop limit ("},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  Paper,\n  Typography,\n  Button,\n  TextField,\n  Grid,\n  Card,\n  CardContent,\n  IconButton,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Alert,\n  Chip,\n  LinearProgress,\n  Switch,\n  FormControlLabel,\n  Avatar,\n} from '@mui/material';\nimport {\n  Add,\n  Edit,\n  Delete,\n  Store,\n  Language,\n  LocationOn,\n  Email,\n  CheckCircle,\n  Warning,\n} from '@mui/icons-material';\nimport { toast } from 'react-hot-toast';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { getUsagePercentage, getUsageColor, formatLimit } from '@/utils/subscriptionHelpers';\n\ninterface Shop {\n  shop_id: string;\n  shop_name: string;\n  website_url: string;\n  description: string;\n  contact_email: string;\n  contact_phone: string;\n  address: string;\n  city: string;\n  postal_code: string;\n  country: string;\n  is_active: boolean;\n  logo_url: string | null;\n  created_at: string;\n}\n\ninterface ShopsSettingsProps {\n  subscriptionInfo: any;\n}\n\nexport const ShopsSettings: React.FC<ShopsSettingsProps> = ({ subscriptionInfo }) => {\n  const navigate = useNavigate();\n  const [shops, setShops] = useState<Shop[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [editingShop, setEditingShop] = useState<Shop | null>(null);\n  const [formData, setFormData] = useState({\n    shop_name: '',\n    website_url: '',\n    description: '',\n    contact_email: '',\n    contact_phone: '',\n    address: '',\n    city: '',\n    postal_code: '',\n    country: 'Sweden',\n  });\n\n  useEffect(() => {\n    fetchShops();\n  }, []);\n\n  const fetchShops = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.get('/api/shops', {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      setShops(response.data.shops || []);\n    } catch (error) {\n      console.error('Error fetching shops:', error);\n      toast.error('Failed to load shops');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleOpenDialog = (shop?: Shop) => {\n    if (shop) {\n      setEditingShop(shop);\n      setFormData({\n        shop_name: shop.shop_name,\n        website_url: shop.website_url,\n        description: shop.description,\n        contact_email: shop.contact_email,\n        contact_phone: shop.contact_phone,\n        address: shop.address,\n        city: shop.city,\n        postal_code: shop.postal_code,\n        country: shop.country,\n      });\n    } else {\n      setEditingShop(null);\n      setFormData({\n        shop_name: '',\n        website_url: '',\n        description: '',\n        contact_email: '',\n        contact_phone: '',\n        address: '',\n        city: '',\n        postal_code: '',\n        country: 'Sweden',\n      });\n    }\n    setDialogOpen(true);\n  };\n\n  const handleCloseDialog = () => {\n    setDialogOpen(false);\n    setEditingShop(null);\n  };\n\n  const handleSaveShop = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      \n      if (editingShop) {\n        // Update existing shop\n        await axios.put(\n          `/api/shops/${editingShop.shop_id}`,\n          formData,\n          { headers: { Authorization: `Bearer ${token}` } }\n        );\n        toast.success('Shop updated successfully');\n      } else {\n        // Create new shop\n        await axios.post('/api/shops', formData, {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        toast.success('Shop created successfully');\n      }\n      \n      handleCloseDialog();\n      fetchShops();\n    } catch (error: any) {\n      const message = error.response?.data?.message || 'Failed to save shop';\n      toast.error(message);\n      \n      if (message.includes('limit')) {\n        setTimeout(() => {\n          if (confirm('Upgrade your subscription to add more shops?')) {\n            navigate('/pricing');\n          }\n        }, 1000);\n      }\n    }\n  };\n\n  const handleDeleteShop = async (shopId: string) => {\n    if (!confirm('Are you sure you want to delete this shop?')) {\n      return;\n    }\n\n    try {\n      const token = localStorage.getItem('token');\n      await axios.delete(`/api/shops/${shopId}`, {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      toast.success('Shop deleted successfully');\n      fetchShops();\n    } catch (error) {\n      toast.error('Failed to delete shop');\n    }\n  };\n\n  const handleToggleActive = async (shopId: string, isActive: boolean) => {\n    try {\n      const token = localStorage.getItem('token');\n      await axios.patch(\n        `/api/shops/${shopId}`,\n        { is_active: !isActive },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      toast.success(isActive ? 'Shop deactivated' : 'Shop activated');\n      fetchShops();\n    } catch (error) {\n      toast.error('Failed to update shop status');\n    }\n  };\n\n  if (loading) {\n    return <Box sx={{ p: 3 }}><LinearProgress /></Box>;\n  }\n\n  const maxShops = subscriptionInfo?.subscription?.max_shops;\n  const shopsCreated = subscriptionInfo?.usage?.shops_created || shops.length;\n  const canAddMore = maxShops === null || shopsCreated < maxShops;\n  const usagePercentage = getUsagePercentage(shopsCreated, maxShops);\n\n  return (\n    <Box>\n      {/* Header with Usage */}\n      <Paper sx={{ p: 3, mb: 3, background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', color: 'white' }}>\n        <Grid container spacing={2} alignItems=\"center\">\n          <Grid item xs={12} md={8}>\n            <Typography variant=\"h5\" fontWeight={600} gutterBottom>\n              Your Shops\n            </Typography>\n            <Typography variant=\"body2\" sx={{ opacity: 0.9, mb: 2 }}>\n              Manage multiple shops and locations. Each shop can have its own settings and tracking page.\n            </Typography>\n            \n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, mb: 1 }}>\n              <Typography variant=\"h3\" fontWeight={700}>\n                {shopsCreated}\n              </Typography>\n              <Typography variant=\"h5\" sx={{ opacity: 0.8 }}>\n                / {formatLimit(maxShops)}\n              </Typography>\n            </Box>\n            \n            {maxShops !== null && (\n              <LinearProgress \n                variant=\"determinate\" \n                value={Math.min(usagePercentage, 100)}\n                sx={{\n                  height: 8,\n                  borderRadius: 4,\n                  bgcolor: 'rgba(255,255,255,0.2)',\n                  '& .MuiLinearProgress-bar': {\n                    bgcolor: usagePercentage >= 100 ? '#ff5252' : 'white',\n                  }\n                }}\n              />\n            )}\n          </Grid>\n          \n          <Grid item xs={12} md={4} sx={{ textAlign: { xs: 'left', md: 'right' } }}>\n            <Button\n              variant=\"contained\"\n              size=\"large\"\n              startIcon={<Add />}\n              onClick={() => canAddMore ? handleOpenDialog() : navigate('/pricing')}\n              disabled={!canAddMore && maxShops !== null}\n              sx={{\n                bgcolor: 'white',\n                color: '#667eea',\n                '&:hover': {\n                  bgcolor: 'rgba(255,255,255,0.9)',\n                },\n                '&:disabled': {\n                  bgcolor: 'rgba(255,255,255,0.3)',\n                  color: 'white',\n                },\n              }}\n            >\n              {canAddMore ? 'Add Shop' : 'Upgrade to Add More'}\n            </Button>\n          </Grid>\n        </Grid>\n      </Paper>\n\n      {/* Limit Warning */}\n      {!canAddMore && maxShops !== null && (\n        <Alert severity=\"warning\" sx={{ mb: 3 }}>\n          You've reached your shop limit ({maxShops} shops).\n          <Button size=\"small\" onClick={() => navigate('/pricing')} sx={{ ml: 1 }}>\n            Upgrade Now\n          </Button>\n        </Alert>\n      )}\n\n      {/* Shops List */}\n      {shops.length === 0 ? (\n        <Paper sx={{ p: 6, textAlign: 'center' }}>\n          <Store sx={{ fontSize: 64, color: 'text.secondary', mb: 2 }} />\n          <Typography variant=\"h6\" gutterBottom>\n            No shops yet\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\n            Create your first shop to start managing orders and tracking\n          </Typography>\n          <Button\n            variant=\"contained\"\n            startIcon={<Add />}\n            onClick={() => handleOpenDialog()}\n          >\n            Create Your First Shop\n          </Button>\n        </Paper>\n      ) : (\n        <Grid container spacing={3}>\n          {shops.map((shop) => (\n            <Grid item xs={12} md={6} key={shop.shop_id}>\n              <Card>\n                <CardContent>\n                  <Box sx={{ display: 'flex', alignItems: 'flex-start', gap: 2, mb: 2 }}>\n                    <Avatar sx={{ width: 56, height: 56, bgcolor: 'primary.main' }}>\n                      <Store />\n                    </Avatar>\n                    \n                    <Box sx={{ flexGrow: 1 }}>\n                      <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 0.5 }}>\n                        <Typography variant=\"h6\" fontWeight={600}>\n                          {shop.shop_name}\n                        </Typography>\n                        {shop.is_active ? (\n                          <Chip label=\"Active\" size=\"small\" color=\"success\" icon={<CheckCircle />} />\n                        ) : (\n                          <Chip label=\"Inactive\" size=\"small\" color=\"default\" icon={<Warning />} />\n                        )}\n                      </Box>\n                      \n                      <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\n                        {shop.description || 'No description'}\n                      </Typography>\n                    </Box>\n                  </Box>\n\n                  <Box sx={{ display: 'flex', flexDirection: 'column', gap: 1, mb: 2 }}>\n                    {shop.website_url && (\n                      <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                        <Language fontSize=\"small\" color=\"action\" />\n                        <Typography variant=\"body2\" color=\"text.secondary\">\n                          {shop.website_url}\n                        </Typography>\n                      </Box>\n                    )}\n                    \n                    {shop.contact_email && (\n                      <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                        <Email fontSize=\"small\" color=\"action\" />\n                        <Typography variant=\"body2\" color=\"text.secondary\">\n                          {shop.contact_email}\n                        </Typography>\n                      </Box>\n                    )}\n                    \n                    {shop.city && (\n                      <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                        <LocationOn fontSize=\"small\" color=\"action\" />\n                        <Typography variant=\"body2\" color=\"text.secondary\">\n                          {shop.city}, {shop.country}\n                        </Typography>\n                      </Box>\n                    )}\n                  </Box>\n\n                  <Box sx={{ display: 'flex', gap: 1, justifyContent: 'space-between', alignItems: 'center' }}>\n                    <FormControlLabel\n                      control={\n                        <Switch\n                          checked={shop.is_active}\n                          onChange={() => handleToggleActive(shop.shop_id, shop.is_active)}\n                          size=\"small\"\n                        />\n                      }\n                      label={<Typography variant=\"body2\">Active</Typography>}\n                    />\n                    \n                    <Box>\n                      <IconButton size=\"small\" onClick={() => handleOpenDialog(shop)}>\n                        <Edit fontSize=\"small\" />\n                      </IconButton>\n                      <IconButton size=\"small\" color=\"error\" onClick={() => handleDeleteShop(shop.shop_id)}>\n                        <Delete fontSize=\"small\" />\n                      </IconButton>\n                    </Box>\n                  </Box>\n                </CardContent>\n              </Card>\n            </Grid>\n          ))}\n        </Grid>\n      )}\n\n      {/* Add/Edit Shop Dialog */}\n      <Dialog open={dialogOpen} onClose={handleCloseDialog} maxWidth=\"md\" fullWidth>\n        <DialogTitle>\n          {editingShop ? 'Edit Shop' : 'Add New Shop'}\n        </DialogTitle>\n        <DialogContent>\n          <Box sx={{ pt: 2 }}>\n            <Grid container spacing={2}>\n              <Grid item xs={12}>\n                <TextField\n                  fullWidth\n                  label=\"Shop Name\"\n                  value={formData.shop_name}\n                  onChange={(e) => setFormData({ ...formData, shop_name: e.target.value })}\n                  required\n                />\n              </Grid>\n              \n              <Grid item xs={12}>\n                <TextField\n                  fullWidth\n                  label=\"Website URL\"\n                  value={formData.website_url}\n                  onChange={(e) => setFormData({ ...formData, website_url: e.target.value })}\n                  placeholder=\"https://yourshop.com\"\n                />\n              </Grid>\n              \n              <Grid item xs={12}>\n                <TextField\n                  fullWidth\n                  label=\"Description\"\n                  value={formData.description}\n                  onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                  multiline\n                  rows={2}\n                />\n              </Grid>\n              \n              <Grid item xs={12} md={6}>\n                <TextField\n                  fullWidth\n                  label=\"Contact Email\"\n                  type=\"email\"\n                  value={formData.contact_email}\n                  onChange={(e) => setFormData({ ...formData, contact_email: e.target.value })}\n                />\n              </Grid>\n              \n              <Grid item xs={12} md={6}>\n                <TextField\n                  fullWidth\n                  label=\"Contact Phone\"\n                  value={formData.contact_phone}\n                  onChange={(e) => setFormData({ ...formData, contact_phone: e.target.value })}\n                />\n              </Grid>\n              \n              <Grid item xs={12}>\n                <TextField\n                  fullWidth\n                  label=\"Address\"\n                  value={formData.address}\n                  onChange={(e) => setFormData({ ...formData, address: e.target.value })}\n                />\n              </Grid>\n              \n              <Grid item xs={12} md={4}>\n                <TextField\n                  fullWidth\n                  label=\"City\"\n                  value={formData.city}\n                  onChange={(e) => setFormData({ ...formData, city: e.target.value })}\n                />\n              </Grid>\n              \n              <Grid item xs={12} md={4}>\n                <TextField\n                  fullWidth\n                  label=\"Postal Code\"\n                  value={formData.postal_code}\n                  onChange={(e) => setFormData({ ...formData, postal_code: e.target.value })}\n                />\n              </Grid>\n              \n              <Grid item xs={12} md={4}>\n                <TextField\n                  fullWidth\n                  label=\"Country\"\n                  value={formData.country}\n                  onChange={(e) => setFormData({ ...formData, country: e.target.value })}\n                />\n              </Grid>\n            </Grid>\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleCloseDialog}>Cancel</Button>\n          <Button onClick={handleSaveShop} variant=\"contained\">\n            {editingShop ? 'Update Shop' : 'Create Shop'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\settings\\merchant\\TrackingPageSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Visibility' is defined but never used.","line":26,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Language' is defined but never used.","line":27,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":11},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":33,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[552,555],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[552,555],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":353,"column":21,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[10417,10501],"text":"\n              Add a &quot;Track Order\" link in your website menu or footer:\n            "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[10417,10501],"text":"\n              Add a &ldquo;Track Order\" link in your website menu or footer:\n            "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[10417,10501],"text":"\n              Add a &#34;Track Order\" link in your website menu or footer:\n            "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[10417,10501],"text":"\n              Add a &rdquo;Track Order\" link in your website menu or footer:\n            "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":353,"column":33,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[10417,10501],"text":"\n              Add a \"Track Order&quot; link in your website menu or footer:\n            "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[10417,10501],"text":"\n              Add a \"Track Order&ldquo; link in your website menu or footer:\n            "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[10417,10501],"text":"\n              Add a \"Track Order&#34; link in your website menu or footer:\n            "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[10417,10501],"text":"\n              Add a \"Track Order&rdquo; link in your website menu or footer:\n            "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  Paper,\n  Typography,\n  Button,\n  TextField,\n  Grid,\n  Card,\n  CardContent,\n  Switch,\n  FormControlLabel,\n  Alert,\n  IconButton,\n  InputAdornment,\n  Chip,\n  // Image, // Not exported from MUI\n} from '@mui/material';\nimport {\n  ContentCopy,\n  Preview,\n  Save,\n  Palette,\n  Image as ImageIcon,\n  Code,\n  Visibility,\n  Language,\n} from '@mui/icons-material';\nimport { toast } from 'react-hot-toast';\nimport axios from 'axios';\n\ninterface TrackingPageSettingsProps {\n  subscriptionInfo: any;\n}\n\nexport const TrackingPageSettings: React.FC<TrackingPageSettingsProps> = ({ subscriptionInfo }) => {\n  const [settings, setSettings] = useState({\n    tracking_page_enabled: true,\n    custom_domain: '',\n    page_title: 'Track Your Order',\n    header_text: 'Enter your tracking number to see your order status',\n    primary_color: '#667eea',\n    secondary_color: '#764ba2',\n    logo_url: '',\n    show_estimated_delivery: true,\n    show_courier_info: true,\n    show_order_history: true,\n    custom_css: '',\n    custom_footer_text: '',\n  });\n  \n  const [loading, setLoading] = useState(false);\n  const [trackingUrl, setTrackingUrl] = useState('');\n\n  useEffect(() => {\n    fetchSettings();\n    generateTrackingUrl();\n  }, []);\n\n  const fetchSettings = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.get('/api/tracking-page/settings', {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (response.data.settings) {\n        setSettings(response.data.settings);\n      }\n    } catch (error) {\n      console.error('Error fetching tracking page settings:', error);\n    }\n  };\n\n  const generateTrackingUrl = () => {\n    const baseUrl = window.location.origin;\n    const userId = localStorage.getItem('userId') || 'your-merchant-id';\n    setTrackingUrl(`${baseUrl}/track/${userId}`);\n  };\n\n  const handleSave = async () => {\n    setLoading(true);\n    try {\n      const token = localStorage.getItem('token');\n      await axios.post(\n        '/api/tracking-page/settings',\n        settings,\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      toast.success('Tracking page settings saved successfully');\n    } catch (error) {\n      toast.error('Failed to save settings');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const copyTrackingUrl = () => {\n    navigator.clipboard.writeText(trackingUrl);\n    toast.success('Tracking URL copied to clipboard');\n  };\n\n  const copyEmbedCode = () => {\n    const embedCode = `<iframe src=\"${trackingUrl}\" width=\"100%\" height=\"600\" frameborder=\"0\"></iframe>`;\n    navigator.clipboard.writeText(embedCode);\n    toast.success('Embed code copied to clipboard');\n  };\n\n  const openPreview = () => {\n    window.open(trackingUrl, '_blank');\n  };\n\n  return (\n    <Box>\n      {/* Header */}\n      <Paper sx={{ p: 3, mb: 3 }}>\n        <Typography variant=\"h5\" fontWeight={600} gutterBottom>\n          Tracking Page Settings\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\">\n          Customize your branded tracking page where customers can track their orders\n        </Typography>\n      </Paper>\n\n      {/* Tracking URL */}\n      <Paper sx={{ p: 3, mb: 3 }}>\n        <Typography variant=\"h6\" gutterBottom>\n          Your Tracking Page URL\n        </Typography>\n        <Alert severity=\"info\" sx={{ mb: 2 }}>\n          Share this URL with your customers or embed it on your website\n        </Alert>\n        \n        <TextField\n          fullWidth\n          value={trackingUrl}\n          InputProps={{\n            readOnly: true,\n            endAdornment: (\n              <InputAdornment position=\"end\">\n                <IconButton onClick={copyTrackingUrl} edge=\"end\">\n                  <ContentCopy />\n                </IconButton>\n              </InputAdornment>\n            ),\n          }}\n          sx={{ mb: 2 }}\n        />\n\n        <Box sx={{ display: 'flex', gap: 2 }}>\n          <Button\n            variant=\"outlined\"\n            startIcon={<Preview />}\n            onClick={openPreview}\n          >\n            Preview Page\n          </Button>\n          <Button\n            variant=\"outlined\"\n            startIcon={<Code />}\n            onClick={copyEmbedCode}\n          >\n            Copy Embed Code\n          </Button>\n        </Box>\n      </Paper>\n\n      {/* Basic Settings */}\n      <Paper sx={{ p: 3, mb: 3 }}>\n        <Typography variant=\"h6\" gutterBottom>\n          Basic Settings\n        </Typography>\n        \n        <Grid container spacing={2}>\n          <Grid item xs={12}>\n            <FormControlLabel\n              control={\n                <Switch\n                  checked={settings.tracking_page_enabled}\n                  onChange={(e) => setSettings({ ...settings, tracking_page_enabled: e.target.checked })}\n                />\n              }\n              label=\"Enable Tracking Page\"\n            />\n          </Grid>\n\n          <Grid item xs={12} md={6}>\n            <TextField\n              fullWidth\n              label=\"Page Title\"\n              value={settings.page_title}\n              onChange={(e) => setSettings({ ...settings, page_title: e.target.value })}\n            />\n          </Grid>\n\n          <Grid item xs={12} md={6}>\n            <TextField\n              fullWidth\n              label=\"Custom Domain (Optional)\"\n              value={settings.custom_domain}\n              onChange={(e) => setSettings({ ...settings, custom_domain: e.target.value })}\n              placeholder=\"track.yourstore.com\"\n              helperText=\"Professional+ feature\"\n              disabled={subscriptionInfo?.subscription?.tier < 2}\n            />\n          </Grid>\n\n          <Grid item xs={12}>\n            <TextField\n              fullWidth\n              label=\"Header Text\"\n              value={settings.header_text}\n              onChange={(e) => setSettings({ ...settings, header_text: e.target.value })}\n              multiline\n              rows={2}\n            />\n          </Grid>\n\n          <Grid item xs={12}>\n            <TextField\n              fullWidth\n              label=\"Footer Text (Optional)\"\n              value={settings.custom_footer_text}\n              onChange={(e) => setSettings({ ...settings, custom_footer_text: e.target.value })}\n              placeholder=\" 2025 Your Store. All rights reserved.\"\n            />\n          </Grid>\n        </Grid>\n      </Paper>\n\n      {/* Branding */}\n      <Paper sx={{ p: 3, mb: 3 }}>\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 2 }}>\n          <Palette />\n          <Typography variant=\"h6\">\n            Branding & Colors\n          </Typography>\n        </Box>\n\n        <Grid container spacing={2}>\n          <Grid item xs={12} md={6}>\n            <TextField\n              fullWidth\n              label=\"Primary Color\"\n              type=\"color\"\n              value={settings.primary_color}\n              onChange={(e) => setSettings({ ...settings, primary_color: e.target.value })}\n            />\n          </Grid>\n\n          <Grid item xs={12} md={6}>\n            <TextField\n              fullWidth\n              label=\"Secondary Color\"\n              type=\"color\"\n              value={settings.secondary_color}\n              onChange={(e) => setSettings({ ...settings, secondary_color: e.target.value })}\n            />\n          </Grid>\n\n          <Grid item xs={12}>\n            <TextField\n              fullWidth\n              label=\"Logo URL\"\n              value={settings.logo_url}\n              onChange={(e) => setSettings({ ...settings, logo_url: e.target.value })}\n              placeholder=\"https://yourstore.com/logo.png\"\n              InputProps={{\n                startAdornment: (\n                  <InputAdornment position=\"start\">\n                    <ImageIcon />\n                  </InputAdornment>\n                ),\n              }}\n            />\n          </Grid>\n        </Grid>\n      </Paper>\n\n      {/* Display Options */}\n      <Paper sx={{ p: 3, mb: 3 }}>\n        <Typography variant=\"h6\" gutterBottom>\n          Display Options\n        </Typography>\n\n        <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2 }}>\n          <FormControlLabel\n            control={\n              <Switch\n                checked={settings.show_estimated_delivery}\n                onChange={(e) => setSettings({ ...settings, show_estimated_delivery: e.target.checked })}\n              />\n            }\n            label=\"Show Estimated Delivery Date\"\n          />\n\n          <FormControlLabel\n            control={\n              <Switch\n                checked={settings.show_courier_info}\n                onChange={(e) => setSettings({ ...settings, show_courier_info: e.target.checked })}\n              />\n            }\n            label=\"Show Courier Information\"\n          />\n\n          <FormControlLabel\n            control={\n              <Switch\n                checked={settings.show_order_history}\n                onChange={(e) => setSettings({ ...settings, show_order_history: e.target.checked })}\n              />\n            }\n            label=\"Show Order History Timeline\"\n          />\n        </Box>\n      </Paper>\n\n      {/* Custom CSS */}\n      {subscriptionInfo?.subscription?.tier >= 2 && (\n        <Paper sx={{ p: 3, mb: 3 }}>\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 2 }}>\n            <Code />\n            <Typography variant=\"h6\">\n              Custom CSS\n            </Typography>\n            <Chip label=\"Professional+\" size=\"small\" color=\"primary\" />\n          </Box>\n\n          <TextField\n            fullWidth\n            multiline\n            rows={6}\n            value={settings.custom_css}\n            onChange={(e) => setSettings({ ...settings, custom_css: e.target.value })}\n            placeholder=\".tracking-page { background: #f5f5f5; }\"\n            sx={{ fontFamily: 'monospace' }}\n          />\n        </Paper>\n      )}\n\n      {/* Integration Instructions */}\n      <Paper sx={{ p: 3, mb: 3 }}>\n        <Typography variant=\"h6\" gutterBottom>\n          How to Add to Your Website\n        </Typography>\n\n        <Card variant=\"outlined\" sx={{ mb: 2 }}>\n          <CardContent>\n            <Typography variant=\"subtitle2\" gutterBottom fontWeight={600}>\n              Option 1: Direct Link\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\n              Add a \"Track Order\" link in your website menu or footer:\n            </Typography>\n            <Box sx={{ bgcolor: 'grey.100', p: 2, borderRadius: 1, fontFamily: 'monospace', fontSize: '0.875rem' }}>\n              {`<a href=\"${trackingUrl}\">Track Your Order</a>`}\n            </Box>\n          </CardContent>\n        </Card>\n\n        <Card variant=\"outlined\" sx={{ mb: 2 }}>\n          <CardContent>\n            <Typography variant=\"subtitle2\" gutterBottom fontWeight={600}>\n              Option 2: Embed on Page\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\n              Embed the tracking page directly on your website:\n            </Typography>\n            <Box sx={{ bgcolor: 'grey.100', p: 2, borderRadius: 1, fontFamily: 'monospace', fontSize: '0.875rem' }}>\n              {`<iframe src=\"${trackingUrl}\" width=\"100%\" height=\"600\" frameborder=\"0\"></iframe>`}\n            </Box>\n          </CardContent>\n        </Card>\n\n        <Card variant=\"outlined\">\n          <CardContent>\n            <Typography variant=\"subtitle2\" gutterBottom fontWeight={600}>\n              Option 3: WooCommerce/Shopify Plugin\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              Our plugins automatically add tracking links to order confirmation emails and customer accounts.\n              Install from the Integrations page.\n            </Typography>\n          </CardContent>\n        </Card>\n      </Paper>\n\n      {/* Save Button */}\n      <Box sx={{ display: 'flex', justifyContent: 'flex-end', gap: 2 }}>\n        <Button\n          variant=\"outlined\"\n          startIcon={<Preview />}\n          onClick={openPreview}\n        >\n          Preview Changes\n        </Button>\n        <Button\n          variant=\"contained\"\n          startIcon={<Save />}\n          onClick={handleSave}\n          disabled={loading}\n        >\n          {loading ? 'Saving...' : 'Save Settings'}\n        </Button>\n      </Box>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\subscription\\CurrentSubscriptionCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TrendingUp' is defined but never used.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getTierLabel' is assigned a value but never used.","line":57,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":57,"endColumn":21},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":259,"column":20,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[8538,8656],"text":"\n                You&apos;re approaching your plan limits. Consider upgrading to avoid service interruption.\n              "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[8538,8656],"text":"\n                You&lsquo;re approaching your plan limits. Consider upgrading to avoid service interruption.\n              "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[8538,8656],"text":"\n                You&#39;re approaching your plan limits. Consider upgrading to avoid service interruption.\n              "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[8538,8656],"text":"\n                You&rsquo;re approaching your plan limits. Consider upgrading to avoid service interruption.\n              "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport {\n  Card,\n  CardContent,\n  Typography,\n  Box,\n  Chip,\n  Button,\n  LinearProgress,\n  Grid,\n  Divider,\n} from '@mui/material';\nimport {\n  TrendingUp,\n  CheckCircle,\n  Warning,\n  Upgrade,\n} from '@mui/icons-material';\nimport { useNavigate } from 'react-router-dom';\n\ninterface CurrentSubscriptionCardProps {\n  subscriptionInfo: {\n    plan_name: string;\n    tier: number;\n    max_orders_per_month: number | null;\n    max_shops: number | null;\n    max_couriers: number | null;\n    max_team_members: number | null;\n    max_emails_per_month: number | null;\n    current_orders_used: number;\n    current_emails_used: number;\n    has_api_access: boolean;\n    has_advanced_analytics: boolean;\n  };\n  userType: 'merchant' | 'courier';\n}\n\nexport const CurrentSubscriptionCard: React.FC<CurrentSubscriptionCardProps> = ({\n  subscriptionInfo,\n  userType,\n}) => {\n  const navigate = useNavigate();\n\n  const getTierColor = (tier: number) => {\n    switch (tier) {\n      case 1:\n        return 'default';\n      case 2:\n        return 'primary';\n      case 3:\n        return 'success';\n      default:\n        return 'default';\n    }\n  };\n\n  const getTierLabel = (tier: number) => {\n    switch (tier) {\n      case 1:\n        return userType === 'merchant' ? 'Starter' : 'Individual';\n      case 2:\n        return 'Professional';\n      case 3:\n        return userType === 'merchant' ? 'Enterprise' : 'Fleet';\n      default:\n        return 'Free';\n    }\n  };\n\n  const getUsagePercentage = (used: number, max: number | null) => {\n    if (max === null) return 0; // Unlimited\n    return (used / max) * 100;\n  };\n\n  const getUsageColor = (percentage: number) => {\n    if (percentage >= 90) return 'error';\n    if (percentage >= 75) return 'warning';\n    return 'success';\n  };\n\n  const canUpgrade = subscriptionInfo.tier < 3;\n  const canDowngrade = subscriptionInfo.tier > 1;\n\n  const ordersPercentage = getUsagePercentage(\n    subscriptionInfo.current_orders_used,\n    subscriptionInfo.max_orders_per_month\n  );\n\n  const emailsPercentage = getUsagePercentage(\n    subscriptionInfo.current_emails_used,\n    subscriptionInfo.max_emails_per_month\n  );\n\n  return (\n    <Card sx={{ mb: 3, border: '2px solid', borderColor: 'primary.main' }}>\n      <CardContent>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n          <Box>\n            <Typography variant=\"h6\" gutterBottom>\n              Current Subscription\n            </Typography>\n            <Box sx={{ display: 'flex', gap: 1, alignItems: 'center' }}>\n              <Chip\n                label={subscriptionInfo.plan_name}\n                color={getTierColor(subscriptionInfo.tier)}\n                sx={{ fontWeight: 'bold' }}\n              />\n              <Chip\n                label={`Tier ${subscriptionInfo.tier}`}\n                size=\"small\"\n                variant=\"outlined\"\n              />\n            </Box>\n          </Box>\n          <Box sx={{ display: 'flex', gap: 1 }}>\n            {canDowngrade && (\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                onClick={() => navigate('/settings?tab=subscription')}\n              >\n                Downgrade\n              </Button>\n            )}\n            {canUpgrade && (\n              <Button\n                variant=\"contained\"\n                startIcon={<Upgrade />}\n                onClick={() => navigate('/settings?tab=subscription')}\n              >\n                Upgrade\n              </Button>\n            )}\n          </Box>\n        </Box>\n\n        <Divider sx={{ my: 2 }} />\n\n        <Grid container spacing={2}>\n          {/* Orders Usage */}\n          <Grid item xs={12} md={6}>\n            <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\n              Orders This Month\n            </Typography>\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1 }}>\n              <Typography variant=\"h6\">\n                {subscriptionInfo.current_orders_used}\n                {subscriptionInfo.max_orders_per_month !== null && ` / ${subscriptionInfo.max_orders_per_month}`}\n              </Typography>\n              {subscriptionInfo.max_orders_per_month === null && (\n                <Chip label=\"Unlimited\" size=\"small\" color=\"success\" />\n              )}\n            </Box>\n            {subscriptionInfo.max_orders_per_month !== null && (\n              <LinearProgress\n                variant=\"determinate\"\n                value={Math.min(ordersPercentage, 100)}\n                color={getUsageColor(ordersPercentage)}\n                sx={{ height: 8, borderRadius: 1 }}\n              />\n            )}\n          </Grid>\n\n          {/* Emails Usage */}\n          <Grid item xs={12} md={6}>\n            <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\n              Emails This Month\n            </Typography>\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1 }}>\n              <Typography variant=\"h6\">\n                {subscriptionInfo.current_emails_used}\n                {subscriptionInfo.max_emails_per_month !== null && ` / ${subscriptionInfo.max_emails_per_month}`}\n              </Typography>\n              {subscriptionInfo.max_emails_per_month === null && (\n                <Chip label=\"Unlimited\" size=\"small\" color=\"success\" />\n              )}\n            </Box>\n            {subscriptionInfo.max_emails_per_month !== null && (\n              <LinearProgress\n                variant=\"determinate\"\n                value={Math.min(emailsPercentage, 100)}\n                color={getUsageColor(emailsPercentage)}\n                sx={{ height: 8, borderRadius: 1 }}\n              />\n            )}\n          </Grid>\n\n          {/* Merchant Specific Limits */}\n          {userType === 'merchant' && (\n            <>\n              <Grid item xs={12} md={4}>\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  Shops\n                </Typography>\n                <Typography variant=\"h6\">\n                  {subscriptionInfo.max_shops === null ? '' : subscriptionInfo.max_shops}\n                </Typography>\n              </Grid>\n              <Grid item xs={12} md={4}>\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  Couriers\n                </Typography>\n                <Typography variant=\"h6\">\n                  {subscriptionInfo.max_couriers === null ? '' : subscriptionInfo.max_couriers}\n                </Typography>\n              </Grid>\n            </>\n          )}\n\n          {/* Courier Specific Limits */}\n          {userType === 'courier' && (\n            <Grid item xs={12} md={4}>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Team Members\n              </Typography>\n              <Typography variant=\"h6\">\n                {subscriptionInfo.max_team_members === null ? '' : subscriptionInfo.max_team_members}\n              </Typography>\n            </Grid>\n          )}\n\n          {/* Features */}\n          <Grid item xs={12}>\n            <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\n              Features\n            </Typography>\n            <Box sx={{ display: 'flex', gap: 1, flexWrap: 'wrap' }}>\n              {subscriptionInfo.has_api_access && (\n                <Chip icon={<CheckCircle />} label=\"API Access\" size=\"small\" color=\"success\" />\n              )}\n              {subscriptionInfo.has_advanced_analytics && (\n                <Chip icon={<CheckCircle />} label=\"Advanced Analytics\" size=\"small\" color=\"success\" />\n              )}\n              {!subscriptionInfo.has_api_access && (\n                <Chip icon={<Warning />} label=\"No API Access\" size=\"small\" variant=\"outlined\" />\n              )}\n              {!subscriptionInfo.has_advanced_analytics && (\n                <Chip icon={<Warning />} label=\"Basic Analytics Only\" size=\"small\" variant=\"outlined\" />\n              )}\n            </Box>\n          </Grid>\n        </Grid>\n\n        {/* Upgrade Warning */}\n        {(ordersPercentage >= 75 || emailsPercentage >= 75) && canUpgrade && (\n          <Box\n            sx={{\n              mt: 2,\n              p: 2,\n              bgcolor: 'warning.50',\n              border: '1px solid',\n              borderColor: 'warning.200',\n              borderRadius: 1,\n            }}\n          >\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n              <Warning color=\"warning\" />\n              <Typography variant=\"body2\">\n                You're approaching your plan limits. Consider upgrading to avoid service interruption.\n              </Typography>\n            </Box>\n          </Box>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\subscription\\SubscriptionCheckout.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":66,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1523,1526],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1523,1526],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":144,"column":15,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[3702,3738],"text":"\n          What&apos;s included:\n        "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[3702,3738],"text":"\n          What&lsquo;s included:\n        "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[3702,3738],"text":"\n          What&#39;s included:\n        "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[3702,3738],"text":"\n          What&rsquo;s included:\n        "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  Typography,\n  Box,\n  CircularProgress,\n  Alert,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Divider,\n} from '@mui/material';\nimport { Check, CreditCard } from '@mui/icons-material';\nimport { createCheckoutSession, redirectToCheckout } from '@/lib/stripe';\nimport { analytics } from '@/lib/analytics';\n\ninterface SubscriptionCheckoutProps {\n  open: boolean;\n  onClose: () => void;\n  plan: {\n    plan_id: number;\n    plan_name: string;\n    monthly_price: number;\n    annual_price?: number;\n    description?: string;\n    max_orders_per_month?: number;\n    max_emails_per_month?: number;\n    max_sms_per_month?: number;\n    max_couriers?: number;\n    max_team_members?: number;\n  };\n  userId: string;\n}\n\nexport const SubscriptionCheckout: React.FC<SubscriptionCheckoutProps> = ({\n  open,\n  onClose,\n  plan,\n  userId,\n}) => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const handleCheckout = async () => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      // Create checkout session\n      const sessionId = await createCheckoutSession(plan.plan_id.toString(), userId);\n\n      // Track event\n      analytics.subscriptionStarted(\n        plan.plan_id.toString(),\n        plan.plan_name,\n        plan.monthly_price\n      );\n\n      // Redirect to Stripe Checkout\n      await redirectToCheckout(sessionId);\n    } catch (err: any) {\n      console.error('Checkout error:', err);\n      setError(err.message || 'Failed to start checkout');\n      setLoading(false);\n    }\n  };\n\n  const getFeatures = () => {\n    const features: string[] = [];\n\n    if (plan.max_orders_per_month) {\n      features.push(`${plan.max_orders_per_month} orders/month`);\n    } else {\n      features.push('Unlimited orders');\n    }\n\n    if (plan.max_emails_per_month) {\n      features.push(`${plan.max_emails_per_month} emails/month`);\n    } else {\n      features.push('Unlimited emails');\n    }\n\n    if (plan.max_sms_per_month && plan.max_sms_per_month > 0) {\n      features.push(`${plan.max_sms_per_month} SMS/month`);\n    }\n\n    if (plan.max_couriers) {\n      features.push(`Up to ${plan.max_couriers} team members`);\n    } else if (plan.max_team_members) {\n      features.push(`Up to ${plan.max_team_members} team members`);\n    }\n\n    features.push('14-day free trial');\n    features.push('Cancel anytime');\n\n    return features;\n  };\n\n  return (\n    <Dialog open={open} onClose={onClose} maxWidth=\"sm\" fullWidth>\n      <DialogTitle>\n        <Typography variant=\"h5\" component=\"div\">\n          Subscribe to {plan.plan_name}\n        </Typography>\n      </DialogTitle>\n\n      <DialogContent>\n        {error && (\n          <Alert severity=\"error\" sx={{ mb: 2 }}>\n            {error}\n          </Alert>\n        )}\n\n        <Box sx={{ mb: 3 }}>\n          <Typography variant=\"h3\" component=\"div\" gutterBottom>\n            ${plan.monthly_price}\n            <Typography variant=\"body1\" component=\"span\" color=\"text.secondary\">\n              /month\n            </Typography>\n          </Typography>\n\n          {plan.annual_price && (\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              or ${plan.annual_price}/year (save $\n              {(plan.monthly_price * 12 - plan.annual_price).toFixed(0)})\n            </Typography>\n          )}\n        </Box>\n\n        {plan.description && (\n          <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\n            {plan.description}\n          </Typography>\n        )}\n\n        <Divider sx={{ my: 2 }} />\n\n        <Typography variant=\"subtitle2\" gutterBottom>\n          What's included:\n        </Typography>\n\n        <List dense>\n          {getFeatures().map((feature, index) => (\n            <ListItem key={index} disableGutters>\n              <ListItemIcon sx={{ minWidth: 32 }}>\n                <Check color=\"primary\" fontSize=\"small\" />\n              </ListItemIcon>\n              <ListItemText primary={feature} />\n            </ListItem>\n          ))}\n        </List>\n\n        <Alert severity=\"info\" sx={{ mt: 2 }}>\n          <Typography variant=\"body2\">\n            <strong>14-day free trial</strong>  No credit card required during trial \n            Cancel anytime\n          </Typography>\n        </Alert>\n      </DialogContent>\n\n      <DialogActions sx={{ px: 3, pb: 3 }}>\n        <Button onClick={onClose} disabled={loading}>\n          Cancel\n        </Button>\n        <Button\n          variant=\"contained\"\n          onClick={handleCheckout}\n          disabled={loading}\n          startIcon={loading ? <CircularProgress size={20} /> : <CreditCard />}\n          size=\"large\"\n        >\n          {loading ? 'Processing...' : 'Start Free Trial'}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\subscription\\UsageDashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TrendingUp' is defined but never used.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":13},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":160,"column":16,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[4330,4440],"text":"\n            You&apos;re approaching your plan limits. Consider upgrading to avoid service interruption.\n          "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[4330,4440],"text":"\n            You&lsquo;re approaching your plan limits. Consider upgrading to avoid service interruption.\n          "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[4330,4440],"text":"\n            You&#39;re approaching your plan limits. Consider upgrading to avoid service interruption.\n          "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[4330,4440],"text":"\n            You&rsquo;re approaching your plan limits. Consider upgrading to avoid service interruption.\n          "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport {\n  Card,\n  CardContent,\n  Typography,\n  Box,\n  LinearProgress,\n  Grid,\n  Chip,\n  Alert,\n  CircularProgress,\n} from '@mui/material';\nimport {\n  TrendingUp,\n  Email,\n  ShoppingCart,\n  Sms,\n  Warning,\n  CheckCircle,\n  Refresh,\n} from '@mui/icons-material';\nimport { useSubscriptionLimits } from '@/hooks/useSubscriptionLimits';\n\nexport const UsageDashboard: React.FC = () => {\n  const { usageSummary, isLoading, refetchUsage } = useSubscriptionLimits();\n\n  if (isLoading) {\n    return (\n      <Card>\n        <CardContent>\n          <Box sx={{ display: 'flex', justifyContent: 'center', py: 4 }}>\n            <CircularProgress />\n          </Box>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (!usageSummary?.hasSubscription) {\n    return (\n      <Card>\n        <CardContent>\n          <Alert severity=\"info\">\n            No active subscription found. Subscribe to a plan to track your usage.\n          </Alert>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  const { plan, usage, period } = usageSummary;\n\n  const getUsageColor = (percentage: number) => {\n    if (percentage >= 90) return 'error';\n    if (percentage >= 75) return 'warning';\n    return 'success';\n  };\n\n  const formatDate = (date: Date) => {\n    return new Date(date).toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric',\n    });\n  };\n\n  const UsageItem = ({\n    icon,\n    label,\n    used,\n    limit,\n    percentage,\n    unlimited,\n  }: {\n    icon: React.ReactNode;\n    label: string;\n    used: number;\n    limit: number | null;\n    percentage: number;\n    unlimited: boolean;\n  }) => (\n    <Grid item xs={12} md={4}>\n      <Box sx={{ p: 2, border: '1px solid', borderColor: 'divider', borderRadius: 1 }}>\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 2 }}>\n          {icon}\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            {label}\n          </Typography>\n        </Box>\n\n        <Box sx={{ display: 'flex', alignItems: 'baseline', gap: 1, mb: 1 }}>\n          <Typography variant=\"h4\" fontWeight=\"bold\">\n            {used.toLocaleString()}\n          </Typography>\n          {!unlimited && limit !== null && (\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              / {limit.toLocaleString()}\n            </Typography>\n          )}\n          {unlimited && (\n            <Chip label=\"Unlimited\" size=\"small\" color=\"success\" />\n          )}\n        </Box>\n\n        {!unlimited && limit !== null && (\n          <>\n            <LinearProgress\n              variant=\"determinate\"\n              value={Math.min(percentage, 100)}\n              color={getUsageColor(percentage)}\n              sx={{ height: 8, borderRadius: 1, mb: 1 }}\n            />\n            <Typography variant=\"caption\" color=\"text.secondary\">\n              {percentage.toFixed(0)}% used\n              {percentage >= 75 && percentage < 90 && ' - Consider upgrading'}\n              {percentage >= 90 && ' - Limit almost reached!'}\n            </Typography>\n          </>\n        )}\n      </Box>\n    </Grid>\n  );\n\n  const showWarning =\n    (usage?.orders && usage.orders.percentage >= 75) ||\n    (usage?.emails && usage.emails.percentage >= 75) ||\n    (usage?.sms && usage.sms.percentage >= 75);\n\n  return (\n    <Card>\n      <CardContent sx={{ p: 3 }}>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n          <Box>\n            <Typography variant=\"h6\" gutterBottom>\n              Usage Dashboard\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              {plan?.name} Plan  Tier {plan?.tier}\n            </Typography>\n            {period && (\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Period: {formatDate(period.start)} - {formatDate(period.end)}\n              </Typography>\n            )}\n          </Box>\n          <Box>\n            <Chip\n              icon={<Refresh />}\n              label=\"Auto-refreshes\"\n              size=\"small\"\n              variant=\"outlined\"\n              onClick={() => refetchUsage()}\n              sx={{ cursor: 'pointer' }}\n            />\n          </Box>\n        </Box>\n\n        {showWarning && (\n          <Alert severity=\"warning\" icon={<Warning />} sx={{ mb: 3 }}>\n            You're approaching your plan limits. Consider upgrading to avoid service interruption.\n          </Alert>\n        )}\n\n        <Grid container spacing={2}>\n          {usage?.orders && (\n            <UsageItem\n              icon={<ShoppingCart color=\"primary\" />}\n              label=\"Orders This Month\"\n              used={usage.orders.used}\n              limit={usage.orders.limit}\n              percentage={usage.orders.percentage}\n              unlimited={usage.orders.unlimited}\n            />\n          )}\n\n          {usage?.emails && (\n            <UsageItem\n              icon={<Email color=\"primary\" />}\n              label=\"Emails Sent\"\n              used={usage.emails.used}\n              limit={usage.emails.limit}\n              percentage={usage.emails.percentage}\n              unlimited={usage.emails.unlimited}\n            />\n          )}\n\n          {usage?.sms && (\n            <UsageItem\n              icon={<Sms color=\"primary\" />}\n              label=\"SMS Sent\"\n              used={usage.sms.used}\n              limit={usage.sms.limit}\n              percentage={usage.sms.percentage}\n              unlimited={usage.sms.unlimited}\n            />\n          )}\n        </Grid>\n\n        {/* Success message if usage is healthy */}\n        {!showWarning && (\n          <Box sx={{ mt: 3, display: 'flex', alignItems: 'center', gap: 1 }}>\n            <CheckCircle color=\"success\" fontSize=\"small\" />\n            <Typography variant=\"body2\" color=\"success.main\">\n              Your usage is healthy. Keep up the good work!\n            </Typography>\n          </Box>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default UsageDashboard;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\team\\InviteMemberDialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":53,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1103,1106],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1103,1106],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  TextField,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Box,\n  Typography,\n  Alert,\n  Chip\n} from '@mui/material';\nimport { TeamRole, ROLE_PERMISSIONS } from '@/types/team';\n\ninterface InviteMemberDialogProps {\n  open: boolean;\n  onClose: () => void;\n  onInvite: (email: string, role: TeamRole) => Promise<void>;\n  entityType: 'courier' | 'store';\n  loading?: boolean;\n}\n\nexport const InviteMemberDialog: React.FC<InviteMemberDialogProps> = ({\n  open,\n  onClose,\n  onInvite,\n  entityType,\n  loading = false\n}) => {\n  const [email, setEmail] = useState('');\n  const [role, setRole] = useState<TeamRole>('member');\n  const [error, setError] = useState('');\n\n  const handleSubmit = async () => {\n    if (!email.trim()) {\n      setError('Email is required');\n      return;\n    }\n\n    if (!email.includes('@')) {\n      setError('Please enter a valid email address');\n      return;\n    }\n\n    try {\n      await onInvite(email.trim(), role);\n      handleClose();\n    } catch (err: any) {\n      setError(err.message || 'Failed to send invitation');\n    }\n  };\n\n  const handleClose = () => {\n    setEmail('');\n    setRole('member');\n    setError('');\n    onClose();\n  };\n\n  const getRoleDescription = (role: TeamRole) => {\n    const permissions = ROLE_PERMISSIONS[role];\n    const actions: string[] = [];\n\n    if (permissions.canManageSettings) actions.push('Manage settings');\n    if (permissions.canInvite) actions.push('Invite members');\n    if (permissions.canUpdateRoles) actions.push('Update roles');\n    if (permissions.canRemove) actions.push('Remove members');\n    if (permissions.canEdit) actions.push('Edit content');\n    if (permissions.canViewAll) actions.push('View all data');\n\n    return actions.join(', ');\n  };\n\n  return (\n    <Dialog open={open} onClose={handleClose} maxWidth=\"sm\" fullWidth>\n      <DialogTitle>\n        Invite Team Member to {entityType === 'courier' ? 'Courier Company' : 'Store'}\n      </DialogTitle>\n      <DialogContent>\n        <Box sx={{ pt: 2, display: 'flex', flexDirection: 'column', gap: 3 }}>\n          {error && (\n            <Alert severity=\"error\" onClose={() => setError('')}>\n              {error}\n            </Alert>\n          )}\n\n          <TextField\n            label=\"Email Address\"\n            type=\"email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            fullWidth\n            required\n            placeholder=\"colleague@example.com\"\n            helperText=\"The person will receive an invitation email\"\n          />\n\n          <FormControl fullWidth>\n            <InputLabel>Role</InputLabel>\n            <Select\n              value={role}\n              label=\"Role\"\n              onChange={(e) => setRole(e.target.value as TeamRole)}\n            >\n              <MenuItem value=\"admin\">\n                <Box>\n                  <Typography variant=\"body2\" fontWeight=\"medium\">\n                    Admin\n                  </Typography>\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    Full access except ownership transfer\n                  </Typography>\n                </Box>\n              </MenuItem>\n              <MenuItem value=\"manager\">\n                <Box>\n                  <Typography variant=\"body2\" fontWeight=\"medium\">\n                    Manager\n                  </Typography>\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    Can invite members and edit content\n                  </Typography>\n                </Box>\n              </MenuItem>\n              <MenuItem value=\"member\">\n                <Box>\n                  <Typography variant=\"body2\" fontWeight=\"medium\">\n                    Member\n                  </Typography>\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    Can view and access most features\n                  </Typography>\n                </Box>\n              </MenuItem>\n              <MenuItem value=\"viewer\">\n                <Box>\n                  <Typography variant=\"body2\" fontWeight=\"medium\">\n                    Viewer\n                  </Typography>\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    Read-only access to data\n                  </Typography>\n                </Box>\n              </MenuItem>\n            </Select>\n          </FormControl>\n\n          <Box>\n            <Typography variant=\"subtitle2\" gutterBottom>\n              Selected Role Permissions:\n            </Typography>\n            <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\n              {getRoleDescription(role).split(', ').map((permission, index) => (\n                <Chip\n                  key={index}\n                  label={permission}\n                  size=\"small\"\n                  variant=\"outlined\"\n                  color=\"primary\"\n                />\n              ))}\n            </Box>\n          </Box>\n\n          <Alert severity=\"info\">\n            The invited person will receive an email with instructions to join your team. \n            The invitation will expire in 7 days.\n          </Alert>\n        </Box>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleClose} disabled={loading}>\n          Cancel\n        </Button>\n        <Button \n          onClick={handleSubmit} \n          variant=\"contained\" \n          disabled={loading || !email.trim()}\n        >\n          {loading ? 'Sending...' : 'Send Invitation'}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\team\\TeamMembersList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\tracking\\OrderTracking.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[463,466],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[463,466],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has a missing dependency: 'fetchTracking'. Either include it or remove the dependency array.","line":17,"column":6,"nodeType":"ArrayExpression","endLine":17,"endColumn":22,"suggestions":[{"desc":"Update the dependencies array to be: [fetchTracking, trackingNumber]","fix":{"range":[582,598],"text":"[fetchTracking, trackingNumber]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":47,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1635,1638],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1635,1638],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Card, CardContent, Typography, Box, Chip, Stepper, Step, StepLabel, StepContent, Button } from '@mui/material';\nimport { Refresh } from '@mui/icons-material';\n\ninterface OrderTrackingProps {\n  trackingNumber: string;\n  courier: string;\n  onRefresh?: () => void;\n}\n\nexport const OrderTracking: React.FC<OrderTrackingProps> = ({ trackingNumber, courier, onRefresh }) => {\n  const [trackingData, setTrackingData] = React.useState<any>(null);\n  const [loading, setLoading] = React.useState(true);\n\n  React.useEffect(() => {\n    fetchTracking();\n  }, [trackingNumber]);\n\n  const fetchTracking = async () => {\n    try {\n      const response = await fetch(`/api/tracking/${trackingNumber}`);\n      const data = await response.json();\n      if (data.success) {\n        setTrackingData(data.data);\n      }\n    } catch (error) {\n      console.error('Error fetching tracking:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) return <Typography>Loading tracking...</Typography>;\n  if (!trackingData) return <Typography>No tracking data available</Typography>;\n\n  return (\n    <Card>\n      <CardContent>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 2 }}>\n          <Typography variant=\"h6\">Tracking Information</Typography>\n          <Chip label={trackingData.status.replace(/_/g, ' ')} color=\"primary\" />\n        </Box>\n        <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\n          {courier}  {trackingNumber}\n        </Typography>\n        <Stepper orientation=\"vertical\" sx={{ mt: 2 }}>\n          {trackingData.events?.map((event: any, index: number) => (\n            <Step key={index} active completed={index > 0}>\n              <StepLabel>\n                <Typography variant=\"subtitle2\">{event.statusDescription}</Typography>\n                <Typography variant=\"caption\">{new Date(event.eventTime).toLocaleString()}</Typography>\n              </StepLabel>\n              <StepContent>\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  {event.location?.name || event.location?.city}\n                </Typography>\n              </StepContent>\n            </Step>\n          ))}\n        </Stepper>\n        {onRefresh && (\n          <Button startIcon={<Refresh />} onClick={onRefresh} sx={{ mt: 2 }}>\n            Refresh\n          </Button>\n        )}\n      </CardContent>\n    </Card>\n  );\n};","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\tracking\\TrackingWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\components\\tracking\\UnifiedTrackingSearch.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FilterList' is defined but never used.","line":23,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":13},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":91,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":91,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1858,1861],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1858,1861],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":92,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":92,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1909,1912],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1909,1912],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'loadCouriers' and 'loadStores'. Either include them or remove the dependency array.","line":98,"column":6,"nodeType":"ArrayExpression","endLine":98,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [loadCouriers, loadStores]","fix":{"range":[2024,2026],"text":"[loadCouriers, loadStores]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":144,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":144,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3607,3610],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3607,3610],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":369,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":369,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10913,10916],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10913,10916],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  TextField,\n  Button,\n  Select,\n  MenuItem,\n  FormControl,\n  InputLabel,\n  Grid,\n  Paper,\n  Typography,\n  Chip,\n  Avatar,\n  CircularProgress,\n  Alert,\n  IconButton,\n  Tooltip,\n  InputAdornment\n} from '@mui/material';\nimport {\n  Search,\n  FilterList,\n  Clear,\n  Refresh,\n  LocalShipping,\n  CheckCircle,\n  Schedule,\n  Error as ErrorIcon\n} from '@mui/icons-material';\nimport axios from 'axios';\nimport { useAuthStore } from '../../store/authStore';\nimport toast from 'react-hot-toast';\n\ninterface TrackingResult {\n  order_id: string;\n  tracking_number: string;\n  status: string;\n  customer_name: string;\n  customer_email: string;\n  delivery_address: {\n    address: string;\n    postal_code: string;\n    city: string;\n    country: string;\n  };\n  estimated_delivery: string;\n  created_at: string;\n  store: {\n    store_id: string;\n    store_name: string;\n  };\n  courier: {\n    courier_id: string;\n    courier_name: string;\n    courier_code: string;\n    logo_url: string;\n    tracking_url: string | null;\n  };\n  last_event: {\n    timestamp: string;\n    description: string;\n    location: string;\n  } | null;\n}\n\ninterface SearchFilters {\n  query: string;\n  courier: string;\n  status: string;\n  store_id: string;\n  date_from: string;\n  date_to: string;\n}\n\nexport const UnifiedTrackingSearch: React.FC = () => {\n  const { token } = useAuthStore();\n  const [filters, setFilters] = useState<SearchFilters>({\n    query: '',\n    courier: '',\n    status: '',\n    store_id: '',\n    date_from: '',\n    date_to: ''\n  });\n  const [results, setResults] = useState<TrackingResult[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [page, setPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(0);\n  const [total, setTotal] = useState(0);\n  const [couriers, setCouriers] = useState<any[]>([]);\n  const [stores, setStores] = useState<any[]>([]);\n\n  // Load couriers and stores on mount\n  useEffect(() => {\n    loadCouriers();\n    loadStores();\n  }, []);\n\n  const loadCouriers = async () => {\n    try {\n      const response = await axios.get('/api/couriers', {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setCouriers(response.data.couriers || []);\n    } catch (error) {\n      console.error('Failed to load couriers:', error);\n    }\n  };\n\n  const loadStores = async () => {\n    try {\n      const response = await axios.get('/api/stores', {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setStores(response.data.stores || []);\n    } catch (error) {\n      console.error('Failed to load stores:', error);\n    }\n  };\n\n  const handleSearch = async (newPage = 1) => {\n    setLoading(true);\n    setPage(newPage);\n\n    try {\n      const params = new URLSearchParams();\n      if (filters.query) params.append('q', filters.query);\n      if (filters.courier) params.append('courier', filters.courier);\n      if (filters.status) params.append('status', filters.status);\n      if (filters.store_id) params.append('store_id', filters.store_id);\n      if (filters.date_from) params.append('date_from', filters.date_from);\n      if (filters.date_to) params.append('date_to', filters.date_to);\n      params.append('page', newPage.toString());\n      params.append('per_page', '20');\n\n      const response = await axios.get(`/api/tracking/search?${params.toString()}`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n\n      setResults(response.data.results);\n      setTotal(response.data.pagination.total);\n      setTotalPages(response.data.pagination.total_pages);\n    } catch (error: any) {\n      console.error('Search error:', error);\n      toast.error(error.response?.data?.error || 'Failed to search tracking');\n      setResults([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClearFilters = () => {\n    setFilters({\n      query: '',\n      courier: '',\n      status: '',\n      store_id: '',\n      date_from: '',\n      date_to: ''\n    });\n    setResults([]);\n    setPage(1);\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case 'delivered':\n        return <CheckCircle color=\"success\" />;\n      case 'in_transit':\n      case 'out_for_delivery':\n        return <LocalShipping color=\"primary\" />;\n      case 'exception':\n      case 'returned':\n        return <ErrorIcon color=\"error\" />;\n      default:\n        return <Schedule color=\"action\" />;\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'delivered':\n        return 'success';\n      case 'in_transit':\n      case 'out_for_delivery':\n        return 'primary';\n      case 'exception':\n      case 'returned':\n        return 'error';\n      default:\n        return 'default';\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  return (\n    <Box>\n      {/* Search Filters */}\n      <Paper sx={{ p: 3, mb: 3 }}>\n        <Typography variant=\"h6\" gutterBottom>\n           Search Tracking\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n          Search across all couriers, stores, and orders\n        </Typography>\n\n        <Grid container spacing={2}>\n          {/* Search Query */}\n          <Grid item xs={12} md={6}>\n            <TextField\n              fullWidth\n              label=\"Search\"\n              placeholder=\"Tracking number, order ID, customer email...\"\n              value={filters.query}\n              onChange={(e) => setFilters({ ...filters, query: e.target.value })}\n              onKeyPress={(e) => e.key === 'Enter' && handleSearch()}\n              InputProps={{\n                startAdornment: (\n                  <InputAdornment position=\"start\">\n                    <Search />\n                  </InputAdornment>\n                )\n              }}\n            />\n          </Grid>\n\n          {/* Courier Filter */}\n          <Grid item xs={12} sm={6} md={3}>\n            <FormControl fullWidth>\n              <InputLabel>Courier</InputLabel>\n              <Select\n                value={filters.courier}\n                onChange={(e) => setFilters({ ...filters, courier: e.target.value })}\n                label=\"Courier\"\n              >\n                <MenuItem value=\"\">All Couriers</MenuItem>\n                {couriers.map((courier) => (\n                  <MenuItem key={courier.courier_id} value={courier.courier_code.toLowerCase()}>\n                    {courier.courier_name}\n                  </MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n          </Grid>\n\n          {/* Status Filter */}\n          <Grid item xs={12} sm={6} md={3}>\n            <FormControl fullWidth>\n              <InputLabel>Status</InputLabel>\n              <Select\n                value={filters.status}\n                onChange={(e) => setFilters({ ...filters, status: e.target.value })}\n                label=\"Status\"\n              >\n                <MenuItem value=\"\">All Status</MenuItem>\n                <MenuItem value=\"pending\">Pending</MenuItem>\n                <MenuItem value=\"picked_up\">Picked Up</MenuItem>\n                <MenuItem value=\"in_transit\">In Transit</MenuItem>\n                <MenuItem value=\"out_for_delivery\">Out for Delivery</MenuItem>\n                <MenuItem value=\"delivered\">Delivered</MenuItem>\n                <MenuItem value=\"exception\">Exception</MenuItem>\n                <MenuItem value=\"returned\">Returned</MenuItem>\n              </Select>\n            </FormControl>\n          </Grid>\n\n          {/* Store Filter */}\n          {stores.length > 1 && (\n            <Grid item xs={12} sm={6} md={3}>\n              <FormControl fullWidth>\n                <InputLabel>Store</InputLabel>\n                <Select\n                  value={filters.store_id}\n                  onChange={(e) => setFilters({ ...filters, store_id: e.target.value })}\n                  label=\"Store\"\n                >\n                  <MenuItem value=\"\">All Stores</MenuItem>\n                  {stores.map((store) => (\n                    <MenuItem key={store.store_id} value={store.store_id}>\n                      {store.store_name}\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n            </Grid>\n          )}\n\n          {/* Action Buttons */}\n          <Grid item xs={12}>\n            <Box sx={{ display: 'flex', gap: 1 }}>\n              <Button\n                variant=\"contained\"\n                startIcon={<Search />}\n                onClick={() => handleSearch()}\n                disabled={loading}\n              >\n                Search\n              </Button>\n              <Button\n                variant=\"outlined\"\n                startIcon={<Clear />}\n                onClick={handleClearFilters}\n              >\n                Clear\n              </Button>\n              <Button\n                variant=\"outlined\"\n                startIcon={<Refresh />}\n                onClick={() => handleSearch(page)}\n                disabled={loading}\n              >\n                Refresh\n              </Button>\n            </Box>\n          </Grid>\n        </Grid>\n      </Paper>\n\n      {/* Results */}\n      {loading ? (\n        <Box sx={{ display: 'flex', justifyContent: 'center', py: 4 }}>\n          <CircularProgress />\n        </Box>\n      ) : results.length > 0 ? (\n        <>\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n            Found {total} results\n          </Typography>\n\n          {results.map((result) => (\n            <Paper key={result.order_id} sx={{ p: 2, mb: 2 }}>\n              <Grid container spacing={2} alignItems=\"center\">\n                {/* Courier Logo */}\n                <Grid item>\n                  <Avatar\n                    src={result.courier.logo_url}\n                    alt={result.courier.courier_name}\n                    sx={{ width: 48, height: 48 }}\n                  >\n                    <LocalShipping />\n                  </Avatar>\n                </Grid>\n\n                {/* Tracking Info */}\n                <Grid item xs>\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 0.5 }}>\n                    <Typography variant=\"h6\">\n                      {result.courier.courier_name}\n                    </Typography>\n                    <Chip\n                      label={result.tracking_number}\n                      size=\"small\"\n                      variant=\"outlined\"\n                    />\n                    <Chip\n                      icon={getStatusIcon(result.status)}\n                      label={result.status.replace('_', ' ').toUpperCase()}\n                      size=\"small\"\n                      color={getStatusColor(result.status) as any}\n                    />\n                  </Box>\n\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    {result.customer_name}  {result.store.store_name}\n                  </Typography>\n\n                  {result.last_event && (\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                       {result.last_event.description}  {result.last_event.location} {' '}\n                      {formatDate(result.last_event.timestamp)}\n                    </Typography>\n                  )}\n\n                  {result.estimated_delivery && (\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                       ETA: {formatDate(result.estimated_delivery)}\n                    </Typography>\n                  )}\n                </Grid>\n\n                {/* Actions */}\n                <Grid item>\n                  <Box sx={{ display: 'flex', gap: 1 }}>\n                    {result.courier.tracking_url && (\n                      <Tooltip title=\"Track on courier website\">\n                        <IconButton\n                          size=\"small\"\n                          onClick={() => window.open(result.courier.tracking_url!, '_blank')}\n                        >\n                          <LocalShipping />\n                        </IconButton>\n                      </Tooltip>\n                    )}\n                    <Button\n                      size=\"small\"\n                      variant=\"outlined\"\n                      onClick={() => window.location.href = `/orders/${result.order_id}`}\n                    >\n                      View Details\n                    </Button>\n                  </Box>\n                </Grid>\n              </Grid>\n            </Paper>\n          ))}\n\n          {/* Pagination */}\n          {totalPages > 1 && (\n            <Box sx={{ display: 'flex', justifyContent: 'center', gap: 1, mt: 3 }}>\n              <Button\n                disabled={page === 1}\n                onClick={() => handleSearch(page - 1)}\n              >\n                Previous\n              </Button>\n              <Typography sx={{ py: 1, px: 2 }}>\n                Page {page} of {totalPages}\n              </Typography>\n              <Button\n                disabled={page === totalPages}\n                onClick={() => handleSearch(page + 1)}\n              >\n                Next\n              </Button>\n            </Box>\n          )}\n        </>\n      ) : (\n        <Alert severity=\"info\">\n          No tracking results found. Try adjusting your search filters.\n        </Alert>\n      )}\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\config\\sentry.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'hint' is defined but never used.","line":64,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":64,"endColumn":29},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":86,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":86,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2605,2608],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2605,2608],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as Sentry from '@sentry/react';\n\nexport const initSentry = () => {\n  const dsn = import.meta.env.VITE_SENTRY_DSN;\n  \n  // Check if DSN is configured\n  if (!dsn) {\n    console.warn('Sentry DSN not configured. Skipping Sentry initialization.');\n    return;\n  }\n\n  try {\n    Sentry.init({\n      dsn,\n      \n      // Integrations\n      integrations: [\n        Sentry.browserTracingIntegration(),\n        Sentry.replayIntegration({\n          maskAllText: false,\n          blockAllMedia: false,\n        }),\n      ],\n      \n      // Set tracesSampleRate to 1.0 to capture 100% of transactions for performance monitoring.\n      // We recommend adjusting this value in production\n      tracesSampleRate: import.meta.env.PROD ? 0.1 : 1.0, // 100% in dev, 10% in prod\n      \n      // Set `tracePropagationTargets` to control for which URLs distributed tracing should be enabled\n      tracePropagationTargets: [\n        'localhost',\n        /^https:\\/\\/frontend-two-swart-31\\.vercel\\.app/,\n        /^https:\\/\\/.*\\.vercel\\.app/\n      ],\n      \n      // Capture Replay for 10% of all sessions,\n      // plus 100% of sessions with an error\n      replaysSessionSampleRate: import.meta.env.PROD ? 0.1 : 1.0,\n      replaysOnErrorSampleRate: 1.0,\n      \n      // Additional options\n      environment: import.meta.env.VITE_VERCEL_ENV || import.meta.env.MODE || 'development',\n      release: import.meta.env.VITE_VERCEL_GIT_COMMIT_SHA,\n      enabled: true,\n      \n      // Ignore common errors\n      ignoreErrors: [\n        // Browser extensions\n        'top.GLOBALS',\n        // Random plugins/extensions\n        'originalCreateNotification',\n        'canvas.contentDocument',\n        'MyApp_RemoveAllHighlights',\n        // Facebook\n        'fb_xd_fragment',\n        // Network errors\n        'NetworkError',\n        'Network request failed',\n        // Pusher connection errors (non-critical)\n        'Pusher',\n      ],\n      \n      // Before sending to Sentry\n      beforeSend(event, hint) {\n        // Log in development\n        if (import.meta.env.DEV) {\n          console.log('Sentry event (dev mode):', event);\n        }\n        \n        // Filter out non-error events in production\n        if (import.meta.env.PROD && (event.level === 'info' || event.level === 'warning')) {\n          return null;\n        }\n        \n        return event;\n      },\n    });\n    \n    console.log(' Sentry initialized successfully');\n  } catch (error) {\n    console.error(' Failed to initialize Sentry:', error);\n  }\n};\n\n// Helper to manually capture errors\nexport const captureError = (error: Error, context?: Record<string, any>) => {\n  if (import.meta.env.PROD) {\n    Sentry.captureException(error, {\n      extra: context,\n    });\n  } else {\n    console.error('Error captured:', error, context);\n  }\n};\n\n// Helper to set user context\nexport const setSentryUser = (user: { id: string; email?: string; username?: string }) => {\n  if (import.meta.env.PROD) {\n    Sentry.setUser({\n      id: user.id,\n      email: user.email,\n      username: user.username,\n    });\n  }\n};\n\n// Helper to clear user context (on logout)\nexport const clearSentryUser = () => {\n  if (import.meta.env.PROD) {\n    Sentry.setUser(null);\n  }\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\hooks\\useApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\hooks\\useMerchantDashboardTour.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":7,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[206,209],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[206,209],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":159,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":159,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4293,4296],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4293,4296],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useRef } from 'react';\nimport Shepherd from 'shepherd.js';\nimport 'shepherd.js/dist/css/shepherd.css';\n\nconst TOUR_STORAGE_KEY = 'performile_merchant_tour_seen_v1';\n\ntype ShepherdTour = any;\n\nexport function useMerchantDashboardTour(enabled: boolean) {\n  const tourRef = useRef<ShepherdTour | null>(null);\n\n  const safelyDestroyTour = (tour: ShepherdTour | null) => {\n    if (tour && typeof tour.destroy === 'function') {\n      tour.destroy();\n    }\n  };\n\n  useEffect(() => {\n    if (!enabled) {\n      safelyDestroyTour(tourRef.current);\n      tourRef.current = null;\n      return;\n    }\n\n    // Destroy existing tour before creating a new instance (strict mode safety)\n    safelyDestroyTour(tourRef.current);\n    tourRef.current = null;\n\n    const tour = new Shepherd.Tour({\n      useModalOverlay: true,\n      defaultStepOptions: {\n        cancelIcon: {\n          enabled: true,\n        },\n        scrollTo: {\n          behavior: 'smooth',\n          block: 'center',\n        },\n        classes: 'performile-tour',\n      },\n    });\n\n    const safeSetSeen = () => {\n      if (typeof window !== 'undefined') {\n        window.localStorage.setItem(TOUR_STORAGE_KEY, 'true');\n      }\n    };\n\n    const steps = [\n      {\n        id: 'merchant-tour-welcome',\n        title: 'Welcome to your merchant dashboard',\n        text: 'Let\\'s walk through the high-impact areas so you can configure couriers and monitor performance with confidence.',\n        attachTo: {\n          element: '#merchant-tour-welcome',\n          on: 'bottom',\n        },\n        buttons: [\n          {\n            text: 'Skip',\n            secondary: true,\n            action: () => {\n              safeSetSeen();\n              tour.cancel();\n            },\n          },\n          {\n            text: 'Next',\n            action: tour.next,\n          },\n        ],\n      },\n      {\n        id: 'merchant-tour-kpis',\n        title: 'Track courier KPIs',\n        text: 'These cards highlight on-time rate, completion rate, and how many couriers you have available. Watch these numbers as you tweak your courier mix.',\n        attachTo: {\n          element: '#merchant-tour-kpis',\n          on: 'bottom',\n        },\n        buttons: [\n          {\n            text: 'Back',\n            secondary: true,\n            action: tour.back,\n          },\n          {\n            text: 'Next',\n            action: tour.next,\n          },\n        ],\n      },\n      {\n        id: 'merchant-tour-orders',\n        title: 'Understand checkout performance',\n        text: 'Order and claims trends refresh with the latest checkout analytics so you can see how courier capability filters impact conversion.',\n        attachTo: {\n          element: '#merchant-tour-orders',\n          on: 'top',\n        },\n        buttons: [\n          {\n            text: 'Back',\n            secondary: true,\n            action: tour.back,\n          },\n          {\n            text: 'Next',\n            action: tour.next,\n          },\n        ],\n      },\n      {\n        id: 'merchant-tour-quick-actions',\n        title: 'Configure couriers in seconds',\n        text: 'Quick Actions gives you shortcuts into courier selection, returns, and policy updatesperfect after applying new drop-off filters.',\n        attachTo: {\n          element: '#merchant-tour-quick-actions',\n          on: 'top',\n        },\n        buttons: [\n          {\n            text: 'Back',\n            secondary: true,\n            action: tour.back,\n          },\n          {\n            text: 'Next',\n            action: tour.next,\n          },\n        ],\n      },\n      {\n        id: 'merchant-tour-tracking',\n        title: 'Keep customers in the loop',\n        text: 'The live tracking widget mirrors what consumers see. Use it to sanity-check delivery promises before you promote new courier options.',\n        attachTo: {\n          element: '#merchant-tour-tracking',\n          on: 'left',\n        },\n        buttons: [\n          {\n            text: 'Back',\n            secondary: true,\n            action: tour.back,\n          },\n          {\n            text: 'Finish',\n            action: () => {\n              safeSetSeen();\n              tour.complete();\n            },\n          },\n        ],\n      },\n    ];\n\n    steps.forEach((step) => {\n      tour.addStep(step as any);\n    });\n\n    tourRef.current = tour;\n\n    let autoStartTimer: number | undefined;\n\n    if (typeof window !== 'undefined' && !window.localStorage.getItem(TOUR_STORAGE_KEY)) {\n      autoStartTimer = window.setTimeout(() => {\n        if (tourRef.current) {\n          tourRef.current.start();\n          safeSetSeen();\n        }\n      }, 500);\n    }\n\n    return () => {\n      if (autoStartTimer) {\n        window.clearTimeout(autoStartTimer);\n      }\n      safelyDestroyTour(tour);\n      tourRef.current = null;\n    };\n  }, [enabled]);\n\n  const startTour = () => {\n    if (!enabled) {\n      return;\n    }\n\n    if (tourRef.current && typeof tourRef.current.start === 'function') {\n      tourRef.current.start();\n      if (typeof window !== 'undefined') {\n        window.localStorage.setItem(TOUR_STORAGE_KEY, 'true');\n      }\n    } else {\n      console.warn('[MerchantTour] Attempted to start tour before initialization.');\n    }\n  };\n\n  return { startTour };\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\hooks\\useResponsive.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\hooks\\useSubscriptionLimits.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":47,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[917,920],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[917,920],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":64,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":64,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1482,1485],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1482,1485],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport axios from 'axios';\nimport { apiClient } from '@/services/apiClient';\n\ninterface SubscriptionLimitError {\n  error: string;\n  limit_type: string;\n  current_usage: number;\n  max_allowed: number;\n  plan_name: string;\n  tier: number;\n  upgrade_required: boolean;\n  message: string;\n}\n\ninterface UsageSummary {\n  hasSubscription: boolean;\n  plan?: {\n    name: string;\n    tier: number;\n  };\n  period?: {\n    start: Date;\n    end: Date;\n  };\n  usage?: {\n    orders: {\n      used: number;\n      limit: number | null;\n      percentage: number;\n      unlimited: boolean;\n    };\n    emails: {\n      used: number;\n      limit: number | null;\n      percentage: number;\n      unlimited: boolean;\n    };\n    sms: {\n      used: number;\n      limit: number | null;\n      percentage: number;\n      unlimited: boolean;\n    };\n  };\n  features?: any;\n}\n\nexport const useSubscriptionLimits = () => {\n  const [upgradePromptOpen, setUpgradePromptOpen] = useState(false);\n  const [limitError, setLimitError] = useState<SubscriptionLimitError | null>(null);\n\n  // Fetch usage summary\n  const { data: usageSummary, isLoading, refetch } = useQuery<UsageSummary>({\n    queryKey: ['usage-summary'],\n    queryFn: async () => {\n      const response = await apiClient.get('/usage/summary');\n      return response.data.data;\n    },\n    refetchInterval: 60000, // Refetch every minute\n  });\n\n  const handleApiError = (error: any) => {\n    if (axios.isAxiosError(error) && error.response?.status === 403) {\n      const data = error.response.data;\n      \n      if (data.code && data.code.includes('LIMIT_EXCEEDED')) {\n        setLimitError({\n          error: data.error,\n          limit_type: data.code,\n          current_usage: 0,\n          max_allowed: 0,\n          plan_name: '',\n          tier: 0,\n          upgrade_required: true,\n          message: data.message,\n        });\n        setUpgradePromptOpen(true);\n        return true; // Handled\n      }\n    }\n    return false; // Not a subscription limit error\n  };\n\n  const closeUpgradePrompt = () => {\n    setUpgradePromptOpen(false);\n    setLimitError(null);\n  };\n\n  return {\n    upgradePromptOpen,\n    limitError,\n    usageSummary,\n    isLoading,\n    refetchUsage: refetch,\n    handleApiError,\n    closeUpgradePrompt\n  };\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\hooks\\useTeamApi.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":63,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2014,2017],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2014,2017],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":63,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2030,2033],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2030,2033],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":67,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":67,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2223,2226],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2223,2226],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":82,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":82,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2706,2709],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2706,2709],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":82,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":82,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2722,2725],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2722,2725],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":86,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":86,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2911,2914],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2911,2914],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":107,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":107,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3642,3645],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3642,3645],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":130,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":130,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4193,4196],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4193,4196],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":130,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":130,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4209,4212],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4209,4212],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":139,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":139,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4629,4632],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4629,4632],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":158,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":158,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5098,5101],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5098,5101],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":158,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":158,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5114,5117],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5114,5117],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":168,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":168,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5605,5608],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5605,5608],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":13,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\nimport { toast } from 'react-hot-toast';\nimport { \n  TeamMember, \n  InviteTeamMemberRequest, \n  UserEntities,\n  TeamRole \n} from '@/types/team';\nimport { apiClient } from '@/services/apiClient';\n\n// Query keys\nexport const teamKeys = {\n  all: ['team'] as const,\n  courierMembers: (courierId: string) => [...teamKeys.all, 'courier', courierId, 'members'] as const,\n  storeMembers: (storeId: string) => [...teamKeys.all, 'store', storeId, 'members'] as const,\n  userEntities: () => [...teamKeys.all, 'user-entities'] as const,\n};\n\n// Get courier team members\nexport const useCourierTeamMembers = (courierId: string) => {\n  return useQuery({\n    queryKey: teamKeys.courierMembers(courierId),\n    queryFn: async (): Promise<TeamMember[]> => {\n      const response = await apiClient.get(`/team/couriers/${courierId}/members`);\n      return response.data.data;\n    },\n    enabled: !!courierId,\n  });\n};\n\n// Get store team members\nexport const useStoreTeamMembers = (storeId: string) => {\n  return useQuery({\n    queryKey: teamKeys.storeMembers(storeId),\n    queryFn: async (): Promise<TeamMember[]> => {\n      const response = await apiClient.get(`/team/stores/${storeId}/members`);\n      return response.data.data;\n    },\n    enabled: !!storeId,\n  });\n};\n\n// Get user's accessible entities\nexport const useUserEntities = () => {\n  return useQuery({\n    queryKey: teamKeys.userEntities(),\n    queryFn: async (): Promise<UserEntities> => {\n      const response = await apiClient.get('/team/my-entities');\n      return response.data.data;\n    },\n  });\n};\n\n// Invite member to courier team\nexport const useInviteToCourierTeam = () => {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async ({ courierId, ...data }: InviteTeamMemberRequest & { courierId: string }) => {\n      const response = await apiClient.post(`/team/couriers/${courierId}/invite`, data);\n      return response.data;\n    },\n    onSuccess: (_: any, variables: any) => {\n      queryClient.invalidateQueries({ queryKey: teamKeys.courierMembers(variables.courierId) });\n      toast.success('Team invitation sent successfully');\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || 'Failed to send invitation');\n    },\n  });\n};\n\n// Invite member to store team\nexport const useInviteToStoreTeam = () => {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async ({ storeId, ...data }: InviteTeamMemberRequest & { storeId: string }) => {\n      const response = await apiClient.post(`/team/stores/${storeId}/invite`, data);\n      return response.data;\n    },\n    onSuccess: (_: any, variables: any) => {\n      queryClient.invalidateQueries({ queryKey: teamKeys.storeMembers(variables.storeId) });\n      toast.success('Team invitation sent successfully');\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || 'Failed to send invitation');\n    },\n  });\n};\n\n// Accept invitation\nexport const useAcceptInvitation = () => {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async (token: string) => {\n      const response = await apiClient.post(`/team/invitations/${token}/accept`);\n      return response.data;\n    },\n    onSuccess: () => {\n      // Invalidate all team-related queries since we don't know which entity was joined\n      queryClient.invalidateQueries({ queryKey: teamKeys.all });\n      queryClient.invalidateQueries({ queryKey: teamKeys.userEntities() });\n      toast.success('Successfully joined the team!');\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || 'Failed to accept invitation');\n    },\n  });\n};\n\n// Update team member role\nexport const useUpdateTeamMemberRole = () => {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async ({ \n      teamMemberId, \n      teamRole\n    }: { \n      teamMemberId: string; \n      teamRole: TeamRole;\n    }) => {\n      const response = await apiClient.put(`/team/members/${teamMemberId}/role`, {\n        teamRole\n      });\n      return response.data;\n    },\n    onSuccess: (_: any, variables: any) => {\n      // Invalidate the appropriate team members query\n      if (variables.entityType === 'courier') {\n        queryClient.invalidateQueries({ queryKey: teamKeys.courierMembers(variables.entityId) });\n      } else {\n        queryClient.invalidateQueries({ queryKey: teamKeys.storeMembers(variables.entityId) });\n      }\n      toast.success('Team member role updated successfully');\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || 'Failed to update member role');\n    },\n  });\n};\n\n// Remove team member\nexport const useRemoveTeamMember = () => {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async ({ \n      teamMemberId\n    }: { \n      teamMemberId: string;\n    }) => {\n      const response = await apiClient.delete(`/team/members/${teamMemberId}`);\n      return response.data;\n    },\n    onSuccess: (_: any, variables: any) => {\n      // Invalidate the appropriate team members query\n      if (variables.entityType === 'courier') {\n        queryClient.invalidateQueries({ queryKey: teamKeys.courierMembers(variables.entityId) });\n      } else {\n        queryClient.invalidateQueries({ queryKey: teamKeys.storeMembers(variables.entityId) });\n      }\n      queryClient.invalidateQueries({ queryKey: teamKeys.userEntities() });\n      toast.success('Team member removed successfully');\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || 'Failed to remove team member');\n    },\n  });\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\lib\\analytics.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":69,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":69,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1969,1972],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1969,1972],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":80,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":80,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2252,2255],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2252,2255],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import posthog from 'posthog-js';\n\n// Initialize PostHog\nexport const initAnalytics = () => {\n  const apiKey = import.meta.env.VITE_POSTHOG_KEY;\n  const apiHost = import.meta.env.VITE_POSTHOG_HOST || 'https://us.i.posthog.com';\n\n  // Disable PostHog in production until properly configured\n  if (import.meta.env.PROD && !apiKey) {\n    console.info(' Analytics disabled in production (not configured)');\n    return;\n  }\n\n  if (!apiKey) {\n    console.warn(' PostHog API key not configured. Analytics disabled.');\n    return;\n  }\n\n  try {\n    posthog.init(apiKey, {\n      api_host: apiHost,\n      autocapture: false,\n      capture_pageview: false,\n      capture_pageleave: false,\n      \n      // Disable all external dependencies\n      disable_session_recording: true,\n      disable_surveys: true,\n      disable_external_dependency_loading: true,\n      \n      // Reduce network requests\n      persistence: 'localStorage',\n      \n      // Advanced config to prevent errors\n      advanced_disable_decide: true, // Disable feature flags API calls\n      advanced_disable_feature_flags: true,\n      advanced_disable_feature_flags_on_first_load: true,\n      advanced_disable_toolbar_metrics: true,\n      \n      // Error handling\n      on_xhr_error: (failedRequest) => {\n        console.warn('PostHog request failed:', failedRequest);\n      },\n      \n      // Performance\n      loaded: (posthog) => {\n        if (import.meta.env.DEV) {\n          posthog.debug();\n        }\n        console.log(' PostHog analytics initialized');\n      },\n    });\n  } catch (error) {\n    console.error(' Failed to initialize PostHog:', error);\n    // Don't throw - allow app to continue without analytics\n  }\n};\n\n// Helper to check if PostHog is available\nconst isPostHogAvailable = (): boolean => {\n  try {\n    return posthog && posthog.__loaded === true;\n  } catch {\n    return false;\n  }\n};\n\n// Track custom events\nexport const trackEvent = (eventName: string, properties?: Record<string, any>) => {\n  try {\n    if (isPostHogAvailable()) {\n      posthog.capture(eventName, properties);\n    }\n  } catch (error) {\n    console.warn('Failed to track event:', eventName, error);\n  }\n};\n\n// Identify user\nexport const identifyUser = (userId: string, properties?: Record<string, any>) => {\n  try {\n    if (isPostHogAvailable()) {\n      posthog.identify(userId, properties);\n    }\n  } catch (error) {\n    console.warn('Failed to identify user:', error);\n  }\n};\n\n// Reset user (on logout)\nexport const resetUser = () => {\n  try {\n    if (isPostHogAvailable()) {\n      posthog.reset();\n    }\n  } catch (error) {\n    console.warn('Failed to reset user:', error);\n  }\n};\n\n// Track page view\nexport const trackPageView = (pageName?: string) => {\n  try {\n    if (isPostHogAvailable()) {\n      posthog.capture('$pageview', {\n        $current_url: window.location.href,\n        page_name: pageName,\n      });\n    }\n  } catch (error) {\n    console.warn('Failed to track page view:', error);\n  }\n};\n\n// Feature flags\nexport const isFeatureEnabled = (flagKey: string): boolean => {\n  try {\n    if (isPostHogAvailable()) {\n      return posthog.isFeatureEnabled(flagKey) || false;\n    }\n  } catch (error) {\n    console.warn('Failed to check feature flag:', flagKey, error);\n  }\n  return false;\n};\n\n// Common event tracking helpers\nexport const analytics = {\n  // Auth events\n  signup: (userId: string, userRole: string) => {\n    trackEvent('user_signup', { user_role: userRole });\n    identifyUser(userId, { role: userRole });\n  },\n\n  login: (userId: string, userRole: string) => {\n    trackEvent('user_login', { user_role: userRole });\n    identifyUser(userId, { role: userRole });\n  },\n\n  logout: () => {\n    trackEvent('user_logout');\n    resetUser();\n  },\n\n  // Order events\n  orderCreated: (orderId: string, value?: number) => {\n    trackEvent('order_created', { order_id: orderId, value });\n  },\n\n  orderCompleted: (orderId: string, value?: number) => {\n    trackEvent('order_completed', { order_id: orderId, value });\n  },\n\n  // Review events\n  reviewSubmitted: (reviewId: string, rating: number) => {\n    trackEvent('review_submitted', { review_id: reviewId, rating });\n  },\n\n  reviewRequestSent: (orderId: string) => {\n    trackEvent('review_request_sent', { order_id: orderId });\n  },\n\n  // Subscription events\n  subscriptionStarted: (planId: string, planName: string, price: number) => {\n    trackEvent('subscription_started', {\n      plan_id: planId,\n      plan_name: planName,\n      price,\n    });\n  },\n\n  subscriptionUpgraded: (oldPlan: string, newPlan: string) => {\n    trackEvent('subscription_upgraded', {\n      old_plan: oldPlan,\n      new_plan: newPlan,\n    });\n  },\n\n  subscriptionCancelled: (planId: string, reason?: string) => {\n    trackEvent('subscription_cancelled', {\n      plan_id: planId,\n      reason,\n    });\n  },\n\n  // Team events\n  teamMemberInvited: (email: string, role: string) => {\n    trackEvent('team_member_invited', { email, role });\n  },\n\n  teamMemberJoined: (userId: string, role: string) => {\n    trackEvent('team_member_joined', { user_id: userId, role });\n  },\n\n  // Marketplace events\n  courierViewed: (courierId: string) => {\n    trackEvent('courier_viewed', { courier_id: courierId });\n  },\n\n  courierContacted: (courierId: string) => {\n    trackEvent('courier_contacted', { courier_id: courierId });\n  },\n\n  // Integration events\n  integrationConnected: (platform: string) => {\n    trackEvent('integration_connected', { platform });\n  },\n\n  integrationDisconnected: (platform: string) => {\n    trackEvent('integration_disconnected', { platform });\n  },\n\n  // Error tracking (complement to Sentry)\n  errorOccurred: (errorType: string, errorMessage: string) => {\n    trackEvent('error_occurred', {\n      error_type: errorType,\n      error_message: errorMessage,\n    });\n  },\n};\n\nexport default posthog;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\lib\\stripe.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\AdminSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_user' is assigned a value but never used.","line":67,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":67,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":69,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":69,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2564,2567],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2564,2567],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { useAuthStore } from '../store/authStore';\nimport {\n  Box,\n  Container,\n  Typography,\n  Tabs,\n  Tab,\n  Paper,\n  Chip,\n} from '@mui/material';\nimport {\n  Dashboard as PlatformIcon,\n  People as UsersIcon,\n  Business as MerchantsIcon,\n  LocalShipping as CouriersIcon,\n  AttachMoney as SubscriptionsIcon,\n  Assessment as AnalyticsIcon,\n  Email as EmailIcon,\n  Notifications as NotificationIcon,\n  Security as SecurityIcon,\n  Storage as DatabaseIcon,\n  Settings as SystemIcon,\n  BugReport as LogsIcon,\n} from '@mui/icons-material';\n\n// Import Week 4 Service Analytics\nimport ServiceAnalytics from './admin/ServiceAnalytics';\n\n// Import sub-components\nimport { AdminSubscriptionsSettings } from '../components/settings/admin/AdminSubscriptionsSettings';\n// TODO: Create these components\n// import { AdminPlatformSettings } from '@/components/settings/admin/AdminPlatformSettings';\n// import { AdminUsersSettings } from '@/components/settings/admin/AdminUsersSettings';\n// import { AdminMerchantsSettings } from '@/components/settings/admin/AdminMerchantsSettings';\n// import { AdminCouriersSettings } from '@/components/settings/admin/AdminCouriersSettings';\n// import { AdminAnalyticsSettings } from '@/components/settings/admin/AdminAnalyticsSettings';\n// import { AdminEmailSettings } from '@/components/settings/admin/AdminEmailSettings';\n// import { AdminNotificationSettings } from '@/components/settings/admin/AdminNotificationSettings';\n// import { AdminSecuritySettings } from '@/components/settings/admin/AdminSecuritySettings';\n// import { AdminDatabaseSettings } from '@/components/settings/admin/AdminDatabaseSettings';\n// import { AdminSystemSettings } from '@/components/settings/admin/AdminSystemSettings';\n// import { AdminLogsSettings } from '@/components/settings/admin/AdminLogsSettings';\n\ninterface TabPanelProps {\n  children?: React.ReactNode;\n  index: number;\n  value: number;\n}\n\nfunction TabPanel(props: TabPanelProps) {\n  const { children, value, index, ...other } = props;\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`admin-settings-tabpanel-${index}`}\n      aria-labelledby={`admin-settings-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box sx={{ py: 3 }}>{children}</Box>}\n    </div>\n  );\n}\n\nconst AdminSettings: React.FC = () => {\n  const { user: _user } = useAuthStore(); // Prefix with _ to indicate intentionally unused\n  const [tabValue, setTabValue] = useState(0);\n  const [platformStats, setPlatformStats] = useState<any>(null);\n\n  // Get tab from URL hash if present\n  useEffect(() => {\n    const hash = window.location.hash.replace('#', '');\n    const tabMap: Record<string, number> = {\n      'platform': 0,\n      'users': 1,\n      'merchants': 2,\n      'couriers': 3,\n      'subscriptions': 4,\n      'analytics': 5,\n      'email': 6,\n      'notifications': 7,\n      'security': 8,\n      'database': 9,\n      'system': 10,\n      'logs': 11,\n    };\n    \n    if (hash && tabMap[hash] !== undefined) {\n      setTabValue(tabMap[hash]);\n    }\n  }, []);\n\n  const handleTabChange = (_event: React.SyntheticEvent, newValue: number) => {\n    setTabValue(newValue);\n    \n    // Update URL hash\n    const tabNames = [\n      'platform', 'users', 'merchants', 'couriers', 'subscriptions', 'analytics',\n      'email', 'notifications', 'security', 'database', 'system', 'logs'\n    ];\n    window.location.hash = tabNames[newValue];\n  };\n\n  // Fetch platform stats\n  useEffect(() => {\n    fetchPlatformStats();\n  }, []);\n\n  const fetchPlatformStats = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch('/api/admin/platform-stats', {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n      });\n      const data = await response.json();\n      setPlatformStats(data.stats);\n    } catch (error) {\n      console.error('Error fetching platform stats:', error);\n    }\n  };\n\n  const totalUsers = platformStats?.total_users || 0;\n  const totalMerchants = platformStats?.total_merchants || 0;\n  const totalCouriers = platformStats?.total_couriers || 0;\n\n  return (\n    <Container maxWidth=\"xl\" sx={{ mt: 4, mb: 4 }}>\n      {/* Header */}\n      <Box sx={{ mb: 4 }}>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n          <Box>\n            <Typography variant=\"h3\" component=\"h1\" gutterBottom>\n              Admin Settings\n            </Typography>\n            <Typography variant=\"body1\" color=\"text.secondary\">\n              Platform administration and system configuration\n            </Typography>\n          </Box>\n          <Box sx={{ display: 'flex', gap: 1 }}>\n            <Chip label={`${totalUsers} Users`} color=\"primary\" />\n            <Chip label={`${totalMerchants} Merchants`} color=\"secondary\" />\n            <Chip label={`${totalCouriers} Couriers`} color=\"success\" />\n          </Box>\n        </Box>\n      </Box>\n\n      {/* Navigation Tabs */}\n      <Paper sx={{ mb: 3 }}>\n        <Tabs\n          value={tabValue}\n          onChange={handleTabChange}\n          variant=\"scrollable\"\n          scrollButtons=\"auto\"\n          sx={{\n            borderBottom: 1,\n            borderColor: 'divider',\n            '& .MuiTab-root': {\n              minHeight: 72,\n              textTransform: 'none',\n              fontSize: '0.95rem',\n            },\n          }}\n        >\n          <Tab \n            icon={<PlatformIcon />} \n            label=\"Platform Overview\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<UsersIcon />} \n            label=\"User Management\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<MerchantsIcon />} \n            label=\"Merchant Management\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<CouriersIcon />} \n            label=\"Courier Management\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<SubscriptionsIcon />} \n            label=\"Subscriptions & Billing\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<AnalyticsIcon />} \n            label=\"Platform Analytics\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<EmailIcon />} \n            label=\"Email System\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<NotificationIcon />} \n            label=\"Notifications\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<SecurityIcon />} \n            label=\"Security & Access\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<DatabaseIcon />} \n            label=\"Database\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<SystemIcon />} \n            label=\"System Settings\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<LogsIcon />} \n            label=\"Logs & Monitoring\" \n            iconPosition=\"start\"\n          />\n        </Tabs>\n      </Paper>\n\n      {/* Tab Panels */}\n      <TabPanel value={tabValue} index={0}>\n        <Typography>Platform Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={1}>\n        <Typography>Users Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={2}>\n        <Typography>Merchants Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={3}>\n        <Typography>Couriers Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={4}>\n        <AdminSubscriptionsSettings platformStats={platformStats} />\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={5}>\n        <ServiceAnalytics />\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={6}>\n        <Typography>Email Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={7}>\n        <Typography>Notification Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={8}>\n        <Typography>Security Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={9}>\n        <Typography>Database Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={10}>\n        <Typography>System Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={11}>\n        <Typography>Logs Settings - Coming Soon</Typography>\n      </TabPanel>\n    </Container>\n  );\n};\n\nexport default AdminSettings;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\Analytics.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":81,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":81,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2072,2075],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2072,2075],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":158,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":158,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5156,5159],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5156,5159],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useMemo has a missing dependency: 'safeCourierData'. Either include it or remove the dependency array.","line":181,"column":6,"nodeType":"ArrayExpression","endLine":181,"endColumn":36,"suggestions":[{"desc":"Update the dependencies array to be: [user?.user_role, safeCourierData]","fix":{"range":[6477,6507],"text":"[user?.user_role, safeCourierData]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":187,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":187,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6686,6689],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6686,6689],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'featureId' is defined but never used.","line":191,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":191,"endColumn":49},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":372,"column":59,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[13101,13227],"text":"\n                  No courier data available. Make sure you&apos;ve run the seed-demo-data.sql script in Supabase.\n                "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[13101,13227],"text":"\n                  No courier data available. Make sure you&lsquo;ve run the seed-demo-data.sql script in Supabase.\n                "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[13101,13227],"text":"\n                  No courier data available. Make sure you&#39;ve run the seed-demo-data.sql script in Supabase.\n                "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[13101,13227],"text":"\n                  No courier data available. Make sure you&rsquo;ve run the seed-demo-data.sql script in Supabase.\n                "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":379,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":379,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13436,13439],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13436,13439],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":379,"column":65,"nodeType":"Identifier","messageId":"unusedVar","endLine":379,"endColumn":78}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Container,\n  Grid,\n  Card,\n  CardContent,\n  Typography,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  TextField,\n  Box,\n  Chip,\n  Button,\n  Alert,\n  Tabs,\n  Tab\n} from '@mui/material';\nimport { Assessment } from '@mui/icons-material';\nimport {\n  LineChart,\n  Line,\n  AreaChart,\n  Area,\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  ResponsiveContainer,\n  PieChart,\n  Pie,\n  Cell\n} from 'recharts';\nimport { AnalyticsFilters } from '@/types/analytics';\nimport { useAuthStore } from '@/store/authStore';\nimport { useQuery } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport { PerformanceByLocation } from '@/components/analytics/PerformanceByLocation';\nimport { AvailableMarketsList } from '@/components/analytics/AvailableMarketsList';\n// import { DatePicker } from '@mui/x-date-pickers/DatePicker';\n// import { TimeFilter } from '../components/analytics/TimeFilter';\n\n// Chart colors\n// const COLORS = ['#0088FE', '#00C49F', '#FFBB28', '#FF8042', '#8884D8'];\n\ninterface TabPanelProps {\n  children?: React.ReactNode;\n  index: number;\n  value: number;\n}\n\nconst TabPanel: React.FC<TabPanelProps> = ({ children, value, index }) => {\n  return (\n    <div hidden={value !== index}>\n      {value === index && <Box sx={{ pt: 3 }}>{children}</Box>}\n    </div>\n  );\n};\n\nexport const Analytics: React.FC = () => {\n  const { user } = useAuthStore();\n  const [activeTab, setActiveTab] = useState(0);\n  const [selectedMarket, setSelectedMarket] = useState<string>('NO'); // Default to Norway\n  const [filters, setFilters] = useState<AnalyticsFilters>({\n    timeRange: 'month',\n    city: '',\n    postalCode: '',\n    country: ''\n  });\n\n  // Fetch analytics data from API (role-based endpoints)\n  const { data: analyticsData, isLoading: analyticsLoading, error: analyticsError } = useQuery({\n    queryKey: ['analytics', user?.user_role, filters],\n    queryFn: async () => {\n      // Get role-specific analytics endpoint\n      let endpoint = '';\n      let params: any = {\n        timeRange: filters.timeRange,\n        startDate: filters.customStartDate,\n        endDate: filters.customEndDate,\n      };\n\n      switch (user?.user_role) {\n        case 'merchant':\n          endpoint = '/merchant/analytics';\n          params = {\n            ...params,\n            shopId: filters.city, // Reuse city filter for shop selection\n          };\n          break;\n        case 'courier':\n          endpoint = '/courier/analytics';\n          break;\n        case 'admin':\n          endpoint = '/admin/analytics';\n          params = {\n            ...params,\n            compare: 'true',\n            postal_code: filters.postalCode,\n            country: filters.country,\n          };\n          break;\n        default:\n          // Consumer role doesn't have analytics\n          return null;\n      }\n\n      if (!endpoint) return null;\n\n      const response = await apiClient.get(endpoint, { params });\n      return response.data;\n    },\n    enabled: !!user && user.user_role !== 'consumer' // Only fetch for roles with analytics\n  });\n\n  const courierData = Array.isArray(analyticsData?.data) ? analyticsData.data : [];\n  \n  // Ensure courierData is always an array to prevent .slice() errors\n  const safeCourierData = Array.isArray(courierData) ? courierData : [];\n\n  // Mock data for demonstration\n  const performanceData = [\n    { date: '2024-01', trustScore: 85, orderVolume: 1200, revenue: 45000, avgOrdersPerDay: 39, peakHours: '12-14,18-20' },\n    { date: '2024-02', trustScore: 87, orderVolume: 1350, revenue: 52000, avgOrdersPerDay: 48, peakHours: '12-14,18-20' },\n    { date: '2024-03', trustScore: 89, orderVolume: 1500, revenue: 58000, avgOrdersPerDay: 48, peakHours: '11-13,17-19' },\n    { date: '2024-04', trustScore: 91, orderVolume: 1650, revenue: 63000, avgOrdersPerDay: 55, peakHours: '12-14,18-20' },\n    { date: '2024-05', trustScore: 88, orderVolume: 1400, revenue: 55000, avgOrdersPerDay: 45, peakHours: '12-14,17-19' },\n    { date: '2024-06', trustScore: 92, orderVolume: 1800, revenue: 68000, avgOrdersPerDay: 60, peakHours: '11-13,18-20' }\n  ];\n\n  const orderStatistics = {\n    totalOrders: 9900,\n    monthlyGrowth: 12.5,\n    avgOrdersPerDay: 52,\n    peakHours: ['12:00-14:00', '18:00-20:00'],\n    completionRate: 94.2,\n    avgDeliveryTime: 28.5\n  };\n\n  const metricsData = [\n    { name: 'Completion Rate', value: 94.5, color: '#00C49F' },\n    { name: 'On-Time Rate', value: 87.2, color: '#0088FE' },\n    { name: 'Customer Satisfaction', value: 4.6, color: '#FFBB28' },\n    { name: 'Response Time', value: 2.3, color: '#FF8042' }\n  ];\n\n  // For admin: Use real courier data (DE-ANONYMIZED), for others: use mock data\n  // IMPORTANT: Admins ALWAYS see real courier names, even with postal code filter\n  // This is intentional - admins need full transparency for platform management\n  const competitorData = React.useMemo(() => {\n    if (user?.user_role === 'admin' && safeCourierData.length > 0) {\n      try {\n        // Admin sees REAL courier names (not \"Competitor A\", \"Competitor B\", etc.)\n        return safeCourierData.map((courier: any) => ({\n          name: courier.courier_name || 'Unknown', // REAL NAME for admins\n          trustScore: Number(courier.overall_score || (courier.avg_rating ? courier.avg_rating * 20 : 0) || 0),\n          marketShare: Number(courier.total_orders || 0),\n          unlocked: true, // Admin sees all data\n          totalOrders: Number(courier.total_orders || 0),\n          avgRating: Number(courier.avg_rating || 0),\n          successRate: Number(courier.delivery_success_rate || 0)\n        }));\n      } catch (error) {\n        console.error('Error mapping courier data:', error);\n        return [];\n      }\n    }\n    \n    // Mock data for non-admin users (ANONYMIZED as \"Competitor A\", \"Competitor B\", etc.)\n    // This protects courier competitive data from merchants and other non-admin users\n    return [\n      { name: 'Competitor A', trustScore: 85, marketShare: 25, unlocked: false, totalOrders: 0, avgRating: 0, successRate: 0 },\n      { name: 'Competitor B', trustScore: 78, marketShare: 18, unlocked: true, totalOrders: 0, avgRating: 0, successRate: 0 },\n      { name: 'Competitor C', trustScore: 92, marketShare: 30, unlocked: false, totalOrders: 0, avgRating: 0, successRate: 0 },\n      { name: 'You', trustScore: 89, marketShare: 15, unlocked: true, totalOrders: 0, avgRating: 0, successRate: 0 }\n    ];\n  }, [user?.user_role, courierData]);\n\n  const handleTabChange = (_: React.SyntheticEvent, newValue: number) => {\n    setActiveTab(newValue);\n  };\n\n  const handleFilterChange = (key: keyof AnalyticsFilters, value: any) => {\n    setFilters(prev => ({ ...prev, [key]: value }));\n  };\n\n  const handleUnlockFeature = (featureId: number) => {\n    // TODO: Implement feature unlock\n  };\n\n  const isFeatureRestricted = (feature: string) => {\n    // Admin users have access to ALL features\n    if (user?.user_role === 'admin') {\n      return false;\n    }\n    \n    // Mock subscription check - would integrate with actual subscription system\n    const userTier = user?.subscription_tier || 'tier1';\n    \n    const restrictions: Record<string, string[]> = {\n      tier1: ['competitor_analysis', 'advanced_filters', 'custom_reports'],\n      tier2: ['custom_reports'],\n      tier3: []\n    };\n    \n    return restrictions[userTier]?.includes(feature) || false;\n  };\n\n  // Determine what couriers/data the user can see based on role and subscription\n  const getDataAccessLevel = () => {\n    if (!user) return { courierLimit: 0, marketLimit: 0, canSeeAllCouriers: false };\n\n    // Admin: Full access to everything\n    if (user.user_role === 'admin') {\n      return {\n        courierLimit: Infinity,\n        marketLimit: Infinity,\n        canSeeAllCouriers: true,\n        canSeeCompetitors: true,\n        canExportData: true,\n        description: 'Full admin access to all data and features'\n      };\n    }\n\n    // Merchant: Access based on subscription tier\n    if (user.user_role === 'merchant') {\n      const tier = user.subscription_tier || 'tier1';\n      const tierLimits = {\n        tier1: { \n          courierLimit: 2, \n          marketLimit: 2, \n          canSeeCompetitors: false,\n          canBuyAddons: true,\n          postalCodeAccess: false\n        },\n        tier2: { \n          courierLimit: 4, \n          marketLimit: 4, \n          canSeeCompetitors: false,\n          canBuyAddons: true,\n          postalCodeAccess: false\n        },\n        tier3: { \n          courierLimit: Infinity, \n          marketLimit: Infinity, \n          canSeeCompetitors: true,\n          canBuyAddons: false,\n          postalCodeAccess: true\n        }\n      };\n      return {\n        ...tierLimits[tier as keyof typeof tierLimits] || tierLimits.tier1,\n        canSeeAllCouriers: false,\n        canExportData: tier !== 'tier1',\n        canBuyLeads: true,\n        description: `Merchant ${tier.toUpperCase()} - ${tier === 'tier3' ? 'Unlimited' : tierLimits[tier as keyof typeof tierLimits].courierLimit + ' couriers, ' + tierLimits[tier as keyof typeof tierLimits].marketLimit + ' markets'}`\n      };\n    }\n\n    // Courier: See own performance + limited competitor data based on tier\n    if (user.user_role === 'courier') {\n      const tier = user.subscription_tier || 'tier1';\n      const tierLimits = {\n        tier1: { \n          courierLimit: 1, \n          marketLimit: 1, \n          canSeeCompetitors: false,\n          canBuyAddons: true,\n          postalCodeAccess: false\n        },\n        tier2: { \n          courierLimit: 1, \n          marketLimit: 4, \n          canSeeCompetitors: false,\n          canBuyAddons: true,\n          postalCodeAccess: false\n        },\n        tier3: { \n          courierLimit: 1, \n          marketLimit: Infinity, \n          canSeeCompetitors: false,\n          canBuyAddons: true,\n          postalCodeAccess: false\n        }\n      };\n      return {\n        ...tierLimits[tier as keyof typeof tierLimits] || tierLimits.tier1,\n        canSeeAllCouriers: false,\n        canExportData: tier !== 'tier1',\n        canBuyLeads: true,\n        canBuyCompetitorData: true,\n        canBuyPostalCodeData: true,\n        description: `Courier ${tier.toUpperCase()} - Your performance, ${tierLimits[tier as keyof typeof tierLimits].marketLimit === Infinity ? 'unlimited' : tierLimits[tier as keyof typeof tierLimits].marketLimit} market${tierLimits[tier as keyof typeof tierLimits].marketLimit !== 1 ? 's' : ''}`\n      };\n    }\n\n    // Consumer: Very limited access\n    return {\n      courierLimit: 0,\n      marketLimit: 0,\n      canSeeAllCouriers: false,\n      canSeeCompetitors: false,\n      canExportData: false,\n      description: 'Consumer - No analytics access'\n    };\n  };\n\n  const dataAccess = getDataAccessLevel();\n\n  return (\n    <Container maxWidth=\"xl\">\n      <Box sx={{ py: 4 }}>\n        <Typography variant=\"h4\" gutterBottom>\n          Analytics Dashboard\n        </Typography>\n        <Typography variant=\"body1\" color=\"text.secondary\" paragraph>\n          Comprehensive performance analytics and market insights\n        </Typography>\n\n        {/* Access Level Indicator */}\n        <Alert \n          severity={user?.user_role === 'admin' ? 'success' : 'info'} \n          sx={{ mb: 3 }}\n          icon={user?.user_role === 'admin' ? <Assessment /> : undefined}\n        >\n          <strong>{dataAccess.description}</strong>\n          {user?.user_role !== 'admin' && (\n            <>\n              <br />\n              <Typography variant=\"caption\">\n                Courier Access: {dataAccess.courierLimit === Infinity ? 'Unlimited' : dataAccess.courierLimit} | \n                Markets: {dataAccess.marketLimit === Infinity ? 'Unlimited' : dataAccess.marketLimit} | \n                Competitor Data: {dataAccess.canSeeCompetitors ? 'Yes' : 'No'} | \n                Export: {dataAccess.canExportData ? 'Yes' : 'No'}\n              </Typography>\n            </>\n          )}\n          {user?.user_role === 'admin' && courierData.length > 0 && (\n            <>\n              <br />\n              <Typography variant=\"caption\">\n                Viewing {courierData.length} courier(s) | Full transparency mode - All data visible\n              </Typography>\n            </>\n          )}\n        </Alert>\n\n        {/* Admin: Real-time Courier Data */}\n        {user?.user_role === 'admin' && (\n          <Card sx={{ mb: 3 }}>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Courier Performance Overview (Live Data)\n              </Typography>\n              \n              {analyticsLoading && (\n                <Alert severity=\"info\">Loading courier data...</Alert>\n              )}\n              \n              {analyticsError && (\n                <Alert severity=\"error\">\n                  Error loading data: {analyticsError instanceof Error ? analyticsError.message : 'Unknown error'}\n                </Alert>\n              )}\n              \n              {!analyticsLoading && !analyticsError && safeCourierData.length === 0 && (\n                <Alert severity=\"warning\">\n                  No courier data available. Make sure you've run the seed-demo-data.sql script in Supabase.\n                </Alert>\n              )}\n              \n              {safeCourierData.length > 0 && (\n                <>\n              <Grid container spacing={2}>\n                {safeCourierData.slice(0, 5).map((courier: any, index: number) => (\n                  <Grid item xs={12} md={6} lg={4} key={courier.courier_id}>\n                    <Card variant=\"outlined\">\n                      <CardContent>\n                        <Typography variant=\"h6\" gutterBottom>\n                          {courier.courier_name}\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\n                           {courier.contact_email} |  {courier.contact_phone}\n                        </Typography>\n                        <Box sx={{ mt: 2 }}>\n                          <Typography variant=\"caption\" display=\"block\">\n                            Total Orders: <strong>{courier.total_orders}</strong> | \n                            Delivered: <strong>{courier.delivered_orders}</strong> | \n                            Success Rate: <strong>{courier.delivery_success_rate}%</strong>\n                          </Typography>\n                          <Typography variant=\"caption\" display=\"block\">\n                            Avg Delivery: <strong>{courier.avg_delivery_hours}h</strong> | \n                            Rating: <strong>{courier.avg_rating}/5</strong> | \n                            Reviews: <strong>{courier.total_reviews}</strong>\n                          </Typography>\n                          <Typography variant=\"caption\" display=\"block\">\n                            Customers: <strong>{courier.unique_customers}</strong> | \n                            Stores: <strong>{courier.total_stores_served}</strong>\n                          </Typography>\n                          <Typography variant=\"caption\" display=\"block\" color=\"primary\">\n                            Since: {new Date(courier.courier_since).toLocaleDateString()}\n                          </Typography>\n                        </Box>\n                      </CardContent>\n                    </Card>\n                  </Grid>\n                ))}\n              </Grid>\n                </>\n              )}\n            </CardContent>\n          </Card>\n        )}\n\n        {/* Filters */}\n        <Card sx={{ mb: 3 }}>\n          <CardContent>\n            <Grid container spacing={3} alignItems=\"center\">\n              <Grid item xs={12} sm={6} md={2}>\n                <FormControl fullWidth size=\"small\">\n                  <InputLabel>Time Range</InputLabel>\n                  <Select\n                    value={filters.timeRange}\n                    label=\"Time Range\"\n                    onChange={(e) => handleFilterChange('timeRange', e.target.value)}\n                  >\n                    <MenuItem value=\"day\">Today</MenuItem>\n                    <MenuItem value=\"week\">Last Week</MenuItem>\n                    <MenuItem value=\"month\">Last Month</MenuItem>\n                    <MenuItem value=\"6months\">Last 6 Months</MenuItem>\n                    <MenuItem value=\"year\">Last Year</MenuItem>\n                    <MenuItem value=\"custom\">Custom Range</MenuItem>\n                  </Select>\n                </FormControl>\n              </Grid>\n\n              <Grid item xs={12} sm={6} md={2}>\n                <TextField\n                  fullWidth\n                  size=\"small\"\n                  label=\"Country\"\n                  value={filters.country}\n                  onClick={() => handleUnlockFeature(29)}\n                  onChange={(e) => handleFilterChange('country', e.target.value)}\n                  placeholder=\"e.g., USA\"\n                />\n              </Grid>\n\n              <Grid item xs={12} sm={6} md={2}>\n                <TextField\n                  fullWidth\n                  size=\"small\"\n                  label=\"City\"\n                  value={filters.city}\n                  onChange={(e) => handleFilterChange('city', e.target.value)}\n                  placeholder=\"e.g., New York\"\n                  disabled={isFeatureRestricted('advanced_filters')}\n                />\n              </Grid>\n\n              <Grid item xs={12} sm={6} md={2}>\n                <TextField\n                  fullWidth\n                  size=\"small\"\n                  label=\"Postal Code\"\n                  value={filters.postalCode}\n                  onChange={(e) => handleFilterChange('postalCode', e.target.value)}\n                  placeholder=\"e.g., 10001\"\n                  disabled={isFeatureRestricted('advanced_filters')}\n                />\n              </Grid>\n\n              <Grid item xs={12} sm={6} md={2}>\n                <Button variant=\"contained\" fullWidth>\n                  Apply Filters\n                </Button>\n              </Grid>\n\n              <Grid item xs={12} sm={6} md={2}>\n                {isFeatureRestricted('advanced_filters') && (\n                  <Chip\n                    label=\"Upgrade for Advanced Filters\"\n                    color=\"warning\"\n                    size=\"small\"\n                  />\n                )}\n              </Grid>\n            </Grid>\n          </CardContent>\n        </Card>\n\n        {/* Analytics Tabs */}\n        <Card>\n          <CardContent>\n            <Tabs value={activeTab} onChange={handleTabChange}>\n              <Tab label=\"Performance Overview\" />\n              <Tab label=\"Competitor Analysis\" disabled={isFeatureRestricted('competitor_analysis')} />\n              <Tab label=\"Market Insights\" />\n              <Tab label=\"Lead Generation\" disabled={user?.user_role === 'courier'} />\n            </Tabs>\n\n            {/* Performance Overview Tab */}\n            <TabPanel value={activeTab} index={0}>\n              <Grid container spacing={3}>\n                {/* TrustScore Trend */}\n                <Grid item xs={12} lg={8}>\n                  <Card>\n                    <CardContent>\n                      <Typography variant=\"h6\" gutterBottom>\n                        TrustScore Trend\n                      </Typography>\n                      <ResponsiveContainer width=\"100%\" height={300}>\n                        <LineChart data={performanceData}>\n                          <CartesianGrid strokeDasharray=\"3 3\" />\n                          <XAxis dataKey=\"date\" />\n                          <YAxis domain={[0, 100]} />\n                          <Tooltip />\n                          <Legend />\n                          <Line \n                            type=\"monotone\" \n                            dataKey=\"trustScore\" \n                            stroke=\"#8884d8\" \n                            strokeWidth={3}\n                            name=\"TrustScore\"\n                          />\n                        </LineChart>\n                      </ResponsiveContainer>\n                    </CardContent>\n                  </Card>\n                </Grid>\n\n                {/* Key Metrics */}\n                <Grid item xs={12} lg={4}>\n                  <Card>\n                    <CardContent>\n                      <Typography variant=\"h6\" gutterBottom>\n                        Key Metrics\n                      </Typography>\n                      <ResponsiveContainer width=\"100%\" height={300}>\n                        <PieChart>\n                          <Pie\n                            data={metricsData}\n                            cx=\"50%\"\n                            cy=\"50%\"\n                            outerRadius={80}\n                            fill=\"#8884d8\"\n                            dataKey=\"value\"\n                            label={({ name, value }) => `${name}: ${value}${name.includes('Rate') ? '%' : name.includes('Time') ? 'h' : ''}`}\n                          >\n                            {metricsData.map((entry, index) => (\n                              <Cell key={`cell-${index}`} fill={entry.color} />\n                            ))}\n                          </Pie>\n                          <Tooltip />\n                        </PieChart>\n                      </ResponsiveContainer>\n                    </CardContent>\n                  </Card>\n                </Grid>\n\n                {/* Order Statistics Cards */}\n                <Grid item xs={12}>\n                  <Grid container spacing={2}>\n                    <Grid item xs={6} md={3}>\n                      <Card>\n                        <CardContent sx={{ textAlign: 'center' }}>\n                          <Typography variant=\"h4\" color=\"primary\">\n                            {orderStatistics.totalOrders.toLocaleString()}\n                          </Typography>\n                          <Typography variant=\"body2\" color=\"text.secondary\">\n                            Total Orders\n                          </Typography>\n                        </CardContent>\n                      </Card>\n                    </Grid>\n                    <Grid item xs={6} md={3}>\n                      <Card>\n                        <CardContent sx={{ textAlign: 'center' }}>\n                          <Typography variant=\"h4\" color=\"success.main\">\n                            +{orderStatistics.monthlyGrowth}%\n                          </Typography>\n                          <Typography variant=\"body2\" color=\"text.secondary\">\n                            Monthly Growth\n                          </Typography>\n                        </CardContent>\n                      </Card>\n                    </Grid>\n                    <Grid item xs={6} md={3}>\n                      <Card>\n                        <CardContent sx={{ textAlign: 'center' }}>\n                          <Typography variant=\"h4\" color=\"info.main\">\n                            {orderStatistics.avgOrdersPerDay}\n                          </Typography>\n                          <Typography variant=\"body2\" color=\"text.secondary\">\n                            Avg Orders/Day\n                          </Typography>\n                        </CardContent>\n                      </Card>\n                    </Grid>\n                    <Grid item xs={6} md={3}>\n                      <Card>\n                        <CardContent sx={{ textAlign: 'center' }}>\n                          <Typography variant=\"h4\" color=\"warning.main\">\n                            {orderStatistics.avgDeliveryTime}min\n                          </Typography>\n                          <Typography variant=\"body2\" color=\"text.secondary\">\n                            Avg Delivery Time\n                          </Typography>\n                        </CardContent>\n                      </Card>\n                    </Grid>\n                  </Grid>\n                </Grid>\n\n                {/* Order Volume & Revenue */}\n                <Grid item xs={12}>\n                  <Card>\n                    <CardContent>\n                      <Typography variant=\"h6\" gutterBottom>\n                        Order Volume & Revenue Trends\n                      </Typography>\n                      <ResponsiveContainer width=\"100%\" height={300}>\n                        <AreaChart data={performanceData}>\n                          <CartesianGrid strokeDasharray=\"3 3\" />\n                          <XAxis dataKey=\"date\" />\n                          <YAxis yAxisId=\"left\" />\n                          <YAxis yAxisId=\"right\" orientation=\"right\" />\n                          <Tooltip \n                            formatter={(value, name) => [\n                              name === 'Order Volume' ? `${value} orders` : `$${value?.toLocaleString()}`,\n                              name\n                            ]}\n                          />\n                          <Legend />\n                          <Area\n                            yAxisId=\"left\"\n                            type=\"monotone\"\n                            dataKey=\"orderVolume\"\n                            stackId=\"1\"\n                            stroke=\"#8884d8\"\n                            fill=\"#8884d8\"\n                            name=\"Order Volume\"\n                          />\n                          <Area\n                            yAxisId=\"right\"\n                            type=\"monotone\"\n                            dataKey=\"revenue\"\n                            stackId=\"2\"\n                            stroke=\"#82ca9d\"\n                            fill=\"#82ca9d\"\n                            name=\"Revenue ($)\"\n                          />\n                        </AreaChart>\n                      </ResponsiveContainer>\n                    </CardContent>\n                  </Card>\n                </Grid>\n\n                {/* Daily Order Pattern */}\n                <Grid item xs={12} md={6}>\n                  <Card>\n                    <CardContent>\n                      <Typography variant=\"h6\" gutterBottom>\n                        Daily Order Pattern\n                      </Typography>\n                      <ResponsiveContainer width=\"100%\" height={250}>\n                        <BarChart data={performanceData}>\n                          <CartesianGrid strokeDasharray=\"3 3\" />\n                          <XAxis dataKey=\"date\" />\n                          <YAxis />\n                          <Tooltip \n                            formatter={(value) => [`${value} orders/day`, 'Avg Daily Orders']}\n                          />\n                          <Bar dataKey=\"avgOrdersPerDay\" fill=\"#8884d8\" name=\"Avg Orders/Day\" />\n                        </BarChart>\n                      </ResponsiveContainer>\n                    </CardContent>\n                  </Card>\n                </Grid>\n\n                {/* Peak Hours Analysis */}\n                <Grid item xs={12} md={6}>\n                  <Card>\n                    <CardContent>\n                      <Typography variant=\"h6\" gutterBottom>\n                        Peak Order Hours\n                      </Typography>\n                      <Box sx={{ mt: 2 }}>\n                        {orderStatistics.peakHours.map((hour, index) => (\n                          <Chip \n                            key={index}\n                            label={hour}\n                            color=\"primary\"\n                            sx={{ mr: 1, mb: 1 }}\n                          />\n                        ))}\n                      </Box>\n                      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 2 }}>\n                        Completion Rate: {orderStatistics.completionRate}%\n                      </Typography>\n                    </CardContent>\n                  </Card>\n                </Grid>\n              </Grid>\n            </TabPanel>\n\n            {/* Competitor Analysis Tab */}\n            <TabPanel value={activeTab} index={1}>\n              {isFeatureRestricted('advanced_filters') && (\n                <Alert severity=\"info\" sx={{ mb: 3 }}>\n                  <Typography>Upgrade to unlock advanced filtering options.</Typography>\n                </Alert>\n              )}\n              {isFeatureRestricted('competitor_analysis') ? (\n                <Alert severity=\"info\">\n                  <Typography>Competitor analysis available in premium plans.</Typography>\n                </Alert>\n              ) : (\n                <Grid container spacing={3}>\n                  <Grid item xs={12}>\n                    <Card>\n                      <CardContent>\n                        <Typography variant=\"h6\" gutterBottom>\n                          Market Position Analysis\n                        </Typography>\n                        <ResponsiveContainer width=\"100%\" height={400}>\n                          <BarChart data={competitorData}>\n                            <CartesianGrid strokeDasharray=\"3 3\" />\n                            <XAxis dataKey=\"name\" />\n                            <YAxis />\n                            <Tooltip />\n                            <Legend />\n                            <Bar dataKey=\"trustScore\" fill=\"#8884d8\" name=\"TrustScore\" />\n                            <Bar dataKey=\"marketShare\" fill=\"#82ca9d\" name=\"Market Share %\" />\n                          </BarChart>\n                        </ResponsiveContainer>\n                      </CardContent>\n                    </Card>\n                  </Grid>\n\n                  <Grid item xs={12}>\n                    <Typography variant=\"h6\" gutterBottom>\n                      {user?.user_role === 'admin' ? 'Courier Comparison' : 'Competitor Insights'}\n                    </Typography>\n                    <Grid container spacing={2}>\n                      {competitorData\n                        .filter(c => user?.user_role === 'admin' || c.name !== 'You')\n                        .map((competitor, index) => (\n                        <Grid item xs={12} md={4} key={index}>\n                          <Card sx={{ position: 'relative' }}>\n                            <CardContent>\n                              <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\n                                <Typography variant=\"h6\">\n                                  {competitor.unlocked ? competitor.name : `Anonymous Courier ${index + 1}`}\n                                </Typography>\n                                {!competitor.unlocked && (\n                                  <Chip label={`Unlock $29`} color=\"primary\" size=\"small\" />\n                                )}\n                              </Box>\n                              \n                              <Typography variant=\"body2\" color=\"text.secondary\">\n                                {user?.user_role === 'admin' ? 'Trust Score' : 'TrustScore'}: {competitor.unlocked ? Number(competitor.trustScore || 0).toFixed(1) : '***'}\n                              </Typography>\n                              <Typography variant=\"body2\" color=\"text.secondary\">\n                                {user?.user_role === 'admin' ? 'Total Orders' : 'Market Share'}: {competitor.unlocked ? (user?.user_role === 'admin' ? competitor.marketShare : `${competitor.marketShare}%`) : '***'}\n                              </Typography>\n                              {user?.user_role === 'admin' && competitor.avgRating && (\n                                <Typography variant=\"body2\" color=\"text.secondary\">\n                                  Avg Rating: {Number(competitor.avgRating || 0).toFixed(1)}/5\n                                </Typography>\n                              )}\n                              {user?.user_role === 'admin' && competitor.successRate && (\n                                <Typography variant=\"body2\" color=\"text.secondary\">\n                                  Success Rate: {Number(competitor.successRate || 0).toFixed(1)}%\n                                </Typography>\n                              )}\n                              \n                              {!competitor.unlocked && (\n                                <Button \n                                  variant=\"outlined\" \n                                  size=\"small\" \n                                  sx={{ mt: 2 }}\n                                  fullWidth\n                                >\n                                  Unlock Full Data\n                                </Button>\n                              )}\n                            </CardContent>\n                          </Card>\n                        </Grid>\n                      ))}\n                    </Grid>\n                  </Grid>\n                </Grid>\n              )}\n            </TabPanel>\n\n            {/* Market Insights Tab */}\n            <TabPanel value={activeTab} index={2}>\n              <Grid container spacing={3}>\n                <Grid item xs={12} md={6}>\n                  <Card>\n                    <CardContent>\n                      <Typography variant=\"h6\" gutterBottom>\n                        Available Markets\n                      </Typography>\n                      {user?.user_role === 'admin' ? (\n                        <Alert severity=\"success\" sx={{ mb: 2 }}>\n                          Admin Access - Full access to all markets and features\n                        </Alert>\n                      ) : (\n                        <>\n                          <Alert severity=\"info\" sx={{ mb: 2 }}>\n                            Upgrade to Pro to access advanced analytics features.\n                          </Alert>\n                          <Alert severity=\"info\" sx={{ mb: 2 }}>\n                            Your {user?.subscription_tier || 'Tier 1'} subscription allows access to{' '}\n                            {user?.subscription_tier === 'tier3' ? '8' : user?.subscription_tier === 'tier2' ? '3' : '1'} market(s)\n                          </Alert>\n                        </>\n                      )}\n                      \n                      {/* Market List Component */}\n                      <AvailableMarketsList \n                        onMarketSelect={setSelectedMarket}\n                        selectedMarket={selectedMarket}\n                      />\n                    </CardContent>\n                  </Card>\n                </Grid>\n\n                <Grid item xs={12}>\n                  <PerformanceByLocation selectedCountry={selectedMarket} />\n                </Grid>\n              </Grid>\n            </TabPanel>\n\n            {/* Lead Generation Tab (Merchants and Admin) */}\n            <TabPanel value={activeTab} index={3}>\n              {(user?.user_role === 'merchant' || user?.user_role === 'admin' || user?.user_role === 'courier') ? (\n                <Grid container spacing={3}>\n                  <Grid item xs={12}>\n                    <Card>\n                      <CardContent>\n                        <Typography variant=\"h6\" gutterBottom>\n                          Courier Marketplace\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\n                          Research and connect with couriers in your area. Send leads to potential partners.\n                        </Typography>\n                        \n                        {user.user_role !== 'admin' && (\n                          <Alert severity=\"info\" sx={{ mb: 2 }}>\n                            Your {user?.subscription_tier || 'Tier 1'} subscription allows{' '}\n                            {user?.subscription_tier === 'tier3' ? '8' : user?.subscription_tier === 'tier2' ? '3' : '1'} courier connection(s)\n                          </Alert>\n                        )}\n                        {user.user_role === 'admin' && (\n                          <Alert severity=\"success\" sx={{ mb: 2 }}>\n                            Admin Access - Unlimited courier connections\n                          </Alert>\n                        )}\n\n                        <Typography variant=\"body2\" color=\"text.secondary\">\n                          Courier marketplace and lead generation features would be implemented here\n                        </Typography>\n                      </CardContent>\n                    </Card>\n                  </Grid>\n                </Grid>\n              ) : (\n                <Alert severity=\"info\">\n                  Lead generation is available for merchant accounts only.\n                </Alert>\n              )}\n            </TabPanel>\n          </CardContent>\n        </Card>\n      </Box>\n    </Container>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\AuthPage.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useAuthStore' is defined but never used.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":15,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[710,713],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[710,713],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { Box, Container, Fade } from '@mui/material';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { useAuthStore } from '@/store/authStore';\nimport { LoginForm } from '@/components/auth/LoginForm';\nimport { EnhancedRegisterFormV2 } from '@/components/auth/EnhancedRegisterFormV2';\n\nexport const AuthPage: React.FC = () => {\n  const location = useLocation();\n  const navigate = useNavigate();\n  // Check if we're on the login page (default to login if not on /register)\n  const [isLogin, setIsLogin] = useState(location.pathname !== '/register');\n\n  // Get selected plan from navigation state\n  const selectedPlan = (location.state as any)?.selectedPlan;\n\n  useEffect(() => {\n    // Update form based on current path\n    setIsLogin(location.pathname !== '/register');\n  }, [location.pathname]);\n\n  return (\n    <Box\n      sx={{\n        minHeight: '100vh',\n        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n        display: 'flex',\n        alignItems: 'center',\n        py: 4,\n      }}\n    >\n      <Container maxWidth=\"sm\">\n        <Fade in timeout={800}>\n          <Box>\n            {isLogin ? (\n              <LoginForm onSwitchToRegister={() => navigate('/register')} />\n            ) : (\n              <EnhancedRegisterFormV2 \n                onSwitchToLogin={() => navigate('/login')} \n                selectedPlan={selectedPlan}\n              />\n            )}\n          </Box>\n        </Fade>\n      </Container>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\BillingPortal.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":210,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":210,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5908,5911],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5908,5911],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":274,"column":28,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[8718,8795],"text":"\n                    You don&apos;t have an active subscription\n                  "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[8718,8795],"text":"\n                    You don&lsquo;t have an active subscription\n                  "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[8718,8795],"text":"\n                    You don&#39;t have an active subscription\n                  "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[8718,8795],"text":"\n                    You don&rsquo;t have an active subscription\n                  "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":366,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":366,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12303,12306],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12303,12306],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":398,"column":67,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[13473,13621],"text":"\n            Are you sure you want to cancel your subscription? You&apos;ll lose access to premium features at the end of your billing period.\n          "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[13473,13621],"text":"\n            Are you sure you want to cancel your subscription? You&lsquo;ll lose access to premium features at the end of your billing period.\n          "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[13473,13621],"text":"\n            Are you sure you want to cancel your subscription? You&#39;ll lose access to premium features at the end of your billing period.\n          "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[13473,13621],"text":"\n            Are you sure you want to cancel your subscription? You&rsquo;ll lose access to premium features at the end of your billing period.\n          "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":401,"column":39,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[13704,13780],"text":"\n            Please let us know why you&apos;re cancelling (optional):\n          "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[13704,13780],"text":"\n            Please let us know why you&lsquo;re cancelling (optional):\n          "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[13704,13780],"text":"\n            Please let us know why you&#39;re cancelling (optional):\n          "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[13704,13780],"text":"\n            Please let us know why you&rsquo;re cancelling (optional):\n          "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Box,\n  Container,\n  Typography,\n  Card,\n  CardContent,\n  Button,\n  Grid,\n  Chip,\n  Divider,\n  Alert,\n  CircularProgress,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Paper,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n} from '@mui/material';\nimport {\n  CreditCard,\n  Receipt,\n  TrendingUp,\n  Cancel,\n  CheckCircle,\n  Warning,\n  Download,\n} from '@mui/icons-material';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport { useAuthStore } from '@/store/authStore';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'react-hot-toast';\nimport { UsageDashboard } from '@/components/subscription/UsageDashboard';\n\ninterface SubscriptionData {\n  subscription_id: string;\n  plan_name: string;\n  status: string;\n  current_period_start: string;\n  current_period_end: string;\n  price: number;\n  billing_cycle: 'monthly' | 'yearly';\n  stripe_subscription_id?: string;\n}\n\ninterface Invoice {\n  invoice_id: string;\n  amount: number;\n  status: string;\n  invoice_date: string;\n  due_date: string;\n  paid_date?: string;\n  invoice_url?: string;\n}\n\nexport const BillingPortal: React.FC = () => {\n  const { user } = useAuthStore();\n  const navigate = useNavigate();\n  const queryClient = useQueryClient();\n  const [showCancelDialog, setShowCancelDialog] = useState(false);\n  const [cancelReason, setCancelReason] = useState('');\n\n  // Fetch current subscription\n  const { data: subscription, isLoading: loadingSubscription } = useQuery<SubscriptionData | null>({\n    queryKey: ['user-subscription'],\n    queryFn: async () => {\n      const response = await apiClient.get('/subscriptions/current');\n      return response.data.subscription;\n    },\n    enabled: !!user, // Only fetch if user is logged in\n  });\n\n  // Fetch invoices\n  const { data: invoices = [], isLoading: loadingInvoices } = useQuery({\n    queryKey: ['user-invoices'],\n    queryFn: async () => {\n      const response = await apiClient.get('/subscriptions/invoices');\n      return response.data.invoices || [];\n    },\n  });\n\n  // Update payment method mutation\n  const updatePaymentMutation = useMutation({\n    mutationFn: async () => {\n      const response = await apiClient.post('/subscriptions/update-payment-method');\n      return response.data;\n    },\n    onSuccess: (data) => {\n      if (data.url) {\n        window.location.href = data.url;\n      }\n    },\n    onError: () => {\n      toast.error('Failed to update payment method');\n    },\n  });\n\n  // Cancel subscription mutation\n  const cancelSubscriptionMutation = useMutation({\n    mutationFn: async (reason: string) => {\n      return await apiClient.post('/subscriptions/cancel', { reason });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['user-subscription'] });\n      toast.success('Subscription cancelled successfully');\n      setShowCancelDialog(false);\n    },\n    onError: () => {\n      toast.error('Failed to cancel subscription');\n    },\n  });\n\n  const handleUpdatePaymentMethod = () => {\n    updatePaymentMutation.mutate();\n  };\n\n  const handleCancelSubscription = () => {\n    cancelSubscriptionMutation.mutate(cancelReason);\n  };\n\n  const handleUpgrade = () => {\n    navigate('/subscription/plans');\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status.toLowerCase()) {\n      case 'active':\n        return 'success';\n      case 'cancelled':\n      case 'canceled':\n        return 'error';\n      case 'past_due':\n        return 'warning';\n      default:\n        return 'default';\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n    });\n  };\n\n  const formatCurrency = (amount: number) => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n    }).format(amount);\n  };\n\n  if (loadingSubscription) {\n    return (\n      <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '60vh' }}>\n        <CircularProgress size={60} />\n      </Box>\n    );\n  }\n\n  return (\n    <Container maxWidth=\"lg\" sx={{ py: 4 }}>\n      {/* Header */}\n      <Box sx={{ mb: 4 }}>\n        <Typography variant=\"h4\" gutterBottom fontWeight=\"bold\">\n          Billing & Subscription\n        </Typography>\n        <Typography variant=\"body1\" color=\"text.secondary\">\n          Manage your subscription, payment methods, and invoices\n        </Typography>\n      </Box>\n\n      {/* Usage Dashboard */}\n      <Box sx={{ mb: 3 }}>\n        <UsageDashboard />\n      </Box>\n\n      {/* Current Subscription */}\n      <Grid container spacing={3}>\n        <Grid item xs={12} md={8}>\n          <Card>\n            <CardContent sx={{ p: 3 }}>\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, mb: 3 }}>\n                <CreditCard sx={{ fontSize: 28, color: 'primary.main' }} />\n                <Typography variant=\"h6\">Current Subscription</Typography>\n              </Box>\n\n              {subscription ? (\n                <>\n                  <Box sx={{ mb: 3 }}>\n                    <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n                      <Box>\n                        <Typography variant=\"h5\" fontWeight=\"bold\">\n                          {subscription.plan_name}\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"text.secondary\">\n                          {subscription.billing_cycle === 'monthly' ? 'Monthly' : 'Yearly'} billing\n                        </Typography>\n                      </Box>\n                      <Chip\n                        label={subscription.status}\n                        color={getStatusColor(subscription.status) as any}\n                        icon={subscription.status === 'active' ? <CheckCircle /> : <Warning />}\n                      />\n                    </Box>\n\n                    <Divider sx={{ my: 2 }} />\n\n                    <Grid container spacing={2}>\n                      <Grid item xs={6}>\n                        <Typography variant=\"caption\" color=\"text.secondary\">\n                          Current Period\n                        </Typography>\n                        <Typography variant=\"body2\">\n                          {formatDate(subscription.current_period_start)} - {formatDate(subscription.current_period_end)}\n                        </Typography>\n                      </Grid>\n                      <Grid item xs={6}>\n                        <Typography variant=\"caption\" color=\"text.secondary\">\n                          Amount\n                        </Typography>\n                        <Typography variant=\"body2\" fontWeight=\"bold\">\n                          {formatCurrency(subscription.price)} / {subscription.billing_cycle === 'monthly' ? 'month' : 'year'}\n                        </Typography>\n                      </Grid>\n                    </Grid>\n                  </Box>\n\n                  {subscription.status === 'active' && (\n                    <Alert severity=\"info\" sx={{ mb: 3 }}>\n                      Your subscription will automatically renew on {formatDate(subscription.current_period_end)}\n                    </Alert>\n                  )}\n\n                  <Box sx={{ display: 'flex', gap: 2, flexWrap: 'wrap' }}>\n                    <Button\n                      variant=\"contained\"\n                      startIcon={<TrendingUp />}\n                      onClick={handleUpgrade}\n                    >\n                      Change Plan\n                    </Button>\n                    <Button\n                      variant=\"outlined\"\n                      startIcon={<CreditCard />}\n                      onClick={handleUpdatePaymentMethod}\n                      disabled={updatePaymentMutation.isPending}\n                    >\n                      {updatePaymentMutation.isPending ? 'Loading...' : 'Update Payment Method'}\n                    </Button>\n                    {subscription.status === 'active' && (\n                      <Button\n                        variant=\"outlined\"\n                        color=\"error\"\n                        startIcon={<Cancel />}\n                        onClick={() => setShowCancelDialog(true)}\n                      >\n                        Cancel Subscription\n                      </Button>\n                    )}\n                  </Box>\n                </>\n              ) : (\n                <Box sx={{ textAlign: 'center', py: 4 }}>\n                  <Typography variant=\"body1\" color=\"text.secondary\" gutterBottom>\n                    You don't have an active subscription\n                  </Typography>\n                  <Button\n                    variant=\"contained\"\n                    onClick={() => navigate('/subscription/plans')}\n                    sx={{ mt: 2 }}\n                  >\n                    View Plans\n                  </Button>\n                </Box>\n              )}\n            </CardContent>\n          </Card>\n        </Grid>\n\n        {/* Quick Stats */}\n        <Grid item xs={12} md={4}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Billing Summary\n              </Typography>\n              <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2, mt: 2 }}>\n                <Box>\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    Total Spent\n                  </Typography>\n                  <Typography variant=\"h6\">\n                    {formatCurrency(\n                      invoices\n                        .filter((inv: Invoice) => inv.status === 'paid')\n                        .reduce((sum: number, inv: Invoice) => sum + inv.amount, 0)\n                    )}\n                  </Typography>\n                </Box>\n                <Divider />\n                <Box>\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    Invoices\n                  </Typography>\n                  <Typography variant=\"h6\">{invoices.length}</Typography>\n                </Box>\n                <Divider />\n                <Box>\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    Next Billing Date\n                  </Typography>\n                  <Typography variant=\"body2\">\n                    {subscription?.current_period_end\n                      ? formatDate(subscription.current_period_end)\n                      : 'N/A'}\n                  </Typography>\n                </Box>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n\n      {/* Invoices */}\n      <Card sx={{ mt: 3 }}>\n        <CardContent sx={{ p: 3 }}>\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, mb: 3 }}>\n            <Receipt sx={{ fontSize: 28, color: 'primary.main' }} />\n            <Typography variant=\"h6\">Invoice History</Typography>\n          </Box>\n\n          {loadingInvoices ? (\n            <Box sx={{ display: 'flex', justifyContent: 'center', py: 4 }}>\n              <CircularProgress />\n            </Box>\n          ) : invoices.length > 0 ? (\n            <TableContainer component={Paper} variant=\"outlined\">\n              <Table>\n                <TableHead>\n                  <TableRow>\n                    <TableCell>Invoice Date</TableCell>\n                    <TableCell>Amount</TableCell>\n                    <TableCell>Status</TableCell>\n                    <TableCell>Due Date</TableCell>\n                    <TableCell align=\"right\">Actions</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {invoices.map((invoice: Invoice) => (\n                    <TableRow key={invoice.invoice_id}>\n                      <TableCell>{formatDate(invoice.invoice_date)}</TableCell>\n                      <TableCell>{formatCurrency(invoice.amount)}</TableCell>\n                      <TableCell>\n                        <Chip\n                          label={invoice.status}\n                          size=\"small\"\n                          color={getStatusColor(invoice.status) as any}\n                        />\n                      </TableCell>\n                      <TableCell>{formatDate(invoice.due_date)}</TableCell>\n                      <TableCell align=\"right\">\n                        {invoice.invoice_url && (\n                          <Button\n                            size=\"small\"\n                            startIcon={<Download />}\n                            href={invoice.invoice_url}\n                            target=\"_blank\"\n                          >\n                            Download\n                          </Button>\n                        )}\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </TableContainer>\n          ) : (\n            <Alert severity=\"info\">No invoices yet</Alert>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Cancel Subscription Dialog */}\n      <Dialog open={showCancelDialog} onClose={() => setShowCancelDialog(false)} maxWidth=\"sm\" fullWidth>\n        <DialogTitle>Cancel Subscription</DialogTitle>\n        <DialogContent>\n          <Alert severity=\"warning\" sx={{ mb: 2 }}>\n            Are you sure you want to cancel your subscription? You'll lose access to premium features at the end of your billing period.\n          </Alert>\n          <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\n            Please let us know why you're cancelling (optional):\n          </Typography>\n          <textarea\n            value={cancelReason}\n            onChange={(e) => setCancelReason(e.target.value)}\n            placeholder=\"Your feedback helps us improve...\"\n            style={{\n              width: '100%',\n              minHeight: '100px',\n              padding: '12px',\n              borderRadius: '4px',\n              border: '1px solid #ccc',\n              fontFamily: 'inherit',\n              fontSize: '14px',\n              marginTop: '8px',\n            }}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setShowCancelDialog(false)}>Keep Subscription</Button>\n          <Button\n            color=\"error\"\n            variant=\"contained\"\n            onClick={handleCancelSubscription}\n            disabled={cancelSubscriptionMutation.isPending}\n          >\n            {cancelSubscriptionMutation.isPending ? 'Cancelling...' : 'Cancel Subscription'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Container>\n  );\n};\n\nexport default BillingPortal;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\CheckoutDemo.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\ClaimsPage.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":60,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":60,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1304,1307],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1304,1307],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":86,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":86,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2023,2026],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2023,2026],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":96,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":96,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2342,2345],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2342,2345],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":114,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":114,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2933,2936],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2933,2936],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":140,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":140,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3629,3632],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3629,3632],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":185,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":185,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5037,5040],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5037,5040],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":197,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":197,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5484,5487],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5484,5487],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":209,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":209,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5925,5928],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5925,5928],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":244,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":244,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7172,7175],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7172,7175],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":425,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":425,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14853,14856],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14853,14856],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Container,\n  Paper,\n  Typography,\n  Box,\n  Button,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Chip,\n  IconButton,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  TextField,\n  MenuItem,\n  Grid,\n  Card,\n  CardContent,\n  Stepper,\n  Step,\n  StepLabel,\n  Alert,\n} from '@mui/material';\nimport {\n  Add,\n  Visibility,\n  Send,\n} from '@mui/icons-material';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport toast from 'react-hot-toast';\nimport { apiClient } from '@/services/apiClient';\n\nconst claimTypes = [\n  { value: 'damaged', label: 'Package Damaged' },\n  { value: 'lost', label: 'Package Lost' },\n  { value: 'delayed', label: 'Delayed Delivery' },\n  { value: 'missing_items', label: 'Missing Items' },\n  { value: 'wrong_delivery', label: 'Wrong Delivery Address' },\n  { value: 'other', label: 'Other' },\n];\n\nconst statusColors: Record<string, string> = {\n  draft: '#9e9e9e',\n  submitted: '#2196f3',\n  under_review: '#ff9800',\n  approved: '#4caf50',\n  rejected: '#f44336',\n  paid: '#00c853',\n  closed: '#757575',\n};\n\nexport const ClaimsPage: React.FC = () => {\n  const [openDialog, setOpenDialog] = useState(false);\n  const [selectedClaim, setSelectedClaim] = useState<any>(null);\n  const [viewDialog, setViewDialog] = useState(false);\n  const queryClient = useQueryClient();\n\n  const [formData, setFormData] = useState({\n    tracking_number: '',\n    courier: '',\n    claim_type: 'damaged',\n    incident_date: new Date().toISOString().split('T')[0],\n    incident_description: '',\n    incident_location: '',\n    claimed_amount: '',\n    declared_value: '',\n  });\n\n  // Fetch claims\n  const { data: claimsData, isLoading } = useQuery({\n    queryKey: ['claims'],\n    queryFn: async () => {\n      const response = await apiClient.get('/claims');\n      return response.data.data;\n    },\n  });\n\n  // Create claim mutation\n  const createClaimMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const response = await apiClient.post('/claims', data);\n      return response.data;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['claims'] });\n      setOpenDialog(false);\n      resetForm();\n      toast.success('Claim created successfully');\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.error || 'Failed to create claim');\n    },\n  });\n\n  // Submit claim mutation\n  const submitClaimMutation = useMutation({\n    mutationFn: async (claim_id: string) => {\n      const response = await apiClient.post('/claims/submit', { claim_id });\n      return response.data;\n    },\n    onSuccess: (data) => {\n      queryClient.invalidateQueries({ queryKey: ['claims'] });\n      toast.success('Claim submitted to courier');\n      if (data.instructions) {\n        toast(data.instructions, { duration: 5000 });\n      }\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.error || 'Failed to submit claim');\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({\n      tracking_number: '',\n      courier: '',\n      claim_type: 'damaged',\n      incident_date: new Date().toISOString().split('T')[0],\n      incident_description: '',\n      incident_location: '',\n      claimed_amount: '',\n      declared_value: '',\n    });\n  };\n\n  const handleSubmit = () => {\n    createClaimMutation.mutate({\n      ...formData,\n      claimed_amount: parseFloat(formData.claimed_amount),\n      declared_value: formData.declared_value ? parseFloat(formData.declared_value) : undefined,\n    });\n  };\n\n  const handleViewClaim = (claim: any) => {\n    setSelectedClaim(claim);\n    setViewDialog(true);\n  };\n\n  const handleSubmitClaim = (claim_id: string) => {\n    if (confirm('Are you sure you want to submit this claim to the courier?')) {\n      submitClaimMutation.mutate(claim_id);\n    }\n  };\n\n  return (\n    <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n        <Typography variant=\"h4\">Claims Management</Typography>\n        <Button\n          variant=\"contained\"\n          startIcon={<Add />}\n          onClick={() => setOpenDialog(true)}\n        >\n          File New Claim\n        </Button>\n      </Box>\n\n      {/* Summary Cards */}\n      <Grid container spacing={3} sx={{ mb: 3 }}>\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Typography color=\"text.secondary\" gutterBottom>\n                Total Claims\n              </Typography>\n              <Typography variant=\"h4\">\n                {claimsData?.length || 0}\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Typography color=\"text.secondary\" gutterBottom>\n                Pending\n              </Typography>\n              <Typography variant=\"h4\">\n                {claimsData?.filter((c: any) => ['submitted', 'under_review'].includes(c.claim_status)).length || 0}\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Typography color=\"text.secondary\" gutterBottom>\n                Approved\n              </Typography>\n              <Typography variant=\"h4\">\n                {claimsData?.filter((c: any) => c.claim_status === 'approved').length || 0}\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Typography color=\"text.secondary\" gutterBottom>\n                Total Claimed\n              </Typography>\n              <Typography variant=\"h4\">\n                ${claimsData?.reduce((sum: number, c: any) => sum + (c.claimed_amount || 0), 0).toFixed(2) || '0.00'}\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n\n      {/* Claims Table */}\n      <Paper>\n        <TableContainer>\n          <Table>\n            <TableHead>\n              <TableRow>\n                <TableCell>Claim #</TableCell>\n                <TableCell>Type</TableCell>\n                <TableCell>Courier</TableCell>\n                <TableCell>Tracking</TableCell>\n                <TableCell>Amount</TableCell>\n                <TableCell>Status</TableCell>\n                <TableCell>Date</TableCell>\n                <TableCell align=\"right\">Actions</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {isLoading ? (\n                <TableRow>\n                  <TableCell colSpan={8} align=\"center\">Loading...</TableCell>\n                </TableRow>\n              ) : claimsData?.length === 0 ? (\n                <TableRow>\n                  <TableCell colSpan={8} align=\"center\">\n                    No claims found. File your first claim to get started.\n                  </TableCell>\n                </TableRow>\n              ) : (\n                claimsData?.map((claim: any) => (\n                  <TableRow key={claim.claim_id} hover>\n                    <TableCell>{claim.claim_number || claim.claim_id.slice(0, 8)}</TableCell>\n                    <TableCell>{claim.claim_type.replace('_', ' ')}</TableCell>\n                    <TableCell>{claim.courier}</TableCell>\n                    <TableCell>{claim.tracking_number || '-'}</TableCell>\n                    <TableCell>${claim.claimed_amount.toFixed(2)}</TableCell>\n                    <TableCell>\n                      <Chip\n                        label={claim.claim_status.replace('_', ' ')}\n                        sx={{\n                          backgroundColor: statusColors[claim.claim_status],\n                          color: 'white',\n                        }}\n                        size=\"small\"\n                      />\n                    </TableCell>\n                    <TableCell>{new Date(claim.created_at).toLocaleDateString()}</TableCell>\n                    <TableCell align=\"right\">\n                      <IconButton size=\"small\" onClick={() => handleViewClaim(claim)}>\n                        <Visibility />\n                      </IconButton>\n                      {claim.claim_status === 'draft' && (\n                        <>\n                          <IconButton size=\"small\" color=\"primary\" onClick={() => handleSubmitClaim(claim.claim_id)}>\n                            <Send />\n                          </IconButton>\n                        </>\n                      )}\n                    </TableCell>\n                  </TableRow>\n                ))\n              )}\n            </TableBody>\n          </Table>\n        </TableContainer>\n      </Paper>\n\n      {/* Create Claim Dialog */}\n      <Dialog open={openDialog} onClose={() => setOpenDialog(false)} maxWidth=\"md\" fullWidth>\n        <DialogTitle>File New Claim</DialogTitle>\n        <DialogContent>\n          <Grid container spacing={2} sx={{ mt: 1 }}>\n            <Grid item xs={12} sm={6}>\n              <TextField\n                fullWidth\n                label=\"Tracking Number\"\n                value={formData.tracking_number}\n                onChange={(e) => setFormData({ ...formData, tracking_number: e.target.value })}\n              />\n            </Grid>\n            <Grid item xs={12} sm={6}>\n              <TextField\n                fullWidth\n                label=\"Courier\"\n                value={formData.courier}\n                onChange={(e) => setFormData({ ...formData, courier: e.target.value })}\n                required\n              />\n            </Grid>\n            <Grid item xs={12} sm={6}>\n              <TextField\n                fullWidth\n                select\n                label=\"Claim Type\"\n                value={formData.claim_type}\n                onChange={(e) => setFormData({ ...formData, claim_type: e.target.value })}\n                required\n              >\n                {claimTypes.map((option) => (\n                  <MenuItem key={option.value} value={option.value}>\n                    {option.label}\n                  </MenuItem>\n                ))}\n              </TextField>\n            </Grid>\n            <Grid item xs={12} sm={6}>\n              <TextField\n                fullWidth\n                type=\"date\"\n                label=\"Incident Date\"\n                value={formData.incident_date}\n                onChange={(e) => setFormData({ ...formData, incident_date: e.target.value })}\n                InputLabelProps={{ shrink: true }}\n                required\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <TextField\n                fullWidth\n                multiline\n                rows={4}\n                label=\"Incident Description\"\n                value={formData.incident_description}\n                onChange={(e) => setFormData({ ...formData, incident_description: e.target.value })}\n                required\n                placeholder=\"Describe what happened in detail...\"\n              />\n            </Grid>\n            <Grid item xs={12} sm={6}>\n              <TextField\n                fullWidth\n                type=\"number\"\n                label=\"Claimed Amount\"\n                value={formData.claimed_amount}\n                onChange={(e) => setFormData({ ...formData, claimed_amount: e.target.value })}\n                required\n                InputProps={{ startAdornment: '$' }}\n              />\n            </Grid>\n            <Grid item xs={12} sm={6}>\n              <TextField\n                fullWidth\n                type=\"number\"\n                label=\"Declared Value (Optional)\"\n                value={formData.declared_value}\n                onChange={(e) => setFormData({ ...formData, declared_value: e.target.value })}\n                InputProps={{ startAdornment: '$' }}\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <Alert severity=\"info\">\n                You can upload photos and documents after creating the claim.\n              </Alert>\n            </Grid>\n          </Grid>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setOpenDialog(false)}>Cancel</Button>\n          <Button \n            onClick={handleSubmit} \n            variant=\"contained\"\n            disabled={createClaimMutation.isPending}\n          >\n            Create Claim\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* View Claim Dialog */}\n      <Dialog open={viewDialog} onClose={() => setViewDialog(false)} maxWidth=\"md\" fullWidth>\n        <DialogTitle>Claim Details</DialogTitle>\n        <DialogContent>\n          {selectedClaim && (\n            <Box sx={{ mt: 2 }}>\n              <Grid container spacing={2}>\n                <Grid item xs={12}>\n                  <Typography variant=\"h6\">Claim #{selectedClaim.claim_number || selectedClaim.claim_id.slice(0, 8)}</Typography>\n                  <Chip\n                    label={selectedClaim.claim_status.replace('_', ' ')}\n                    sx={{\n                      backgroundColor: statusColors[selectedClaim.claim_status],\n                      color: 'white',\n                      mt: 1\n                    }}\n                  />\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <Typography variant=\"body2\" color=\"text.secondary\">Type</Typography>\n                  <Typography>{selectedClaim.claim_type.replace('_', ' ')}</Typography>\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <Typography variant=\"body2\" color=\"text.secondary\">Courier</Typography>\n                  <Typography>{selectedClaim.courier}</Typography>\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <Typography variant=\"body2\" color=\"text.secondary\">Tracking Number</Typography>\n                  <Typography>{selectedClaim.tracking_number || '-'}</Typography>\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <Typography variant=\"body2\" color=\"text.secondary\">Claimed Amount</Typography>\n                  <Typography>${selectedClaim.claimed_amount.toFixed(2)}</Typography>\n                </Grid>\n                <Grid item xs={12}>\n                  <Typography variant=\"body2\" color=\"text.secondary\">Incident Description</Typography>\n                  <Typography>{selectedClaim.incident_description}</Typography>\n                </Grid>\n                {selectedClaim.timeline && (\n                  <Grid item xs={12}>\n                    <Typography variant=\"h6\" sx={{ mt: 2, mb: 1 }}>Timeline</Typography>\n                    <Stepper orientation=\"vertical\">\n                      {selectedClaim.timeline.map((event: any, index: number) => (\n                        <Step key={event.timeline_id} active completed={index > 0}>\n                          <StepLabel>\n                            <Typography variant=\"subtitle2\">{event.event_description}</Typography>\n                            <Typography variant=\"caption\">{new Date(event.created_at).toLocaleString()}</Typography>\n                          </StepLabel>\n                        </Step>\n                      ))}\n                    </Stepper>\n                  </Grid>\n                )}\n              </Grid>\n            </Box>\n          )}\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setViewDialog(false)}>Close</Button>\n        </DialogActions>\n      </Dialog>\n    </Container>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\ConsumerSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_user' is assigned a value but never used.","line":57,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":57,"endColumn":22}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { useAuthStore } from '../store/authStore';\nimport {\n  Box,\n  Container,\n  Typography,\n  Tabs,\n  Tab,\n  Paper,\n} from '@mui/material';\nimport {\n  Person as ProfileIcon,\n  LocationOn as AddressIcon,\n  Payment as PaymentIcon,\n  ShoppingBag as OrdersIcon,\n  Favorite as FavoritesIcon,\n  Notifications as NotificationIcon,\n  Security as SecurityIcon,\n  Language as LanguageIcon,\n  PrivacyTip as PrivacyIcon,\n} from '@mui/icons-material';\n\n// Import sub-components\n// TODO: Create these components\n// import { ConsumerProfileSettings } from '@/components/settings/consumer/ConsumerProfileSettings';\n// import { ConsumerAddressSettings } from '@/components/settings/consumer/ConsumerAddressSettings';\n// import { ConsumerPaymentSettings } from '@/components/settings/consumer/ConsumerPaymentSettings';\n// import { ConsumerOrderSettings } from '@/components/settings/consumer/ConsumerOrderSettings';\n// import { ConsumerFavoritesSettings } from '@/components/settings/consumer/ConsumerFavoritesSettings';\n// import { ConsumerNotificationSettings } from '@/components/settings/consumer/ConsumerNotificationSettings';\n// import { ConsumerSecuritySettings } from '@/components/settings/consumer/ConsumerSecuritySettings';\n// import { ConsumerPrivacySettings } from '@/components/settings/consumer/ConsumerPrivacySettings';\n// import { ConsumerPreferencesSettings } from '@/components/settings/consumer/ConsumerPreferencesSettings';\n\ninterface TabPanelProps {\n  children?: React.ReactNode;\n  index: number;\n  value: number;\n}\n\nfunction TabPanel(props: TabPanelProps) {\n  const { children, value, index, ...other } = props;\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`consumer-settings-tabpanel-${index}`}\n      aria-labelledby={`consumer-settings-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box sx={{ py: 3 }}>{children}</Box>}\n    </div>\n  );\n}\n\nconst ConsumerSettings: React.FC = () => {\n  const { user: _user } = useAuthStore(); // Prefix with _ to indicate intentionally unused\n  const [tabValue, setTabValue] = useState(0);\n\n  // Get tab from URL hash if present\n  useEffect(() => {\n    const hash = window.location.hash.replace('#', '');\n    const tabMap: Record<string, number> = {\n      'profile': 0,\n      'addresses': 1,\n      'payment': 2,\n      'orders': 3,\n      'favorites': 4,\n      'notifications': 5,\n      'security': 6,\n      'privacy': 7,\n      'preferences': 8,\n    };\n    \n    if (hash && tabMap[hash] !== undefined) {\n      setTabValue(tabMap[hash]);\n    }\n  }, []);\n\n  const handleTabChange = (_event: React.SyntheticEvent, newValue: number) => {\n    setTabValue(newValue);\n    \n    // Update URL hash\n    const tabNames = [\n      'profile', 'addresses', 'payment', 'orders', 'favorites',\n      'notifications', 'security', 'privacy', 'preferences'\n    ];\n    window.location.hash = tabNames[newValue];\n  };\n\n  return (\n    <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\n      {/* Header */}\n      <Box sx={{ mb: 4 }}>\n        <Typography variant=\"h3\" component=\"h1\" gutterBottom>\n          Account Settings\n        </Typography>\n        <Typography variant=\"body1\" color=\"text.secondary\">\n          Manage your profile, addresses, payment methods, and preferences\n        </Typography>\n      </Box>\n\n      {/* Navigation Tabs */}\n      <Paper sx={{ mb: 3 }}>\n        <Tabs\n          value={tabValue}\n          onChange={handleTabChange}\n          variant=\"scrollable\"\n          scrollButtons=\"auto\"\n          sx={{\n            borderBottom: 1,\n            borderColor: 'divider',\n            '& .MuiTab-root': {\n              minHeight: 72,\n              textTransform: 'none',\n              fontSize: '0.95rem',\n            },\n          }}\n        >\n          <Tab \n            icon={<ProfileIcon />} \n            label=\"Profile\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<AddressIcon />} \n            label=\"Addresses\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<PaymentIcon />} \n            label=\"Payment Methods\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<OrdersIcon />} \n            label=\"Order Preferences\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<FavoritesIcon />} \n            label=\"Favorites\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<NotificationIcon />} \n            label=\"Notifications\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<SecurityIcon />} \n            label=\"Security\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<PrivacyIcon />} \n            label=\"Privacy\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<LanguageIcon />} \n            label=\"Preferences\" \n            iconPosition=\"start\"\n          />\n        </Tabs>\n      </Paper>\n\n      {/* Tab Panels */}\n      <TabPanel value={tabValue} index={0}>\n        <Typography>Profile Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={1}>\n        <Typography>Address Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={2}>\n        <Typography>Payment Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={3}>\n        <Typography>Order Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={4}>\n        <Typography>Favorites Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={5}>\n        <Typography>Notification Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={6}>\n        <Typography>Security Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={7}>\n        <Typography>Privacy Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={8}>\n        <Typography>Preferences Settings - Coming Soon</Typography>\n      </TabPanel>\n    </Container>\n  );\n};\n\nexport default ConsumerSettings;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\Contact.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":93,"column":31,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2104,2171],"text":"\n            Have questions? We&apos;d love to hear from you.\n          "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2104,2171],"text":"\n            Have questions? We&lsquo;d love to hear from you.\n          "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2104,2171],"text":"\n            Have questions? We&#39;d love to hear from you.\n          "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2104,2171],"text":"\n            Have questions? We&rsquo;d love to hear from you.\n          "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":109,"column":49,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2688,2794],"text":"\n                  Fill out the form below and we&apos;ll get back to you as soon as possible.\n                "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2688,2794],"text":"\n                  Fill out the form below and we&lsquo;ll get back to you as soon as possible.\n                "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2688,2794],"text":"\n                  Fill out the form below and we&#39;ll get back to you as soon as possible.\n                "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2688,2794],"text":"\n                  Fill out the form below and we&rsquo;ll get back to you as soon as possible.\n                "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":114,"column":51,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2900,2995],"text":"\n                    Thank you for your message! We&apos;ll get back to you soon.\n                  "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2900,2995],"text":"\n                    Thank you for your message! We&lsquo;ll get back to you soon.\n                  "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2900,2995],"text":"\n                    Thank you for your message! We&#39;ll get back to you soon.\n                  "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2900,2995],"text":"\n                    Thank you for your message! We&rsquo;ll get back to you soon.\n                  "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":179,"column":19,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[5142,5269],"text":"\n                We&apos;re here to help and answer any question you might have. We look forward to hearing from you!\n              "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[5142,5269],"text":"\n                We&lsquo;re here to help and answer any question you might have. We look forward to hearing from you!\n              "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[5142,5269],"text":"\n                We&#39;re here to help and answer any question you might have. We look forward to hearing from you!\n              "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[5142,5269],"text":"\n                We&rsquo;re here to help and answer any question you might have. We look forward to hearing from you!\n              "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Contact Page\n * Simple contact form for inquiries\n */\n\nimport React, { useState } from 'react';\nimport {\n  Box,\n  Container,\n  Typography,\n  TextField,\n  Button,\n  Grid,\n  Card,\n  CardContent,\n  Stack,\n  Alert,\n} from '@mui/material';\nimport {\n  Email,\n  Phone,\n  LocationOn,\n  Send,\n} from '@mui/icons-material';\nimport { useNavigate } from 'react-router-dom';\n\nexport const Contact: React.FC = () => {\n  const navigate = useNavigate();\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    subject: '',\n    message: '',\n  });\n  const [submitted, setSubmitted] = useState(false);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    // TODO: Implement actual form submission\n    console.log('Form submitted:', formData);\n    setSubmitted(true);\n    \n    // Reset form after 3 seconds\n    setTimeout(() => {\n      setFormData({ name: '', email: '', subject: '', message: '' });\n      setSubmitted(false);\n    }, 3000);\n  };\n\n  const contactInfo = [\n    {\n      icon: <Email sx={{ fontSize: 40, color: '#667eea' }} />,\n      title: 'Email',\n      value: 'support@performile.com',\n      link: 'mailto:support@performile.com',\n    },\n    {\n      icon: <Phone sx={{ fontSize: 40, color: '#667eea' }} />,\n      title: 'Phone',\n      value: '+1 (555) 123-4567',\n      link: 'tel:+15551234567',\n    },\n    {\n      icon: <LocationOn sx={{ fontSize: 40, color: '#667eea' }} />,\n      title: 'Address',\n      value: 'Stockholm, Sweden',\n      link: null,\n    },\n  ];\n\n  return (\n    <Box>\n      {/* Header */}\n      <Box\n        sx={{\n          background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n          color: 'white',\n          py: 8,\n        }}\n      >\n        <Container maxWidth=\"lg\">\n          <Typography variant=\"h2\" fontWeight=\"bold\" gutterBottom>\n            Contact Us\n          </Typography>\n          <Typography variant=\"h6\" sx={{ opacity: 0.9 }}>\n            Have questions? We'd love to hear from you.\n          </Typography>\n        </Container>\n      </Box>\n\n      {/* Contact Form & Info */}\n      <Container maxWidth=\"lg\" sx={{ py: 8 }}>\n        <Grid container spacing={6}>\n          {/* Contact Form */}\n          <Grid item xs={12} md={7}>\n            <Card>\n              <CardContent sx={{ p: 4 }}>\n                <Typography variant=\"h5\" fontWeight=\"bold\" gutterBottom>\n                  Send us a Message\n                </Typography>\n                <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n                  Fill out the form below and we'll get back to you as soon as possible.\n                </Typography>\n\n                {submitted && (\n                  <Alert severity=\"success\" sx={{ mb: 3 }}>\n                    Thank you for your message! We'll get back to you soon.\n                  </Alert>\n                )}\n\n                <form onSubmit={handleSubmit}>\n                  <Stack spacing={3}>\n                    <TextField\n                      fullWidth\n                      label=\"Name\"\n                      name=\"name\"\n                      value={formData.name}\n                      onChange={handleChange}\n                      required\n                    />\n                    <TextField\n                      fullWidth\n                      label=\"Email\"\n                      name=\"email\"\n                      type=\"email\"\n                      value={formData.email}\n                      onChange={handleChange}\n                      required\n                    />\n                    <TextField\n                      fullWidth\n                      label=\"Subject\"\n                      name=\"subject\"\n                      value={formData.subject}\n                      onChange={handleChange}\n                      required\n                    />\n                    <TextField\n                      fullWidth\n                      label=\"Message\"\n                      name=\"message\"\n                      multiline\n                      rows={6}\n                      value={formData.message}\n                      onChange={handleChange}\n                      required\n                    />\n                    <Button\n                      type=\"submit\"\n                      variant=\"contained\"\n                      size=\"large\"\n                      endIcon={<Send />}\n                      sx={{\n                        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n                      }}\n                    >\n                      Send Message\n                    </Button>\n                  </Stack>\n                </form>\n              </CardContent>\n            </Card>\n          </Grid>\n\n          {/* Contact Info */}\n          <Grid item xs={12} md={5}>\n            <Stack spacing={3}>\n              <Typography variant=\"h5\" fontWeight=\"bold\">\n                Get in Touch\n              </Typography>\n              <Typography variant=\"body1\" color=\"text.secondary\">\n                We're here to help and answer any question you might have. We look forward to hearing from you!\n              </Typography>\n\n              {contactInfo.map((info, index) => (\n                <Card key={index}>\n                  <CardContent>\n                    <Stack direction=\"row\" spacing={2} alignItems=\"center\">\n                      <Box>{info.icon}</Box>\n                      <Box>\n                        <Typography variant=\"subtitle2\" color=\"text.secondary\">\n                          {info.title}\n                        </Typography>\n                        {info.link ? (\n                          <Typography\n                            variant=\"body1\"\n                            component=\"a\"\n                            href={info.link}\n                            sx={{\n                              color: 'primary.main',\n                              textDecoration: 'none',\n                              '&:hover': { textDecoration: 'underline' },\n                            }}\n                          >\n                            {info.value}\n                          </Typography>\n                        ) : (\n                          <Typography variant=\"body1\">{info.value}</Typography>\n                        )}\n                      </Box>\n                    </Stack>\n                  </CardContent>\n                </Card>\n              ))}\n\n              <Card sx={{ background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', color: 'white' }}>\n                <CardContent>\n                  <Typography variant=\"h6\" fontWeight=\"bold\" gutterBottom>\n                    Business Hours\n                  </Typography>\n                  <Typography variant=\"body2\" sx={{ opacity: 0.9 }}>\n                    Monday - Friday: 9:00 AM - 6:00 PM<br />\n                    Saturday: 10:00 AM - 4:00 PM<br />\n                    Sunday: Closed\n                  </Typography>\n                </CardContent>\n              </Card>\n            </Stack>\n          </Grid>\n        </Grid>\n      </Container>\n\n      {/* Back to Home */}\n      <Box sx={{ bgcolor: 'grey.100', py: 4, textAlign: 'center' }}>\n        <Container maxWidth=\"lg\">\n          <Button\n            variant=\"outlined\"\n            size=\"large\"\n            onClick={() => navigate('/')}\n          >\n            Back to Home\n          </Button>\n        </Container>\n      </Box>\n    </Box>\n  );\n};\n\nexport default Contact;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\CourierSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_user' is assigned a value but never used.","line":64,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":64,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":66,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2527,2530],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2527,2530],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { useAuthStore } from '../store/authStore';\nimport {\n  Box,\n  Container,\n  Typography,\n  Tabs,\n  Tab,\n  Paper,\n  Chip,\n} from '@mui/material';\nimport {\n  Business as CompanyIcon,\n  LocalShipping as FleetIcon,\n  People as TeamIcon,\n  Star as PerformanceIcon,\n  TrendingUp as LeadsIcon,\n  Payment as PaymentIcon,\n  Notifications as NotificationIcon,\n  Api as ApiIcon,\n  Settings as SettingsIcon,\n  Security as SecurityIcon,\n  Language as LanguageIcon,\n  Assessment as AnalyticsIcon,\n} from '@mui/icons-material';\n\n// Import sub-components\n// TODO: Create these components\n// import { CourierCompanySettings } from '@/components/settings/courier/CourierCompanySettings';\n// import { CourierFleetSettings } from '@/components/settings/courier/CourierFleetSettings';\n// import { CourierTeamSettings } from '@/components/settings/courier/CourierTeamSettings';\n// import { CourierPerformanceSettings } from '@/components/settings/courier/CourierPerformanceSettings';\n// import { CourierLeadsSettings } from '@/components/settings/courier/CourierLeadsSettings';\n// import { CourierPaymentSettings } from '@/components/settings/courier/CourierPaymentSettings';\n// import { CourierNotificationSettings } from '@/components/settings/courier/CourierNotificationSettings';\n// import { CourierAPISettings } from '@/components/settings/courier/CourierAPISettings';\n// import { CourierAnalyticsSettings } from '@/components/settings/courier/CourierAnalyticsSettings';\n// import { CourierGeneralSettings } from '@/components/settings/courier/CourierGeneralSettings';\n// import { CourierSecuritySettings} from '@/components/settings/courier/CourierSecuritySettings';\n// import { CourierPreferencesSettings } from '@/components/settings/courier/CourierPreferencesSettings';\n\ninterface TabPanelProps {\n  children?: React.ReactNode;\n  index: number;\n  value: number;\n}\n\nfunction TabPanel(props: TabPanelProps) {\n  const { children, value, index, ...other } = props;\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`courier-settings-tabpanel-${index}`}\n      aria-labelledby={`courier-settings-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box sx={{ py: 3 }}>{children}</Box>}\n    </div>\n  );\n}\n\nconst CourierSettings: React.FC = () => {\n  const { user: _user } = useAuthStore(); // Prefix with _ to indicate intentionally unused\n  const [tabValue, setTabValue] = useState(0);\n  const [subscriptionInfo, setSubscriptionInfo] = useState<any>(null);\n\n  // Get tab from URL hash if present\n  useEffect(() => {\n    const hash = window.location.hash.replace('#', '');\n    const tabMap: Record<string, number> = {\n      'company': 0,\n      'fleet': 1,\n      'team': 2,\n      'performance': 3,\n      'leads': 4,\n      'analytics': 5,\n      'payments': 6,\n      'notifications': 7,\n      'api': 8,\n      'general': 9,\n      'security': 10,\n      'preferences': 11,\n    };\n    \n    if (hash && tabMap[hash] !== undefined) {\n      setTabValue(tabMap[hash]);\n    }\n  }, []);\n\n  const handleTabChange = (_event: React.SyntheticEvent, newValue: number) => {\n    setTabValue(newValue);\n    \n    // Update URL hash\n    const tabNames = [\n      'company', 'fleet', 'team', 'performance', 'leads', 'analytics',\n      'payments', 'notifications', 'api', 'general', 'security', 'preferences'\n    ];\n    window.location.hash = tabNames[newValue];\n  };\n\n  // Fetch subscription info\n  useEffect(() => {\n    fetchSubscriptionInfo();\n  }, []);\n\n  const fetchSubscriptionInfo = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch('/api/couriers/subscription-info', {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n      });\n      const data = await response.json();\n      setSubscriptionInfo(data.data);\n    } catch (error) {\n      console.error('Error fetching subscription info:', error);\n    }\n  };\n\n  const planName = subscriptionInfo?.subscription?.plan_name || 'Free';\n  const tier = subscriptionInfo?.subscription?.tier || 0;\n\n  return (\n    <Container maxWidth=\"xl\" sx={{ mt: 4, mb: 4 }}>\n      {/* Header */}\n      <Box sx={{ mb: 4 }}>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n          <Box>\n            <Typography variant=\"h3\" component=\"h1\" gutterBottom>\n              Courier Settings\n            </Typography>\n            <Typography variant=\"body1\" color=\"text.secondary\">\n              Manage your courier company, fleet, team, and performance settings\n            </Typography>\n          </Box>\n          <Chip \n            label={`${planName} Plan`}\n            color={tier >= 2 ? 'primary' : 'default'}\n            sx={{ fontWeight: 600 }}\n          />\n        </Box>\n      </Box>\n\n      {/* Navigation Tabs */}\n      <Paper sx={{ mb: 3 }}>\n        <Tabs\n          value={tabValue}\n          onChange={handleTabChange}\n          variant=\"scrollable\"\n          scrollButtons=\"auto\"\n          sx={{\n            borderBottom: 1,\n            borderColor: 'divider',\n            '& .MuiTab-root': {\n              minHeight: 72,\n              textTransform: 'none',\n              fontSize: '0.95rem',\n            },\n          }}\n        >\n          <Tab \n            icon={<CompanyIcon />} \n            label=\"Company Profile\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<FleetIcon />} \n            label=\"Fleet & Vehicles\" \n            iconPosition=\"start\"\n            disabled={tier < 3} // Fleet plan feature\n          />\n          <Tab \n            icon={<TeamIcon />} \n            label=\"Team Members\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<PerformanceIcon />} \n            label=\"Performance\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<LeadsIcon />} \n            label=\"Lead Marketplace\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<AnalyticsIcon />} \n            label=\"Analytics\" \n            iconPosition=\"start\"\n            disabled={tier < 2} // Professional+ feature\n          />\n          <Tab \n            icon={<PaymentIcon />} \n            label=\"Payments\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<NotificationIcon />} \n            label=\"Notifications\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<ApiIcon />} \n            label=\"API & Integrations\" \n            iconPosition=\"start\"\n            disabled={tier < 3} // Fleet plan feature\n          />\n          <Tab \n            icon={<SettingsIcon />} \n            label=\"General\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<SecurityIcon />} \n            label=\"Security\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<LanguageIcon />} \n            label=\"Preferences\" \n            iconPosition=\"start\"\n          />\n        </Tabs>\n      </Paper>\n\n      {/* Tab Panels */}\n      <TabPanel value={tabValue} index={0}>\n        <Typography>Company Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={1}>\n        <Typography>Fleet Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={2}>\n        <Typography>Team Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={3}>\n        <Typography>Performance Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={4}>\n        <Typography>Leads Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={5}>\n        <Typography>Analytics Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={6}>\n        <Typography>Payment Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={7}>\n        <Typography>Notification Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={8}>\n        <Typography>API Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={9}>\n        <Typography>General Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={10}>\n        <Typography>Security Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={11}>\n        <Typography>Preferences Settings - Coming Soon</Typography>\n      </TabPanel>\n    </Container>\n  );\n};\n\nexport default CourierSettings;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\CustomDashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Box' is defined but never used.","line":8,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":13}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * CUSTOM DASHBOARD PAGE\n * Customizable dashboard with drag-and-drop widgets\n * Created: October 21, 2025\n */\n\nimport React from 'react';\nimport { Box, Container } from '@mui/material';\nimport { CustomizableDashboard } from '@/components/dashboard/CustomizableDashboard';\n\nexport const CustomDashboard: React.FC = () => {\n  return (\n    <Container maxWidth=\"xl\" sx={{ py: 4 }}>\n      <CustomizableDashboard />\n    </Container>\n  );\n};\n\nexport default CustomDashboard;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\Dashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useCallback' is defined but never used.","line":1,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":28},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":433,"column":13,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[13111,13189],"text":"\n        Here&apos;s what's happening with your logistics performance today.\n      "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[13111,13189],"text":"\n        Here&lsquo;s what's happening with your logistics performance today.\n      "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[13111,13189],"text":"\n        Here&#39;s what's happening with your logistics performance today.\n      "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[13111,13189],"text":"\n        Here&rsquo;s what's happening with your logistics performance today.\n      "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":433,"column":20,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[13111,13189],"text":"\n        Here's what&apos;s happening with your logistics performance today.\n      "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[13111,13189],"text":"\n        Here's what&lsquo;s happening with your logistics performance today.\n      "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[13111,13189],"text":"\n        Here's what&#39;s happening with your logistics performance today.\n      "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[13111,13189],"text":"\n        Here's what&rsquo;s happening with your logistics performance today.\n      "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":445,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":445,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13561,13564],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13561,13564],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useCallback, useMemo } from 'react';\nimport {\n  Box,\n  Grid,\n  Card,\n  CardContent,\n  Typography,\n  Avatar,\n  Chip,\n  LinearProgress,\n} from '@mui/material';\nimport {\n  TrendingUp,\n  LocalShipping,\n  Assessment,\n  Star,\n  Schedule,\n  CheckCircle,\n} from '@mui/icons-material';\nimport { useAuthStore } from '@/store/authStore';\nimport { useQuery } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport { TrackingWidget } from '@/components/tracking/TrackingWidget';\nimport { \n  PerformanceTrendsChart,\n  RecentActivityWidget,\n  QuickActionsPanel,\n  OrderTrendsChart,\n  ClaimsTrendsChart,\n  ClaimsManagementWidget,\n} from '@/components/dashboard';\nimport { CourierLogo } from '@/components/courier/CourierLogo';\nimport { useMerchantDashboardTour } from '@/hooks/useMerchantDashboardTour';\n\nconst TOUR_ANCHORS = {\n  welcome: 'merchant-tour-welcome',\n  kpis: 'merchant-tour-kpis',\n  orders: 'merchant-tour-orders',\n  quickActions: 'merchant-tour-quick-actions',\n  tracking: 'merchant-tour-tracking',\n} as const;\n\ninterface DashboardStats {\n  total_couriers: number;\n  avg_trust_score: number;\n  avg_on_time_rate: number;\n  avg_completion_rate: number;\n  total_orders_processed: number;\n  total_reviews: number;\n}\n\ninterface StatCardProps {\n  title: string;\n  value: string | number;\n  icon: React.ReactNode;\n  color: string;\n  trend?: number;\n  subtitle?: string;\n}\n\nconst StatCard: React.FC<StatCardProps> = ({ title, value, icon, color, trend, subtitle }) => (\n  <Card sx={{ height: '100%' }}>\n    <CardContent>\n      <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\n        <Avatar sx={{ bgcolor: color, mr: 2 }}>\n          {icon}\n        </Avatar>\n        <Box sx={{ flexGrow: 1 }}>\n          <Typography variant=\"h4\" component=\"div\" sx={{ fontWeight: 'bold' }}>\n            {value}\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            {title}\n          </Typography>\n          {subtitle && (\n            <Typography variant=\"caption\" color=\"text.secondary\">\n              {subtitle}\n            </Typography>\n          )}\n        </Box>\n        {trend && (\n          <Chip\n            label={`${trend > 0 ? '+' : ''}${trend}%`}\n            color={trend > 0 ? 'success' : 'error'}\n            size=\"small\"\n          />\n        )}\n      </Box>\n    </CardContent>\n  </Card>\n);\n\nexport const Dashboard: React.FC = () => {\n  console.log(' Dashboard v3.0 - Role-based data filtering enabled!');\n  const { user } = useAuthStore();\n  const isMerchant = user?.user_role === 'merchant';\n  const [tourEnabled, setTourEnabled] = React.useState<boolean>(false);\n  const { startTour } = useMerchantDashboardTour(tourEnabled);\n\n  // Get role-specific dashboard endpoint\n  // UNIFIED APPROACH: All roles use the same endpoint\n  // Backend filters data based on user role + subscription automatically\n  const getDashboardEndpoint = () => {\n    // ALL roles now use the unified endpoint with role-based filtering\n    return '/trustscore/dashboard';\n  };\n\n  const { data: dashboardData, isLoading } = useQuery({\n    queryKey: ['dashboard-stats', user?.user_role, user?.user_id],\n    queryFn: async () => {\n      const endpoint = getDashboardEndpoint();\n      const response = await apiClient.get(endpoint);\n      return response.data.data;\n    },\n    enabled: !!user, // Only fetch when user is authenticated\n    refetchInterval: 30000, // Refresh every 30 seconds\n  });\n\n  const stats = dashboardData?.statistics as DashboardStats;\n  const topCouriers = Array.isArray(dashboardData?.couriers) ? dashboardData.couriers.slice(0, 5) : [];\n\n  const getWelcomeMessage = () => {\n    const hour = new Date().getHours();\n    const greeting = hour < 12 ? 'Good morning' : hour < 18 ? 'Good afternoon' : 'Good evening';\n    return `${greeting}, ${user?.first_name || 'there'}!`;\n  };\n\n  React.useEffect(() => {\n    if (!isMerchant) {\n      setTourEnabled(false);\n      return;\n    }\n\n    setTourEnabled(true);\n\n    const handleKeydown = (event: KeyboardEvent) => {\n      if ((event.ctrlKey || event.metaKey) && event.key.toLowerCase() === 'k') {\n        event.preventDefault();\n        startTour();\n      }\n    };\n\n    window.addEventListener('keydown', handleKeydown);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeydown);\n    };\n  }, [isMerchant, startTour]);\n\n  const renderTourStartButton = useMemo(() => {\n    if (!isMerchant) {\n      return null;\n    }\n\n    return (\n      <Chip\n        label=\"Replay guided tour\"\n        color=\"primary\"\n        size=\"small\"\n        sx={{ ml: 2, cursor: 'pointer' }}\n        onClick={() => startTour()}\n      />\n    );\n  }, [isMerchant, startTour]);\n\n  const getRoleDashboard = () => {\n    switch (user?.user_role) {\n      case 'admin':\n        return (\n          <Grid container spacing={3}>\n            {/* Stats Cards */}\n            <Grid item xs={12} sm={6} md={3}>\n              <StatCard\n                title=\"Total Couriers\"\n                value={stats?.total_couriers || 0}\n                icon={<LocalShipping />}\n                color=\"primary.main\"\n              />\n            </Grid>\n            <Grid item xs={12} sm={6} md={3}>\n              <StatCard\n                title=\"Avg Trust Score\"\n                value={stats?.avg_trust_score ? Number(stats.avg_trust_score).toFixed(1) : '0.0'}\n                icon={<Star />}\n                color=\"warning.main\"\n                subtitle=\"Out of 100\"\n              />\n            </Grid>\n            <Grid item xs={12} sm={6} md={3}>\n              <StatCard\n                title=\"Total Orders\"\n                value={stats?.total_orders_processed ? Number(stats.total_orders_processed).toLocaleString() : '0'}\n                icon={<Assessment />}\n                color=\"success.main\"\n              />\n            </Grid>\n            <Grid item xs={12} sm={6} md={3}>\n              <StatCard\n                title=\"Total Reviews\"\n                value={stats?.total_reviews ? Number(stats.total_reviews).toLocaleString() : '0'}\n                icon={<TrendingUp />}\n                color=\"info.main\"\n              />\n            </Grid>\n\n            {/* Performance Trends Chart */}\n            <Grid item xs={12} lg={8}>\n              <PerformanceTrendsChart />\n            </Grid>\n\n            {/* Recent Activity */}\n            <Grid item xs={12} lg={4}>\n              <RecentActivityWidget />\n            </Grid>\n\n            {/* Quick Actions */}\n            <Grid item xs={12}>\n              <QuickActionsPanel />\n            </Grid>\n\n            {/* Tracking Widget */}\n            <Grid item xs={12} md={6}>\n              <TrackingWidget />\n            </Grid>\n          </Grid>\n        );\n\n      case 'merchant':\n        return (\n          <Grid container spacing={3}>\n            {/* Stats Cards */}\n            <Grid item xs={12} sm={6} md={4}>\n              <StatCard\n                title=\"On-Time Rate\"\n                value={stats?.avg_on_time_rate ? `${Number(stats.avg_on_time_rate).toFixed(1)}%` : '0%'}\n                icon={<Schedule />}\n                color=\"success.main\"\n                id={TOUR_ANCHORS.kpis}\n              />\n            </Grid>\n            <Grid item xs={12} sm={6} md={4}>\n              <StatCard\n                title=\"Completion Rate\"\n                value={stats?.avg_completion_rate ? `${Number(stats.avg_completion_rate).toFixed(1)}%` : '0%'}\n                icon={<CheckCircle />}\n                color=\"primary.main\"\n              />\n            </Grid>\n            <Grid item xs={12} sm={6} md={4}>\n              <StatCard\n                title=\"Available Couriers\"\n                value={stats?.total_couriers || 0}\n                icon={<LocalShipping />}\n                color=\"info.main\"\n              />\n            </Grid>\n\n            {/* Order Trends Chart */}\n            <Grid item xs={12} lg={6}>\n              <OrderTrendsChart \n                entityType=\"merchant\"\n                subscriptionTier={user?.subscription_tier || 'tier1'}\n                id={TOUR_ANCHORS.orders}\n              />\n            </Grid>\n\n            {/* Claims Trends Chart */}\n            <Grid item xs={12} lg={6}>\n              <ClaimsTrendsChart \n                entityType=\"merchant\"\n                subscriptionTier={user?.subscription_tier || 'tier1'}\n              />\n            </Grid>\n\n            {/* Claims Management Widget */}\n            <Grid item xs={12}>\n              <ClaimsManagementWidget \n                entityType=\"merchant\"\n                subscriptionTier={user?.subscription_tier || 'tier1'}\n              />\n            </Grid>\n\n            {/* Performance Trends */}\n            <Grid item xs={12} lg={8}>\n              <PerformanceTrendsChart />\n            </Grid>\n\n            {/* Recent Activity */}\n            <Grid item xs={12} lg={4}>\n              <RecentActivityWidget />\n            </Grid>\n\n            {/* Tracking Widget */}\n            <Grid item xs={12} md={6}>\n              <Box id={TOUR_ANCHORS.tracking}>\n                <TrackingWidget />\n              </Box>\n            </Grid>\n\n            {/* Quick Actions */}\n            <Grid item xs={12} md={6}>\n              <Box id={TOUR_ANCHORS.quickActions}>\n                <QuickActionsPanel />\n              </Box>\n            </Grid>\n          </Grid>\n        );\n\n      case 'courier':\n        return (\n          <Grid container spacing={3}>\n            {/* Stats Cards */}\n            <Grid item xs={12} sm={6} md={4}>\n              <StatCard\n                title=\"My Trust Score\"\n                value={stats?.avg_trust_score ? Number(stats.avg_trust_score).toFixed(1) : '0'}\n                icon={<Star />}\n                color=\"warning.main\"\n                subtitle=\"Industry average: 78.4\"\n              />\n            </Grid>\n            <Grid item xs={12} sm={6} md={4}>\n              <StatCard\n                title=\"Orders This Month\"\n                value={stats?.total_orders_processed ? Number(stats.total_orders_processed).toLocaleString() : '0'}\n                icon={<LocalShipping />}\n                color=\"primary.main\"\n              />\n            </Grid>\n            <Grid item xs={12} sm={6} md={4}>\n              <StatCard\n                title=\"On-Time Rate\"\n                value={stats?.avg_on_time_rate ? `${Number(stats.avg_on_time_rate).toFixed(1)}%` : '0%'}\n                icon={<Schedule />}\n                color=\"success.main\"\n              />\n            </Grid>\n\n            {/* Order Trends Chart */}\n            <Grid item xs={12} lg={6}>\n              <OrderTrendsChart \n                entityType=\"courier\"\n                subscriptionTier={user?.subscription_tier || 'tier1'}\n              />\n            </Grid>\n\n            {/* Claims Trends Chart */}\n            <Grid item xs={12} lg={6}>\n              <ClaimsTrendsChart \n                entityType=\"courier\"\n                subscriptionTier={user?.subscription_tier || 'tier1'}\n              />\n            </Grid>\n\n            {/* Claims Management Widget */}\n            <Grid item xs={12}>\n              <ClaimsManagementWidget \n                entityType=\"courier\"\n                subscriptionTier={user?.subscription_tier || 'tier1'}\n              />\n            </Grid>\n\n            {/* Performance Trends */}\n            <Grid item xs={12} lg={8}>\n              <PerformanceTrendsChart />\n            </Grid>\n\n            {/* Recent Activity */}\n            <Grid item xs={12} lg={4}>\n              <RecentActivityWidget />\n            </Grid>\n\n            {/* Quick Actions */}\n            <Grid item xs={12}>\n              <QuickActionsPanel />\n            </Grid>\n          </Grid>\n        );\n\n      default: // consumer\n        return (\n          <Grid container spacing={3}>\n            <Grid item xs={12} sm={6} md={4}>\n              <StatCard\n                title=\"Tracked Orders\"\n                value=\"23\"\n                icon={<LocalShipping />}\n                color=\"primary.main\"\n              />\n            </Grid>\n            <Grid item xs={12} sm={6} md={4}>\n              <StatCard\n                title=\"Reviews Given\"\n                value=\"18\"\n                icon={<Star />}\n                color=\"warning.main\"\n              />\n            </Grid>\n            <Grid item xs={12} sm={6} md={4}>\n              <StatCard\n                title=\"Avg Rating Given\"\n                value=\"4.2\"\n                icon={<TrendingUp />}\n                color=\"success.main\"\n                subtitle=\"Out of 5 stars\"\n              />\n            </Grid>\n          </Grid>\n        );\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <Box>\n        <Typography variant=\"h4\" gutterBottom>\n          {getWelcomeMessage()}\n        </Typography>\n        <LinearProgress sx={{ mb: 4 }} />\n      </Box>\n    );\n  }\n\n  return (\n    <Box>\n      <Box sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>\n        <Typography variant=\"h4\" gutterBottom id={TOUR_ANCHORS.welcome}>\n          {getWelcomeMessage()}\n        </Typography>\n        {renderTourStartButton}\n      </Box>\n      <Typography variant=\"body1\" color=\"text.secondary\" sx={{ mb: 4 }}>\n        Here's what's happening with your logistics performance today.\n      </Typography>\n\n      {getRoleDashboard()}\n\n      {/* Top Performers Section */}\n      {(user?.user_role === 'admin' || user?.user_role === 'merchant') && (\n        <Box sx={{ mt: 4 }}>\n          <Typography variant=\"h5\" gutterBottom>\n            Top Performing Couriers\n          </Typography>\n          <Grid container spacing={2}>\n            {topCouriers.map((courier: any, index: number) => (\n              <Grid item xs={12} sm={6} md={4} key={courier.courier_id}>\n                <Card>\n                  <CardContent>\n                    <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\n                      <Box sx={{ position: 'relative', mr: 2 }}>\n                        <CourierLogo\n                          courierCode={courier.courier_code || courier.courier_name}\n                          courierName={courier.courier_name}\n                          size=\"large\"\n                          variant=\"rounded\"\n                        />\n                        <Box\n                          sx={{\n                            position: 'absolute',\n                            top: -8,\n                            right: -8,\n                            width: 24,\n                            height: 24,\n                            borderRadius: '50%',\n                            bgcolor: 'primary.main',\n                            color: 'white',\n                            display: 'flex',\n                            alignItems: 'center',\n                            justifyContent: 'center',\n                            fontSize: '0.75rem',\n                            fontWeight: 'bold',\n                            border: '2px solid white',\n                          }}\n                        >\n                          {index + 1}\n                        </Box>\n                      </Box>\n                      <Box sx={{ flexGrow: 1 }}>\n                        <Typography variant=\"h6\" noWrap>\n                          {courier.courier_name}\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"text.secondary\">\n                          Trust Score: {courier.overall_score ? Number(courier.overall_score).toFixed(1) : '0.0'}\n                        </Typography>\n                      </Box>\n                      <Chip\n                        label={courier.performance_grade || 'N/A'}\n                        color=\"primary\"\n                        size=\"small\"\n                      />\n                    </Box>\n                    <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 1 }}>\n                      <Typography variant=\"caption\">On-Time Rate</Typography>\n                      <Typography variant=\"caption\" fontWeight=\"bold\">\n                        {courier.on_time_rate ? Number(courier.on_time_rate).toFixed(1) : '0'}%\n                      </Typography>\n                    </Box>\n                    <LinearProgress\n                      variant=\"determinate\"\n                      value={Number(courier.on_time_rate) || 0}\n                      sx={{ mb: 2 }}\n                    />\n                    <Typography variant=\"caption\" color=\"text.secondary\">\n                      {courier.total_orders || 0} orders  {courier.total_reviews || 0} reviews\n                    </Typography>\n                  </CardContent>\n                </Card>\n              </Grid>\n            ))}\n          </Grid>\n        </Box>\n      )}\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\Home.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":514,"column":17,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[19295,19371],"text":"\n                &quot;Best delivery tracking platform we've used\"\n              "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[19295,19371],"text":"\n                &ldquo;Best delivery tracking platform we've used\"\n              "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[19295,19371],"text":"\n                &#34;Best delivery tracking platform we've used\"\n              "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[19295,19371],"text":"\n                &rdquo;Best delivery tracking platform we've used\"\n              "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":514,"column":52,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[19295,19371],"text":"\n                \"Best delivery tracking platform we&apos;ve used\"\n              "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[19295,19371],"text":"\n                \"Best delivery tracking platform we&lsquo;ve used\"\n              "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[19295,19371],"text":"\n                \"Best delivery tracking platform we&#39;ve used\"\n              "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[19295,19371],"text":"\n                \"Best delivery tracking platform we&rsquo;ve used\"\n              "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":514,"column":60,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[19295,19371],"text":"\n                \"Best delivery tracking platform we've used&quot;\n              "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[19295,19371],"text":"\n                \"Best delivery tracking platform we've used&ldquo;\n              "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[19295,19371],"text":"\n                \"Best delivery tracking platform we've used&#34;\n              "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[19295,19371],"text":"\n                \"Best delivery tracking platform we've used&rdquo;\n              "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Public Homepage\n * Simple landing page with info about Performile\n */\n\nimport React from 'react';\nimport {\n  Box,\n  Container,\n  Typography,\n  Button,\n  Grid,\n  Card,\n  CardContent,\n  Stack,\n  Paper,\n} from '@mui/material';\nimport {\n  TrendingUp,\n  Speed,\n  Security,\n  Assessment,\n  LocalShipping,\n  Store,\n  ArrowForward,\n  Login,\n  PersonAdd,\n  Star,\n  CheckCircle,\n  Map,\n  BarChart,\n} from '@mui/icons-material';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuthStore } from '@/store/authStore';\n\nexport const Home: React.FC = () => {\n  const navigate = useNavigate();\n  const { isAuthenticated } = useAuthStore();\n\n  const features = [\n    {\n      icon: <TrendingUp sx={{ fontSize: 48, color: '#667eea' }} />,\n      title: 'TrustScore System',\n      description: 'Transparent performance ratings for all delivery services based on real customer experiences.',\n    },\n    {\n      icon: <Speed sx={{ fontSize: 48, color: '#667eea' }} />,\n      title: 'Real-Time Tracking',\n      description: 'Track your parcels in real-time with accurate ETAs and delivery updates.',\n    },\n    {\n      icon: <Assessment sx={{ fontSize: 48, color: '#667eea' }} />,\n      title: 'Analytics Dashboard',\n      description: 'Comprehensive analytics for merchants and couriers to optimize delivery performance.',\n    },\n    {\n      icon: <Security sx={{ fontSize: 48, color: '#667eea' }} />,\n      title: 'Secure Platform',\n      description: 'Enterprise-grade security with encrypted data and secure payment processing.',\n    },\n    {\n      icon: <LocalShipping sx={{ fontSize: 48, color: '#667eea' }} />,\n      title: 'Courier Network',\n      description: 'Connect with verified couriers and compare services based on performance metrics.',\n    },\n    {\n      icon: <Store sx={{ fontSize: 48, color: '#667eea' }} />,\n      title: 'Merchant Tools',\n      description: 'Powerful tools for e-commerce stores to manage deliveries and customer satisfaction.',\n    },\n  ];\n\n  return (\n    <Box>\n      {/* Top Navigation Bar */}\n      <Box\n        sx={{\n          bgcolor: 'white',\n          borderBottom: '1px solid',\n          borderColor: 'grey.200',\n          py: 2,\n          position: 'sticky',\n          top: 0,\n          zIndex: 1000,\n          boxShadow: '0 2px 4px rgba(0,0,0,0.05)',\n        }}\n      >\n        <Container maxWidth=\"lg\">\n          <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n              <img\n                src=\"/logo.png\"\n                alt=\"Performile Logo\"\n                style={{ height: 40, width: 40, objectFit: 'contain' }}\n              />\n              <Typography variant=\"h6\" fontWeight=\"bold\" color=\"primary\">\n                Performile\n              </Typography>\n            </Box>\n            <Stack direction=\"row\" spacing={3} alignItems=\"center\">\n              <Button\n                color=\"inherit\"\n                sx={{ textTransform: 'none', display: { xs: 'none', md: 'inline-flex' } }}\n                onClick={() => navigate('/subscription/plans')}\n              >\n                Pricing\n              </Button>\n              <Button\n                color=\"inherit\"\n                sx={{ textTransform: 'none', display: { xs: 'none', md: 'inline-flex' } }}\n                onClick={() => navigate('/info')}\n              >\n                About\n              </Button>\n              <Button\n                color=\"inherit\"\n                sx={{ textTransform: 'none', display: { xs: 'none', md: 'inline-flex' } }}\n                onClick={() => navigate('/contact')}\n              >\n                Contact\n              </Button>\n              {!isAuthenticated && (\n                <>\n                  <Button\n                    variant=\"outlined\"\n                    startIcon={<Login />}\n                    onClick={() => navigate('/login')}\n                    sx={{ textTransform: 'none' }}\n                  >\n                    Login\n                  </Button>\n                  <Button\n                    variant=\"contained\"\n                    startIcon={<PersonAdd />}\n                    onClick={() => navigate('/register')}\n                    sx={{ textTransform: 'none' }}\n                  >\n                    Get Started\n                  </Button>\n                </>\n              )}\n              {isAuthenticated && (\n                <Button\n                  variant=\"contained\"\n                  onClick={() => navigate('/dashboard')}\n                  sx={{ textTransform: 'none' }}\n                >\n                  Dashboard\n                </Button>\n              )}\n            </Stack>\n          </Box>\n        </Container>\n      </Box>\n\n      {/* Hero Section */}\n      <Box\n        sx={{\n          background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n          color: 'white',\n          py: 12,\n          position: 'relative',\n          overflow: 'hidden',\n        }}\n      >\n        <Container maxWidth=\"lg\">\n          <Grid container spacing={4} alignItems=\"center\">\n            <Grid item xs={12} md={6}>\n              <Stack spacing={3}>\n                <Typography variant=\"h2\" fontWeight=\"bold\">\n                  Performile\n                </Typography>\n                <Typography variant=\"h5\" sx={{ opacity: 0.95 }}>\n                  The Last Mile Performance Index\n                </Typography>\n                <Typography variant=\"body1\" sx={{ fontSize: '1.1rem', opacity: 0.9 }}>\n                  Transparent delivery performance ratings that help customers choose the best courier services\n                  and empower merchants to optimize their last-mile delivery.\n                </Typography>\n                <Stack direction=\"row\" spacing={2} sx={{ mt: 2 }}>\n                  {isAuthenticated ? (\n                    <Button\n                      variant=\"contained\"\n                      size=\"large\"\n                      onClick={() => navigate('/dashboard')}\n                      sx={{\n                        bgcolor: 'white',\n                        color: '#667eea',\n                        '&:hover': { bgcolor: 'rgba(255,255,255,0.9)' },\n                      }}\n                      endIcon={<ArrowForward />}\n                    >\n                      Go to Dashboard\n                    </Button>\n                  ) : (\n                    <>\n                      <Button\n                        variant=\"contained\"\n                        size=\"large\"\n                        onClick={() => navigate('/register')}\n                        sx={{\n                          bgcolor: 'white',\n                          color: '#667eea',\n                          '&:hover': { bgcolor: 'rgba(255,255,255,0.9)' },\n                        }}\n                      >\n                        Get Started\n                      </Button>\n                      <Button\n                        variant=\"outlined\"\n                        size=\"large\"\n                        onClick={() => navigate('/login')}\n                        sx={{\n                          borderColor: 'white',\n                          color: 'white',\n                          '&:hover': { borderColor: 'white', bgcolor: 'rgba(255,255,255,0.1)' },\n                        }}\n                      >\n                        Sign In\n                      </Button>\n                    </>\n                  )}\n                </Stack>\n              </Stack>\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <Box\n                sx={{\n                  display: 'flex',\n                  justifyContent: 'center',\n                  alignItems: 'center',\n                }}\n              >\n                <img\n                  src=\"/Performile-lastmile performance index.ico\"\n                  alt=\"Performile Logo\"\n                  style={{\n                    width: '200px',\n                    height: '200px',\n                    objectFit: 'contain',\n                    filter: 'drop-shadow(0 8px 16px rgba(0,0,0,0.2))',\n                  }}\n                />\n              </Box>\n            </Grid>\n          </Grid>\n        </Container>\n      </Box>\n\n      {/* Feature Showcase with Screenshots */}\n      <Container maxWidth=\"lg\" sx={{ py: 8 }}>\n        <Box textAlign=\"center\" mb={6}>\n          <Typography variant=\"h3\" fontWeight=\"bold\" gutterBottom>\n            Powerful Features\n          </Typography>\n          <Typography variant=\"body1\" color=\"text.secondary\" sx={{ fontSize: '1.1rem' }}>\n            Everything you need to manage and optimize last-mile delivery performance\n          </Typography>\n        </Box>\n\n        {/* Feature 1: Analytics Dashboard */}\n        <Grid container spacing={4} alignItems=\"center\" sx={{ mb: 8 }}>\n          <Grid item xs={12} md={6}>\n            <Box>\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 2 }}>\n                <BarChart sx={{ color: '#667eea', fontSize: 32 }} />\n                <Typography variant=\"h4\" fontWeight=\"bold\">\n                  Analytics Dashboard\n                </Typography>\n              </Box>\n              <Typography variant=\"body1\" color=\"text.secondary\" paragraph>\n                Get real-time insights into your delivery performance with comprehensive analytics,\n                charts, and reports.\n              </Typography>\n              <Stack spacing={1}>\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                  <CheckCircle sx={{ color: 'success.main', fontSize: 20 }} />\n                  <Typography variant=\"body2\">Real-time performance metrics</Typography>\n                </Box>\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                  <CheckCircle sx={{ color: 'success.main', fontSize: 20 }} />\n                  <Typography variant=\"body2\">Customizable reports</Typography>\n                </Box>\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                  <CheckCircle sx={{ color: 'success.main', fontSize: 20 }} />\n                  <Typography variant=\"body2\">Export to CSV/PDF</Typography>\n                </Box>\n              </Stack>\n            </Box>\n          </Grid>\n          <Grid item xs={12} md={6}>\n            <Paper\n              elevation={3}\n              sx={{\n                p: 2,\n                bgcolor: 'grey.50',\n                borderRadius: 2,\n                minHeight: 300,\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n              }}\n            >\n              <Typography variant=\"h6\" color=\"text.secondary\">\n                 Dashboard Screenshot\n              </Typography>\n            </Paper>\n          </Grid>\n        </Grid>\n\n        {/* Feature 2: Parcel Points Map */}\n        <Grid container spacing={4} alignItems=\"center\" sx={{ mb: 8 }} direction={{ xs: 'column', md: 'row-reverse' }}>\n          <Grid item xs={12} md={6}>\n            <Box>\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 2 }}>\n                <Map sx={{ color: '#667eea', fontSize: 32 }} />\n                <Typography variant=\"h4\" fontWeight=\"bold\">\n                  Parcel Points Map\n                </Typography>\n              </Box>\n              <Typography variant=\"body1\" color=\"text.secondary\" paragraph>\n                Find nearby parcel points, check coverage areas, and optimize your delivery routes\n                with our interactive map.\n              </Typography>\n              <Stack spacing={1}>\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                  <CheckCircle sx={{ color: 'success.main', fontSize: 20 }} />\n                  <Typography variant=\"body2\">Interactive map interface</Typography>\n                </Box>\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                  <CheckCircle sx={{ color: 'success.main', fontSize: 20 }} />\n                  <Typography variant=\"body2\">Coverage checker</Typography>\n                </Box>\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                  <CheckCircle sx={{ color: 'success.main', fontSize: 20 }} />\n                  <Typography variant=\"body2\">Route optimization</Typography>\n                </Box>\n              </Stack>\n            </Box>\n          </Grid>\n          <Grid item xs={12} md={6}>\n            <Paper\n              elevation={3}\n              sx={{\n                p: 2,\n                bgcolor: 'grey.50',\n                borderRadius: 2,\n                minHeight: 300,\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n              }}\n            >\n              <Typography variant=\"h6\" color=\"text.secondary\">\n                 Map View Screenshot\n              </Typography>\n            </Paper>\n          </Grid>\n        </Grid>\n\n        {/* Feature 3: Service Performance */}\n        <Grid container spacing={4} alignItems=\"center\" sx={{ mb: 8 }}>\n          <Grid item xs={12} md={6}>\n            <Box>\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 2 }}>\n                <Speed sx={{ color: '#667eea', fontSize: 32 }} />\n                <Typography variant=\"h4\" fontWeight=\"bold\">\n                  Service Performance\n                </Typography>\n              </Box>\n              <Typography variant=\"body1\" color=\"text.secondary\" paragraph>\n                Track and compare courier performance with detailed metrics, ratings, and reviews\n                from real customers.\n              </Typography>\n              <Stack spacing={1}>\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                  <CheckCircle sx={{ color: 'success.main', fontSize: 20 }} />\n                  <Typography variant=\"body2\">TrustScore ratings</Typography>\n                </Box>\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                  <CheckCircle sx={{ color: 'success.main', fontSize: 20 }} />\n                  <Typography variant=\"body2\">Performance comparisons</Typography>\n                </Box>\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                  <CheckCircle sx={{ color: 'success.main', fontSize: 20 }} />\n                  <Typography variant=\"body2\">Customer reviews</Typography>\n                </Box>\n              </Stack>\n            </Box>\n          </Grid>\n          <Grid item xs={12} md={6}>\n            <Paper\n              elevation={3}\n              sx={{\n                p: 2,\n                bgcolor: 'grey.50',\n                borderRadius: 2,\n                minHeight: 300,\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n              }}\n            >\n              <Typography variant=\"h6\" color=\"text.secondary\">\n                 Performance Charts Screenshot\n              </Typography>\n            </Paper>\n          </Grid>\n        </Grid>\n      </Container>\n\n      {/* Original Features Grid */}\n      <Container maxWidth=\"lg\" sx={{ py: 8 }}>\n        <Box textAlign=\"center\" mb={6}>\n          <Typography variant=\"h3\" fontWeight=\"bold\" gutterBottom>\n            Why Choose Performile?\n          </Typography>\n          <Typography variant=\"body1\" color=\"text.secondary\" sx={{ fontSize: '1.1rem' }}>\n            Comprehensive tools for merchants and couriers\n          </Typography>\n        </Box>\n\n        <Grid container spacing={4}>\n          {features.map((feature, index) => (\n            <Grid item xs={12} sm={6} md={4} key={index}>\n              <Card\n                sx={{\n                  height: '100%',\n                  transition: 'transform 0.2s, box-shadow 0.2s',\n                  '&:hover': {\n                    transform: 'translateY(-8px)',\n                    boxShadow: 6,\n                  },\n                }}\n              >\n                <CardContent sx={{ textAlign: 'center', p: 4 }}>\n                  <Box mb={2}>{feature.icon}</Box>\n                  <Typography variant=\"h6\" fontWeight=\"bold\" gutterBottom>\n                    {feature.title}\n                  </Typography>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    {feature.description}\n                  </Typography>\n                </CardContent>\n              </Card>\n            </Grid>\n          ))}\n        </Grid>\n      </Container>\n\n      {/* Enhanced Stats & Social Proof Section */}\n      <Box sx={{ bgcolor: 'grey.100', py: 8 }}>\n        <Container maxWidth=\"lg\">\n          <Box textAlign=\"center\" mb={6}>\n            <Typography variant=\"h3\" fontWeight=\"bold\" gutterBottom>\n              Trusted by Thousands\n            </Typography>\n            <Typography variant=\"body1\" color=\"text.secondary\">\n              Join the growing community of merchants and couriers\n            </Typography>\n          </Box>\n          <Grid container spacing={4} textAlign=\"center\">\n            <Grid item xs={12} sm={3}>\n              <Paper elevation={0} sx={{ p: 4, bgcolor: 'transparent' }}>\n                <Typography variant=\"h3\" fontWeight=\"bold\" color=\"primary\">\n                  10K+\n                </Typography>\n                <Typography variant=\"body1\" color=\"text.secondary\">\n                  Deliveries Tracked\n                </Typography>\n              </Paper>\n            </Grid>\n            <Grid item xs={12} sm={3}>\n              <Paper elevation={0} sx={{ p: 4, bgcolor: 'transparent' }}>\n                <Typography variant=\"h3\" fontWeight=\"bold\" color=\"primary\">\n                  1,000+\n                </Typography>\n                <Typography variant=\"body1\" color=\"text.secondary\">\n                  Active Merchants\n                </Typography>\n              </Paper>\n            </Grid>\n            <Grid item xs={12} sm={3}>\n              <Paper elevation={0} sx={{ p: 4, bgcolor: 'transparent' }}>\n                <Typography variant=\"h3\" fontWeight=\"bold\" color=\"primary\">\n                  5,000+\n                </Typography>\n                <Typography variant=\"body1\" color=\"text.secondary\">\n                  Registered Couriers\n                </Typography>\n              </Paper>\n            </Grid>\n            <Grid item xs={12} sm={3}>\n              <Paper elevation={0} sx={{ p: 4, bgcolor: 'transparent' }}>\n                <Typography variant=\"h3\" fontWeight=\"bold\" color=\"primary\">\n                  50K+\n                </Typography>\n                <Typography variant=\"body1\" color=\"text.secondary\">\n                  Customer Reviews\n                </Typography>\n              </Paper>\n            </Grid>\n          </Grid>\n\n          {/* Testimonial */}\n          <Box sx={{ mt: 6 }}>\n            <Paper elevation={2} sx={{ p: 4, maxWidth: 800, mx: 'auto' }}>\n              <Box sx={{ display: 'flex', justifyContent: 'center', mb: 2 }}>\n                {[1, 2, 3, 4, 5].map((star) => (\n                  <Star key={star} sx={{ color: '#FFD700', fontSize: 28 }} />\n                ))}\n              </Box>\n              <Typography variant=\"h6\" textAlign=\"center\" gutterBottom>\n                \"Best delivery tracking platform we've used\"\n              </Typography>\n              <Typography variant=\"body1\" color=\"text.secondary\" textAlign=\"center\" paragraph>\n                Performile has transformed how we manage our deliveries. The analytics are\n                incredible and the TrustScore system helps us choose the best couriers.\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\" textAlign=\"center\" fontWeight=\"bold\">\n                 Sarah Johnson, E-commerce Manager\n              </Typography>\n            </Paper>\n          </Box>\n        </Container>\n      </Box>\n\n      {/* CTA Section */}\n      <Container maxWidth=\"lg\" sx={{ py: 8 }}>\n        <Paper\n          elevation={3}\n          sx={{\n            p: 6,\n            textAlign: 'center',\n            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n            color: 'white',\n          }}\n        >\n          <Typography variant=\"h4\" fontWeight=\"bold\" gutterBottom>\n            Ready to Get Started?\n          </Typography>\n          <Typography variant=\"body1\" sx={{ mb: 4, opacity: 0.9 }}>\n            Join thousands of merchants and couriers optimizing their delivery performance\n          </Typography>\n          <Stack direction=\"row\" spacing={2} justifyContent=\"center\">\n            <Button\n              variant=\"contained\"\n              size=\"large\"\n              onClick={() => navigate('/subscription/plans')}\n              sx={{\n                bgcolor: 'white',\n                color: '#667eea',\n                '&:hover': { bgcolor: 'rgba(255,255,255,0.9)' },\n              }}\n            >\n              View Pricing\n            </Button>\n            <Button\n              variant=\"outlined\"\n              size=\"large\"\n              onClick={() => navigate('/contact')}\n              sx={{\n                borderColor: 'white',\n                color: 'white',\n                '&:hover': { borderColor: 'white', bgcolor: 'rgba(255,255,255,0.1)' },\n              }}\n            >\n              Contact Us\n            </Button>\n          </Stack>\n        </Paper>\n      </Container>\n\n      {/* Footer */}\n      <Box sx={{ bgcolor: 'grey.900', color: 'white', py: 4 }}>\n        <Container maxWidth=\"lg\">\n          <Grid container spacing={4}>\n            <Grid item xs={12} sm={4}>\n              <Typography variant=\"h6\" gutterBottom>\n                Performile\n              </Typography>\n              <Typography variant=\"body2\" sx={{ opacity: 0.7 }}>\n                The Last Mile Performance Index\n              </Typography>\n            </Grid>\n            <Grid item xs={12} sm={4}>\n              <Typography variant=\"h6\" gutterBottom>\n                Quick Links\n              </Typography>\n              <Stack spacing={1}>\n                <Button\n                  color=\"inherit\"\n                  sx={{ justifyContent: 'flex-start', textTransform: 'none' }}\n                  onClick={() => navigate('/info')}\n                >\n                  About Us\n                </Button>\n                <Button\n                  color=\"inherit\"\n                  sx={{ justifyContent: 'flex-start', textTransform: 'none' }}\n                  onClick={() => navigate('/subscription/plans')}\n                >\n                  Pricing\n                </Button>\n                <Button\n                  color=\"inherit\"\n                  sx={{ justifyContent: 'flex-start', textTransform: 'none' }}\n                  onClick={() => navigate('/contact')}\n                >\n                  Contact\n                </Button>\n              </Stack>\n            </Grid>\n            <Grid item xs={12} sm={4}>\n              <Typography variant=\"h6\" gutterBottom>\n                Legal\n              </Typography>\n              <Stack spacing={1}>\n                <Button\n                  color=\"inherit\"\n                  sx={{ justifyContent: 'flex-start', textTransform: 'none' }}\n                >\n                  Privacy Policy\n                </Button>\n                <Button\n                  color=\"inherit\"\n                  sx={{ justifyContent: 'flex-start', textTransform: 'none' }}\n                >\n                  Terms of Service\n                </Button>\n              </Stack>\n            </Grid>\n          </Grid>\n          <Box mt={4} pt={4} borderTop=\"1px solid rgba(255,255,255,0.1)\" textAlign=\"center\">\n            <Typography variant=\"body2\" sx={{ opacity: 0.7 }}>\n               {new Date().getFullYear()} Performile. All rights reserved.\n            </Typography>\n          </Box>\n        </Container>\n      </Box>\n    </Box>\n  );\n};\n\nexport default Home;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\Info.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\KnowledgeBase.tsx","messages":[{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useMemo\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":818,"column":28,"nodeType":"Identifier","endLine":818,"endColumn":35}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useMemo, useState } from 'react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport {\n  Box,\n  Container,\n  Typography,\n  Card,\n  CardContent,\n  Grid,\n  Stack,\n  Button,\n  TextField,\n  InputAdornment,\n  Paper,\n  Divider,\n  Chip,\n} from '@mui/material';\nimport {\n  Search,\n  PlayCircleOutline,\n  Code,\n  HelpOutline,\n  ArrowForward,\n  AssignmentTurnedIn,\n  AutoGraph,\n  Security,\n  SupportAgent,\n  Storefront,\n  LocalShipping,\n  PeopleAlt,\n  Insights,\n  RocketLaunch,\n  Tune,\n  ShieldOutlined,\n  Timeline,\n} from '@mui/icons-material';\nimport {\n  Package,\n  Store,\n  Truck,\n  Smartphone,\n  CreditCard,\n  Settings,\n  FileText,\n} from 'lucide-react';\n\nconst ROLE_KEYS = ['merchant', 'courier', 'consumer', 'admin'] as const;\ntype RoleKey = typeof ROLE_KEYS[number];\n\ninterface RoleHighlight {\n  label: string;\n  value: string;\n}\n\ninterface RolePrimaryAction {\n  label: string;\n  description: string;\n  href: string;\n  icon: React.ReactNode;\n  accent: string;\n}\n\ninterface RoleSectionCard {\n  title: string;\n  description: string;\n  href: string;\n  icon: React.ReactNode;\n  accent: string;\n}\n\ninterface RoleSection {\n  title: string;\n  description: string;\n  cards: RoleSectionCard[];\n}\n\ninterface RoleResource {\n  label: string;\n  description: string;\n  href: string;\n  icon: React.ReactNode;\n}\n\ninterface RoleContent {\n  role: RoleKey;\n  heroTitle: string;\n  heroSubtitle: string;\n  gradient: string;\n  highlights: RoleHighlight[];\n  primaryActions: RolePrimaryAction[];\n  sections: RoleSection[];\n  resources: RoleResource[];\n}\n\nconst ROLE_CONTENT: Record<RoleKey, RoleContent> = {\n  merchant: {\n    role: 'merchant',\n    heroTitle: 'Merchant Playbooks',\n    heroSubtitle:\n      'Launch dynamic checkout experiences, connect your couriers, and deliver on time in every market.',\n    gradient: 'linear-gradient(135deg, #4338ca 0%, #7c3aed 100%)',\n    highlights: [\n      { label: 'Checkout launch time', value: '12 min' },\n      { label: 'Guided workflows', value: '35 playbooks' },\n      { label: 'Conversion uplift', value: '+24%' },\n    ],\n    primaryActions: [\n      {\n        label: 'Checkout Setup Wizard',\n        description: 'Configure courier weighting, pricing rules, and UI in one guided flow.',\n        href: '/knowledge-base?article=merchant-checkout-setup',\n        icon: <AssignmentTurnedIn sx={{ fontSize: 28, color: '#1e3a8a' }} />,\n        accent: 'linear-gradient(135deg, rgba(59,130,246,0.16), rgba(129,140,248,0.1))',\n      },\n      {\n        label: 'Performance Analytics Playbook',\n        description: 'Benchmark courier trust scores and monitor fulfilment KPIs in real time.',\n        href: '/knowledge-base?article=merchant-analytics-playbook',\n        icon: <Insights sx={{ fontSize: 28, color: '#7c3aed' }} />,\n        accent: 'linear-gradient(135deg, rgba(124,58,237,0.16), rgba(99,102,241,0.1))',\n      },\n    ],\n    sections: [\n      {\n        title: 'Launch & Configuration',\n        description: 'Everything you need to go live with confidence.',\n        cards: [\n          {\n            title: 'Dynamic Checkout Guide',\n            description: 'Postal-code weighting, fallback logic, and branding checklists.',\n            href: '/knowledge-base?article=dynamic-checkout-guide',\n            icon: <Tune sx={{ fontSize: 26, color: '#3730a3' }} />,\n            accent: 'linear-gradient(135deg, rgba(79,70,229,0.15), rgba(67,56,202,0.08))',\n          },\n          {\n            title: 'Courier Selection Matrix',\n            description: 'Compare price, SLA, and trust score to pick the best operators per market.',\n            href: '/knowledge-base?article=courier-selection-matrix',\n            icon: <LocalShipping sx={{ fontSize: 26, color: '#2563eb' }} />,\n            accent: 'linear-gradient(135deg, rgba(37,99,235,0.15), rgba(59,130,246,0.08))',\n          },\n        ],\n      },\n      {\n        title: 'Operations & Growth',\n        description: 'Scale fulfilment, automate returns, and fuel retention.',\n        cards: [\n          {\n            title: 'Post-purchase Automation',\n            description: 'Trigger notifications, loyalty programs, and NPS flows automatically.',\n            href: '/knowledge-base?article=post-purchase-automation',\n            icon: <RocketLaunch sx={{ fontSize: 26, color: '#f97316' }} />,\n            accent: 'linear-gradient(135deg, rgba(249,115,22,0.18), rgba(251,146,60,0.1))',\n          },\n          {\n            title: 'Returns & Claims Framework',\n            description: 'Standard operating procedures for claims, refunds, and RMA routing.',\n            href: '/knowledge-base?article=returns-claims-framework',\n            icon: <ShieldOutlined sx={{ fontSize: 26, color: '#0f766e' }} />,\n            accent: 'linear-gradient(135deg, rgba(15,118,110,0.18), rgba(45,212,191,0.1))',\n          },\n        ],\n      },\n    ],\n    resources: [\n      {\n        label: 'Merchant API Reference',\n        description: 'Endpoints for checkout rules, orders, analytics, and webhooks.',\n        href: '/knowledge-base?article=merchant-api-reference',\n        icon: <Code sx={{ fontSize: 24, color: '#3730a3' }} />,\n      },\n      {\n        label: 'Shopify Plugin Checklist',\n        description: 'Verify OAuth scopes, test webhooks, and prepare for app review.',\n        href: '/knowledge-base?article=shopify-plugin-checklist',\n        icon: <AssignmentTurnedIn sx={{ fontSize: 24, color: '#7c3aed' }} />,\n      },\n      {\n        label: 'Merchant Success Desk',\n        description: 'Book a working session with our merchant success engineers.',\n        href: '/knowledge-base?article=merchant-support',\n        icon: <SupportAgent sx={{ fontSize: 24, color: '#0f766e' }} />,\n      },\n    ],\n  },\n  courier: {\n    role: 'courier',\n    heroTitle: 'Courier Operations Hub',\n    heroSubtitle:\n      'Monitor performance, automate ETA updates, and grow marketplace bookings with data-backed insights.',\n    gradient: 'linear-gradient(135deg, #0ea5e9 0%, #2563eb 100%)',\n    highlights: [\n      { label: 'Live performance monitors', value: '14 dashboards' },\n      { label: 'Average ETA accuracy', value: '96%' },\n      { label: 'Marketplace leads', value: '+38% QoQ' },\n    ],\n    primaryActions: [\n      {\n        label: 'Courier Onboarding Checklist',\n        description: 'API credentials, webhook verification, and SLA baselines.',\n        href: '/knowledge-base?article=courier-onboarding-checklist',\n        icon: <AssignmentTurnedIn sx={{ fontSize: 28, color: '#0c4a6e' }} />,\n        accent: 'linear-gradient(135deg, rgba(14,165,233,0.16), rgba(14,116,144,0.1))',\n      },\n      {\n        label: 'Performance Dashboard Walkthrough',\n        description: 'Interpret trust score, cost-to-serve, and SLA variance charts.',\n        href: '/knowledge-base?article=courier-dashboard-walkthrough',\n        icon: <AutoGraph sx={{ fontSize: 28, color: '#1d4ed8' }} />,\n        accent: 'linear-gradient(135deg, rgba(37,99,235,0.16), rgba(59,130,246,0.1))',\n      },\n    ],\n    sections: [\n      {\n        title: 'Operations Control Tower',\n        description: 'Keep promises, prevent delays, and manage incidents.',\n        cards: [\n          {\n            title: 'ETA Accuracy Toolkit',\n            description: 'Best practices for hourly ETA refreshes and exception handling.',\n            href: '/knowledge-base?article=eta-accuracy-toolkit',\n            icon: <Timeline sx={{ fontSize: 26, color: '#0ea5e9' }} />,\n            accent: 'linear-gradient(135deg, rgba(14,165,233,0.18), rgba(14,165,233,0.1))',\n          },\n          {\n            title: 'Incident Playbooks',\n            description: 'Templates for lost parcels, weather delays, and claim escalations.',\n            href: '/knowledge-base?article=courier-incident-playbook',\n            icon: <Security sx={{ fontSize: 26, color: '#0369a1' }} />,\n            accent: 'linear-gradient(135deg, rgba(3,105,161,0.18), rgba(2,132,199,0.1))',\n          },\n        ],\n      },\n      {\n        title: 'Marketplace Growth',\n        description: 'Win more bookings and maintain premium placement.',\n        cards: [\n          {\n            title: 'Lead Response Playbook',\n            description: 'Recommended SLAs, pricing templates, and win/loss tracking.',\n            href: '/knowledge-base?article=courier-lead-playbook',\n            icon: <PeopleAlt sx={{ fontSize: 26, color: '#1e3a8a' }} />,\n            accent: 'linear-gradient(135deg, rgba(30,58,138,0.16), rgba(59,130,246,0.08))',\n          },\n          {\n            title: 'Trust Score Optimisation',\n            description: 'Improve reviews, NPS, and SLA adherence to climb the rankings.',\n            href: '/knowledge-base?article=courier-trust-score',\n            icon: <Insights sx={{ fontSize: 26, color: '#fb7185' }} />,\n            accent: 'linear-gradient(135deg, rgba(251,113,133,0.18), rgba(248,113,113,0.08))',\n          },\n        ],\n      },\n    ],\n    resources: [\n      {\n        label: 'Courier API Reference',\n        description: 'Create bookings, update statuses, and push ETA updates.',\n        href: '/knowledge-base?article=courier-api-reference',\n        icon: <Code sx={{ fontSize: 24, color: '#0f172a' }} />,\n      },\n      {\n        label: 'Webhook Validation Guide',\n        description: 'Secure your callbacks and sign payloads with Supabase functions.',\n        href: '/knowledge-base?article=courier-webhook-validation',\n        icon: <Security sx={{ fontSize: 24, color: '#1d4ed8' }} />,\n      },\n      {\n        label: 'Courier Success Desk',\n        description: 'Schedule a session with operations coaching specialists.',\n        href: '/knowledge-base?article=courier-support',\n        icon: <SupportAgent sx={{ fontSize: 24, color: '#0c4a6e' }} />,\n      },\n    ],\n  },\n  consumer: {\n    role: 'consumer',\n    heroTitle: 'Consumer Help Centre',\n    heroSubtitle: 'Track parcels, manage returns, and resolve delivery issuesno login required.',\n    gradient: 'linear-gradient(135deg, #ec4899 0%, #6366f1 100%)',\n    highlights: [\n      { label: 'Active tracking updates', value: 'Real time' },\n      { label: 'Resolution satisfaction', value: '4.8 / 5' },\n      { label: 'Return scenarios covered', value: '18 guides' },\n    ],\n    primaryActions: [\n      {\n        label: 'Track a Parcel',\n        description: 'Use your tracking number to view live status and ETA.',\n        href: '/track',\n        icon: <Timeline sx={{ fontSize: 28, color: '#db2777' }} />,\n        accent: 'linear-gradient(135deg, rgba(244,114,182,0.18), rgba(236,72,153,0.08))',\n      },\n      {\n        label: 'Start a Return',\n        description: 'Generate labels, book drop-offs, and follow the return journey.',\n        href: '/knowledge-base?article=consumer-returns',\n        icon: <AssignmentTurnedIn sx={{ fontSize: 28, color: '#7c3aed' }} />,\n        accent: 'linear-gradient(135deg, rgba(124,58,237,0.18), rgba(129,140,248,0.08))',\n      },\n    ],\n    sections: [\n      {\n        title: 'Stay Informed',\n        description: 'Understand every stage of your delivery experience.',\n        cards: [\n          {\n            title: 'Tracking Status Glossary',\n            description: 'Learn what each tracking event means and when to act.',\n            href: '/knowledge-base?article=tracking-status-glossary',\n            icon: <Insights sx={{ fontSize: 26, color: '#be123c' }} />,\n            accent: 'linear-gradient(135deg, rgba(244,63,94,0.18), rgba(248,113,113,0.08))',\n          },\n          {\n            title: 'Delivery Preferences',\n            description: 'Request safe-place delivery, reschedule, or change address.',\n            href: '/knowledge-base?article=delivery-preferences',\n            icon: <Tune sx={{ fontSize: 26, color: '#7c3aed' }} />,\n            accent: 'linear-gradient(135deg, rgba(124,58,237,0.16), rgba(129,140,248,0.1))',\n          },\n        ],\n      },\n      {\n        title: 'Resolve an Issue',\n        description: 'Everything you need to file claims or request support fast.',\n        cards: [\n          {\n            title: 'Late Delivery Playbook',\n            description: 'Steps to escalate a delay and request compensation if applicable.',\n            href: '/knowledge-base?article=late-delivery-playbook',\n            icon: <Security sx={{ fontSize: 26, color: '#2563eb' }} />,\n            accent: 'linear-gradient(135deg, rgba(37,99,235,0.16), rgba(59,130,246,0.08))',\n          },\n          {\n            title: 'Damaged Parcel Guide',\n            description: 'Upload evidence, submit claims, and track resolution status.',\n            href: '/knowledge-base?article=damaged-parcel-guide',\n            icon: <ShieldOutlined sx={{ fontSize: 26, color: '#1d4ed8' }} />,\n            accent: 'linear-gradient(135deg, rgba(29,78,216,0.18), rgba(96,165,250,0.08))',\n          },\n        ],\n      },\n    ],\n    resources: [\n      {\n        label: 'Self-Service Portal',\n        description: 'Access labels, QR codes, and chat support from any device.',\n        href: '/knowledge-base?article=consumer-portal',\n        icon: <Storefront sx={{ fontSize: 24, color: '#7c3aed' }} />,\n      },\n      {\n        label: 'Returns FAQs',\n        description: 'Common questions about refunds, exchanges, and replacements.',\n        href: '/knowledge-base?article=returns-faq',\n        icon: <AssignmentTurnedIn sx={{ fontSize: 24, color: '#db2777' }} />,\n      },\n      {\n        label: 'Live Support',\n        description: 'Chat with a support specialist for urgent delivery issues.',\n        href: '/knowledge-base?article=consumer-support',\n        icon: <SupportAgent sx={{ fontSize: 24, color: '#2563eb' }} />,\n      },\n    ],\n  },\n  admin: {\n    role: 'admin',\n    heroTitle: 'Platform Administration',\n    heroSubtitle: 'Monitor compliance, secure access, and keep the entire ecosystem aligned.',\n    gradient: 'linear-gradient(135deg, #0f172a 0%, #1e293b 100%)',\n    highlights: [\n      { label: 'RLS policies deployed', value: '107' },\n      { label: 'Audit automations', value: '52 checkpoints' },\n      { label: 'Incidents resolved', value: '99.2% < 15 min' },\n    ],\n    primaryActions: [\n      {\n        label: 'Security & Access Review',\n        description: 'Audit roles, RLS policies, and Supabase permissions in minutes.',\n        href: '/knowledge-base?article=admin-security-review',\n        icon: <Security sx={{ fontSize: 28, color: '#38bdf8' }} />,\n        accent: 'linear-gradient(135deg, rgba(14,165,233,0.16), rgba(56,189,248,0.1))',\n      },\n      {\n        label: 'Incident Response Playbook',\n        description: 'Follow the 4-step escalation path for critical platform issues.',\n        href: '/knowledge-base?article=incident-response-playbook',\n        icon: <AssignmentTurnedIn sx={{ fontSize: 28, color: '#facc15' }} />,\n        accent: 'linear-gradient(135deg, rgba(250,204,21,0.18), rgba(250,204,21,0.08))',\n      },\n    ],\n    sections: [\n      {\n        title: 'Governance & Compliance',\n        description: 'Protect data, enforce policies, and stay audit ready.',\n        cards: [\n          {\n            title: 'Spec-Driven Framework Enforcement',\n            description: 'Run the duplicate checks and weekly audit workflows end-to-end.',\n            href: '/knowledge-base?article=spec-driven-enforcement',\n            icon: <AssignmentTurnedIn sx={{ fontSize: 26, color: '#6366f1' }} />,\n            accent: 'linear-gradient(135deg, rgba(79,70,229,0.18), rgba(124,58,237,0.08))',\n          },\n          {\n            title: 'Database Compliance Dashboard',\n            description: 'Validate schemas, RLS policies, and Supabase migrations before release.',\n            href: '/knowledge-base?article=database-compliance-dashboard',\n            icon: <ShieldOutlined sx={{ fontSize: 26, color: '#22d3ee' }} />,\n            accent: 'linear-gradient(135deg, rgba(34,211,238,0.18), rgba(14,165,233,0.08))',\n          },\n        ],\n      },\n      {\n        title: 'Platform Operations',\n        description: 'Coordinate deployments, observability, and executive reporting.',\n        cards: [\n          {\n            title: 'Release Management Runbook',\n            description: 'Checklist for Vercel deployments, feature flags, and rollback plans.',\n            href: '/knowledge-base?article=release-management-runbook',\n            icon: <RocketLaunch sx={{ fontSize: 26, color: '#38bdf8' }} />,\n            accent: 'linear-gradient(135deg, rgba(59,130,246,0.16), rgba(37,99,235,0.08))',\n          },\n          {\n            title: 'Executive Reporting Suite',\n            description: 'Generate weekly health reports across merchants, couriers, and consumers.',\n            href: '/knowledge-base?article=executive-reporting-suite',\n            icon: <PeopleAlt sx={{ fontSize: 26, color: '#facc15' }} />,\n            accent: 'linear-gradient(135deg, rgba(250,204,21,0.16), rgba(252,211,77,0.08))',\n          },\n        ],\n      },\n    ],\n    resources: [\n      {\n        label: 'Admin API Surface',\n        description: 'Endpoints for user impersonation, audit logs, and configuration exports.',\n        href: '/knowledge-base?article=admin-api-surface',\n        icon: <Code sx={{ fontSize: 24, color: '#38bdf8' }} />,\n      },\n      {\n        label: 'Compliance Calendar',\n        description: 'Quarterly certification checks and policy renewal reminders.',\n        href: '/knowledge-base?article=compliance-calendar',\n        icon: <Timeline sx={{ fontSize: 24, color: '#facc15' }} />,\n      },\n      {\n        label: 'Administrator Hotline',\n        description: 'Reach the on-call platform administrator for critical incidents.',\n        href: '/knowledge-base?article=admin-support',\n        icon: <SupportAgent sx={{ fontSize: 24, color: '#38bdf8' }} />,\n      },\n    ],\n  },\n};\n\nconst isRoleKey = (value: string): value is RoleKey => ROLE_KEYS.includes(value as RoleKey);\n\nconst gradientBg = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';\n\nconst CATEGORY_CONFIG = [\n  {\n    icon: Package,\n    title: 'Getting Started',\n    description: 'Learn the basics and set up your account',\n    articles: 12,\n    accent: '#667eea',\n    navigateTo: '/knowledge-base/getting-started',\n  },\n  {\n    icon: Store,\n    title: 'For Merchants',\n    description: 'E-commerce integration and shipping guides',\n    articles: 18,\n    accent: '#764ba2',\n    navigateTo: '/knowledge-base/for-merchants',\n  },\n  {\n    icon: Truck,\n    title: 'For Couriers',\n    description: 'Fleet management and delivery optimization',\n    articles: 15,\n    accent: '#22c55e',\n    navigateTo: '/knowledge-base/for-couriers',\n  },\n  {\n    icon: Smartphone,\n    title: 'Mobile Apps',\n    description: 'iOS and Android app guides',\n    articles: 10,\n    accent: '#6366f1',\n    navigateTo: '/knowledge-base/mobile-apps',\n  },\n  {\n    icon: CreditCard,\n    title: 'Payments',\n    description: 'Payment methods and billing',\n    articles: 8,\n    accent: '#fbbf24',\n    navigateTo: '/knowledge-base/payments',\n  },\n  {\n    icon: Settings,\n    title: 'API & Integrations',\n    description: 'Developer documentation and plugins',\n    articles: 20,\n    accent: '#ec4899',\n    navigateTo: '/knowledge-base/api-integrations',\n  },\n];\n\nconst POPULAR_ARTICLES = [\n  {\n    title: 'How to install the WooCommerce plugin',\n    category: 'For Merchants',\n    readTime: '5 min read',\n  },\n  {\n    title: 'Setting up Vipps payments in Norway',\n    category: 'Payments',\n    readTime: '3 min read',\n  },\n  {\n    title: 'Real-time tracking: A complete guide',\n    category: 'Getting Started',\n    readTime: '7 min read',\n  },\n  {\n    title: 'Optimizing delivery routes for maximum efficiency',\n    category: 'For Couriers',\n    readTime: '10 min read',\n  },\n  {\n    title: 'Using the mobile app for C2C shipping',\n    category: 'Mobile Apps',\n    readTime: '4 min read',\n  },\n  {\n    title: 'API authentication and security',\n    category: 'API & Integrations',\n    readTime: '8 min read',\n  },\n];\n\nconst RESOURCE_CARDS = [\n  {\n    title: 'Video Tutorials',\n    description: 'Watch step-by-step video guides for common tasks',\n    action: 'Watch Videos',\n    icon: <PlayCircleOutline fontSize=\"large\" color=\"primary\" />,\n    gradient: 'linear-gradient(135deg, rgba(102, 126, 234, 0.12), rgba(118, 75, 162, 0.12))',\n  },\n  {\n    title: 'API Documentation',\n    description: 'Complete API reference for developers',\n    action: 'View API Docs',\n    icon: <Code fontSize=\"large\" color=\"secondary\" />,\n    gradient: 'linear-gradient(135deg, rgba(118, 75, 162, 0.12), rgba(236, 72, 153, 0.12))',\n  },\n  {\n    title: 'Contact Support',\n    description: \"Can't find what you're looking for? We're here to help\",\n    action: 'Get Support',\n    icon: <HelpOutline fontSize=\"large\" sx={{ color: '#22c55e' }} />,\n    gradient: 'linear-gradient(135deg, rgba(34, 197, 94, 0.12), rgba(16, 185, 129, 0.12))',\n  },\n];\n\nexport default function KnowledgeBase() {\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n  const [searchQuery, setSearchQuery] = useState('');\n\n  const roleParam = (searchParams.get('role') || '').toLowerCase();\n  const roleContent = isRoleKey(roleParam) ? ROLE_CONTENT[roleParam] : undefined;\n\n  const goTo = (href: string) => {\n    if (href.startsWith('http')) {\n      window.open(href, '_blank', 'noopener');\n    } else {\n      navigate(href);\n    }\n  };\n\n  if (roleContent) {\n    return (\n      <Box sx={{ bgcolor: 'background.default', minHeight: '100vh' }}>\n        <Box\n          sx={{\n            background: roleContent.gradient,\n            color: 'white',\n            pt: { xs: 10, md: 14 },\n            pb: { xs: 8, md: 12 },\n          }}\n        >\n          <Container maxWidth=\"lg\">\n            <Stack spacing={6}>\n              <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\">\n                <Button\n                  variant=\"text\"\n                  color=\"inherit\"\n                  startIcon={<ArrowForward sx={{ transform: 'rotate(180deg)' }} />}\n                  onClick={() => navigate('/knowledge-base')}\n                  sx={{ textTransform: 'none', opacity: 0.8 }}\n                >\n                  Back to overview\n                </Button>\n                <Chip label={`${roleContent.heroTitle}`} sx={{ bgcolor: 'rgba(255,255,255,0.16)', color: 'white' }} />\n              </Stack>\n\n              <Grid container spacing={6} alignItems=\"center\">\n                <Grid item xs={12} md={7}>\n                  <Stack spacing={3}>\n                    <Typography variant=\"h3\" fontWeight={700} sx={{ letterSpacing: 0.5 }}>\n                      {roleContent.heroTitle}\n                    </Typography>\n                    <Typography variant=\"h6\" sx={{ opacity: 0.85, maxWidth: 620 }}>\n                      {roleContent.heroSubtitle}\n                    </Typography>\n                    <Stack direction=\"row\" flexWrap=\"wrap\" spacing={2} useFlexGap sx={{ mt: 2 }}>\n                      {roleContent.highlights.map((highlight) => (\n                        <Paper\n                          key={highlight.label}\n                          elevation={0}\n                          sx={{\n                            px: 3,\n                            py: 2,\n                            borderRadius: 3,\n                            bgcolor: 'rgba(255,255,255,0.12)',\n                            border: '1px solid rgba(255,255,255,0.25)',\n                            minWidth: 180,\n                          }}\n                        >\n                          <Typography variant=\"h5\" fontWeight={700}>\n                            {highlight.value}\n                          </Typography>\n                          <Typography variant=\"body2\" sx={{ opacity: 0.8 }}>\n                            {highlight.label}\n                          </Typography>\n                        </Paper>\n                      ))}\n                    </Stack>\n                  </Stack>\n                </Grid>\n                <Grid item xs={12} md={5}>\n                  <Grid container spacing={3}>\n                    {roleContent.primaryActions.map((action) => (\n                      <Grid item xs={12} key={action.label}>\n                        <Paper\n                          onClick={() => goTo(action.href)}\n                          sx={{\n                            cursor: 'pointer',\n                            p: 3,\n                            borderRadius: 3,\n                            background: action.accent,\n                            border: '1px solid rgba(255,255,255,0.2)',\n                            transition: 'transform 0.2s ease, box-shadow 0.2s ease',\n                            '&:hover': {\n                              transform: 'translateY(-4px)',\n                              boxShadow: '0 18px 40px rgba(15,23,42,0.22)',\n                            },\n                          }}\n                        >\n                          <Stack spacing={2}>\n                            <Box\n                              sx={{\n                                width: 56,\n                                height: 56,\n                                borderRadius: 2,\n                                bgcolor: 'rgba(255,255,255,0.18)',\n                                display: 'flex',\n                                alignItems: 'center',\n                                justifyContent: 'center',\n                              }}\n                            >\n                              {action.icon}\n                            </Box>\n                            <Stack spacing={1}>\n                              <Typography variant=\"subtitle1\" fontWeight={700}>\n                                {action.label}\n                              </Typography>\n                              <Typography variant=\"body2\" sx={{ opacity: 0.85 }}>\n                                {action.description}\n                              </Typography>\n                            </Stack>\n                          </Stack>\n                        </Paper>\n                      </Grid>\n                    ))}\n                  </Grid>\n                </Grid>\n              </Grid>\n            </Stack>\n          </Container>\n        </Box>\n\n        <Container maxWidth=\"lg\" sx={{ py: { xs: 8, md: 10 } }}>\n          <Stack spacing={8}>\n            {roleContent.sections.map((section) => (\n              <Box key={section.title}>\n                <Stack spacing={3} sx={{ mb: 4 }}>\n                  <Typography variant=\"overline\" color=\"primary\" fontWeight={700}>\n                    {section.title}\n                  </Typography>\n                  <Typography variant=\"h4\" fontWeight={700} color=\"text.primary\">\n                    {section.description}\n                  </Typography>\n                </Stack>\n                <Grid container spacing={3}>\n                  {section.cards.map((card) => (\n                    <Grid item xs={12} md={6} key={card.title}>\n                      <Paper\n                        onClick={() => goTo(card.href)}\n                        sx={{\n                          cursor: 'pointer',\n                          height: '100%',\n                          borderRadius: 3,\n                          p: 3,\n                          background: card.accent,\n                          border: '1px solid rgba(15,23,42,0.08)',\n                          transition: 'transform 0.2s ease, box-shadow 0.2s ease',\n                          '&:hover': {\n                            transform: 'translateY(-6px)',\n                            boxShadow: '0 18px 38px rgba(15,23,42,0.15)',\n                          },\n                        }}\n                      >\n                        <Stack spacing={2.5}>\n                          <Box\n                            sx={{\n                              width: 52,\n                              height: 52,\n                              borderRadius: 2,\n                              bgcolor: 'white',\n                              display: 'flex',\n                              alignItems: 'center',\n                              justifyContent: 'center',\n                              boxShadow: '0 10px 24px rgba(15,23,42,0.12)',\n                            }}\n                          >\n                            {card.icon}\n                          </Box>\n                          <Stack spacing={1.5}>\n                            <Typography variant=\"h6\" fontWeight={700} color=\"text.primary\">\n                              {card.title}\n                            </Typography>\n                            <Typography variant=\"body2\" color=\"text.secondary\">\n                              {card.description}\n                            </Typography>\n                          </Stack>\n                        </Stack>\n                      </Paper>\n                    </Grid>\n                  ))}\n                </Grid>\n              </Box>\n            ))}\n\n            <Box>\n              <Typography variant=\"overline\" color=\"primary\" fontWeight={700} sx={{ mb: 2 }}>\n                Resources\n              </Typography>\n              <Grid container spacing={3}>\n                {roleContent.resources.map((resource) => (\n                  <Grid item xs={12} md={4} key={resource.label}>\n                    <Paper\n                      variant=\"outlined\"\n                      onClick={() => goTo(resource.href)}\n                      sx={{\n                        cursor: 'pointer',\n                        height: '100%',\n                        borderRadius: 3,\n                        p: 3,\n                        transition: 'transform 0.2s ease, box-shadow 0.2s ease',\n                        '&:hover': {\n                          transform: 'translateY(-4px)',\n                          boxShadow: '0 14px 30px rgba(15,23,42,0.12)',\n                        },\n                      }}\n                    >\n                      <Stack spacing={2}>\n                        <Box\n                          sx={{\n                            width: 48,\n                            height: 48,\n                            borderRadius: 2,\n                            bgcolor: 'rgba(59,130,246,0.12)',\n                            display: 'flex',\n                            alignItems: 'center',\n                            justifyContent: 'center',\n                          }}\n                        >\n                          {resource.icon}\n                        </Box>\n                        <Stack spacing={1}>\n                          <Typography variant=\"subtitle1\" fontWeight={700}>\n                            {resource.label}\n                          </Typography>\n                          <Typography variant=\"body2\" color=\"text.secondary\">\n                            {resource.description}\n                          </Typography>\n                        </Stack>\n                      </Stack>\n                    </Paper>\n                  </Grid>\n                ))}\n              </Grid>\n            </Box>\n          </Stack>\n        </Container>\n      </Box>\n    );\n  }\n\n  const handleCategoryNavigate = (path: string) => {\n    navigate(path);\n  };\n\n  const filteredArticles = useMemo(() => {\n    if (!searchQuery.trim()) {\n      return POPULAR_ARTICLES;\n    }\n\n    return POPULAR_ARTICLES.filter((article) =>\n      article.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      article.category.toLowerCase().includes(searchQuery.toLowerCase())\n    );\n  }, [searchQuery]);\n\n  return (\n    <Box sx={{ bgcolor: 'background.default', minHeight: '100vh' }}>\n      {/* Hero Section */}\n      <Box\n        sx={{\n          background: gradientBg,\n          color: 'white',\n          pt: { xs: 10, md: 14 },\n          pb: { xs: 8, md: 12 },\n        }}\n      >\n        <Container maxWidth=\"lg\">\n          <Stack spacing={6} alignItems=\"center\">\n            <Stack spacing={2} alignItems=\"center\" textAlign=\"center\" maxWidth={720}>\n              <Typography variant=\"h3\" fontWeight={700} sx={{ letterSpacing: 0.5 }}>\n                Knowledge Base\n              </Typography>\n              <Typography variant=\"h6\" sx={{ opacity: 0.85 }}>\n                Find walkthroughs, tutorials, and best practices tailored to every Performile role.\n              </Typography>\n            </Stack>\n\n            <Paper\n              elevation={0}\n              sx={{\n                width: '100%',\n                maxWidth: 560,\n                borderRadius: 3,\n                bgcolor: 'rgba(255,255,255,0.15)',\n                border: '1px solid rgba(255,255,255,0.25)',\n                backdropFilter: 'blur(10px)',\n              }}\n            >\n              <TextField\n                fullWidth\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                placeholder=\"Search for articles, guides, or topics...\"\n                variant=\"outlined\"\n                InputProps={{\n                  startAdornment: (\n                    <InputAdornment position=\"start\">\n                      <Search sx={{ color: 'rgba(255,255,255,0.8)' }} />\n                    </InputAdornment>\n                  ),\n                  sx: {\n                    color: 'white',\n                    '& .MuiOutlinedInput-notchedOutline': {\n                      borderColor: 'rgba(255,255,255,0.3)',\n                    },\n                    '&:hover .MuiOutlinedInput-notchedOutline': {\n                      borderColor: 'rgba(255,255,255,0.5)',\n                    },\n                  },\n                }}\n                sx={{\n                  '& .MuiInputBase-input': {\n                    py: 1.8,\n                    fontSize: 18,\n                    color: 'white',\n                  },\n                  '& .MuiInputBase-input::placeholder': {\n                    color: 'rgba(255,255,255,0.7)',\n                  },\n                }}\n              />\n            </Paper>\n          </Stack>\n        </Container>\n      </Box>\n\n      {/* Categories */}\n      <Container maxWidth=\"lg\" sx={{ py: { xs: 8, md: 10 } }}>\n        <Stack spacing={3} sx={{ mb: 6 }}>\n          <Chip label=\"Browse by Category\" color=\"primary\" variant=\"outlined\" sx={{ alignSelf: 'flex-start' }} />\n          <Typography variant=\"h4\" fontWeight={700} color=\"text.primary\">\n            Find answers faster\n          </Typography>\n          <Typography variant=\"body1\" color=\"text.secondary\" maxWidth={640}>\n            We organize guides by role so you can jump directly to the workflows and tutorials that matter most to your team.\n          </Typography>\n        </Stack>\n\n        <Grid container spacing={3}>\n          {CATEGORY_CONFIG.map((category) => (\n            <Grid item xs={12} sm={6} md={4} key={category.title}>\n              <Card\n                onClick={() => handleCategoryNavigate(category.navigateTo)}\n                sx={{\n                  height: '100%',\n                  borderRadius: 3,\n                  boxShadow: '0px 12px 30px rgba(2, 12, 50, 0.08)',\n                  cursor: 'pointer',\n                  transition: 'transform 0.2s ease, box-shadow 0.2s ease',\n                  '&:hover': {\n                    transform: 'translateY(-6px)',\n                    boxShadow: '0px 18px 40px rgba(102, 126, 234, 0.18)',\n                  },\n                }}\n              >\n                <CardContent>\n                  <Stack spacing={2.5}>\n                    <Box\n                      sx={{\n                        width: 56,\n                        height: 56,\n                        borderRadius: 2,\n                        bgcolor: category.accent,\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        color: 'white',\n                        transition: 'transform 0.2s ease',\n                        '& svg': {\n                          width: 28,\n                          height: 28,\n                        },\n                      }}\n                    >\n                      <category.icon strokeWidth={1.6} />\n                    </Box>\n                    <Stack spacing={1}>\n                      <Typography variant=\"h6\" fontWeight={600} color=\"text.primary\">\n                        {category.title}\n                      </Typography>\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        {category.description}\n                      </Typography>\n                    </Stack>\n                    <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\">\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        {category.articles} articles\n                      </Typography>\n                      <Button\n                        variant=\"text\"\n                        size=\"small\"\n                        endIcon={<span style={{ display: 'inline-flex', transform: 'translateX(2px)' }}></span>}\n                        sx={{ textTransform: 'none', fontWeight: 600 }}\n                      >\n                        Explore\n                      </Button>\n                    </Stack>\n                  </Stack>\n                </CardContent>\n              </Card>\n            </Grid>\n          ))}\n        </Grid>\n      </Container>\n\n      {/* Popular Articles */}\n      <Box sx={{ bgcolor: 'white', py: { xs: 8, md: 10 } }}>\n        <Container maxWidth=\"lg\">\n          <Stack spacing={3} sx={{ mb: 4 }}>\n            <Chip label=\"Popular\" color=\"secondary\" variant=\"outlined\" sx={{ alignSelf: 'flex-start' }} />\n            <Typography variant=\"h4\" fontWeight={700} color=\"text.primary\">\n              Trending tutorials\n            </Typography>\n            <Typography variant=\"body1\" color=\"text.secondary\" maxWidth={620}>\n              These guides are a great place to start if you&apos;re new to Performile or rolling out new functionality to your team.\n            </Typography>\n          </Stack>\n\n          <Paper variant=\"outlined\" sx={{ borderRadius: 3, overflow: 'hidden' }}>\n            <Stack divider={<Divider flexItem />}>\n              {filteredArticles.map((article, index) => (\n                <Box\n                  component=\"button\"\n                  key={`${article.title}-${index}`}\n                  onClick={() => navigate(`/knowledge-base/article/${index}`)}\n                  sx={{\n                    all: 'unset',\n                    cursor: 'pointer',\n                    px: 3,\n                    py: 2.5,\n                    '&:hover': {\n                      bgcolor: 'rgba(102, 126, 234, 0.05)',\n                    },\n                  }}\n                >\n                  <Stack direction=\"row\" alignItems=\"center\" spacing={3}>\n                    <Box\n                      sx={{\n                        width: 44,\n                        height: 44,\n                        borderRadius: 2,\n                        bgcolor: 'rgba(102,126,234,0.12)',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                      }}\n                    >\n                      <FileText className=\"h-5 w-5\" color=\"rgba(102,126,234,1)\" />\n                    </Box>\n                    <Box sx={{ flex: 1 }}>\n                      <Typography variant=\"subtitle1\" fontWeight={600} color=\"text.primary\">\n                        {article.title}\n                      </Typography>\n                      <Stack direction=\"row\" spacing={1.5} alignItems=\"center\" sx={{ mt: 0.75 }}>\n                        <Typography variant=\"body2\" color=\"text.secondary\">\n                          {article.category}\n                        </Typography>\n                        <Divider orientation=\"vertical\" flexItem sx={{ bgcolor: 'rgba(102,126,234,0.2)' }} />\n                        <Typography variant=\"body2\" color=\"text.secondary\">\n                          {article.readTime}\n                        </Typography>\n                      </Stack>\n                    </Box>\n                    <Typography variant=\"body2\" color=\"primary\" fontWeight={600}>\n                      Read \n                    </Typography>\n                  </Stack>\n                </Box>\n              ))}\n            </Stack>\n          </Paper>\n        </Container>\n      </Box>\n\n      {/* Resources */}\n      <Container maxWidth=\"lg\" sx={{ py: { xs: 8, md: 10 } }}>\n        <Stack spacing={3} sx={{ mb: 4 }}>\n          <Chip label=\"Resources\" variant=\"outlined\" sx={{ alignSelf: 'flex-start' }} />\n          <Typography variant=\"h4\" fontWeight={700} color=\"text.primary\">\n            Everything else you need\n          </Typography>\n          <Typography variant=\"body1\" color=\"text.secondary\" maxWidth={600}>\n            Dive deeper with walkthrough videos, API references, and 1:1 support from the Performile team.\n          </Typography>\n        </Stack>\n\n        <Grid container spacing={3}>\n          {RESOURCE_CARDS.map((resource) => (\n            <Grid item xs={12} md={4} key={resource.title}>\n              <Card\n                variant=\"outlined\"\n                sx={{\n                  height: '100%',\n                  borderRadius: 3,\n                  background: resource.gradient,\n                  boxShadow: 'none',\n                }}\n              >\n                <CardContent>\n                  <Stack spacing={2.5}>\n                    <Box>{resource.icon}</Box>\n                    <Stack spacing={1}>\n                      <Typography variant=\"h6\" fontWeight={600} color=\"text.primary\">\n                        {resource.title}\n                      </Typography>\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        {resource.description}\n                      </Typography>\n                    </Stack>\n                    <Button\n                      variant=\"text\"\n                      sx={{\n                        alignSelf: 'flex-start',\n                        fontWeight: 600,\n                        textTransform: 'none',\n                      }}\n                      endIcon={<span style={{ display: 'inline-flex', transform: 'translateX(2px)' }}></span>}\n                    >\n                      {resource.action}\n                    </Button>\n                  </Stack>\n                </CardContent>\n              </Card>\n            </Grid>\n          ))}\n        </Grid>\n      </Container>\n    </Box>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\LandingPage.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Shield' is defined but never used.","line":8,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Zap' is defined but never used.","line":9,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":6},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Globe' is defined but never used.","line":10,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TrendingUp' is defined but never used.","line":12,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Download' is defined but never used.","line":16,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Star' is defined but never used.","line":18,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Clock' is defined but never used.","line":20,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'DollarSign' is defined but never used.","line":21,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Award' is defined but never used.","line":24,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Lock' is defined but never used.","line":25,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Mail' is defined but never used.","line":26,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Play' is defined but never used.","line":27,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Calculator' is defined but never used.","line":28,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FileText' is defined but never used.","line":29,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Newspaper' is defined but never used.","line":30,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'showROI' is assigned a value but never used.","line":49,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":49,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setShowROI' is assigned a value but never used.","line":49,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":49,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setRoiInputs' is assigned a value but never used.","line":50,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":50,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'calculateROI' is assigned a value but never used.","line":56,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleNewsletterSignup' is assigned a value but never used.","line":65,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":65,"endColumn":31},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":134,"column":55,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[5149,5249],"text":"\n              From checkout widgets to mobile apps, we&apos;ve built the complete ecosystem\n            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[5149,5249],"text":"\n              From checkout widgets to mobile apps, we&lsquo;ve built the complete ecosystem\n            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[5149,5249],"text":"\n              From checkout widgets to mobile apps, we&#39;ve built the complete ecosystem\n            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[5149,5249],"text":"\n              From checkout widgets to mobile apps, we&rsquo;ve built the complete ecosystem\n            "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":21,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n  Package,\n  Truck,\n  Store,\n  Smartphone,\n  Shield,\n  Zap,\n  Globe,\n  CreditCard,\n  TrendingUp,\n  Users,\n  CheckCircle,\n  ArrowRight,\n  Download,\n  ChevronDown,\n  Star,\n  MapPin,\n  Clock,\n  DollarSign,\n  BarChart3,\n  Plug,\n  Award,\n  Lock,\n  Mail,\n  Play,\n  Calculator,\n  FileText,\n  Newspaper,\n} from 'lucide-react';\nimport { Testimonials } from '../components/landing/Testimonials';\nimport { Newsletter } from '../components/landing/Newsletter';\nimport { TrustBadges } from '../components/landing/TrustBadges';\nimport { PartnerLogos } from '../components/landing/PartnerLogos';\nimport { DemoVideo } from '../components/landing/DemoVideo';\nimport { PricingComparison } from '../components/landing/PricingComparison';\nimport { ROICalculator } from '../components/landing/ROICalculator';\nimport { CaseStudies } from '../components/landing/CaseStudies';\nimport { CoverageMap } from '../components/landing/CoverageMap';\nimport { BlogSection } from '../components/landing/BlogSection';\nimport { AppStoreLinks } from '../components/landing/AppStoreLinks';\nimport { GoogleAnalytics } from '../components/analytics/GoogleAnalytics';\n\nexport default function LandingPage() {\n  const navigate = useNavigate();\n  const [openFaq, setOpenFaq] = useState<number | null>(null);\n  const [email, setEmail] = useState('');\n  const [showROI, setShowROI] = useState(false);\n  const [roiInputs, setRoiInputs] = useState({\n    monthlyOrders: 1000,\n    avgOrderValue: 50,\n    currentFees: 5,\n  });\n\n  const calculateROI = () => {\n    const monthlyRevenue = roiInputs.monthlyOrders * roiInputs.avgOrderValue;\n    const currentCosts = (monthlyRevenue * roiInputs.currentFees) / 100;\n    const performileCosts = (monthlyRevenue * 2.5) / 100;\n    const monthlySavings = currentCosts - performileCosts;\n    const annualSavings = monthlySavings * 12;\n    return { monthlySavings, annualSavings };\n  };\n\n  const handleNewsletterSignup = async (e: React.FormEvent) => {\n    e.preventDefault();\n    alert(`Thanks for subscribing! We'll send updates to ${email}`);\n    setEmail('');\n  };\n\n  return (\n    <div className=\"min-h-screen bg-white\">\n      {/* Google Analytics */}\n      <GoogleAnalytics measurementId=\"G-XXXXXXXXXX\" />\n      \n      {/* Hero Section */}\n      <section className=\"relative bg-gradient-to-br from-blue-600 via-blue-700 to-indigo-800 text-white overflow-hidden\">\n        <div className=\"absolute inset-0 bg-grid-white/[0.05] bg-[size:20px_20px]\" />\n        <div className=\"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24 sm:py-32\">\n          <div className=\"text-center\">\n            <h1 className=\"text-4xl sm:text-6xl font-bold mb-6\">\n              The Complete Delivery Platform\n              <span className=\"block text-blue-200 mt-2\">for the Nordic Region</span>\n            </h1>\n            <p className=\"text-xl sm:text-2xl text-blue-100 mb-8 max-w-3xl mx-auto\">\n              Connect merchants, couriers, and consumers with AI-powered logistics,\n              real-time tracking, and seamless payments\n            </p>\n            <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n              <button\n                onClick={() => navigate('/register')}\n                className=\"inline-flex items-center px-8 py-4 bg-white text-blue-600 rounded-lg font-semibold text-lg hover:bg-blue-50 transition-colors shadow-xl\"\n              >\n                Start Free Trial\n                <ArrowRight className=\"ml-2 h-5 w-5\" />\n              </button>\n              <button\n                onClick={() => navigate('/demo')}\n                className=\"inline-flex items-center px-8 py-4 bg-blue-500 text-white rounded-lg font-semibold text-lg hover:bg-blue-400 transition-colors border-2 border-white/20\"\n              >\n                Watch Demo\n              </button>\n            </div>\n            <p className=\"mt-6 text-blue-200\">\n               No credit card required  14-day free trial  Cancel anytime\n            </p>\n          </div>\n\n          {/* Stats */}\n          <div className=\"mt-16 grid grid-cols-2 md:grid-cols-4 gap-8\">\n            {[\n              { label: 'Active Users', value: '50K+' },\n              { label: 'Deliveries/Month', value: '500K+' },\n              { label: 'Countries', value: '250+' },\n              { label: 'Satisfaction', value: '98%' },\n            ].map((stat) => (\n              <div key={stat.label} className=\"text-center\">\n                <div className=\"text-3xl sm:text-4xl font-bold text-white\">{stat.value}</div>\n                <div className=\"text-blue-200 mt-1\">{stat.label}</div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Features Overview */}\n      <section className=\"py-20 bg-gray-50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-3xl sm:text-4xl font-bold text-gray-900 mb-4\">\n              Everything You Need in One Platform\n            </h2>\n            <p className=\"text-xl text-gray-600 max-w-3xl mx-auto\">\n              From checkout widgets to mobile apps, we've built the complete ecosystem\n            </p>\n          </div>\n\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\n            {[\n              {\n                icon: Smartphone,\n                title: 'Mobile Apps',\n                description: 'Native iOS & Android apps for consumers with real-time tracking',\n                color: 'bg-blue-500',\n              },\n              {\n                icon: Plug,\n                title: 'Checkout Plugins',\n                description: 'WooCommerce & Shopify integrations for instant setup',\n                color: 'bg-purple-500',\n              },\n              {\n                icon: CreditCard,\n                title: 'Multi-Payment Support',\n                description: 'Vipps, Swish, MobilePay, Stripe - all major Nordic payments',\n                color: 'bg-green-500',\n              },\n              {\n                icon: MapPin,\n                title: 'Real-Time Tracking',\n                description: 'Live GPS tracking with ETA predictions and notifications',\n                color: 'bg-red-500',\n              },\n              {\n                icon: Package,\n                title: 'C2C Shipping',\n                description: 'Consumer-to-consumer shipping with integrated payments',\n                color: 'bg-yellow-500',\n              },\n              {\n                icon: BarChart3,\n                title: 'Advanced Analytics',\n                description: 'Real-time insights, performance metrics, and revenue tracking',\n                color: 'bg-indigo-500',\n              },\n            ].map((feature) => (\n              <div\n                key={feature.title}\n                className=\"bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow\"\n              >\n                <div className={`${feature.color} w-12 h-12 rounded-lg flex items-center justify-center mb-4`}>\n                  <feature.icon className=\"h-6 w-6 text-white\" />\n                </div>\n                <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">{feature.title}</h3>\n                <p className=\"text-gray-600\">{feature.description}</p>\n              </div>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Industry Solutions */}\n      <section className=\"py-20 bg-white\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-3xl sm:text-4xl font-bold text-gray-900 mb-4\">\n              Built for Every Industry\n            </h2>\n            <p className=\"text-xl text-gray-600\">\n              Why Performile is the best solution for your business\n            </p>\n          </div>\n\n          <div className=\"space-y-12\">\n            {/* E-commerce */}\n            <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-8\">\n              <div className=\"flex items-start gap-6\">\n                <div className=\"bg-blue-500 w-16 h-16 rounded-xl flex items-center justify-center flex-shrink-0\">\n                  <Store className=\"h-8 w-8 text-white\" />\n                </div>\n                <div className=\"flex-1\">\n                  <h3 className=\"text-2xl font-bold text-gray-900 mb-3\">For E-commerce Merchants</h3>\n                  <p className=\"text-gray-700 mb-4\">\n                    Integrate Performile in minutes with our WooCommerce and Shopify plugins.\n                    Offer your customers multiple delivery options, real-time tracking, and seamless checkout.\n                  </p>\n                  <div className=\"grid md:grid-cols-2 gap-4\">\n                    <div className=\"flex items-start gap-3\">\n                      <CheckCircle className=\"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5\" />\n                      <div>\n                        <strong>One-Click Integration:</strong> Install plugin, connect API, start shipping\n                      </div>\n                    </div>\n                    <div className=\"flex items-start gap-3\">\n                      <CheckCircle className=\"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5\" />\n                      <div>\n                        <strong>Dynamic Pricing:</strong> Real-time rates from multiple couriers\n                      </div>\n                    </div>\n                    <div className=\"flex items-start gap-3\">\n                      <CheckCircle className=\"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5\" />\n                      <div>\n                        <strong>Automated Labels:</strong> Print shipping labels directly from your dashboard\n                      </div>\n                    </div>\n                    <div className=\"flex items-start gap-3\">\n                      <CheckCircle className=\"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5\" />\n                      <div>\n                        <strong>Customer Notifications:</strong> Automatic SMS/email updates\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Couriers */}\n            <div className=\"bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl p-8\">\n              <div className=\"flex items-start gap-6\">\n                <div className=\"bg-green-500 w-16 h-16 rounded-xl flex items-center justify-center flex-shrink-0\">\n                  <Truck className=\"h-8 w-8 text-white\" />\n                </div>\n                <div className=\"flex-1\">\n                  <h3 className=\"text-2xl font-bold text-gray-900 mb-3\">For Courier Companies</h3>\n                  <p className=\"text-gray-700 mb-4\">\n                    Optimize your fleet, maximize efficiency, and grow your business with our\n                    AI-powered route optimization and dynamic pricing.\n                  </p>\n                  <div className=\"grid md:grid-cols-2 gap-4\">\n                    <div className=\"flex items-start gap-3\">\n                      <CheckCircle className=\"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5\" />\n                      <div>\n                        <strong>Route Optimization:</strong> AI-powered routing saves 30% fuel costs\n                      </div>\n                    </div>\n                    <div className=\"flex items-start gap-3\">\n                      <CheckCircle className=\"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5\" />\n                      <div>\n                        <strong>Real-Time Dispatch:</strong> Instant job assignments to nearest driver\n                      </div>\n                    </div>\n                    <div className=\"flex items-start gap-3\">\n                      <CheckCircle className=\"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5\" />\n                      <div>\n                        <strong>Performance Analytics:</strong> Track delivery times, success rates, revenue\n                      </div>\n                    </div>\n                    <div className=\"flex items-start gap-3\">\n                      <CheckCircle className=\"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5\" />\n                      <div>\n                        <strong>Flexible Pricing:</strong> Set your own rates, surge pricing, discounts\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Consumers */}\n            <div className=\"bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-8\">\n              <div className=\"flex items-start gap-6\">\n                <div className=\"bg-purple-500 w-16 h-16 rounded-xl flex items-center justify-center flex-shrink-0\">\n                  <Users className=\"h-8 w-8 text-white\" />\n                </div>\n                <div className=\"flex-1\">\n                  <h3 className=\"text-2xl font-bold text-gray-900 mb-3\">For Consumers</h3>\n                  <p className=\"text-gray-700 mb-4\">\n                    Track your packages in real-time, ship items C2C, file claims, and manage\n                    everything from our beautiful mobile apps.\n                  </p>\n                  <div className=\"grid md:grid-cols-2 gap-4\">\n                    <div className=\"flex items-start gap-3\">\n                      <CheckCircle className=\"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5\" />\n                      <div>\n                        <strong>Live Tracking:</strong> See your package location on map with ETA\n                      </div>\n                    </div>\n                    <div className=\"flex items-start gap-3\">\n                      <CheckCircle className=\"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5\" />\n                      <div>\n                        <strong>C2C Shipping:</strong> Send packages to friends/family easily\n                      </div>\n                    </div>\n                    <div className=\"flex items-start gap-3\">\n                      <CheckCircle className=\"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5\" />\n                      <div>\n                        <strong>Easy Claims:</strong> File claims with photos, track status\n                      </div>\n                    </div>\n                    <div className=\"flex items-start gap-3\">\n                      <CheckCircle className=\"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5\" />\n                      <div>\n                        <strong>Simple Returns:</strong> Request returns, schedule pickup\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Mobile Apps Section */}\n      <section className=\"py-20 bg-gradient-to-br from-indigo-600 to-purple-700 text-white\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"grid md:grid-cols-2 gap-12 items-center\">\n            <div>\n              <h2 className=\"text-3xl sm:text-4xl font-bold mb-6\">\n                Download Our Mobile Apps\n              </h2>\n              <p className=\"text-xl text-indigo-100 mb-8\">\n                Track deliveries, ship packages, and manage everything on the go.\n                Available for iOS and Android.\n              </p>\n              <div className=\"space-y-4 mb-8\">\n                {[\n                  'Real-time GPS tracking with live map',\n                  'Push notifications for delivery updates',\n                  'C2C shipping with integrated payments',\n                  'File claims and returns with photos',\n                  'Biometric login (Face ID / Fingerprint)',\n                ].map((feature) => (\n                  <div key={feature} className=\"flex items-center gap-3\">\n                    <CheckCircle className=\"h-6 w-6 text-green-400 flex-shrink-0\" />\n                    <span className=\"text-lg\">{feature}</span>\n                  </div>\n                ))}\n              </div>\n              <AppStoreLinks variant=\"dark\" size=\"md\" />\n            </div>\n            <div className=\"relative\">\n              <div className=\"bg-white/10 backdrop-blur-sm rounded-2xl p-8 border border-white/20\">\n                <Smartphone className=\"h-64 w-64 mx-auto text-white/80\" />\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Plugins Section */}\n      <section className=\"py-20 bg-gray-50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-3xl sm:text-4xl font-bold text-gray-900 mb-4\">\n              Seamless E-commerce Integration\n            </h2>\n            <p className=\"text-xl text-gray-600\">\n              Install our plugins and start shipping in minutes\n            </p>\n          </div>\n\n          <div className=\"grid md:grid-cols-2 gap-8\">\n            {/* WooCommerce */}\n            <div className=\"bg-white rounded-2xl p-8 shadow-lg\">\n              <div className=\"flex items-center gap-4 mb-6\">\n                <div className=\"bg-purple-500 w-16 h-16 rounded-xl flex items-center justify-center\">\n                  <Plug className=\"h-8 w-8 text-white\" />\n                </div>\n                <div>\n                  <h3 className=\"text-2xl font-bold text-gray-900\">WooCommerce Plugin</h3>\n                  <p className=\"text-gray-600\">For WordPress stores</p>\n                </div>\n              </div>\n              <ul className=\"space-y-3 mb-6\">\n                {[\n                  'Automatic checkout integration',\n                  'Real-time shipping rates',\n                  'Label printing from WP admin',\n                  'Order sync & tracking',\n                  'Multi-courier support',\n                ].map((feature) => (\n                  <li key={feature} className=\"flex items-center gap-3\">\n                    <CheckCircle className=\"h-5 w-5 text-green-500 flex-shrink-0\" />\n                    <span>{feature}</span>\n                  </li>\n                ))}\n              </ul>\n              <button className=\"w-full bg-purple-500 text-white py-3 rounded-lg font-semibold hover:bg-purple-600 transition-colors\">\n                Install Plugin\n              </button>\n            </div>\n\n            {/* Shopify */}\n            <div className=\"bg-white rounded-2xl p-8 shadow-lg\">\n              <div className=\"flex items-center gap-4 mb-6\">\n                <div className=\"bg-green-500 w-16 h-16 rounded-xl flex items-center justify-center\">\n                  <Plug className=\"h-8 w-8 text-white\" />\n                </div>\n                <div>\n                  <h3 className=\"text-2xl font-bold text-gray-900\">Shopify App</h3>\n                  <p className=\"text-gray-600\">For Shopify stores</p>\n                </div>\n              </div>\n              <ul className=\"space-y-3 mb-6\">\n                {[\n                  'One-click installation',\n                  'Checkout carrier calculated rates',\n                  'Fulfillment automation',\n                  'Tracking page integration',\n                  'Returns management',\n                ].map((feature) => (\n                  <li key={feature} className=\"flex items-center gap-3\">\n                    <CheckCircle className=\"h-5 w-5 text-green-500 flex-shrink-0\" />\n                    <span>{feature}</span>\n                  </li>\n                ))}\n              </ul>\n              <button className=\"w-full bg-green-500 text-white py-3 rounded-lg font-semibold hover:bg-green-600 transition-colors\">\n                Install App\n              </button>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Trust Badges */}\n      <TrustBadges />\n\n      {/* Partner Logos */}\n      <PartnerLogos />\n\n      {/* Demo Video */}\n      <DemoVideo />\n\n      {/* Testimonials */}\n      <Testimonials />\n\n      {/* Pricing Comparison */}\n      <PricingComparison />\n\n      {/* ROI Calculator */}\n      <ROICalculator />\n\n      {/* Case Studies */}\n      <CaseStudies />\n\n      {/* Coverage Map */}\n      <CoverageMap />\n\n      {/* Blog Section */}\n      <BlogSection />\n\n      {/* Newsletter */}\n      <Newsletter />\n\n      {/* FAQ Section */}\n      <section className=\"py-20 bg-white\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-3xl sm:text-4xl font-bold text-gray-900 mb-4\">\n              Frequently Asked Questions\n            </h2>\n            <p className=\"text-xl text-gray-600\">\n              Everything you need to know about Performile\n            </p>\n          </div>\n\n          <div className=\"space-y-4\">\n            {[\n              {\n                question: 'How quickly can I get started?',\n                answer: 'You can start shipping in less than 10 minutes! Sign up, install our plugin (if using e-commerce), and you\\'re ready to go. No complex setup or technical knowledge required.',\n              },\n              {\n                question: 'What payment methods do you support?',\n                answer: 'We support all major Nordic payment methods including Vipps (Norway), Swish (Sweden), MobilePay (Denmark), and Stripe for global coverage. More payment options coming soon!',\n              },\n              {\n                question: 'Do you offer mobile apps?',\n                answer: 'Yes! We have native iOS and Android apps for consumers with features like real-time tracking, C2C shipping, claims, and returns. Download from App Store or Google Play.',\n              },\n              {\n                question: 'How does pricing work?',\n                answer: 'We offer flexible subscription plans for merchants and couriers starting at 29/month. Consumers can use the platform for free. C2C shipping has transparent per-shipment fees.',\n              },\n              {\n                question: 'Can I integrate with my existing e-commerce store?',\n                answer: 'Absolutely! We have plugins for WooCommerce and Shopify that integrate seamlessly with your checkout. Installation takes just a few clicks.',\n              },\n              {\n                question: 'What countries do you support?',\n                answer: 'We currently focus on the Nordic region (Norway, Sweden, Denmark, Finland) with plans to expand globally. Our Stripe integration already supports 250+ countries for C2C shipping.',\n              },\n              {\n                question: 'How do claims and returns work?',\n                answer: 'Consumers can file claims or request returns directly from their dashboard or mobile app. They can upload photos, track status, and get refunds processed automatically.',\n              },\n              {\n                question: 'Is there a free trial?',\n                answer: 'Yes! We offer a 14-day free trial with full access to all features. No credit card required to start.',\n              },\n            ].map((faq, index) => (\n              <div key={index} className=\"border border-gray-200 rounded-lg\">\n                <button\n                  onClick={() => setOpenFaq(openFaq === index ? null : index)}\n                  className=\"w-full px-6 py-4 text-left flex items-center justify-between hover:bg-gray-50 transition-colors\"\n                >\n                  <span className=\"font-semibold text-gray-900\">{faq.question}</span>\n                  <ChevronDown\n                    className={`h-5 w-5 text-gray-500 transition-transform ${\n                      openFaq === index ? 'transform rotate-180' : ''\n                    }`}\n                  />\n                </button>\n                {openFaq === index && (\n                  <div className=\"px-6 pb-4 text-gray-600\">\n                    {faq.answer}\n                  </div>\n                )}\n              </div>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Knowledge Base CTA */}\n      <section className=\"py-20 bg-gradient-to-r from-blue-600 to-indigo-600 text-white\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center\">\n          <h2 className=\"text-3xl sm:text-4xl font-bold mb-6\">\n            Need More Help?\n          </h2>\n          <p className=\"text-xl text-blue-100 mb-8\">\n            Visit our comprehensive knowledge base with guides, tutorials, and documentation\n          </p>\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <button\n              onClick={() => navigate('/knowledge-base')}\n              className=\"inline-flex items-center px-8 py-4 bg-white text-blue-600 rounded-lg font-semibold text-lg hover:bg-blue-50 transition-colors\"\n            >\n              Browse Knowledge Base\n              <ArrowRight className=\"ml-2 h-5 w-5\" />\n            </button>\n            <button\n              onClick={() => navigate('/contact')}\n              className=\"inline-flex items-center px-8 py-4 bg-blue-500 text-white rounded-lg font-semibold text-lg hover:bg-blue-400 transition-colors border-2 border-white/20\"\n            >\n              Contact Support\n            </button>\n          </div>\n        </div>\n      </section>\n\n      {/* Final CTA */}\n      <section className=\"py-20 bg-gray-900 text-white\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center\">\n          <h2 className=\"text-3xl sm:text-4xl font-bold mb-6\">\n            Ready to Transform Your Delivery Operations?\n          </h2>\n          <p className=\"text-xl text-gray-300 mb-8\">\n            Join 50,000+ users who trust Performile for their delivery needs\n          </p>\n          <button\n            onClick={() => navigate('/register')}\n            className=\"inline-flex items-center px-8 py-4 bg-blue-500 text-white rounded-lg font-semibold text-lg hover:bg-blue-600 transition-colors shadow-xl\"\n          >\n            Start Your Free Trial\n            <ArrowRight className=\"ml-2 h-5 w-5\" />\n          </button>\n          <p className=\"mt-6 text-gray-400\">\n            No credit card required  14-day free trial  Cancel anytime\n          </p>\n        </div>\n      </section>\n    </div>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\LandingPageMUI.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Article' is defined but never used.","line":46,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":46,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Download' is defined but never used.","line":48,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":48,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Check' is defined but never used.","line":51,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'avgOrderValue' is assigned a value but never used.","line":75,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":75,"endColumn":41},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has an unnecessary dependency: 'navigate'. Either exclude it or remove the dependency array.","line":129,"column":5,"nodeType":"ArrayExpression","endLine":129,"endColumn":15,"suggestions":[{"desc":"Update the dependencies array to be: []","fix":{"range":[3706,3716],"text":"[]"}}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":350,"column":51,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[12103,12195],"text":"\n          From checkout widgets to mobile apps, we&apos;ve built the complete ecosystem\n        "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[12103,12195],"text":"\n          From checkout widgets to mobile apps, we&lsquo;ve built the complete ecosystem\n        "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[12103,12195],"text":"\n          From checkout widgets to mobile apps, we&#39;ve built the complete ecosystem\n        "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[12103,12195],"text":"\n          From checkout widgets to mobile apps, we&rsquo;ve built the complete ecosystem\n        "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":493,"column":23,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[19801,19880],"text":"\n                      &quot;Fast delivery!\" - Review from 0150\n                    "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[19801,19880],"text":"\n                      &ldquo;Fast delivery!\" - Review from 0150\n                    "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[19801,19880],"text":"\n                      &#34;Fast delivery!\" - Review from 0150\n                    "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[19801,19880],"text":"\n                      &rdquo;Fast delivery!\" - Review from 0150\n                    "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":493,"column":38,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[19801,19880],"text":"\n                      \"Fast delivery!&quot; - Review from 0150\n                    "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[19801,19880],"text":"\n                      \"Fast delivery!&ldquo; - Review from 0150\n                    "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[19801,19880],"text":"\n                      \"Fast delivery!&#34; - Review from 0150\n                    "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[19801,19880],"text":"\n                      \"Fast delivery!&rdquo; - Review from 0150\n                    "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":546,"column":28,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[22130,22206],"text":"\n             Amazon doesn&apos;t even do this at postal code level!\n          "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[22130,22206],"text":"\n             Amazon doesn&lsquo;t even do this at postal code level!\n          "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[22130,22206],"text":"\n             Amazon doesn&#39;t even do this at postal code level!\n          "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[22130,22206],"text":"\n             Amazon doesn&rsquo;t even do this at postal code level!\n          "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":558,"column":21,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[22671,22750],"text":"\n                    &quot;Usually delivered between 14:00-17:00\"\n                  "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[22671,22750],"text":"\n                    &ldquo;Usually delivered between 14:00-17:00\"\n                  "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[22671,22750],"text":"\n                    &#34;Usually delivered between 14:00-17:00\"\n                  "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[22671,22750],"text":"\n                    &rdquo;Usually delivered between 14:00-17:00\"\n                  "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":558,"column":59,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[22671,22750],"text":"\n                    \"Usually delivered between 14:00-17:00&quot;\n                  "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[22671,22750],"text":"\n                    \"Usually delivered between 14:00-17:00&ldquo;\n                  "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[22671,22750],"text":"\n                    \"Usually delivered between 14:00-17:00&#34;\n                  "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[22671,22750],"text":"\n                    \"Usually delivered between 14:00-17:00&rdquo;\n                  "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":1270,"column":21,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[55800,55822],"text":"\n                    &quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[55800,55822],"text":"\n                    &ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[55800,55822],"text":"\n                    &#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[55800,55822],"text":"\n                    &rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":1270,"column":40,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[55840,55860],"text":"&quot;\n                  "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[55840,55860],"text":"&ldquo;\n                  "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[55840,55860],"text":"&#34;\n                  "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[55840,55860],"text":"&rdquo;\n                  "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":1570,"column":56,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[70258,70276],"text":"You&apos;re subscribed!"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[70258,70276],"text":"You&lsquo;re subscribed!"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[70258,70276],"text":"You&#39;re subscribed!"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[70258,70276],"text":"You&rsquo;re subscribed!"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":13,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useMemo, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n  Box,\n  Container,\n  Typography,\n  Button,\n  Grid,\n  Card,\n  CardContent,\n  CardMedia,\n  TextField,\n  AppBar,\n  Toolbar,\n  Stack,\n  Paper,\n  Chip,\n  Rating,\n  Divider,\n  IconButton,\n  Accordion,\n  AccordionSummary,\n  AccordionDetails,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Alert,\n} from '@mui/material';\nimport {\n  TrendingUp,\n  Speed,\n  Security,\n  Assessment,\n  LocalShipping,\n  Store,\n  ArrowForward,\n  Smartphone,\n  CheckCircle,\n  Star,\n  ExpandMore,\n  Calculate,\n  Map,\n  Article,\n  Email,\n  Download,\n  PlayArrow,\n  Close,\n  Check,\n  TrendingDown,\n  Business,\n  Person,\n  AttachMoney,\n  Schedule,\n} from '@mui/icons-material';\nimport { GoogleAnalytics } from '../components/analytics/GoogleAnalytics';\n\nexport default function LandingPageMUI() {\n  const navigate = useNavigate();\n  const [openFaq, setOpenFaq] = useState<number | null>(null);\n  const [email, setEmail] = useState('');\n  const [newsletterSuccess, setNewsletterSuccess] = useState(false);\n  \n  // ROI Calculator state\n  const [roiInputs, setRoiInputs] = useState({\n    monthlyOrders: 1000,\n    avgOrderValue: 50,\n    currentShippingCost: 8,\n    currentProcessingTime: 5,\n  });\n\n  const calculateROI = () => {\n    const { monthlyOrders, avgOrderValue, currentShippingCost, currentProcessingTime } = roiInputs;\n    const currentMonthlyShipping = monthlyOrders * currentShippingCost;\n    const currentLaborCost = (currentProcessingTime / 60) * 25 * monthlyOrders;\n    const currentTotalCost = currentMonthlyShipping + currentLaborCost;\n    const performileShippingCost = monthlyOrders * (currentShippingCost * 0.75);\n    const performileLaborCost = (1 / 60) * 25 * monthlyOrders;\n    const performileSubscription = 29;\n    const performileTotalCost = performileShippingCost + performileLaborCost + performileSubscription;\n    const monthlySavings = currentTotalCost - performileTotalCost;\n    const annualSavings = monthlySavings * 12;\n    const roi = ((annualSavings - (performileSubscription * 12)) / (performileSubscription * 12)) * 100;\n    \n    return {\n      currentMonthlyCost: currentTotalCost,\n      performileMonthlyCost: performileTotalCost,\n      monthlySavings,\n      annualSavings,\n      roi,\n    };\n  };\n\n  const results = calculateROI();\n\n  const roleSegments = useMemo(\n    () => [\n      {\n        title: 'Merchants',\n        description: 'Launch dynamic checkout, configure couriers, and get actionable revenue analytics.',\n        cta: 'Merchant Success Guide',\n        icon: <Store sx={{ fontSize: 32, color: 'primary.main' }} />,\n        navigateTo: '/knowledge-base?role=merchant',\n      },\n      {\n        title: 'Couriers',\n        description: 'Optimize routes, manage fleets, and turn lead marketplace insights into bookings.',\n        cta: 'Courier Success Guide',\n        icon: <LocalShipping sx={{ fontSize: 32, color: 'success.main' }} />,\n        navigateTo: '/knowledge-base?role=courier',\n      },\n      {\n        title: 'Consumers',\n        description: 'Select the best drop-off points, track parcels in real-time, and manage returns effortlessly.',\n        cta: 'Consumer Success Guide',\n        icon: <Smartphone sx={{ fontSize: 32, color: 'secondary.main' }} />,\n        navigateTo: '/knowledge-base?role=consumer',\n      },\n      {\n        title: 'Admins',\n        description: 'Oversee platform health, enforce role-based access, and monitor compliance from one hub.',\n        cta: 'Admin Success Guide',\n        icon: <Security sx={{ fontSize: 32, color: 'warning.main' }} />,\n        navigateTo: '/knowledge-base?role=admin',\n      },\n    ],\n    [navigate]\n  );\n\n  const handleNewsletterSignup = (e: React.FormEvent) => {\n    e.preventDefault();\n    setNewsletterSuccess(true);\n    setEmail('');\n    setTimeout(() => setNewsletterSuccess(false), 5000);\n  };\n\n  return (\n    <Box>\n      {/* Google Analytics */}\n      <GoogleAnalytics measurementId=\"G-XXXXXXXXXX\" />\n\n      {/* Navigation Bar */}\n      <AppBar \n        position=\"sticky\" \n        sx={{ \n          bgcolor: 'white', \n          color: 'text.primary',\n          boxShadow: '0 2px 4px rgba(0,0,0,0.05)',\n        }}\n      >\n        <Toolbar>\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, flexGrow: 1 }}>\n            <img\n              src=\"/logo.png\"\n              alt=\"Performile Logo\"\n              style={{ height: 40, width: 40, objectFit: 'contain' }}\n            />\n            <Typography variant=\"h6\" fontWeight=\"bold\" color=\"primary\">\n              Performile\n            </Typography>\n          </Box>\n          <Stack direction=\"row\" spacing={2}>\n            <Button color=\"inherit\" onClick={() => navigate('/subscription/plans')}>\n              Pricing\n            </Button>\n            <Button color=\"inherit\" onClick={() => navigate('/contact')}>\n              Contact\n            </Button>\n            <Button variant=\"outlined\" onClick={() => navigate('/login')}>\n              Login\n            </Button>\n            <Button variant=\"contained\" onClick={() => navigate('/register')}>\n              Start Free Trial\n            </Button>\n          </Stack>\n        </Toolbar>\n      </AppBar>\n\n      {/* Hero Section */}\n      <Box\n        sx={{\n          background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n          color: 'white',\n          py: 12,\n          textAlign: 'center',\n        }}\n      >\n        <Container maxWidth=\"lg\">\n          <Typography variant=\"h2\" fontWeight=\"bold\" gutterBottom>\n            The Complete Delivery Platform\n          </Typography>\n          <Typography variant=\"h5\" sx={{ mb: 1, opacity: 0.9 }}>\n            Global Delivery Intelligence\n          </Typography>\n          <Typography variant=\"h6\" sx={{ mb: 4, opacity: 0.8, maxWidth: 800, mx: 'auto' }}>\n            Connect merchants, couriers, and consumers with AI-powered logistics,\n            real-time tracking, and seamless payments\n          </Typography>\n          <Stack direction={{ xs: 'column', sm: 'row' }} spacing={2} justifyContent=\"center\">\n            <Button\n              variant=\"contained\"\n              size=\"large\"\n              sx={{ bgcolor: 'white', color: 'primary.main', '&:hover': { bgcolor: 'grey.100' } }}\n              endIcon={<ArrowForward />}\n              onClick={() => navigate('/register')}\n            >\n              Start Free Trial\n            </Button>\n            <Button\n              variant=\"outlined\"\n              size=\"large\"\n              sx={{ color: 'white', borderColor: 'white', '&:hover': { borderColor: 'white', bgcolor: 'rgba(255,255,255,0.1)' } }}\n              onClick={() => navigate('/demo')}\n            >\n              Watch Demo\n            </Button>\n          </Stack>\n          <Typography variant=\"body2\" sx={{ mt: 3, opacity: 0.8 }}>\n             No credit card required  14-day free trial  Cancel anytime\n          </Typography>\n\n          {/* Role-specific entry points */}\n          <Grid container spacing={3} sx={{ mt: 6 }}>\n            {roleSegments.map((segment) => (\n              <Grid item xs={12} sm={6} md={3} key={segment.title}>\n                <Card\n                  sx={{\n                    height: '100%',\n                    bgcolor: 'white',\n                    border: 'none',\n                    cursor: 'pointer',\n                    transition: 'transform 0.25s ease, box-shadow 0.25s ease',\n                    '&:hover': {\n                      transform: 'translateY(-6px)',\n                      boxShadow: '0 16px 32px rgba(102, 126, 234, 0.25)',\n                    },\n                  }}\n                  onClick={() => navigate(segment.navigateTo)}\n                >\n                  <CardContent>\n                    <Stack spacing={2}>\n                      <Box>{segment.icon}</Box>\n                      <Typography variant=\"h6\" fontWeight=\"bold\" color=\"text.primary\">\n                        {segment.title}\n                      </Typography>\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        {segment.description}\n                      </Typography>\n                      <Button\n                        variant=\"outlined\"\n                        size=\"small\"\n                        sx={{\n                          borderColor: 'rgba(102, 126, 234, 0.3)',\n                          color: 'primary.main',\n                          alignSelf: 'flex-start',\n                          '&:hover': {\n                            borderColor: 'primary.main',\n                            bgcolor: 'rgba(102, 126, 234, 0.08)',\n                          },\n                        }}\n                      >\n                        {segment.cta}\n                      </Button>\n                    </Stack>\n                  </CardContent>\n                </Card>\n              </Grid>\n            ))}\n          </Grid>\n\n          {/* Stats */}\n          <Grid container spacing={4} sx={{ mt: 6 }}>\n            {[\n              { label: 'Active Users', value: '50K+' },\n              { label: 'Deliveries/Month', value: '500K+' },\n              { label: 'Countries', value: '250+' },\n              { label: 'Satisfaction', value: '98%' },\n            ].map((stat) => (\n              <Grid item xs={6} md={3} key={stat.label}>\n                <Typography variant=\"h3\" fontWeight=\"bold\">{stat.value}</Typography>\n                <Typography variant=\"body2\" sx={{ opacity: 0.8 }}>{stat.label}</Typography>\n              </Grid>\n            ))}\n          </Grid>\n        </Container>\n      </Box>\n\n      {/* Guided tour preview */}\n      <Container maxWidth=\"lg\" sx={{ mt: -8, zIndex: 2, position: 'relative' }}>\n        <Card\n          sx={{\n            px: { xs: 3, md: 6 },\n            py: { xs: 4, md: 6 },\n            display: 'flex',\n            flexDirection: { xs: 'column', md: 'row' },\n            alignItems: 'center',\n            gap: 4,\n            boxShadow: '0 18px 45px rgba(80, 56, 160, 0.15)',\n          }}\n        >\n          <Box sx={{ flex: 1 }}>\n            <Typography variant=\"overline\" color=\"primary\" fontWeight={700}>\n              Guided Tour Preview\n            </Typography>\n            <Typography variant=\"h4\" fontWeight=\"bold\" sx={{ mt: 1, mb: 2 }}>\n              Explore the onboarding journey before you sign up\n            </Typography>\n            <Typography color=\"text.secondary\" sx={{ mb: 3 }}>\n              Watch a 90-second walkthrough of the merchant dashboard tour powered by Shepherd.js. See how we\n              guide new teams through courier setup, drop-off filtering, and analytics in-app.\n            </Typography>\n            <Stack direction={{ xs: 'column', sm: 'row' }} spacing={2}>\n              <Button\n                variant=\"contained\"\n                startIcon={<PlayArrow />}\n                onClick={() => window.open('https://www.youtube.com/watch?v=dQw4w9WgXcQ', '_blank')}\n              >\n                Watch Guided Tour\n              </Button>\n              <Button variant=\"outlined\" onClick={() => navigate('/knowledge-base?article=guided-tour')}>\n                Read Tour Setup Docs\n              </Button>\n            </Stack>\n          </Box>\n          <CardMedia\n            component=\"img\"\n            image=\"/screenshots/analytics-dashboard.png\"\n            alt=\"Performile Guided Tour Preview\"\n            sx={{\n              width: { xs: '100%', md: 360 },\n              borderRadius: 3,\n              boxShadow: '0 12px 30px rgba(102,126,234,0.25)',\n              border: '1px solid rgba(102,126,234,0.2)',\n            }}\n            onError={(event) => {\n              (event.target as HTMLImageElement).src = '/logo.png';\n            }}\n          />\n        </Card>\n      </Container>\n\n      {/* Features Overview */}\n      <Container maxWidth=\"lg\" sx={{ py: 10 }}>\n        <Typography variant=\"h3\" fontWeight=\"bold\" textAlign=\"center\" gutterBottom>\n          Everything You Need in One Platform\n        </Typography>\n        <Typography variant=\"h6\" textAlign=\"center\" color=\"text.secondary\" sx={{ mb: 6 }}>\n          From checkout widgets to mobile apps, we've built the complete ecosystem\n        </Typography>\n\n        <Grid container spacing={4}>\n          {[\n            { icon: <Smartphone />, title: 'Mobile Apps', description: 'Native iOS & Android apps for consumers with real-time tracking', color: '#2196f3' },\n            { icon: <Store />, title: 'Checkout Plugins', description: 'WooCommerce & Shopify integrations for instant setup', color: '#9c27b0' },\n            { icon: <AttachMoney />, title: 'Multi-Payment Support', description: 'Vipps, Swish, MobilePay, Stripe, Klarna, Qliro, Adyen, Worldpay - supporting global payment methods', color: '#4caf50' },\n            { icon: <Map />, title: 'Real-Time Tracking', description: 'Live GPS tracking with ETA predictions and notifications', color: '#f44336' },\n            { icon: <LocalShipping />, title: 'C2C Shipping', description: 'Consumer-to-consumer shipping with integrated payments', color: '#ff9800' },\n            { icon: <Assessment />, title: 'Advanced Analytics', description: 'Real-time insights, performance metrics, and revenue tracking', color: '#673ab7' },\n          ].map((feature, index) => (\n            <Grid item xs={12} md={4} key={index}>\n              <Card sx={{ height: '100%', '&:hover': { boxShadow: 6 }, transition: 'box-shadow 0.3s' }}>\n                <CardContent>\n                  <Box\n                    sx={{\n                      width: 56,\n                      height: 56,\n                      borderRadius: 2,\n                      bgcolor: feature.color,\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      mb: 2,\n                    }}\n                  >\n                    {React.cloneElement(feature.icon, { sx: { fontSize: 32, color: 'white' } })}\n                  </Box>\n                  <Typography variant=\"h6\" fontWeight=\"bold\" gutterBottom>\n                    {feature.title}\n                  </Typography>\n                  <Typography color=\"text.secondary\">\n                    {feature.description}\n                  </Typography>\n                </CardContent>\n              </Card>\n            </Grid>\n          ))}\n        </Grid>\n      </Container>\n\n      {/* LMT Lastmile Trust Score - CORE USP */}\n      <Box sx={{ bgcolor: 'primary.main', color: 'white', py: 12 }}>\n        <Container maxWidth=\"lg\">\n          <Typography variant=\"h3\" fontWeight=\"bold\" textAlign=\"center\" gutterBottom>\n            LMT Lastmile Trust Score\n          </Typography>\n          <Typography variant=\"h6\" textAlign=\"center\" sx={{ mb: 6, opacity: 0.9 }}>\n            Data-driven courier ratings based on real performance\n          </Typography>\n\n          <Grid container spacing={4} alignItems=\"center\">\n            <Grid item xs={12} md={6}>\n              <Paper sx={{ p: 6, bgcolor: 'rgba(255,255,255,0.1)', backdropFilter: 'blur(10px)', textAlign: 'center' }}>\n                <Typography variant=\"h1\" fontWeight=\"bold\" sx={{ color: 'white', mb: 2 }}>\n                  LMT\n                </Typography>\n                <Typography variant=\"h5\" fontWeight=\"bold\" sx={{ color: 'white', mb: 3 }}>\n                  Lastmile Trust Score\n                </Typography>\n                <Typography variant=\"body1\" sx={{ color: 'rgba(255,255,255,0.9)' }}>\n                  Comprehensive performance rating based on customer reviews, delivery success, on-time performance, and claim rates.\n                </Typography>\n              </Paper>\n            </Grid>\n\n            <Grid item xs={12} md={6}>\n              <Stack spacing={3}>\n                <Card sx={{ bgcolor: 'rgba(255,255,255,0.95)' }}>\n                  <CardContent>\n                    <Map sx={{ fontSize: 40, color: 'primary.main', mb: 1 }} />\n                    <Typography variant=\"h6\" fontWeight=\"bold\" gutterBottom>\n                      Postal Code-Specific\n                    </Typography>\n                    <Typography color=\"text.secondary\">\n                      Same courier performs differently in different areas. We show performance for YOUR postal code, not national averages.\n                    </Typography>\n                  </CardContent>\n                </Card>\n\n                <Card sx={{ bgcolor: 'rgba(255,255,255,0.95)' }}>\n                  <CardContent>\n                    <Star sx={{ fontSize: 40, color: 'warning.main', mb: 1 }} />\n                    <Typography variant=\"h6\" fontWeight=\"bold\" gutterBottom>\n                      Real Customer Data\n                    </Typography>\n                    <Typography color=\"text.secondary\">\n                      Based on actual delivery performance, customer reviews, and verified tracking data. Transparent and fair scoring.\n                    </Typography>\n                  </CardContent>\n                </Card>\n\n                <Alert severity=\"success\" sx={{ fontWeight: 600 }}>\n                   The most accurate courier rating system globally\n                </Alert>\n              </Stack>\n            </Grid>\n          </Grid>\n        </Container>\n      </Box>\n\n      {/* Dynamic Checkout - CORE FEATURE */}\n      <Container maxWidth=\"lg\" sx={{ py: 12 }}>\n        <Typography variant=\"h3\" fontWeight=\"bold\" textAlign=\"center\" gutterBottom>\n          Dynamic Checkout - Let Consumers Choose\n        </Typography>\n        <Typography variant=\"h6\" textAlign=\"center\" color=\"text.secondary\" sx={{ mb: 6 }}>\n          Weighted courier list based on postal code-specific LMT Score\n        </Typography>\n\n        <Grid container spacing={4} alignItems=\"center\">\n          <Grid item xs={12} md={6}>\n            <Paper elevation={8} sx={{ p: 3, bgcolor: 'grey.50' }}>\n              <Typography variant=\"subtitle2\" color=\"text.secondary\" gutterBottom>\n                Consumer enters postal code: 0150 (Oslo)\n              </Typography>\n              <Divider sx={{ my: 2 }} />\n              \n              {[\n                { courier: 'PostNord', score: 92, rating: 4.5, price: '49 SEK', time: '1-2 days', recommended: true },\n                { courier: 'Bring', score: 88, rating: 4.3, price: '55 SEK', time: '1-2 days', recommended: false },\n                { courier: 'Porterbuddy', score: 85, rating: 4.2, price: '69 SEK', time: 'Same day', recommended: false },\n              ].map((option) => (\n                <Card key={option.courier} sx={{ mb: 2, border: option.recommended ? 3 : 1, borderColor: option.recommended ? 'success.main' : 'grey.300' }}>\n                  <CardContent>\n                    {option.recommended && (\n                      <Chip label=\"RECOMMENDED\" color=\"success\" size=\"small\" sx={{ mb: 1, fontWeight: 'bold' }} />\n                    )}\n                    <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\">\n                      <Box>\n                        <Typography variant=\"h6\" fontWeight=\"bold\">{option.courier}</Typography>\n                        <Stack direction=\"row\" spacing={1} alignItems=\"center\">\n                          <Chip label={`LMT: ${option.score}`} size=\"small\" color=\"primary\" />\n                          <Rating value={option.rating} precision={0.1} size=\"small\" readOnly />\n                        </Stack>\n                      </Box>\n                      <Box textAlign=\"right\">\n                        <Typography variant=\"h6\" fontWeight=\"bold\" color=\"primary\">{option.price}</Typography>\n                        <Typography variant=\"body2\" color=\"text.secondary\">{option.time}</Typography>\n                      </Box>\n                    </Stack>\n                    <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1 }}>\n                      \"Fast delivery!\" - Review from 0150\n                    </Typography>\n                  </CardContent>\n                </Card>\n              ))}\n            </Paper>\n          </Grid>\n\n          <Grid item xs={12} md={6}>\n            <Stack spacing={3}>\n              <Box>\n                <CheckCircle sx={{ fontSize: 40, color: 'success.main', mb: 1 }} />\n                <Typography variant=\"h5\" fontWeight=\"bold\" gutterBottom>\n                  How It Works\n                </Typography>\n                <Stack spacing={2} sx={{ mt: 2 }}>\n                  {[\n                    'Consumer enters postal code at checkout',\n                    'System calculates weighted score for each courier',\n                    'Shows LMT Score, reviews, and pricing',\n                    'Consumer sees data from THEIR postal code',\n                    'Best option automatically recommended',\n                    'Consumer makes informed choice',\n                  ].map((step, idx) => (\n                    <Stack key={idx} direction=\"row\" spacing={2} alignItems=\"center\">\n                      <Chip label={idx + 1} color=\"primary\" size=\"small\" />\n                      <Typography>{step}</Typography>\n                    </Stack>\n                  ))}\n                </Stack>\n              </Box>\n\n              <Alert severity=\"info\">\n                <Typography fontWeight=\"600\" gutterBottom>Transparent & Fair</Typography>\n                <Typography variant=\"body2\">\n                  Consumers see real performance data, not just who paid the most for placement. Better experience = higher conversion rates.\n                </Typography>\n              </Alert>\n            </Stack>\n          </Grid>\n        </Grid>\n      </Container>\n\n      {/* Predictive Delivery - COMPETITIVE EDGE */}\n      <Box sx={{ bgcolor: 'grey.50', py: 12 }}>\n        <Container maxWidth=\"lg\">\n          <Typography variant=\"h3\" fontWeight=\"bold\" textAlign=\"center\" gutterBottom>\n            Predictive Delivery Estimates\n          </Typography>\n          <Typography variant=\"h6\" textAlign=\"center\" color=\"text.secondary\" sx={{ mb: 2 }}>\n            Know exactly when your package will arrive\n          </Typography>\n          <Typography variant=\"h5\" textAlign=\"center\" color=\"primary.main\" fontWeight=\"bold\" sx={{ mb: 6 }}>\n             Amazon doesn't even do this at postal code level!\n          </Typography>\n\n          <Grid container spacing={4}>\n            <Grid item xs={12} md={4}>\n              <Card sx={{ height: '100%' }}>\n                <CardContent>\n                  <Schedule sx={{ fontSize: 48, color: 'primary.main', mb: 2 }} />\n                  <Typography variant=\"h6\" fontWeight=\"bold\" gutterBottom>\n                    Time-of-Day Predictions\n                  </Typography>\n                  <Typography color=\"text.secondary\" paragraph>\n                    \"Usually delivered between 14:00-17:00\"\n                  </Typography>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    Based on actual tracking timestamps from your postal code. Home delivery only.\n                  </Typography>\n                </CardContent>\n              </Card>\n            </Grid>\n\n            <Grid item xs={12} md={4}>\n              <Card sx={{ height: '100%' }}>\n                <CardContent>\n                  <TrendingUp sx={{ fontSize: 48, color: 'success.main', mb: 2 }} />\n                  <Typography variant=\"h6\" fontWeight=\"bold\" gutterBottom>\n                    Day-Based Predictions\n                  </Typography>\n                  <Typography color=\"text.secondary\" paragraph>\n                    Monday-Sunday delivery patterns\n                  </Typography>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    Historical data with outlier removal and recency weighting. Shows confidence intervals.\n                  </Typography>\n                </CardContent>\n              </Card>\n            </Grid>\n\n            <Grid item xs={12} md={4}>\n              <Card sx={{ height: '100%' }}>\n                <CardContent>\n                  <Map sx={{ fontSize: 48, color: 'warning.main', mb: 2 }} />\n                  <Typography variant=\"h6\" fontWeight=\"bold\" gutterBottom>\n                    Postal Code-Specific\n                  </Typography>\n                  <Typography color=\"text.secondary\" paragraph>\n                    Predictions for YOUR area\n                  </Typography>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    Not national averages. Real data from your postal code and day-of-week.\n                  </Typography>\n                </CardContent>\n              </Card>\n            </Grid>\n          </Grid>\n\n          <Box sx={{ mt: 6, textAlign: 'center' }}>\n            <Paper sx={{ p: 4, maxWidth: 600, mx: 'auto', bgcolor: 'success.50' }}>\n              <Typography variant=\"h6\" fontWeight=\"bold\" color=\"success.dark\" gutterBottom>\n                Example Prediction\n              </Typography>\n              <Typography variant=\"body1\" paragraph>\n                <strong>PostNord to 0150 (Oslo)</strong>\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                 Expected delivery: <strong>Tuesday, 2-3 days</strong><br />\n                 Typical delivery time: <strong>14:00-17:00</strong><br />\n                 Confidence: <strong>92%</strong> (based on 847 deliveries)\n              </Typography>\n            </Paper>\n          </Box>\n        </Container>\n      </Box>\n\n      {/* Analytics trust signal */}\n      <Box sx={{ py: 12, bgcolor: 'background.default' }}>\n        <Container maxWidth=\"lg\">\n          <Grid container spacing={4} alignItems=\"center\">\n            <Grid item xs={12} md={6}>\n              <Typography variant=\"overline\" color=\"primary\" fontWeight={700}>\n                Ecommerce checkout analytics\n              </Typography>\n              <Typography variant=\"h3\" fontWeight=\"bold\" sx={{ mt: 1, mb: 2 }}>\n                Understand every courier choice your shoppers make\n              </Typography>\n              <Typography color=\"text.secondary\" sx={{ mb: 3 }}>\n                Performile captures impressions and selections directly inside the ecommerce checkout, updating courier\n                rankings in real time. Merchants see which delivery promises convert, while couriers measure how\n                performance impacts placement.\n              </Typography>\n              <Stack spacing={1.5}>\n                <Stack direction=\"row\" spacing={1.5} alignItems=\"center\">\n                  <Assessment sx={{ color: 'primary.main' }} />\n                  <Typography variant=\"body1\">Session-level checkout telemetry for every delivery option</Typography>\n                </Stack>\n                <Stack direction=\"row\" spacing={1.5} alignItems=\"center\">\n                  <TrendingUp sx={{ color: 'success.main' }} />\n                  <Typography variant=\"body1\">Automatic ranking recalculations by postal code and segment</Typography>\n                </Stack>\n                <Stack direction=\"row\" spacing={1.5} alignItems=\"center\">\n                  <Speed sx={{ color: 'secondary.main' }} />\n                  <Typography variant=\"body1\"><strong>&lt; 300ms</strong> write latency keeps checkout dashboards live</Typography>\n                </Stack>\n              </Stack>\n              <Button\n                variant=\"text\"\n                sx={{ mt: 3 }}\n                onClick={() => navigate('/knowledge-base?article=checkout-analytics')}\n              >\n                Read the analytics deep dive\n              </Button>\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <Stack spacing={3}>\n                <Card sx={{ p: 4 }}>\n                  <Typography variant=\"subtitle1\" fontWeight={600} color=\"primary\" gutterBottom>\n                    Snapshot  Last 7 days\n                  </Typography>\n                  <Stack spacing={3}>\n                    <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\">\n                      <Box>\n                        <Typography variant=\"h4\" fontWeight=\"bold\">PostNord  32%</Typography>\n                        <Typography variant=\"body2\" color=\"text.secondary\">\n                          Top couriers chosen by shoppers this week\n                        </Typography>\n                      </Box>\n                      <Chip label=\"Live\" color=\"success\" size=\"small\" />\n                    </Stack>\n                    <Divider />\n                    <Stack spacing={2}>\n                      {[\n                        {\n                          courier: 'PostNord',\n                          share: '32% of selections',\n                          metric: 'On-time delivery 95%',\n                        },\n                        {\n                          courier: 'Bring',\n                          share: '27% of selections',\n                          metric: 'On-time delivery 92%',\n                        },\n                        {\n                          courier: 'Porterbuddy',\n                          share: '18% of selections',\n                          metric: 'First-attempt delivery 98%',\n                        },\n                      ].map((row) => (\n                        <Box key={row.courier}>\n                          <Typography variant=\"subtitle1\" fontWeight={600}>\n                            {row.courier}\n                          </Typography>\n                          <Typography variant=\"caption\" color=\"text.secondary\">\n                            {row.share}  {row.metric}\n                          </Typography>\n                        </Box>\n                      ))}\n                    </Stack>\n                  </Stack>\n                </Card>\n\n                <Card sx={{ p: 4 }}>\n                  <Stack spacing={3}>\n                    <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\">\n                      <Box>\n                        <Typography variant=\"subtitle1\" fontWeight={600} color=\"primary\">\n                          Courier insight  Consumer feedback\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"text.secondary\">\n                          Performile gives receivers more choice while helping couriers understand shoppers better.\n                        </Typography>\n                      </Box>\n                      <Chip label=\"Live\" color=\"info\" size=\"small\" />\n                    </Stack>\n                    <Divider />\n                    <Stack spacing={2}>\n                      {[\n                        {\n                          courier: 'PostNord',\n                          checkoutShare: '32% checkout share',\n                          rating: '4.7 consumer rating',\n                        },\n                        {\n                          courier: 'Bring',\n                          checkoutShare: '27% checkout share',\n                          rating: '4.5 consumer rating',\n                        },\n                        {\n                          courier: 'Porterbuddy',\n                          checkoutShare: '18% checkout share',\n                          rating: '4.8 consumer rating',\n                        },\n                      ].map((row) => (\n                        <Box key={row.courier}>\n                          <Typography variant=\"subtitle1\" fontWeight={600}>{row.courier}</Typography>\n                          <Typography variant=\"caption\" color=\"text.secondary\">\n                            {row.checkoutShare}  {row.rating}\n                          </Typography>\n                        </Box>\n                      ))}\n                    </Stack>\n                    <Typography variant=\"caption\" color=\"text.secondary\">\n                      Metrics combine checkout impression share with verified post-delivery ratings to spotlight courier\n                      performance.\n                    </Typography>\n                  </Stack>\n                </Card>\n              </Stack>\n            </Grid>\n          </Grid>\n        </Container>\n      </Box>\n\n      {/* Claims & RMA System - MAJOR FEATURE */}\n      <Container maxWidth=\"lg\" sx={{ py: 12 }}>\n        <Typography variant=\"h3\" fontWeight=\"bold\" textAlign=\"center\" gutterBottom>\n          Claims & Returns Made Simple\n        </Typography>\n        <Typography variant=\"h6\" textAlign=\"center\" color=\"text.secondary\" sx={{ mb: 6 }}>\n          Centralized system for all couriers - faster resolution, better tracking\n        </Typography>\n\n        <Grid container spacing={4}>\n          <Grid item xs={12} md={6}>\n            <Card sx={{ height: '100%', bgcolor: 'primary.main', color: 'white' }}>\n              <CardContent sx={{ textAlign: 'center' }}>\n                <Typography variant=\"h4\" fontWeight=\"bold\" gutterBottom>\n                  8 Claim Types Supported\n                </Typography>\n                <Stack spacing={2.5} sx={{ mt: 4 }}>\n                  {[\n                    { type: 'Lost Package', icon: '' },\n                    { type: 'Damaged Package', icon: '' },\n                    { type: 'Late Delivery', icon: '' },\n                    { type: 'Wrong Address', icon: '' },\n                    { type: 'Missing Items', icon: '' },\n                    { type: 'Quality Issues', icon: '' },\n                    { type: 'Return Request', icon: '' },\n                    { type: 'Refund Request', icon: '' },\n                  ].map((claim) => (\n                    <Stack key={claim.type} direction=\"row\" spacing={2} alignItems=\"center\" justifyContent=\"center\">\n                      <Typography variant=\"h5\">{claim.icon}</Typography>\n                      <Typography variant=\"h6\" fontWeight=\"500\">{claim.type}</Typography>\n                    </Stack>\n                  ))}\n                </Stack>\n              </CardContent>\n            </Card>\n          </Grid>\n\n          <Grid item xs={12} md={6}>\n            <Stack spacing={3}>\n              <Card>\n                <CardContent>\n                  <CheckCircle sx={{ fontSize: 40, color: 'success.main', mb: 1 }} />\n                  <Typography variant=\"h6\" fontWeight=\"bold\" gutterBottom>\n                    Automated Return Labels\n                  </Typography>\n                  <Typography color=\"text.secondary\">\n                    Generate return labels instantly. No waiting for merchant approval. PDF with barcode or QR code.\n                  </Typography>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardContent>\n                  <Assessment sx={{ fontSize: 40, color: 'primary.main', mb: 1 }} />\n                  <Typography variant=\"h6\" fontWeight=\"bold\" gutterBottom>\n                    Track Orders & Claims\n                  </Typography>\n                  <Typography color=\"text.secondary\">\n                    Keep track of all your orders, file claims for issues, and create returns - all from one dashboard. Complete visibility and control.\n                  </Typography>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardContent>\n                  <AttachMoney sx={{ fontSize: 40, color: 'warning.main', mb: 1 }} />\n                  <Typography variant=\"h6\" fontWeight=\"bold\" gutterBottom>\n                    Refund Tracking\n                  </Typography>\n                  <Typography color=\"text.secondary\">\n                    Track refund status in real-time. Automatic notifications when refund is processed. Full transparency.\n                  </Typography>\n                </CardContent>\n              </Card>\n            </Stack>\n          </Grid>\n        </Grid>\n\n        <Box sx={{ mt: 6, textAlign: 'center' }}>\n          <Alert severity=\"info\" sx={{ maxWidth: 600, mx: 'auto' }}>\n            <Typography fontWeight=\"600\" gutterBottom>iFrame Widget Available</Typography>\n            <Typography variant=\"body2\">\n              Embed our RMA system directly on your site. Seamless experience for your customers.\n            </Typography>\n          </Alert>\n        </Box>\n      </Container>\n\n      {/* C2C Shipping - Consumer Feature */}\n      <Box sx={{ bgcolor: 'grey.900', color: 'white', py: 12 }}>\n        <Container maxWidth=\"lg\">\n          <Typography variant=\"h3\" fontWeight=\"bold\" textAlign=\"center\" gutterBottom>\n            Consumer-to-Consumer Shipping\n          </Typography>\n          <Typography variant=\"h6\" textAlign=\"center\" sx={{ mb: 6, opacity: 0.9 }}>\n            Send packages to friends, family, or sell online - Quick, easy, and affordable\n          </Typography>\n\n          <Grid container spacing={4} alignItems=\"center\">\n            <Grid item xs={12} md={6}>\n              <Card sx={{ bgcolor: 'rgba(255,255,255,0.1)', backdropFilter: 'blur(10px)' }}>\n                <CardContent>\n                  <Typography variant=\"h5\" fontWeight=\"bold\" sx={{ color: 'white' }} gutterBottom>\n                    Simple 3-Step Process\n                  </Typography>\n                  <Stack spacing={3} sx={{ mt: 3 }}>\n                    {[\n                      { step: '1', title: 'Create Shipment', desc: 'Enter sender and recipient details online' },\n                      { step: '2', title: 'Get Your Label', desc: 'Download PDF label or use QR code on your phone' },\n                      { step: '3', title: 'Drop Off & Track', desc: 'Drop at courier location and track in real-time' },\n                    ].map((item) => (\n                      <Stack key={item.step} direction=\"row\" spacing={2} alignItems=\"flex-start\">\n                        <Chip \n                          label={item.step} \n                          sx={{ \n                            bgcolor: 'success.main', \n                            color: 'white', \n                            fontWeight: 'bold',\n                            minWidth: 40,\n                            height: 40,\n                            fontSize: '1.2rem'\n                          }} \n                        />\n                        <Box>\n                          <Typography variant=\"h6\" fontWeight=\"bold\" sx={{ color: 'white' }}>\n                            {item.title}\n                          </Typography>\n                          <Typography variant=\"body2\" sx={{ color: 'rgba(255,255,255,0.8)' }}>\n                            {item.desc}\n                          </Typography>\n                        </Box>\n                      </Stack>\n                    ))}\n                  </Stack>\n                </CardContent>\n              </Card>\n            </Grid>\n\n            <Grid item xs={12} md={6}>\n              <Stack spacing={3}>\n                <Card sx={{ bgcolor: 'rgba(255,255,255,0.1)', backdropFilter: 'blur(10px)' }}>\n                  <CardContent>\n                    <Star sx={{ fontSize: 48, color: 'warning.light', mb: 2 }} />\n                    <Typography variant=\"h6\" fontWeight=\"bold\" sx={{ color: 'white' }} gutterBottom>\n                      Choose Rated Couriers\n                    </Typography>\n                    <Typography sx={{ color: 'rgba(255,255,255,0.8)' }}>\n                      See LMT Scores and customer reviews for each courier. Compare prices and ratings to make the best choice for your shipment.\n                    </Typography>\n                  </CardContent>\n                </Card>\n\n                <Card sx={{ bgcolor: 'rgba(255,255,255,0.1)', backdropFilter: 'blur(10px)' }}>\n                  <CardContent>\n                    <Assessment sx={{ fontSize: 48, color: 'info.light', mb: 2 }} />\n                    <Typography variant=\"h6\" fontWeight=\"bold\" sx={{ color: 'white' }} gutterBottom>\n                      Track All Your Shipments\n                    </Typography>\n                    <Typography sx={{ color: 'rgba(255,255,255,0.8)' }}>\n                      View all your shipments in one dashboard. Real-time tracking updates, delivery notifications, and complete shipment history.\n                    </Typography>\n                  </CardContent>\n                </Card>\n\n                <Card sx={{ bgcolor: 'rgba(255,255,255,0.1)', backdropFilter: 'blur(10px)' }}>\n                  <CardContent>\n                    <CheckCircle sx={{ fontSize: 48, color: 'success.light', mb: 2 }} />\n                    <Typography variant=\"h6\" fontWeight=\"bold\" sx={{ color: 'white' }} gutterBottom>\n                      Easy Claims Process\n                    </Typography>\n                    <Typography sx={{ color: 'rgba(255,255,255,0.8)' }}>\n                      Lost or damaged package? File claims directly from your dashboard. Fast resolution and full support throughout the process.\n                    </Typography>\n                  </CardContent>\n                </Card>\n              </Stack>\n            </Grid>\n          </Grid>\n\n          <Grid container spacing={3} sx={{ mt: 4 }}>\n            {[\n              { icon: '', title: 'PDF Labels', desc: 'Print at home or show QR code' },\n              { icon: '', title: 'QR Codes', desc: 'PostNord, Bring, Budbee supported' },\n              { icon: '', title: 'Multiple Couriers', desc: 'Choose best price and speed' },\n              { icon: '', title: 'Real-Time Tracking', desc: 'Track every shipment' },\n            ].map((feature) => (\n              <Grid item xs={6} md={3} key={feature.title}>\n                <Card sx={{ textAlign: 'center', bgcolor: 'rgba(255,255,255,0.05)', '&:hover': { bgcolor: 'rgba(255,255,255,0.1)' }, transition: 'all 0.3s' }}>\n                  <CardContent>\n                    <Typography variant=\"h3\" sx={{ mb: 1 }}>{feature.icon}</Typography>\n                    <Typography variant=\"subtitle2\" fontWeight=\"bold\" sx={{ color: 'white' }} gutterBottom>\n                      {feature.title}\n                    </Typography>\n                    <Typography variant=\"body2\" sx={{ color: 'rgba(255,255,255,0.7)' }}>\n                      {feature.desc}\n                    </Typography>\n                  </CardContent>\n                </Card>\n              </Grid>\n            ))}\n          </Grid>\n\n          <Box sx={{ textAlign: 'center', mt: 6 }}>\n            <Button\n              variant=\"contained\"\n              size=\"large\"\n              sx={{ bgcolor: 'white', color: 'grey.900', '&:hover': { bgcolor: 'grey.100' }, px: 6, py: 2 }}\n              onClick={() => navigate('/register')}\n            >\n              Start Shipping Now\n            </Button>\n          </Box>\n        </Container>\n      </Box>\n\n      {/* Trust Badges */}\n      <Box sx={{ bgcolor: 'grey.50', py: 4, borderTop: 1, borderBottom: 1, borderColor: 'grey.200' }}>\n        <Container maxWidth=\"lg\">\n          <Stack direction=\"row\" spacing={4} justifyContent=\"center\" flexWrap=\"wrap\">\n            {[\n              { icon: <Security />, text: 'SSL Encrypted' },\n              { icon: <CheckCircle />, text: 'GDPR Compliant' },\n              { icon: <Star />, text: 'ISO 27001 Certified' },\n              { icon: <CheckCircle />, text: 'PCI DSS Level 1' },\n            ].map((badge, index) => (\n              <Stack key={index} direction=\"row\" spacing={1} alignItems=\"center\">\n                {React.cloneElement(badge.icon, { sx: { color: 'success.main' } })}\n                <Typography fontWeight=\"600\">{badge.text}</Typography>\n              </Stack>\n            ))}\n          </Stack>\n        </Container>\n      </Box>\n\n      {/* Partner Logos */}\n      <Container maxWidth=\"lg\" sx={{ py: 6, textAlign: 'center' }}>\n        <Typography variant=\"body1\" color=\"text.secondary\" fontWeight=\"600\" gutterBottom>\n          Trusted by leading courier companies worldwide\n        </Typography>\n        <Grid container spacing={4} sx={{ mt: 2 }} alignItems=\"center\" justifyContent=\"center\">\n          {[\n            { name: 'Bring', logo: '/courier-logos/bring_logo.jpeg' },\n            { name: 'PostNord', logo: '/courier-logos/postnord_logo.jpeg' },\n            { name: 'DHL', logo: '/courier-logos/dhl_logo.jpeg' },\n            { name: 'Budbee', logo: '/courier-logos/budbee_logo.jpeg' },\n            { name: 'Porterbuddy', logo: '/courier-logos/porterbuddy_logo.jpeg' },\n            { name: 'Helthjem', logo: '/courier-logos/helthjem_logo.jpeg' },\n            { name: 'Instabox', logo: '/courier-logos/instabox_logo.jpeg' },\n            { name: 'Best Transport', logo: '/courier-logos/best_transport_logo.jpeg' },\n          ].map((partner) => (\n            <Grid item xs={6} sm={4} md={3} key={partner.name}>\n              <Box\n                sx={{\n                  p: 2,\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  height: 80,\n                  transition: 'all 0.3s',\n                  '&:hover': {\n                    transform: 'scale(1.05)',\n                  },\n                }}\n              >\n                <img\n                  src={partner.logo}\n                  alt={partner.name}\n                  style={{\n                    maxHeight: '60px',\n                    maxWidth: '100%',\n                    objectFit: 'contain',\n                    filter: 'grayscale(100%)',\n                    opacity: 0.6,\n                    transition: 'all 0.3s',\n                  }}\n                  onMouseEnter={(e) => {\n                    e.currentTarget.style.filter = 'grayscale(0%)';\n                    e.currentTarget.style.opacity = '1';\n                  }}\n                  onMouseLeave={(e) => {\n                    e.currentTarget.style.filter = 'grayscale(100%)';\n                    e.currentTarget.style.opacity = '0.6';\n                  }}\n                  onError={(e) => {\n                    // Fallback to text if image fails to load\n                    e.currentTarget.style.display = 'none';\n                    e.currentTarget.parentElement!.innerHTML = `<Typography variant=\"h6\" color=\"text.secondary\">${partner.name}</Typography>`;\n                  }}\n                />\n              </Box>\n            </Grid>\n          ))}\n        </Grid>\n      </Container>\n\n      {/* Demo Video */}\n      <Box sx={{ bgcolor: 'primary.main', py: 10 }}>\n        <Container maxWidth=\"md\">\n          <Typography variant=\"h3\" fontWeight=\"bold\" textAlign=\"center\" color=\"white\" gutterBottom>\n            See Performile in Action\n          </Typography>\n          <Typography variant=\"h6\" textAlign=\"center\" sx={{ color: 'rgba(255,255,255,0.8)', mb: 4 }}>\n            Watch our 2-minute product tour\n          </Typography>\n          <Paper\n            sx={{\n              position: 'relative',\n              paddingTop: '56.25%',\n              bgcolor: 'grey.900',\n              borderRadius: 2,\n              overflow: 'hidden',\n              cursor: 'pointer',\n            }}\n            onClick={() => window.open('https://www.youtube.com/watch?v=dQw4w9WgXcQ', '_blank')}\n          >\n            <Box\n              sx={{\n                position: 'absolute',\n                top: 0,\n                left: 0,\n                right: 0,\n                bottom: 0,\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n              }}\n            >\n              <IconButton\n                sx={{\n                  width: 80,\n                  height: 80,\n                  bgcolor: 'white',\n                  '&:hover': { bgcolor: 'grey.100', transform: 'scale(1.1)' },\n                  transition: 'all 0.3s',\n                }}\n              >\n                <PlayArrow sx={{ fontSize: 48, color: 'primary.main' }} />\n              </IconButton>\n            </Box>\n          </Paper>\n        </Container>\n      </Box>\n\n      {/* Product Screenshots - Real Platform */}\n      <Container maxWidth=\"lg\" sx={{ py: 12 }}>\n        <Typography variant=\"h3\" fontWeight=\"bold\" textAlign=\"center\" gutterBottom>\n          See the Platform in Action\n        </Typography>\n        <Typography variant=\"h6\" textAlign=\"center\" color=\"text.secondary\" sx={{ mb: 6 }}>\n          Real screenshots from our live platform\n        </Typography>\n\n        <Grid container spacing={4}>\n          <Grid item xs={12} md={6}>\n            <Card sx={{ height: '100%', '&:hover': { boxShadow: 8 }, transition: 'box-shadow 0.3s' }}>\n              <CardMedia\n                component=\"img\"\n                image=\"/screenshots/analytics-dashboard.png\"\n                alt=\"Analytics Dashboard\"\n                sx={{ \n                  borderBottom: 1, \n                  borderColor: 'grey.200',\n                  objectFit: 'cover',\n                  height: 300,\n                }}\n                onError={(e) => {\n                  // Fallback if screenshot doesn't exist\n                  e.currentTarget.style.display = 'none';\n                }}\n              />\n              <CardContent>\n                <Stack direction=\"row\" spacing={1} alignItems=\"center\" sx={{ mb: 2 }}>\n                  <Assessment sx={{ color: 'primary.main' }} />\n                  <Typography variant=\"h6\" fontWeight=\"bold\">\n                    Advanced Analytics Dashboard\n                  </Typography>\n                </Stack>\n                <Typography color=\"text.secondary\" paragraph>\n                  Real-time performance metrics with heatmap visualization. See courier performance by postal code, market, and time period.\n                </Typography>\n                <Stack direction=\"row\" spacing={1} flexWrap=\"wrap\">\n                  <Chip label=\"Heatmap View\" size=\"small\" />\n                  <Chip label=\"Market Analysis\" size=\"small\" />\n                  <Chip label=\"Real-Time Data\" size=\"small\" />\n                </Stack>\n              </CardContent>\n            </Card>\n          </Grid>\n\n          <Grid item xs={12} md={6}>\n            <Card sx={{ height: '100%', '&:hover': { boxShadow: 8 }, transition: 'box-shadow 0.3s' }}>\n              <CardMedia\n                component=\"img\"\n                image=\"/screenshots/subscription-management.png\"\n                alt=\"Subscription Management\"\n                sx={{ \n                  borderBottom: 1, \n                  borderColor: 'grey.200',\n                  objectFit: 'cover',\n                  height: 300,\n                }}\n                onError={(e) => {\n                  e.currentTarget.style.display = 'none';\n                }}\n              />\n              <CardContent>\n                <Stack direction=\"row\" spacing={1} alignItems=\"center\" sx={{ mb: 2 }}>\n                  <Business sx={{ color: 'success.main' }} />\n                  <Typography variant=\"h6\" fontWeight=\"bold\">\n                    Subscription Management\n                  </Typography>\n                </Stack>\n                <Typography color=\"text.secondary\" paragraph>\n                  Easy plan management for merchants and couriers. View features, pricing, and upgrade options all in one place.\n                </Typography>\n                <Stack direction=\"row\" spacing={1} flexWrap=\"wrap\">\n                  <Chip label=\"Plan Comparison\" size=\"small\" />\n                  <Chip label=\"Easy Upgrades\" size=\"small\" />\n                  <Chip label=\"Feature Overview\" size=\"small\" />\n                </Stack>\n              </CardContent>\n            </Card>\n          </Grid>\n\n          <Grid item xs={12} md={6}>\n            <Card sx={{ height: '100%', '&:hover': { boxShadow: 8 }, transition: 'box-shadow 0.3s' }}>\n              <CardMedia\n                component=\"img\"\n                image=\"/screenshots/my-subscription.png\"\n                alt=\"My Subscription\"\n                sx={{ \n                  borderBottom: 1, \n                  borderColor: 'grey.200',\n                  objectFit: 'cover',\n                  height: 300,\n                }}\n                onError={(e) => {\n                  e.currentTarget.style.display = 'none';\n                }}\n              />\n              <CardContent>\n                <Stack direction=\"row\" spacing={1} alignItems=\"center\" sx={{ mb: 2 }}>\n                  <Person sx={{ color: 'info.main' }} />\n                  <Typography variant=\"h6\" fontWeight=\"bold\">\n                    User Dashboard\n                  </Typography>\n                </Stack>\n                <Typography color=\"text.secondary\" paragraph>\n                  Track your usage, view statistics, and manage your subscription. Clear visibility of orders, limits, and billing.\n                </Typography>\n                <Stack direction=\"row\" spacing={1} flexWrap=\"wrap\">\n                  <Chip label=\"Usage Stats\" size=\"small\" />\n                  <Chip label=\"Billing History\" size=\"small\" />\n                  <Chip label=\"Order Tracking\" size=\"small\" />\n                </Stack>\n              </CardContent>\n            </Card>\n          </Grid>\n\n          <Grid item xs={12} md={6}>\n            <Card sx={{ height: '100%', bgcolor: 'primary.main', color: 'white' }}>\n              <CardContent sx={{ height: '100%', display: 'flex', flexDirection: 'column', justifyContent: 'center', p: 4 }}>\n                <Smartphone sx={{ fontSize: 60, mb: 3, opacity: 0.9 }} />\n                <Typography variant=\"h5\" fontWeight=\"bold\" gutterBottom>\n                  Mobile Apps Coming Soon\n                </Typography>\n                <Typography variant=\"body1\" paragraph sx={{ opacity: 0.9 }}>\n                  Native iOS and Android apps with QR code scanning, real-time tracking, and C2C shipping.\n                </Typography>\n                <Stack direction=\"row\" spacing={1} flexWrap=\"wrap\">\n                  <Chip label=\"QR Scanner\" sx={{ bgcolor: 'white', color: 'primary.main' }} size=\"small\" />\n                  <Chip label=\"Push Notifications\" sx={{ bgcolor: 'white', color: 'primary.main' }} size=\"small\" />\n                  <Chip label=\"Offline Mode\" sx={{ bgcolor: 'white', color: 'primary.main' }} size=\"small\" />\n                </Stack>\n              </CardContent>\n            </Card>\n          </Grid>\n        </Grid>\n\n        <Box sx={{ textAlign: 'center', mt: 6 }}>\n          <Alert severity=\"info\" sx={{ maxWidth: 600, mx: 'auto' }}>\n            <Typography fontWeight=\"600\" gutterBottom>\n              All Features Included\n            </Typography>\n            <Typography variant=\"body2\">\n              These are real screenshots from our production platform. What you see is what you get!\n            </Typography>\n          </Alert>\n        </Box>\n      </Container>\n\n      {/* Testimonials */}\n      <Container maxWidth=\"lg\" sx={{ py: 10 }}>\n        <Typography variant=\"h3\" fontWeight=\"bold\" textAlign=\"center\" gutterBottom>\n          Trusted by Thousands\n        </Typography>\n        <Typography variant=\"h6\" textAlign=\"center\" color=\"text.secondary\" sx={{ mb: 6 }}>\n          See what our customers say about Performile\n        </Typography>\n\n        <Grid container spacing={4}>\n          {[\n            { name: 'Sarah Johnson', role: 'CEO, Fashion Retailer', rating: 5, text: 'Performile transformed our delivery operations. We reduced shipping costs by 35% and customer satisfaction increased to 98%.' },\n            { name: 'Lars Andersson', role: 'Operations Manager, SwiftDelivery', rating: 5, text: 'As a courier company, Performile\\'s route optimization saved us 30% in fuel costs. Best investment we\\'ve made.' },\n            { name: 'Emma Nielsen', role: 'Founder, Copenhagen Electronics', rating: 5, text: 'The WooCommerce plugin installed in 5 minutes. Revenue increased 25% in 3 months!' },\n          ].map((testimonial, index) => (\n            <Grid item xs={12} md={4} key={index}>\n              <Card sx={{ height: '100%' }}>\n                <CardContent>\n                  <Rating value={testimonial.rating} readOnly sx={{ mb: 2 }} />\n                  <Typography variant=\"body1\" paragraph>\n                    \"{testimonial.text}\"\n                  </Typography>\n                  <Divider sx={{ my: 2 }} />\n                  <Typography variant=\"subtitle2\" fontWeight=\"bold\">\n                    {testimonial.name}\n                  </Typography>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    {testimonial.role}\n                  </Typography>\n                </CardContent>\n              </Card>\n            </Grid>\n          ))}\n        </Grid>\n\n        <Box sx={{ textAlign: 'center', mt: 4 }}>\n          <Chip\n            icon={<Star sx={{ color: 'success.main' }} />}\n            label=\"4.9/5 average rating  2,500+ reviews\"\n            sx={{ bgcolor: 'success.50', color: 'success.dark', fontWeight: 600 }}\n          />\n        </Box>\n      </Container>\n\n      {/* Feature Comparison - What Competitors Are Missing */}\n      <Box sx={{ bgcolor: 'grey.50', py: 10 }}>\n        <Container maxWidth=\"lg\">\n          <Box sx={{ textAlign: 'center', mb: 2 }}>\n            <Chip\n              icon={<TrendingDown />}\n              label=\"Save up to 85% vs competitors\"\n              color=\"success\"\n              sx={{ fontWeight: 600 }}\n            />\n          </Box>\n          <Typography variant=\"h3\" fontWeight=\"bold\" textAlign=\"center\" gutterBottom>\n            What Competitors Are Missing\n          </Typography>\n          <Typography variant=\"h6\" textAlign=\"center\" color=\"text.secondary\" sx={{ mb: 6 }}>\n            See why Performile is the only complete solution\n          </Typography>\n\n          {/* Feature Comparison Table */}\n          <TableContainer component={Paper} sx={{ mb: 6 }}>\n            <Table>\n              <TableHead>\n                <TableRow sx={{ bgcolor: 'primary.main' }}>\n                  <TableCell sx={{ color: 'white', fontWeight: 'bold', fontSize: '1.1rem' }}>Feature</TableCell>\n                  <TableCell align=\"center\" sx={{ color: 'white', fontWeight: 'bold' }}>Traditional Courier</TableCell>\n                  <TableCell align=\"center\" sx={{ color: 'white', fontWeight: 'bold' }}>ShipStation</TableCell>\n                  <TableCell align=\"center\" sx={{ color: 'white', fontWeight: 'bold', bgcolor: 'primary.dark' }}>Performile</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {[\n                  { feature: 'Dynamic Checkout (Changes by Postal Code)', traditional: false, shipstation: false, performile: true, highlight: true },\n                  { feature: 'Real-Time LMT Score & Ratings', traditional: false, shipstation: false, performile: true, highlight: true },\n                  { feature: 'Postal Code-Specific ETA', traditional: false, shipstation: false, performile: true, highlight: true },\n                  { feature: 'Predictive Delivery Times (14:00-17:00)', traditional: false, shipstation: false, performile: true, highlight: true },\n                  { feature: 'Consumer Choice at Checkout', traditional: false, shipstation: false, performile: true, highlight: true },\n                  { feature: 'Weighted Courier List', traditional: false, shipstation: false, performile: true, highlight: true },\n                  { feature: 'Multi-Courier Support', traditional: false, shipstation: true, performile: true },\n                  { feature: 'Global Courier Integrations', traditional: false, shipstation: false, performile: true },\n                  { feature: 'C2C Shipping Platform', traditional: false, shipstation: false, performile: true },\n                  { feature: 'Claims & RMA System', traditional: false, shipstation: false, performile: true },\n                  { feature: 'Mobile Apps (iOS & Android)', traditional: false, shipstation: false, performile: true },\n                  { feature: 'Advanced Analytics', traditional: false, shipstation: false, performile: true },\n                  { feature: 'Lead Generation (B2B)', traditional: false, shipstation: false, performile: true },\n                  { feature: 'Consumer Dashboard', traditional: false, shipstation: false, performile: true },\n                ].map((row, index) => (\n                  <TableRow \n                    key={index}\n                    sx={{ \n                      bgcolor: row.highlight ? 'warning.50' : 'white',\n                      '&:hover': { bgcolor: row.highlight ? 'warning.100' : 'grey.50' }\n                    }}\n                  >\n                    <TableCell sx={{ fontWeight: row.highlight ? 'bold' : 'normal' }}>\n                      {row.feature}\n                      {row.highlight && <Chip label=\"UNIQUE\" size=\"small\" color=\"warning\" sx={{ ml: 1 }} />}\n                    </TableCell>\n                    <TableCell align=\"center\">\n                      {row.traditional ? (\n                        <CheckCircle sx={{ color: 'success.main' }} />\n                      ) : (\n                        <Close sx={{ color: 'error.main' }} />\n                      )}\n                    </TableCell>\n                    <TableCell align=\"center\">\n                      {row.shipstation ? (\n                        <CheckCircle sx={{ color: 'success.main' }} />\n                      ) : (\n                        <Close sx={{ color: 'error.main' }} />\n                      )}\n                    </TableCell>\n                    <TableCell align=\"center\" sx={{ bgcolor: row.highlight ? 'success.50' : 'success.100' }}>\n                      <CheckCircle sx={{ color: 'success.main', fontSize: 28 }} />\n                    </TableCell>\n                  </TableRow>\n                ))}\n                <TableRow sx={{ bgcolor: 'grey.900' }}>\n                  <TableCell sx={{ color: 'white', fontWeight: 'bold', fontSize: '1.1rem' }}>Monthly Price</TableCell>\n                  <TableCell align=\"center\" sx={{ color: 'white', fontWeight: 'bold' }}>$199/mo</TableCell>\n                  <TableCell align=\"center\" sx={{ color: 'white', fontWeight: 'bold' }}>$149/mo</TableCell>\n                  <TableCell align=\"center\" sx={{ color: 'success.light', fontWeight: 'bold', fontSize: '1.2rem' }}>$29/mo</TableCell>\n                </TableRow>\n              </TableBody>\n            </Table>\n          </TableContainer>\n\n          {/* Key Differentiators */}\n          <Typography variant=\"h4\" fontWeight=\"bold\" textAlign=\"center\" gutterBottom sx={{ mt: 6, mb: 4 }}>\n            Our Unique Advantages\n          </Typography>\n          \n          <Grid container spacing={3}>\n            {[\n              {\n                title: 'Dynamic Checkout',\n                desc: 'Checkout changes in real-time based on postal code. Shows different couriers, ratings, and ETAs for each location.',\n                icon: '',\n                color: 'primary.main'\n              },\n              {\n                title: 'LMT Score Integration',\n                desc: 'Real-time courier ratings displayed at checkout. Consumers see performance data before choosing.',\n                icon: '',\n                color: 'warning.main'\n              },\n              {\n                title: 'Predictive ETA',\n                desc: 'Shows \"Usually delivered 14:00-17:00\" based on postal code history. No competitor does this.',\n                icon: '',\n                color: 'success.main'\n              },\n              {\n                title: 'Consumer Choice',\n                desc: 'Weighted list lets consumers choose their preferred courier. Transparent, fair, increases conversion.',\n                icon: '',\n                color: 'info.main'\n              },\n            ].map((item, index) => (\n              <Grid item xs={12} md={6} key={index}>\n                <Card sx={{ height: '100%', borderLeft: 4, borderColor: item.color }}>\n                  <CardContent>\n                    <Stack direction=\"row\" spacing={2} alignItems=\"center\" sx={{ mb: 2 }}>\n                      <Typography variant=\"h3\">{item.icon}</Typography>\n                      <Typography variant=\"h6\" fontWeight=\"bold\">\n                        {item.title}\n                      </Typography>\n                    </Stack>\n                    <Typography color=\"text.secondary\">\n                      {item.desc}\n                    </Typography>\n                  </CardContent>\n                </Card>\n              </Grid>\n            ))}\n          </Grid>\n\n          <Box sx={{ textAlign: 'center', mt: 6 }}>\n            <Alert severity=\"success\" sx={{ maxWidth: 600, mx: 'auto', fontSize: '1.1rem' }}>\n              <Typography variant=\"h6\" fontWeight=\"bold\" gutterBottom>\n                Only Performile Has It All\n              </Typography>\n              <Typography>\n                Dynamic checkout + Real-time ratings + Predictive ETA + Consumer choice = Better conversion rates\n              </Typography>\n            </Alert>\n          </Box>\n        </Container>\n      </Box>\n\n      {/* ROI Calculator */}\n      <Container maxWidth=\"lg\" sx={{ py: 10 }}>\n        <Box sx={{ textAlign: 'center', mb: 6 }}>\n          <Calculate sx={{ fontSize: 48, color: 'primary.main', mb: 2 }} />\n          <Typography variant=\"h3\" fontWeight=\"bold\" gutterBottom>\n            Calculate Your Savings\n          </Typography>\n          <Typography variant=\"h6\" color=\"text.secondary\">\n            See how much you can save with Performile\n          </Typography>\n        </Box>\n\n        <Grid container spacing={4}>\n          <Grid item xs={12} md={6}>\n            <Card>\n              <CardContent>\n                <Typography variant=\"h6\" fontWeight=\"bold\" gutterBottom>\n                  Your Current Situation\n                </Typography>\n                <Stack spacing={3} sx={{ mt: 3 }}>\n                  <TextField\n                    label=\"Monthly Orders\"\n                    type=\"number\"\n                    value={roiInputs.monthlyOrders}\n                    onChange={(e) => setRoiInputs({ ...roiInputs, monthlyOrders: parseInt(e.target.value) || 0 })}\n                    fullWidth\n                  />\n                  <TextField\n                    label=\"Average Order Value ($)\"\n                    type=\"number\"\n                    value={roiInputs.avgOrderValue}\n                    onChange={(e) => setRoiInputs({ ...roiInputs, avgOrderValue: parseInt(e.target.value) || 0 })}\n                    fullWidth\n                  />\n                  <TextField\n                    label=\"Current Shipping Cost per Order ($)\"\n                    type=\"number\"\n                    value={roiInputs.currentShippingCost}\n                    onChange={(e) => setRoiInputs({ ...roiInputs, currentShippingCost: parseInt(e.target.value) || 0 })}\n                    fullWidth\n                  />\n                  <TextField\n                    label=\"Processing Time per Order (minutes)\"\n                    type=\"number\"\n                    value={roiInputs.currentProcessingTime}\n                    onChange={(e) => setRoiInputs({ ...roiInputs, currentProcessingTime: parseInt(e.target.value) || 0 })}\n                    fullWidth\n                  />\n                </Stack>\n              </CardContent>\n            </Card>\n          </Grid>\n\n          <Grid item xs={12} md={6}>\n            <Card sx={{ bgcolor: 'success.main', color: 'white', height: '100%' }}>\n              <CardContent>\n                <Stack direction=\"row\" spacing={2} alignItems=\"center\" sx={{ mb: 3 }}>\n                  <TrendingUp sx={{ fontSize: 32 }} />\n                  <Typography variant=\"h6\" fontWeight=\"bold\">\n                    Your Potential Savings\n                  </Typography>\n                </Stack>\n                <Stack spacing={3}>\n                  <Box>\n                    <Typography variant=\"body2\" sx={{ opacity: 0.9 }}>Monthly Savings</Typography>\n                    <Typography variant=\"h3\" fontWeight=\"bold\">\n                      ${results.monthlySavings.toLocaleString()}\n                    </Typography>\n                  </Box>\n                  <Box>\n                    <Typography variant=\"body2\" sx={{ opacity: 0.9 }}>Annual Savings</Typography>\n                    <Typography variant=\"h4\" fontWeight=\"bold\">\n                      ${results.annualSavings.toLocaleString()}\n                    </Typography>\n                  </Box>\n                  <Divider sx={{ borderColor: 'rgba(255,255,255,0.3)' }} />\n                  <Box>\n                    <Typography variant=\"body2\" sx={{ opacity: 0.9 }}>Return on Investment</Typography>\n                    <Typography variant=\"h5\" fontWeight=\"bold\">\n                      {results.roi.toFixed(0)}% ROI\n                    </Typography>\n                  </Box>\n                </Stack>\n              </CardContent>\n            </Card>\n\n            <Grid container spacing={2} sx={{ mt: 2 }}>\n              <Grid item xs={6}>\n                <Card>\n                  <CardContent>\n                    <Typography variant=\"body2\" color=\"text.secondary\">Current Monthly Cost</Typography>\n                    <Typography variant=\"h5\" fontWeight=\"bold\">\n                      ${results.currentMonthlyCost.toLocaleString()}\n                    </Typography>\n                  </CardContent>\n                </Card>\n              </Grid>\n              <Grid item xs={6}>\n                <Card sx={{ bgcolor: 'success.50' }}>\n                  <CardContent>\n                    <Typography variant=\"body2\" color=\"text.secondary\">With Performile</Typography>\n                    <Typography variant=\"h5\" fontWeight=\"bold\" color=\"success.dark\">\n                      ${results.performileMonthlyCost.toLocaleString()}\n                    </Typography>\n                  </CardContent>\n                </Card>\n              </Grid>\n            </Grid>\n          </Grid>\n        </Grid>\n      </Container>\n\n      {/* Newsletter */}\n      <Box sx={{ bgcolor: 'primary.main', color: 'white', py: 10 }}>\n        <Container maxWidth=\"md\">\n          <Box sx={{ textAlign: 'center', mb: 4 }}>\n            <Email sx={{ fontSize: 48, mb: 2 }} />\n            <Typography variant=\"h3\" fontWeight=\"bold\" gutterBottom>\n              Stay Updated with Performile\n            </Typography>\n            <Typography variant=\"h6\" sx={{ opacity: 0.9 }}>\n              Get the latest features, tips, and industry insights\n            </Typography>\n          </Box>\n\n          {newsletterSuccess ? (\n            <Alert severity=\"success\" sx={{ maxWidth: 600, mx: 'auto' }}>\n              <Typography variant=\"h6\" gutterBottom>You're subscribed!</Typography>\n              <Typography>Check your inbox for a confirmation email.</Typography>\n            </Alert>\n          ) : (\n            <Box component=\"form\" onSubmit={handleNewsletterSignup} sx={{ maxWidth: 600, mx: 'auto' }}>\n              <Stack direction={{ xs: 'column', sm: 'row' }} spacing={2}>\n                <TextField\n                  type=\"email\"\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  placeholder=\"Enter your email address\"\n                  required\n                  fullWidth\n                  sx={{ bgcolor: 'white', borderRadius: 1 }}\n                />\n                <Button\n                  type=\"submit\"\n                  variant=\"contained\"\n                  size=\"large\"\n                  sx={{ bgcolor: 'white', color: 'primary.main', '&:hover': { bgcolor: 'grey.100' }, whiteSpace: 'nowrap' }}\n                  endIcon={<ArrowForward />}\n                >\n                  Subscribe\n                </Button>\n              </Stack>\n              <Typography variant=\"body2\" sx={{ mt: 2, opacity: 0.8, textAlign: 'center' }}>\n                Join 10,000+ subscribers  No spam  Unsubscribe anytime\n              </Typography>\n            </Box>\n          )}\n        </Container>\n      </Box>\n\n      {/* FAQ */}\n      <Container maxWidth=\"md\" sx={{ py: 10 }}>\n        <Typography variant=\"h3\" fontWeight=\"bold\" textAlign=\"center\" gutterBottom>\n          Frequently Asked Questions\n        </Typography>\n        <Typography variant=\"h6\" textAlign=\"center\" color=\"text.secondary\" sx={{ mb: 6 }}>\n          Everything you need to know about Performile\n        </Typography>\n\n        {[\n          { q: 'How quickly can I get started?', a: 'You can start shipping in less than 10 minutes! Sign up, install our plugin (if using e-commerce), and you\\'re ready to go.' },\n          { q: 'What payment methods do you support?', a: 'We support global payment methods including Vipps, Swish, MobilePay, Stripe, Klarna, Qliro, Adyen, Worldpay, and more. Easy integration with your preferred payment provider.' },\n          { q: 'Do you offer mobile apps?', a: 'Yes! We have native iOS and Android apps for consumers with features like real-time tracking, C2C shipping, claims, and returns.' },\n          { q: 'How does pricing work?', a: 'We offer flexible subscription plans starting at $29/month. Consumers can use the platform for free. C2C shipping has transparent per-shipment fees.' },\n        ].map((faq, index) => (\n          <Accordion key={index} expanded={openFaq === index} onChange={() => setOpenFaq(openFaq === index ? null : index)}>\n            <AccordionSummary expandIcon={<ExpandMore />}>\n              <Typography fontWeight=\"600\">{faq.q}</Typography>\n            </AccordionSummary>\n            <AccordionDetails>\n              <Typography color=\"text.secondary\">{faq.a}</Typography>\n            </AccordionDetails>\n          </Accordion>\n        ))}\n      </Container>\n\n      {/* Final CTA */}\n      <Box sx={{ bgcolor: 'grey.900', color: 'white', py: 10, textAlign: 'center' }}>\n        <Container maxWidth=\"md\">\n          <Typography variant=\"h3\" fontWeight=\"bold\" gutterBottom>\n            Ready to Transform Your Delivery Operations?\n          </Typography>\n          <Typography variant=\"h6\" sx={{ mb: 4, opacity: 0.8 }}>\n            Join 50,000+ users who trust Performile for their delivery needs\n          </Typography>\n          <Button\n            variant=\"contained\"\n            size=\"large\"\n            color=\"primary\"\n            endIcon={<ArrowForward />}\n            onClick={() => navigate('/register')}\n            sx={{ px: 6, py: 2 }}\n          >\n            Start Your Free Trial\n          </Button>\n          <Typography variant=\"body2\" sx={{ mt: 3, opacity: 0.6 }}>\n            No credit card required  14-day free trial  Cancel anytime\n          </Typography>\n        </Container>\n      </Box>\n    </Box>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\MerchantSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_user' is assigned a value but never used.","line":66,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":66,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":68,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":68,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2496,2499],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2496,2499],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { useAuthStore } from '../store/authStore';\nimport {\n  Box,\n  Container,\n  Typography,\n  Tabs,\n  Tab,\n  Paper,\n  Chip,\n} from '@mui/material';\nimport {\n  Store as StoreIcon,\n  LocalShipping as CourierIcon,\n  TrackChanges as TrackingIcon,\n  Star as RatingIcon,\n  Email as EmailIcon,\n  Assignment as ReturnIcon,\n  Payment as PaymentIcon,\n  Notifications as NotificationIcon,\n  Api as ApiIcon,\n  Settings as SettingsIcon,\n  Security as SecurityIcon,\n  Language as LanguageIcon,\n  AttachMoney as PricingIcon,\n} from '@mui/icons-material';\n\n// Import sub-components\nimport { ShopsSettings } from '@/components/settings/merchant/ShopsSettings';\nimport { CouriersSettings } from '@/components/settings/merchant/CouriersSettings';\nimport { TrackingPageSettings } from '@/components/settings/merchant/TrackingPageSettings';\nimport { MerchantPricingSettings } from '@/pages/settings/MerchantPricingSettings';\n// TODO: Create these components\n// import { RatingSettings } from '@/components/settings/merchant/RatingSettings';\n// import { EmailTemplatesSettings } from '@/components/settings/merchant/EmailTemplatesSettings';\n// import { ReturnsSettings } from '@/components/settings/merchant/ReturnsSettings';\n// import { PaymentSettings } from '@/components/settings/merchant/PaymentSettings';\n// import { NotificationSettings } from '@/components/settings/merchant/NotificationSettings';\n// import { APISettings } from '@/components/settings/merchant/APISettings';\n// import { GeneralSettings } from '@/components/settings/merchant/GeneralSettings';\n// import { SecuritySettings } from '@/components/settings/merchant/SecuritySettings';\n// import { PreferencesSettings } from '@/components/settings/merchant/PreferencesSettings';\n\ninterface TabPanelProps {\n  children?: React.ReactNode;\n  index: number;\n  value: number;\n}\n\nfunction TabPanel(props: TabPanelProps) {\n  const { children, value, index, ...other } = props;\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`merchant-settings-tabpanel-${index}`}\n      aria-labelledby={`merchant-settings-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box sx={{ py: 3 }}>{children}</Box>}\n    </div>\n  );\n}\n\nconst MerchantSettings: React.FC = () => {\n  const { user: _user } = useAuthStore(); // Prefix with _ to indicate intentionally unused\n  const [tabValue, setTabValue] = useState(0);\n  const [subscriptionInfo, setSubscriptionInfo] = useState<any>(null);\n\n  // Get tab from URL hash if present\n  useEffect(() => {\n    const hash = window.location.hash.replace('#', '');\n    const tabMap: Record<string, number> = {\n      'shops': 0,\n      'couriers': 1,\n      'tracking': 2,\n      'pricing': 3,\n      'ratings': 4,\n      'emails': 5,\n      'returns': 6,\n      'payments': 7,\n      'notifications': 8,\n      'api': 9,\n      'general': 10,\n      'security': 11,\n      'preferences': 12,\n    };\n    \n    if (hash && tabMap[hash] !== undefined) {\n      setTabValue(tabMap[hash]);\n    }\n  }, []);\n\n  const handleTabChange = (_event: React.SyntheticEvent, newValue: number) => {\n    setTabValue(newValue);\n    \n    // Update URL hash\n    const tabNames = [\n      'shops', 'couriers', 'tracking', 'pricing', 'ratings', 'emails', 'returns',\n      'payments', 'notifications', 'api', 'general', 'security', 'preferences'\n    ];\n    window.location.hash = tabNames[newValue];\n  };\n\n  // Fetch subscription info\n  useEffect(() => {\n    fetchSubscriptionInfo();\n  }, []);\n\n  const fetchSubscriptionInfo = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch('/api/couriers/merchant-preferences', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ action: 'get_subscription_info' }),\n      });\n      const data = await response.json();\n      setSubscriptionInfo(data.data);\n    } catch (error) {\n      console.error('Error fetching subscription info:', error);\n    }\n  };\n\n  const planName = subscriptionInfo?.subscription?.plan_name || 'Free';\n  const tier = subscriptionInfo?.subscription?.tier || 0;\n\n  return (\n    <Container maxWidth=\"xl\" sx={{ mt: 4, mb: 4 }}>\n      {/* Header */}\n      <Box sx={{ mb: 4 }}>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n          <Box>\n            <Typography variant=\"h3\" component=\"h1\" gutterBottom>\n              Merchant Settings\n            </Typography>\n            <Typography variant=\"body1\" color=\"text.secondary\">\n              Manage your shops, couriers, tracking, and all merchant preferences\n            </Typography>\n          </Box>\n          <Chip \n            label={`${planName} Plan`}\n            color={tier >= 2 ? 'primary' : 'default'}\n            sx={{ fontWeight: 600 }}\n          />\n        </Box>\n      </Box>\n\n      {/* Navigation Tabs */}\n      <Paper sx={{ mb: 3 }}>\n        <Tabs\n          value={tabValue}\n          onChange={handleTabChange}\n          variant=\"scrollable\"\n          scrollButtons=\"auto\"\n          sx={{\n            borderBottom: 1,\n            borderColor: 'divider',\n            '& .MuiTab-root': {\n              minHeight: 72,\n              textTransform: 'none',\n              fontSize: '0.95rem',\n            },\n          }}\n        >\n          <Tab \n            icon={<StoreIcon />} \n            label=\"Shops\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<CourierIcon />} \n            label=\"Couriers\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<TrackingIcon />} \n            label=\"Tracking Page\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<PricingIcon />} \n            label=\"Pricing & Margins\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<RatingIcon />} \n            label=\"Rating Settings\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<EmailIcon />} \n            label=\"Email Templates\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<ReturnIcon />} \n            label=\"Returns\" \n            iconPosition=\"start\"\n            disabled={tier < 2} // Professional+ feature\n          />\n          <Tab \n            icon={<PaymentIcon />} \n            label=\"Payments\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<NotificationIcon />} \n            label=\"Notifications\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<ApiIcon />} \n            label=\"API & Integrations\" \n            iconPosition=\"start\"\n            disabled={tier < 2} // Professional+ feature\n          />\n          <Tab \n            icon={<SettingsIcon />} \n            label=\"General\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<SecurityIcon />} \n            label=\"Security\" \n            iconPosition=\"start\"\n          />\n          <Tab \n            icon={<LanguageIcon />} \n            label=\"Preferences\" \n            iconPosition=\"start\"\n          />\n        </Tabs>\n      </Paper>\n\n      {/* Tab Panels */}\n      <TabPanel value={tabValue} index={0}>\n        <ShopsSettings subscriptionInfo={subscriptionInfo} />\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={1}>\n        <CouriersSettings subscriptionInfo={subscriptionInfo} />\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={2}>\n        <TrackingPageSettings subscriptionInfo={subscriptionInfo} />\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={3}>\n        <MerchantPricingSettings />\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={4}>\n        <Typography>Rating Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={5}>\n        <Typography>Email Templates - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={6}>\n        <Typography>Returns Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={7}>\n        <Typography>Payment Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={8}>\n        <Typography>Notification Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={9}>\n        <Typography>API Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={10}>\n        <Typography>General Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={11}>\n        <Typography>Security Settings - Coming Soon</Typography>\n      </TabPanel>\n\n      <TabPanel value={tabValue} index={12}>\n        <Typography>Preferences Settings - Coming Soon</Typography>\n      </TabPanel>\n    </Container>\n  );\n};\n\nexport default MerchantSettings;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\MySubscription.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Paper' is defined but never used.","line":6,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'user' is assigned a value but never used.","line":51,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":15},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":66,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1671,1674],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1671,1674],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":154,"column":68,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[4158,4205],"text":". You&apos;ll still have access until then.\n        "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[4158,4205],"text":". You&lsquo;ll still have access until then.\n        "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[4158,4205],"text":". You&#39;ll still have access until then.\n        "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[4158,4205],"text":". You&rsquo;ll still have access until then.\n        "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":277,"column":26,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[9486,9616],"text":"\n                      You&apos;re approaching your plan limits. Consider upgrading to avoid service interruption.\n                    "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[9486,9616],"text":"\n                      You&lsquo;re approaching your plan limits. Consider upgrading to avoid service interruption.\n                    "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[9486,9616],"text":"\n                      You&#39;re approaching your plan limits. Consider upgrading to avoid service interruption.\n                    "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[9486,9616],"text":"\n                      You&rsquo;re approaching your plan limits. Consider upgrading to avoid service interruption.\n                    "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  Container,\n  Typography,\n  Paper,\n  Button,\n  Grid,\n  Card,\n  CardContent,\n  Chip,\n  LinearProgress,\n  Divider,\n  Alert,\n  CircularProgress,\n} from '@mui/material';\nimport {\n  Upgrade,\n  CheckCircle,\n  Warning,\n  Receipt,\n  CreditCard,\n} from '@mui/icons-material';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuthStore } from '@/store/authStore';\nimport { apiClient } from '@/services/apiClient';\nimport { toast } from 'react-hot-toast';\n\ninterface SubscriptionData {\n  plan_name: string;\n  plan_slug: string;\n  user_type: 'merchant' | 'courier';\n  tier: number;\n  monthly_price: number;\n  annual_price: number;\n  billing_cycle: 'monthly' | 'yearly';\n  status: string;\n  current_period_start: string;\n  current_period_end: string;\n  max_orders_per_month: number | null;\n  max_emails_per_month: number | null;\n  max_shops: number | null;\n  max_couriers: number | null;\n  max_team_members: number | null;\n  orders_used_this_month: number;\n  cancel_at_period_end: boolean;\n}\n\nexport const MySubscription: React.FC = () => {\n  const navigate = useNavigate();\n  const { user } = useAuthStore();\n  const [subscription, setSubscription] = useState<SubscriptionData | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    fetchSubscription();\n  }, []);\n\n  const fetchSubscription = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const response = await apiClient.get('/subscriptions/my-subscription');\n      setSubscription(response.data.subscription);\n    } catch (error: any) {\n      console.error('Failed to fetch subscription:', error);\n      setError(error.response?.data?.message || 'Failed to load subscription');\n      toast.error('Failed to load subscription details');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getTierColor = (tier: number) => {\n    switch (tier) {\n      case 1: return 'default';\n      case 2: return 'primary';\n      case 3: return 'success';\n      case 4: return 'secondary';\n      default: return 'default';\n    }\n  };\n\n  const getUsagePercentage = (used: number, max: number | null) => {\n    if (max === null) return 0;\n    return Math.min((used / max) * 100, 100);\n  };\n\n  const getUsageColor = (percentage: number) => {\n    if (percentage >= 90) return 'error';\n    if (percentage >= 75) return 'warning';\n    return 'success';\n  };\n\n  const handleManageBilling = () => {\n    navigate('/billing');\n  };\n\n  const handleUpgrade = () => {\n    navigate('/subscription/plans');\n  };\n\n  const handleViewInvoices = () => {\n    navigate('/billing');\n  };\n\n  if (loading) {\n    return (\n      <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\n        <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '400px' }}>\n          <CircularProgress />\n        </Box>\n      </Container>\n    );\n  }\n\n  if (error || !subscription) {\n    return (\n      <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\n        <Alert severity=\"error\" sx={{ mb: 3 }}>\n          {error || 'No active subscription found'}\n        </Alert>\n        <Button variant=\"contained\" onClick={() => navigate('/subscription/plans')}>\n          View Available Plans\n        </Button>\n      </Container>\n    );\n  }\n\n  const ordersPercentage = getUsagePercentage(\n    subscription.orders_used_this_month,\n    subscription.max_orders_per_month\n  );\n\n  const canUpgrade = subscription.tier < 4;\n  const nextRenewal = new Date(subscription.current_period_end).toLocaleDateString();\n\n  return (\n    <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\n      {/* Header */}\n      <Box sx={{ mb: 4 }}>\n        <Typography variant=\"h4\" gutterBottom>\n          My Subscription\n        </Typography>\n        <Typography variant=\"body1\" color=\"text.secondary\">\n          Manage your subscription plan and billing\n        </Typography>\n      </Box>\n\n      {/* Cancellation Warning */}\n      {subscription.cancel_at_period_end && (\n        <Alert severity=\"warning\" sx={{ mb: 3 }}>\n          Your subscription will be cancelled on {nextRenewal}. You'll still have access until then.\n        </Alert>\n      )}\n\n      <Grid container spacing={3}>\n        {/* Current Plan Card */}\n        <Grid item xs={12} md={8}>\n          <Card sx={{ border: '2px solid', borderColor: 'primary.main' }}>\n            <CardContent>\n              <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', mb: 3 }}>\n                <Box>\n                  <Typography variant=\"h5\" gutterBottom>\n                    {subscription.plan_name}\n                  </Typography>\n                  <Box sx={{ display: 'flex', gap: 1, mb: 2 }}>\n                    <Chip\n                      label={`Tier ${subscription.tier}`}\n                      color={getTierColor(subscription.tier)}\n                      size=\"small\"\n                    />\n                    <Chip\n                      label={subscription.user_type === 'merchant' ? ' Merchant' : ' Courier'}\n                      size=\"small\"\n                      variant=\"outlined\"\n                    />\n                    <Chip\n                      label={subscription.status}\n                      color={subscription.status === 'active' ? 'success' : 'default'}\n                      size=\"small\"\n                    />\n                  </Box>\n                </Box>\n                <Box sx={{ textAlign: 'right' }}>\n                  <Typography variant=\"h4\" color=\"primary\">\n                    ${subscription.billing_cycle === 'monthly' ? subscription.monthly_price : subscription.annual_price}\n                  </Typography>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    per {subscription.billing_cycle === 'monthly' ? 'month' : 'year'}\n                  </Typography>\n                </Box>\n              </Box>\n\n              <Divider sx={{ my: 2 }} />\n\n              {/* Usage Statistics */}\n              <Typography variant=\"h6\" gutterBottom sx={{ mt: 3 }}>\n                Usage This Month\n              </Typography>\n\n              <Grid container spacing={2}>\n                {/* Orders Usage */}\n                <Grid item xs={12}>\n                  <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\n                    Orders\n                  </Typography>\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1 }}>\n                    <Typography variant=\"h6\">\n                      {subscription.orders_used_this_month}\n                      {subscription.max_orders_per_month !== null && ` / ${subscription.max_orders_per_month}`}\n                    </Typography>\n                    {subscription.max_orders_per_month === null && (\n                      <Chip label=\"Unlimited\" size=\"small\" color=\"success\" />\n                    )}\n                  </Box>\n                  {subscription.max_orders_per_month !== null && (\n                    <LinearProgress\n                      variant=\"determinate\"\n                      value={ordersPercentage}\n                      color={getUsageColor(ordersPercentage)}\n                      sx={{ height: 8, borderRadius: 1 }}\n                    />\n                  )}\n                </Grid>\n\n                {/* Plan Limits */}\n                {subscription.user_type === 'merchant' && (\n                  <>\n                    <Grid item xs={6} md={4}>\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        Max Shops\n                      </Typography>\n                      <Typography variant=\"h6\">\n                        {subscription.max_shops === null ? '' : subscription.max_shops}\n                      </Typography>\n                    </Grid>\n                    <Grid item xs={6} md={4}>\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        Max Couriers\n                      </Typography>\n                      <Typography variant=\"h6\">\n                        {subscription.max_couriers === null ? '' : subscription.max_couriers}\n                      </Typography>\n                    </Grid>\n                  </>\n                )}\n\n                {subscription.user_type === 'courier' && (\n                  <Grid item xs={6} md={4}>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      Max Team Members\n                    </Typography>\n                    <Typography variant=\"h6\">\n                      {subscription.max_team_members === null ? '' : subscription.max_team_members}\n                    </Typography>\n                  </Grid>\n                )}\n\n                <Grid item xs={6} md={4}>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    Max Emails/Month\n                  </Typography>\n                  <Typography variant=\"h6\">\n                    {subscription.max_emails_per_month === null ? '' : subscription.max_emails_per_month}\n                  </Typography>\n                </Grid>\n              </Grid>\n\n              {/* Upgrade Warning */}\n              {ordersPercentage >= 75 && canUpgrade && (\n                <Alert severity=\"warning\" sx={{ mt: 3 }}>\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                    <Warning />\n                    <Typography variant=\"body2\">\n                      You're approaching your plan limits. Consider upgrading to avoid service interruption.\n                    </Typography>\n                  </Box>\n                </Alert>\n              )}\n            </CardContent>\n          </Card>\n        </Grid>\n\n        {/* Actions Card */}\n        <Grid item xs={12} md={4}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Quick Actions\n              </Typography>\n\n              <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2, mt: 2 }}>\n                {canUpgrade && (\n                  <Button\n                    variant=\"contained\"\n                    fullWidth\n                    startIcon={<Upgrade />}\n                    onClick={handleUpgrade}\n                  >\n                    Upgrade Plan\n                  </Button>\n                )}\n\n                <Button\n                  variant=\"outlined\"\n                  fullWidth\n                  startIcon={<CreditCard />}\n                  onClick={handleManageBilling}\n                >\n                  Manage Billing\n                </Button>\n\n                <Button\n                  variant=\"outlined\"\n                  fullWidth\n                  startIcon={<Receipt />}\n                  onClick={handleViewInvoices}\n                >\n                  View Invoices\n                </Button>\n              </Box>\n\n              <Divider sx={{ my: 3 }} />\n\n              <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\n                Next Renewal\n              </Typography>\n              <Typography variant=\"body1\" fontWeight={600}>\n                {nextRenewal}\n              </Typography>\n\n              <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom sx={{ mt: 2 }}>\n                Billing Cycle\n              </Typography>\n              <Typography variant=\"body1\" fontWeight={600}>\n                {subscription.billing_cycle === 'monthly' ? 'Monthly' : 'Annual'}\n              </Typography>\n            </CardContent>\n          </Card>\n\n          {/* Features Card */}\n          <Card sx={{ mt: 2 }}>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Plan Features\n              </Typography>\n              <Box sx={{ display: 'flex', flexDirection: 'column', gap: 1, mt: 2 }}>\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                  <CheckCircle color=\"success\" fontSize=\"small\" />\n                  <Typography variant=\"body2\">\n                    {subscription.max_orders_per_month === null ? 'Unlimited' : subscription.max_orders_per_month} orders/month\n                  </Typography>\n                </Box>\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                  <CheckCircle color=\"success\" fontSize=\"small\" />\n                  <Typography variant=\"body2\">\n                    Email notifications\n                  </Typography>\n                </Box>\n                {subscription.tier >= 2 && (\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                    <CheckCircle color=\"success\" fontSize=\"small\" />\n                    <Typography variant=\"body2\">\n                      Advanced analytics\n                    </Typography>\n                  </Box>\n                )}\n                {subscription.tier >= 3 && (\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                    <CheckCircle color=\"success\" fontSize=\"small\" />\n                    <Typography variant=\"body2\">\n                      API access\n                    </Typography>\n                  </Box>\n                )}\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n    </Container>\n  );\n};\n\nexport default MySubscription;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\NotFound.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":107,"column":29,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2942,3034],"text":"\n                The page you&apos;re looking for doesn't exist or has been moved.\n              "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2942,3034],"text":"\n                The page you&lsquo;re looking for doesn't exist or has been moved.\n              "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2942,3034],"text":"\n                The page you&#39;re looking for doesn't exist or has been moved.\n              "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2942,3034],"text":"\n                The page you&rsquo;re looking for doesn't exist or has been moved.\n              "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":107,"column":50,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2942,3034],"text":"\n                The page you're looking for doesn&apos;t exist or has been moved.\n              "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2942,3034],"text":"\n                The page you're looking for doesn&lsquo;t exist or has been moved.\n              "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2942,3034],"text":"\n                The page you're looking for doesn&#39;t exist or has been moved.\n              "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2942,3034],"text":"\n                The page you're looking for doesn&rsquo;t exist or has been moved.\n              "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n  Box,\n  Container,\n  Card,\n  CardContent,\n  Typography,\n  Button,\n  Stack,\n} from '@mui/material';\nimport { SearchOff, Home, ArrowBack } from '@mui/icons-material';\n\nexport const NotFound: React.FC = () => {\n  const navigate = useNavigate();\n\n  const handleGoHome = () => {\n    navigate('/dashboard');\n  };\n\n  const handleGoBack = () => {\n    navigate(-1);\n  };\n\n  return (\n    <Box\n      sx={{\n        minHeight: '100vh',\n        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n        display: 'flex',\n        alignItems: 'center',\n        py: 4,\n      }}\n    >\n      <Container maxWidth=\"sm\">\n        <Card sx={{ maxWidth: 500, mx: 'auto' }}>\n          <CardContent sx={{ p: 4 }}>\n            <Stack spacing={3} alignItems=\"center\">\n              {/* Performile Logo */}\n              <Box\n                sx={{\n                  mb: 2,\n                  display: 'flex',\n                  justifyContent: 'center',\n                  alignItems: 'center',\n                }}\n              >\n                <img\n                  src=\"/Performile-lastmile performance index.ico\"\n                  alt=\"Performile Logo\"\n                  style={{\n                    width: '64px',\n                    height: '64px',\n                    objectFit: 'contain',\n                  }}\n                />\n              </Box>\n\n              {/* 404 Icon - Magnifying Glass */}\n              <Box\n                sx={{\n                  width: 120,\n                  height: 120,\n                  borderRadius: 3,\n                  background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                }}\n              >\n                <SearchOff sx={{ fontSize: 60, color: 'white' }} />\n              </Box>\n\n              {/* 404 Text */}\n              <Typography\n                variant=\"h1\"\n                component=\"h1\"\n                fontWeight=\"bold\"\n                sx={{\n                  background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n                  WebkitBackgroundClip: 'text',\n                  WebkitTextFillColor: 'transparent',\n                  fontSize: { xs: '4rem', sm: '6rem' },\n                }}\n              >\n                404\n              </Typography>\n\n              {/* Title */}\n              <Typography\n                variant=\"h4\"\n                component=\"h2\"\n                textAlign=\"center\"\n                fontWeight=\"bold\"\n                color=\"text.primary\"\n              >\n                Page Not Found\n              </Typography>\n\n              {/* Message */}\n              <Typography\n                variant=\"body1\"\n                textAlign=\"center\"\n                color=\"text.secondary\"\n                sx={{ px: 2 }}\n              >\n                The page you're looking for doesn't exist or has been moved.\n              </Typography>\n\n              {/* Actions */}\n              <Stack\n                direction={{ xs: 'column', sm: 'row' }}\n                spacing={2}\n                sx={{ width: '100%', mt: 2 }}\n              >\n                <Button\n                  variant=\"contained\"\n                  size=\"large\"\n                  fullWidth\n                  startIcon={<Home />}\n                  onClick={handleGoHome}\n                  sx={{\n                    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n                    '&:hover': {\n                      background: 'linear-gradient(135deg, #5568d3 0%, #653a8b 100%)',\n                    },\n                  }}\n                >\n                  Go Home\n                </Button>\n\n                <Button\n                  variant=\"outlined\"\n                  size=\"large\"\n                  fullWidth\n                  startIcon={<ArrowBack />}\n                  onClick={handleGoBack}\n                  sx={{\n                    borderColor: '#667eea',\n                    color: '#667eea',\n                    '&:hover': {\n                      borderColor: '#5568d3',\n                      backgroundColor: 'rgba(102, 126, 234, 0.04)',\n                    },\n                  }}\n                >\n                  Go Back\n                </Button>\n              </Stack>\n\n              {/* Help Text */}\n              <Box\n                sx={{\n                  mt: 2,\n                  p: 2,\n                  backgroundColor: 'rgba(102, 126, 234, 0.08)',\n                  borderRadius: 2,\n                  width: '100%',\n                }}\n              >\n                <Typography variant=\"body2\" color=\"text.secondary\" textAlign=\"center\">\n                  If you believe this is an error, please contact support.\n                </Typography>\n              </Box>\n            </Stack>\n          </CardContent>\n        </Card>\n      </Container>\n    </Box>\n  );\n};\n\nexport default NotFound;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\Orders.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'keepPreviousData' is defined but never used.","line":45,"column":49,"nodeType":"Identifier","messageId":"unusedVar","endLine":45,"endColumn":65},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":251,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":251,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6887,6890],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6887,6890],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":267,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":267,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7472,7475],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7472,7475],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":282,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":282,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7939,7942],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7939,7942],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":767,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":767,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24685,24688],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24685,24688],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":783,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":783,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[25332,25335],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[25332,25335],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Box,\n  Card,\n  Typography,\n  Button,\n  TextField,\n  Grid,\n  Chip,\n  IconButton,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  TablePagination,\n  Skeleton,\n  Alert,\n  Fab,\n  Link,\n  Menu,\n  ListItemIcon,\n  ListItemText,\n  Checkbox,\n} from '@mui/material';\nimport {\n  Add,\n  Edit,\n  Delete,\n  Visibility,\n  MoreVert,\n  FileDownload,\n  ArrowUpward,\n  ArrowDownward,\n} from '@mui/icons-material';\nimport { useQuery, useMutation, useQueryClient, keepPreviousData } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport { toast } from 'react-hot-toast';\nimport { exportOrdersToCSV } from '@/utils/exportToCSV';\nimport { OrderFilters, OrderFilterValues } from '@/components/orders/OrderFilters';\nimport { BulkActionsBar } from '@/components/orders/BulkActionsBar';\nimport { CourierLogo } from '@/components/courier/CourierLogo';\nimport { OrderDetailsDrawer } from '@/components/orders/OrderDetailsDrawer';\nimport { PostalCodeInput } from '@/components/forms/PostalCodeInput';\n\ninterface Order {\n  order_id: string;\n  tracking_number: string;\n  order_number?: string;\n  store_name?: string;\n  courier_name?: string;\n  courier_code?: string; // Added for CourierLogo\n  consumer_email?: string;\n  order_status: 'pending' | 'confirmed' | 'picked_up' | 'in_transit' | 'delivered' | 'cancelled' | 'failed';\n  order_date: string;\n  delivery_date?: string;\n  estimated_delivery?: string;\n  level_of_service?: string;\n  type_of_delivery?: string;\n  postal_code?: string;\n  city?: string;\n  country?: string;\n  created_at: string;\n  updated_at: string;\n}\n\ninterface OrderFormData {\n  tracking_number: string;\n  order_number: string;\n  store_id: string;\n  courier_id: string;\n  consumer_id?: string;\n  order_status: string;\n  level_of_service: string;\n  type_of_delivery: string;\n  postal_code: string;\n  city: string;\n  country: string;\n  estimated_delivery?: string;\n}\n\nconst statusColors = {\n  pending: '#ff9800',\n  confirmed: '#2196f3',\n  picked_up: '#9c27b0',\n  in_transit: '#ff5722',\n  delivered: '#4caf50',\n  cancelled: '#f44336',\n  failed: '#795548',\n};\n\nconst statusLabels = {\n  pending: 'Pending',\n  confirmed: 'Confirmed',\n  picked_up: 'Picked Up',\n  in_transit: 'In Transit',\n  delivered: 'Delivered',\n  cancelled: 'Cancelled',\n  failed: 'Failed',\n};\n\nconst Orders: React.FC = () => {\n  const queryClient = useQueryClient();\n  \n  // State management\n  const [page, setPage] = useState(0);\n  const [rowsPerPage, setRowsPerPage] = useState(10);\n  const [sortBy, setSortBy] = useState<string>('created_at');\n  const [sortOrder, setSortOrder] = useState<'asc' | 'desc'>('desc');\n  const [openDialog, setOpenDialog] = useState(false);\n  const [editingOrder, setEditingOrder] = useState<Order | null>(null);\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n  const [selectedOrder, setSelectedOrder] = useState<Order | null>(null);\n  \n  // Advanced filters state\n  const [filters, setFilters] = useState<OrderFilterValues>({\n    search: '',\n    statuses: [],\n    couriers: [],\n    stores: [],\n    countries: [],\n    dateFrom: null,\n    dateTo: null,\n  });\n\n  // Bulk selection state\n  const [selectedOrders, setSelectedOrders] = useState<Set<string>>(new Set());\n\n  // Quick view drawer state\n  const [drawerOpen, setDrawerOpen] = useState(false);\n  const [drawerOrder, setDrawerOrder] = useState<Order | null>(null);\n\n  // Form state\n  const [formData, setFormData] = useState<OrderFormData>({\n    tracking_number: '',\n    order_number: '',\n    store_id: '',\n    courier_id: '',\n    consumer_id: '',\n    order_status: 'pending',\n    level_of_service: '',\n    type_of_delivery: '',\n    postal_code: '',\n    city: '',\n    country: '',\n    estimated_delivery: '',\n  });\n\n  // Fetch orders\n  const { data: ordersData, isLoading, error, refetch } = useQuery({\n    queryKey: ['orders_v2', page, rowsPerPage, filters, sortBy, sortOrder], // Changed key to force cache clear\n    queryFn: async () => {\n      const params = new URLSearchParams({\n        page: (page + 1).toString(),\n        limit: rowsPerPage.toString(),\n        ...(filters.search && { search: filters.search }),\n        sort_by: sortBy,\n        sort_order: sortOrder,\n        _t: Date.now().toString(), // Cache buster\n      });\n\n      // Add status filters\n      filters.statuses.forEach(status => {\n        params.append('status[]', status);\n      });\n\n      // Add courier filters\n      filters.couriers.forEach(courier => {\n        params.append('courier_id[]', courier);\n      });\n\n      // Add store filters\n      filters.stores.forEach(store => {\n        params.append('store_id[]', store);\n      });\n\n      // Add country filters\n      filters.countries.forEach(country => {\n        params.append('country[]', country);\n      });\n\n      // Add date filters\n      if (filters.dateFrom) {\n        params.append('date_from', filters.dateFrom.toISOString().split('T')[0]);\n      }\n      if (filters.dateTo) {\n        params.append('date_to', filters.dateTo.toISOString().split('T')[0]);\n      }\n\n      const response = await apiClient.get(`/orders?${params}`);\n      return response.data.orders || [];\n    },\n    staleTime: 0, // Disable stale time to force fresh data\n    gcTime: 0, // Disable cache completely (replaces cacheTime in v5)\n  });\n\n  const orders = ordersData || [];\n\n  // Get unique countries from orders for filter\n  const uniqueCountries = Array.from(new Set(orders.map((order: Order) => order.country).filter(Boolean))) as string[];\n\n  // Handle column sort\n  const handleSort = (column: string) => {\n    if (sortBy === column) {\n      // Toggle sort order\n      setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc');\n    } else {\n      // New column, default to descending\n      setSortBy(column);\n      setSortOrder('desc');\n    }\n  };\n\n  // Fetch stores and couriers for form dropdowns\n  const { data: stores = [] } = useQuery({\n    queryKey: ['stores'],\n    queryFn: async () => {\n      const response = await apiClient.get('/stores');\n      return response.data.data || response.data.stores || [];\n    }\n  });\n\n  const { data: couriers = [] } = useQuery({\n    queryKey: ['couriers'],\n    queryFn: async () => {\n      const response = await apiClient.get('/couriers');\n      return response.data.data || response.data.couriers || [];\n    }\n  });\n\n  // Create order mutation\n  const createOrderMutation = useMutation({\n    mutationFn: async (orderData: OrderFormData) => {\n      const response = await apiClient.post('/orders', orderData);\n      return response.data;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['orders'] });\n      toast.success('Order created successfully');\n      handleCloseDialog();\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || 'Failed to create order');\n    },\n  });\n\n  // Update order mutation\n  const updateOrderMutation = useMutation({\n    mutationFn: async ({ orderId, orderData }: { orderId: string; orderData: Partial<OrderFormData> }) => {\n      const response = await apiClient.put(`/orders/${orderId}`, orderData);\n      return response.data;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['orders'] });\n      toast.success('Order updated successfully');\n      handleCloseDialog();\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || 'Failed to update order');\n    },\n  });\n\n  // Delete order mutation\n  const deleteOrderMutation = useMutation({\n    mutationFn: async (orderId: string) => {\n      await apiClient.delete(`/orders/${orderId}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['orders'] });\n      toast.success('Order deleted successfully');\n      setAnchorEl(null);\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || 'Failed to delete order');\n    },\n  });\n\n  // Event handlers\n  const handleOpenDialog = (order?: Order) => {\n    if (order) {\n      setEditingOrder(order);\n      setFormData({\n        tracking_number: order.tracking_number,\n        order_number: order.order_number || '',\n        store_id: '', // Will need to fetch from API\n        courier_id: '', // Will need to fetch from API\n        consumer_id: '',\n        order_status: order.order_status,\n        level_of_service: order.level_of_service || '',\n        type_of_delivery: order.type_of_delivery || '',\n        postal_code: order.postal_code || '',\n        city: order.city || '',\n        country: order.country || '',\n        estimated_delivery: order.estimated_delivery || '',\n      });\n    } else {\n      setEditingOrder(null);\n      setFormData({\n        tracking_number: '',\n        order_number: '',\n        store_id: '',\n        courier_id: '',\n        consumer_id: '',\n        order_status: 'pending',\n        level_of_service: '',\n        type_of_delivery: '',\n        postal_code: '',\n        city: '',\n        country: '',\n        estimated_delivery: '',\n      });\n    }\n    setOpenDialog(true);\n  };\n\n  const handleCloseDialog = () => {\n    setOpenDialog(false);\n    setEditingOrder(null);\n  };\n\n  const handleSubmit = () => {\n    if (editingOrder) {\n      updateOrderMutation.mutate({\n        orderId: editingOrder.order_id,\n        orderData: formData,\n      });\n    } else {\n      createOrderMutation.mutate(formData);\n    }\n  };\n\n  const handleMenuClick = (event: React.MouseEvent<HTMLElement>, order: Order) => {\n    setAnchorEl(event.currentTarget);\n    setSelectedOrder(order);\n  };\n\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n    setSelectedOrder(null);\n  };\n\n  const handleDelete = () => {\n    if (selectedOrder) {\n      deleteOrderMutation.mutate(selectedOrder.order_id);\n    }\n  };\n\n  const handleExport = () => {\n    try {\n      if (!orders || orders.length === 0) {\n        toast.error('No orders to export');\n        return;\n      }\n      \n      // Export current filtered/searched orders\n      exportOrdersToCSV(orders);\n      toast.success(`Exported ${orders.length} orders successfully`);\n    } catch (error) {\n      toast.error('Failed to export orders');\n    }\n  };\n\n  // Bulk selection handlers\n  const handleSelectAll = (event: React.ChangeEvent<HTMLInputElement>) => {\n    if (event.target.checked) {\n      const allOrderIds = new Set<string>(orders.map((order: Order) => order.order_id));\n      setSelectedOrders(allOrderIds);\n    } else {\n      setSelectedOrders(new Set<string>());\n    }\n  };\n\n  const handleSelectOne = (orderId: string) => {\n    const newSelected = new Set(selectedOrders);\n    if (newSelected.has(orderId)) {\n      newSelected.delete(orderId);\n    } else {\n      newSelected.add(orderId);\n    }\n    setSelectedOrders(newSelected);\n  };\n\n  const handleBulkUpdateStatus = async (status: string) => {\n    try {\n      const orderIds = Array.from(selectedOrders);\n      await apiClient.post('/orders/bulk-update', {\n        order_ids: orderIds,\n        status: status,\n      });\n      toast.success(`Updated ${orderIds.length} orders to ${status}`);\n      setSelectedOrders(new Set());\n      refetch();\n    } catch (error) {\n      toast.error('Failed to update orders');\n    }\n  };\n\n  const handleBulkExport = () => {\n    const selectedOrdersData = orders.filter((order: Order) => \n      selectedOrders.has(order.order_id)\n    );\n    exportOrdersToCSV(selectedOrdersData);\n    toast.success(`Exported ${selectedOrdersData.length} orders`);\n  };\n\n  const handleBulkDelete = async () => {\n    try {\n      const orderIds = Array.from(selectedOrders);\n      await apiClient.post('/orders/bulk-delete', {\n        order_ids: orderIds,\n      });\n      toast.success(`Deleted ${orderIds.length} orders`);\n      setSelectedOrders(new Set());\n      refetch();\n    } catch (error) {\n      toast.error('Failed to delete orders');\n    }\n  };\n\n  // Loading skeleton\n  if (isLoading) {\n    return (\n      <Box sx={{ p: 3 }}>\n        <Skeleton variant=\"text\" width={200} height={40} sx={{ mb: 2 }} />\n        <Grid container spacing={2} sx={{ mb: 3 }}>\n          {[...Array(3)].map((_, i) => (\n            <Grid item xs={12} md={4} key={i}>\n              <Skeleton variant=\"rectangular\" height={100} />\n            </Grid>\n          ))}\n        </Grid>\n        <Skeleton variant=\"rectangular\" height={400} />\n      </Box>\n    );\n  }\n\n  if (error) {\n    return (\n      <Box sx={{ p: 3 }}>\n        <Alert severity=\"error\" sx={{ mb: 2 }}>\n          Failed to load orders. Please try again.\n        </Alert>\n        <Button variant=\"contained\" onClick={() => refetch()}>\n          Retry\n        </Button>\n      </Box>\n    );\n  }\n\n  return (\n    <Box sx={{ p: 3 }}>\n      {/* Header */}\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n        <Typography variant=\"h4\" component=\"h1\" sx={{ fontWeight: 'bold' }}>\n          Orders Management\n        </Typography>\n        <Box sx={{ display: 'flex', gap: 1 }}>\n          <Button\n            variant=\"outlined\"\n            startIcon={<FileDownload />}\n            onClick={handleExport}\n          >\n            Export\n          </Button>\n          <Button\n            variant=\"contained\"\n            startIcon={<Add />}\n            onClick={() => handleOpenDialog()}\n          >\n            New Order\n          </Button>\n        </Box>\n      </Box>\n\n      {/* Advanced Filters */}\n      <OrderFilters\n        filters={filters}\n        onFilterChange={setFilters}\n        couriers={couriers}\n        stores={stores}\n        countries={uniqueCountries}\n      />\n\n      {/* Orders Table */}\n      <Card>\n        <TableContainer>\n          <Table>\n            <TableHead>\n              <TableRow>\n                <TableCell padding=\"checkbox\">\n                  <Checkbox\n                    indeterminate={selectedOrders.size > 0 && selectedOrders.size < orders.length}\n                    checked={orders.length > 0 && selectedOrders.size === orders.length}\n                    onChange={handleSelectAll}\n                  />\n                </TableCell>\n                <TableCell \n                  sx={{ cursor: 'pointer', userSelect: 'none' }}\n                  onClick={() => handleSort('tracking_number')}\n                >\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.5 }}>\n                    Tracking Number\n                    {sortBy === 'tracking_number' && (\n                      sortOrder === 'asc' ? <ArrowUpward fontSize=\"small\" /> : <ArrowDownward fontSize=\"small\" />\n                    )}\n                  </Box>\n                </TableCell>\n                <TableCell \n                  sx={{ cursor: 'pointer', userSelect: 'none' }}\n                  onClick={() => handleSort('order_number')}\n                >\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.5 }}>\n                    Order Number\n                    {sortBy === 'order_number' && (\n                      sortOrder === 'asc' ? <ArrowUpward fontSize=\"small\" /> : <ArrowDownward fontSize=\"small\" />\n                    )}\n                  </Box>\n                </TableCell>\n                <TableCell \n                  sx={{ cursor: 'pointer', userSelect: 'none' }}\n                  onClick={() => handleSort('store_name')}\n                >\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.5 }}>\n                    Store\n                    {sortBy === 'store_name' && (\n                      sortOrder === 'asc' ? <ArrowUpward fontSize=\"small\" /> : <ArrowDownward fontSize=\"small\" />\n                    )}\n                  </Box>\n                </TableCell>\n                <TableCell \n                  sx={{ cursor: 'pointer', userSelect: 'none' }}\n                  onClick={() => handleSort('courier_name')}\n                >\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.5 }}>\n                    Courier\n                    {sortBy === 'courier_name' && (\n                      sortOrder === 'asc' ? <ArrowUpward fontSize=\"small\" /> : <ArrowDownward fontSize=\"small\" />\n                    )}\n                  </Box>\n                </TableCell>\n                <TableCell \n                  sx={{ cursor: 'pointer', userSelect: 'none' }}\n                  onClick={() => handleSort('order_status')}\n                >\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.5 }}>\n                    Status\n                    {sortBy === 'order_status' && (\n                      sortOrder === 'asc' ? <ArrowUpward fontSize=\"small\" /> : <ArrowDownward fontSize=\"small\" />\n                    )}\n                  </Box>\n                </TableCell>\n                <TableCell \n                  sx={{ cursor: 'pointer', userSelect: 'none' }}\n                  onClick={() => handleSort('order_date')}\n                >\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.5 }}>\n                    Order Date\n                    {sortBy === 'order_date' && (\n                      sortOrder === 'asc' ? <ArrowUpward fontSize=\"small\" /> : <ArrowDownward fontSize=\"small\" />\n                    )}\n                  </Box>\n                </TableCell>\n                <TableCell \n                  sx={{ cursor: 'pointer', userSelect: 'none' }}\n                  onClick={() => handleSort('delivery_date')}\n                >\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.5 }}>\n                    Delivery Date\n                    {sortBy === 'delivery_date' && (\n                      sortOrder === 'asc' ? <ArrowUpward fontSize=\"small\" /> : <ArrowDownward fontSize=\"small\" />\n                    )}\n                  </Box>\n                </TableCell>\n                <TableCell>Location</TableCell>\n                <TableCell align=\"right\">Actions</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {orders.map((order: Order) => (\n                <TableRow \n                  key={order.order_id} \n                  hover\n                  selected={selectedOrders.has(order.order_id)}\n                >\n                  <TableCell padding=\"checkbox\">\n                    <Checkbox\n                      checked={selectedOrders.has(order.order_id)}\n                      onChange={() => handleSelectOne(order.order_id)}\n                    />\n                  </TableCell>\n                  <TableCell>\n                    {order.tracking_number ? (\n                      <Link\n                        href={`/track/${order.tracking_number}`}\n                        sx={{\n                          fontFamily: 'monospace',\n                          textDecoration: 'none',\n                          color: 'primary.main',\n                          '&:hover': {\n                            textDecoration: 'underline',\n                          },\n                        }}\n                      >\n                        {order.tracking_number}\n                      </Link>\n                    ) : (\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        -\n                      </Typography>\n                    )}\n                  </TableCell>\n                  <TableCell>{order.order_number || '-'}</TableCell>\n                  <TableCell>{order.store_name || '-'}</TableCell>\n                  <TableCell>\n                    {order.courier_name ? (\n                      <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                        <CourierLogo\n                          courierCode={order.courier_code || order.courier_name}\n                          courierName={order.courier_name}\n                          size=\"small\"\n                          variant=\"rounded\"\n                          showName={false}\n                        />\n                        <Typography variant=\"body2\" noWrap>\n                          {order.courier_name}\n                        </Typography>\n                      </Box>\n                    ) : (\n                      '-'\n                    )}\n                  </TableCell>\n                  <TableCell>\n                    <Chip\n                      label={statusLabels[order.order_status]}\n                      sx={{\n                        backgroundColor: statusColors[order.order_status],\n                        color: 'white',\n                        fontWeight: 'bold',\n                      }}\n                      size=\"small\"\n                    />\n                  </TableCell>\n                  <TableCell>\n                    {new Date(order.order_date).toLocaleDateString()}\n                  </TableCell>\n                  <TableCell>\n                    {order.delivery_date\n                      ? new Date(order.delivery_date).toLocaleDateString()\n                      : '-'}\n                  </TableCell>\n                  <TableCell>\n                    {order.city && order.country\n                      ? `${order.city}, ${order.country}`\n                      : order.postal_code || '-'}\n                  </TableCell>\n                  <TableCell align=\"right\">\n                    <IconButton\n                      onClick={() => {\n                        setDrawerOrder(order);\n                        setDrawerOpen(true);\n                      }}\n                      size=\"small\"\n                      title=\"Quick View\"\n                    >\n                      <Visibility />\n                    </IconButton>\n                    <IconButton\n                      onClick={(e) => handleMenuClick(e, order)}\n                      size=\"small\"\n                    >\n                      <MoreVert />\n                    </IconButton>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </TableContainer>\n        \n        <TablePagination\n          rowsPerPageOptions={[5, 10, 25, 50]}\n          component=\"div\"\n          count={orders.length}\n          rowsPerPage={rowsPerPage}\n          page={page}\n          onPageChange={(_, newPage) => setPage(newPage)}\n          onRowsPerPageChange={(e) => {\n            setRowsPerPage(parseInt(e.target.value, 10));\n            setPage(0);\n          }}\n        />\n      </Card>\n\n      {/* Context Menu */}\n      <Menu\n        anchorEl={anchorEl}\n        open={Boolean(anchorEl)}\n        onClose={handleMenuClose}\n      >\n        <MenuItem onClick={() => {\n          if (selectedOrder) handleOpenDialog(selectedOrder);\n          handleMenuClose();\n        }}>\n          <ListItemIcon>\n            <Edit fontSize=\"small\" />\n          </ListItemIcon>\n          <ListItemText>Edit</ListItemText>\n        </MenuItem>\n        <MenuItem onClick={() => {\n          // Handle view details\n          handleMenuClose();\n        }}>\n          <ListItemIcon>\n            <Visibility fontSize=\"small\" />\n          </ListItemIcon>\n          <ListItemText>View Details</ListItemText>\n        </MenuItem>\n        <MenuItem onClick={handleDelete} sx={{ color: 'error.main' }}>\n          <ListItemIcon>\n            <Delete fontSize=\"small\" color=\"error\" />\n          </ListItemIcon>\n          <ListItemText>Delete</ListItemText>\n        </MenuItem>\n      </Menu>\n\n      {/* Create/Edit Dialog */}\n      <Dialog open={openDialog} onClose={handleCloseDialog} maxWidth=\"md\" fullWidth>\n        <DialogTitle>\n          {editingOrder ? 'Edit Order' : 'Create New Order'}\n        </DialogTitle>\n        <DialogContent>\n          <Grid container spacing={2} sx={{ mt: 1 }}>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Tracking Number\"\n                value={formData.tracking_number}\n                onChange={(e) => setFormData({ ...formData, tracking_number: e.target.value })}\n                required\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Order Number\"\n                value={formData.order_number}\n                onChange={(e) => setFormData({ ...formData, order_number: e.target.value })}\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <FormControl fullWidth required>\n                <InputLabel>Store</InputLabel>\n                <Select\n                  value={formData.store_id}\n                  label=\"Store\"\n                  onChange={(e) => setFormData({ ...formData, store_id: e.target.value })}\n                >\n                  {stores.map((store: any) => (\n                    <MenuItem key={store.store_id} value={store.store_id}>\n                      {store.store_name}\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <FormControl fullWidth required>\n                <InputLabel>Courier</InputLabel>\n                <Select\n                  value={formData.courier_id}\n                  label=\"Courier\"\n                  onChange={(e) => setFormData({ ...formData, courier_id: e.target.value })}\n                >\n                  {couriers.map((courier: any) => (\n                    <MenuItem key={courier.courier_id} value={courier.courier_id}>\n                      <Box sx={{ display: 'flex', alignItems: 'center', gap: 1.5 }}>\n                        <CourierLogo\n                          courierCode={courier.courier_code || courier.courier_name}\n                          courierName={courier.courier_name}\n                          size=\"small\"\n                          variant=\"rounded\"\n                          showName={false}\n                        />\n                        <Typography>{courier.courier_name}</Typography>\n                      </Box>\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <FormControl fullWidth>\n                <InputLabel>Status</InputLabel>\n                <Select\n                  value={formData.order_status}\n                  label=\"Status\"\n                  onChange={(e) => setFormData({ ...formData, order_status: e.target.value })}\n                >\n                  <MenuItem value=\"pending\">Pending</MenuItem>\n                  <MenuItem value=\"confirmed\">Confirmed</MenuItem>\n                  <MenuItem value=\"picked_up\">Picked Up</MenuItem>\n                  <MenuItem value=\"in_transit\">In Transit</MenuItem>\n                  <MenuItem value=\"delivered\">Delivered</MenuItem>\n                  <MenuItem value=\"cancelled\">Cancelled</MenuItem>\n                  <MenuItem value=\"failed\">Failed</MenuItem>\n                </Select>\n              </FormControl>\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Level of Service\"\n                value={formData.level_of_service}\n                onChange={(e) => setFormData({ ...formData, level_of_service: e.target.value })}\n              />\n            </Grid>\n            <Grid item xs={12} md={4}>\n              <PostalCodeInput\n                value={formData.postal_code}\n                onChange={(value) => setFormData({ ...formData, postal_code: value })}\n                onCityDetected={(city) => setFormData({ ...formData, city })}\n                country={formData.country || 'SE'}\n                label=\"Postal Code\"\n                required\n              />\n            </Grid>\n            <Grid item xs={12} md={4}>\n              <TextField\n                fullWidth\n                label=\"City\"\n                value={formData.city}\n                onChange={(e) => setFormData({ ...formData, city: e.target.value })}\n                helperText=\"Auto-filled from postal code\"\n              />\n            </Grid>\n            <Grid item xs={12} md={4}>\n              <TextField\n                fullWidth\n                label=\"Country\"\n                value={formData.country}\n                onChange={(e) => setFormData({ ...formData, country: e.target.value })}\n                placeholder=\"SE, NO, DK, FI\"\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <TextField\n                fullWidth\n                label=\"Estimated Delivery\"\n                type=\"datetime-local\"\n                value={formData.estimated_delivery}\n                onChange={(e) => setFormData({ ...formData, estimated_delivery: e.target.value })}\n                InputLabelProps={{ shrink: true }}\n              />\n            </Grid>\n          </Grid>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleCloseDialog}>Cancel</Button>\n          <Button\n            onClick={handleSubmit}\n            variant=\"contained\"\n            disabled={createOrderMutation.isPending || updateOrderMutation.isPending}\n          >\n            {editingOrder ? 'Update' : 'Create'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* Floating Action Button for mobile */}\n      <Fab\n        color=\"primary\"\n        aria-label=\"add order\"\n        sx={{\n          position: 'fixed',\n          bottom: 16,\n          right: 16,\n          display: { xs: 'flex', md: 'none' },\n        }}\n        onClick={() => handleOpenDialog()}\n      >\n        <Add />\n      </Fab>\n\n      {/* Bulk Actions Bar */}\n      <BulkActionsBar\n        selectedCount={selectedOrders.size}\n        onUpdateStatus={handleBulkUpdateStatus}\n        onExport={handleBulkExport}\n        onDelete={handleBulkDelete}\n        onClear={() => setSelectedOrders(new Set())}\n      />\n\n      {/* Quick View Drawer */}\n      <OrderDetailsDrawer\n        open={drawerOpen}\n        order={drawerOrder}\n        onClose={() => {\n          setDrawerOpen(false);\n          setDrawerOrder(null);\n        }}\n        // Removed onViewFull - no separate order details page exists\n        // All order information is shown in the drawer\n      />\n    </Box>\n  );\n};\n\nexport default Orders;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\Pricing.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":42,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[914,917],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[914,917],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fallbackPlans'. Either include it or remove the dependency array.","line":74,"column":6,"nodeType":"ArrayExpression","endLine":74,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [fallbackPlans]","fix":{"range":[1827,1829],"text":"[fallbackPlans]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":132,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":132,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3267,3270],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3267,3270],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":199,"column":16,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[5874,5916],"text":"\n              I&apos;m a Merchant\n            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[5874,5916],"text":"\n              I&lsquo;m a Merchant\n            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[5874,5916],"text":"\n              I&#39;m a Merchant\n            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[5874,5916],"text":"\n              I&rsquo;m a Merchant\n            "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":208,"column":16,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[6201,6242],"text":"\n              I&apos;m a Courier\n            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[6201,6242],"text":"\n              I&lsquo;m a Courier\n            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[6201,6242],"text":"\n              I&#39;m a Courier\n            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[6201,6242],"text":"\n              I&rsquo;m a Courier\n            "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  Container,\n  Typography,\n  Card,\n  CardContent,\n  Button,\n  Grid,\n  Switch,\n  FormControlLabel,\n  Chip,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Divider,\n  CircularProgress,\n} from '@mui/material';\nimport {\n  CheckCircle as CheckIcon,\n  TrendingUp as TrendingUpIcon,\n  Store as StoreIcon,\n  LocalShipping as ShippingIcon,\n} from '@mui/icons-material';\nimport { useNavigate } from 'react-router-dom';\nimport { apiClient } from '@/services/apiClient';\nimport { useAuthStore } from '@/store/authStore';\n\ninterface PricingPlan {\n  plan_id: string;\n  plan_name: string;\n  user_role: 'merchant' | 'courier';\n  price_monthly: number;\n  price_yearly: number;\n  features_json: {\n    analytics?: boolean;\n    marketplace?: boolean;\n    integrations?: number;\n    custom_branding?: boolean;\n    priority_support?: boolean;\n    [key: string]: any;\n  };\n  is_active: boolean;\n}\n\nconst Pricing: React.FC = () => {\n  const navigate = useNavigate();\n  const { user } = useAuthStore();\n  const [isAnnual, setIsAnnual] = useState(false);\n  const [selectedRole, setSelectedRole] = useState<'merchant' | 'courier'>('merchant');\n  const [plans, setPlans] = useState<PricingPlan[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  // Fetch plans from API\n  useEffect(() => {\n    const fetchPlans = async () => {\n      try {\n        setLoading(true);\n        const response = await apiClient.get('/api/subscriptions/plans');\n        if (response.data.success) {\n          setPlans(response.data.data);\n        }\n      } catch (error) {\n        console.error('Error fetching plans:', error);\n        // Fallback to hardcoded plans if API fails\n        setPlans(fallbackPlans);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchPlans();\n  }, []);\n\n  // Fallback plans in case API fails\n  const fallbackPlans: PricingPlan[] = [\n    {\n      plan_id: '5b11cb84-ad36-440c-a427-5c91cb675e54',\n      plan_name: 'Basic Merchant',\n      user_role: 'merchant',\n      price_monthly: 29.99,\n      price_yearly: 299.99,\n      features_json: {\n        analytics: true,\n        integrations: 3,\n      },\n      is_active: true,\n    },\n    {\n      plan_id: 'bd63a4f5-3a5c-4bcf-b962-da880b649b02',\n      plan_name: 'Pro Merchant',\n      user_role: 'merchant',\n      price_monthly: 79.99,\n      price_yearly: 799.99,\n      features_json: {\n        analytics: true,\n        integrations: 10,\n        custom_branding: true,\n      },\n      is_active: true,\n    },\n    {\n      plan_id: 'c20d6a21-507a-4674-aa29-a0f7e3cda5fe',\n      plan_name: 'Basic Courier',\n      user_role: 'courier',\n      price_monthly: 19.99,\n      price_yearly: 199.99,\n      features_json: {\n        analytics: true,\n        marketplace: true,\n      },\n      is_active: true,\n    },\n    {\n      plan_id: '972d92eb-53b4-4015-98db-5d280eeea51b',\n      plan_name: 'Pro Courier',\n      user_role: 'courier',\n      price_monthly: 49.99,\n      price_yearly: 499.99,\n      features_json: {\n        analytics: true,\n        marketplace: true,\n        priority_support: true,\n      },\n      is_active: true,\n    },\n  ];\n\n  const filteredPlans = plans.filter(plan => plan.user_role === selectedRole);\n\n  const getFeaturesList = (features: any, role: string) => {\n    const featureList: string[] = [];\n\n    if (role === 'merchant') {\n      featureList.push('Order tracking & management');\n      featureList.push('Review collection automation');\n      if (features.analytics) featureList.push('Advanced analytics dashboard');\n      if (features.integrations) featureList.push(`${features.integrations} e-commerce integrations`);\n      if (features.custom_branding) featureList.push('Custom branding & white-label');\n      featureList.push('Email notifications');\n      if (features.integrations && features.integrations > 3) {\n        featureList.push('Priority email support');\n        featureList.push('API access');\n      }\n    } else {\n      featureList.push('TrustScore profile');\n      featureList.push('Performance analytics');\n      if (features.marketplace) featureList.push('Marketplace visibility');\n      if (features.analytics) featureList.push('Customer review insights');\n      if (features.priority_support) {\n        featureList.push('Priority support');\n        featureList.push('Featured listing');\n        featureList.push('API access');\n      }\n      featureList.push('Lead notifications');\n    }\n\n    return featureList;\n  };\n\n  const calculateSavings = (monthly: number, yearly: number) => {\n    const monthlyCost = monthly * 12;\n    const savings = monthlyCost - yearly;\n    const savingsPercent = Math.round((savings / monthlyCost) * 100);\n    return { savings, savingsPercent };\n  };\n\n  const handleSelectPlan = (plan: PricingPlan) => {\n    // If user is logged in, go to subscription page, otherwise register\n    if (user) {\n      navigate('/subscription/plans');\n    } else {\n      navigate(`/register?plan=${plan.plan_id}&role=${plan.user_role}`);\n    }\n  };\n\n  return (\n    <Box sx={{ bgcolor: 'background.default', minHeight: '100vh', py: 8 }}>\n      <Container maxWidth=\"lg\">\n        {/* Header */}\n        <Box sx={{ textAlign: 'center', mb: 6 }}>\n          <Typography variant=\"h2\" gutterBottom fontWeight=\"bold\">\n            Choose Your Plan\n          </Typography>\n          <Typography variant=\"h6\" color=\"text.secondary\" sx={{ mb: 4 }}>\n            Transparent pricing for merchants and couriers\n          </Typography>\n\n          {/* Role Selector */}\n          <Box sx={{ display: 'flex', justifyContent: 'center', gap: 2, mb: 3 }}>\n            <Button\n              variant={selectedRole === 'merchant' ? 'contained' : 'outlined'}\n              size=\"large\"\n              startIcon={<StoreIcon />}\n              onClick={() => setSelectedRole('merchant')}\n              sx={{ minWidth: 200 }}\n            >\n              I'm a Merchant\n            </Button>\n            <Button\n              variant={selectedRole === 'courier' ? 'contained' : 'outlined'}\n              size=\"large\"\n              startIcon={<ShippingIcon />}\n              onClick={() => setSelectedRole('courier')}\n              sx={{ minWidth: 200 }}\n            >\n              I'm a Courier\n            </Button>\n          </Box>\n\n          {/* Billing Toggle */}\n          <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', gap: 2 }}>\n            <Typography variant=\"body1\" color={!isAnnual ? 'primary' : 'text.secondary'}>\n              Monthly\n            </Typography>\n            <FormControlLabel\n              control={\n                <Switch\n                  checked={isAnnual}\n                  onChange={(e) => setIsAnnual(e.target.checked)}\n                  color=\"primary\"\n                />\n              }\n              label=\"\"\n            />\n            <Typography variant=\"body1\" color={isAnnual ? 'primary' : 'text.secondary'}>\n              Annual\n            </Typography>\n            {isAnnual && (\n              <Chip\n                label=\"Save up to 17%\"\n                color=\"success\"\n                size=\"small\"\n                icon={<TrendingUpIcon />}\n              />\n            )}\n          </Box>\n        </Box>\n\n        {/* Pricing Cards */}\n        {loading ? (\n          <Box sx={{ display: 'flex', justifyContent: 'center', my: 8 }}>\n            <CircularProgress size={60} />\n          </Box>\n        ) : (\n          <Grid container spacing={4} justifyContent=\"center\">\n            {filteredPlans.map((plan, index) => {\n            const isPopular = index === 1; // Pro plans are popular\n            const price = isAnnual ? plan.price_yearly : plan.price_monthly;\n            const billingPeriod = isAnnual ? 'year' : 'month';\n            const features = getFeaturesList(plan.features_json, plan.user_role);\n            const savings = isAnnual ? calculateSavings(plan.price_monthly, plan.price_yearly) : null;\n\n            return (\n              <Grid item xs={12} md={6} key={plan.plan_id}>\n                <Card\n                  sx={{\n                    height: '100%',\n                    display: 'flex',\n                    flexDirection: 'column',\n                    position: 'relative',\n                    border: isPopular ? 2 : 1,\n                    borderColor: isPopular ? 'primary.main' : 'divider',\n                    transform: isPopular ? 'scale(1.05)' : 'scale(1)',\n                    transition: 'transform 0.2s',\n                    '&:hover': {\n                      transform: isPopular ? 'scale(1.07)' : 'scale(1.02)',\n                      boxShadow: 6,\n                    },\n                  }}\n                >\n                  {isPopular && (\n                    <Chip\n                      label=\"Most Popular\"\n                      color=\"primary\"\n                      sx={{\n                        position: 'absolute',\n                        top: 16,\n                        right: 16,\n                      }}\n                    />\n                  )}\n\n                  <CardContent sx={{ flexGrow: 1, p: 4 }}>\n                    {/* Plan Name */}\n                    <Typography variant=\"h4\" gutterBottom fontWeight=\"bold\">\n                      {plan.plan_name}\n                    </Typography>\n\n                    {/* Price */}\n                    <Box sx={{ my: 3 }}>\n                      <Typography variant=\"h3\" component=\"span\" fontWeight=\"bold\" color=\"primary\">\n                        ${price}\n                      </Typography>\n                      <Typography variant=\"h6\" component=\"span\" color=\"text.secondary\">\n                        /{billingPeriod}\n                      </Typography>\n                      {savings && (\n                        <Typography variant=\"body2\" color=\"success.main\" sx={{ mt: 1 }}>\n                          Save ${savings.savings.toFixed(2)}/year ({savings.savingsPercent}% off)\n                        </Typography>\n                      )}\n                    </Box>\n\n                    <Divider sx={{ my: 3 }} />\n\n                    {/* Features List */}\n                    <List dense>\n                      {features.map((feature, idx) => (\n                        <ListItem key={idx} disableGutters>\n                          <ListItemIcon sx={{ minWidth: 36 }}>\n                            <CheckIcon color=\"success\" fontSize=\"small\" />\n                          </ListItemIcon>\n                          <ListItemText\n                            primary={feature}\n                            primaryTypographyProps={{\n                              variant: 'body2',\n                            }}\n                          />\n                        </ListItem>\n                      ))}\n                    </List>\n\n                    {/* CTA Button */}\n                    <Button\n                      variant={isPopular ? 'contained' : 'outlined'}\n                      size=\"large\"\n                      fullWidth\n                      onClick={() => handleSelectPlan(plan)}\n                      sx={{ mt: 3 }}\n                    >\n                      Get Started\n                    </Button>\n                  </CardContent>\n                </Card>\n              </Grid>\n            );\n          })}\n          </Grid>\n        )}\n\n        {/* FAQ / Additional Info */}\n        <Box sx={{ mt: 8, textAlign: 'center' }}>\n          <Typography variant=\"h5\" gutterBottom>\n            All plans include\n          </Typography>\n          <Grid container spacing={2} sx={{ mt: 2 }}>\n            <Grid item xs={12} md={4}>\n              <Typography variant=\"body1\"> 14-day free trial</Typography>\n            </Grid>\n            <Grid item xs={12} md={4}>\n              <Typography variant=\"body1\"> Cancel anytime</Typography>\n            </Grid>\n            <Grid item xs={12} md={4}>\n              <Typography variant=\"body1\"> No credit card required</Typography>\n            </Grid>\n          </Grid>\n\n          <Box sx={{ mt: 4 }}>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              Need a custom plan for your enterprise?{' '}\n              <Button variant=\"text\" onClick={() => navigate('/contact')}>\n                Contact us\n              </Button>\n            </Typography>\n          </Box>\n        </Box>\n      </Container>\n    </Box>\n  );\n};\n\nexport default Pricing;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\PublicReview.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchOrderInfo'. Either include it or remove the dependency array.","line":44,"column":6,"nodeType":"ArrayExpression","endLine":44,"endColumn":13,"suggestions":[{"desc":"Update the dependencies array to be: [fetchOrderInfo, token]","fix":{"range":[1095,1102],"text":"[fetchOrderInfo, token]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":60,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":60,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1609,1612],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1609,1612],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":96,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":96,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2498,2501],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2498,2501],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport {\n  Container,\n  Paper,\n  Typography,\n  Rating,\n  TextField,\n  Button,\n  Box,\n  Alert,\n  CircularProgress,\n  Chip,\n} from '@mui/material';\nimport { CheckCircle, Star } from '@mui/icons-material';\nimport axios from 'axios';\n\ninterface OrderInfo {\n  order_id: string;\n  order_number: string;\n  courier_name: string;\n  courier_id: string;\n  delivered_at: string;\n  customer_name: string;\n}\n\nexport const PublicReview: React.FC = () => {\n  const { token } = useParams<{ token: string }>();\n  const navigate = useNavigate();\n\n  const [loading, setLoading] = useState(true);\n  const [submitting, setSubmitting] = useState(false);\n  const [orderInfo, setOrderInfo] = useState<OrderInfo | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [submitted, setSubmitted] = useState(false);\n\n  const [rating, setRating] = useState<number>(5);\n  const [comment, setComment] = useState('');\n\n  useEffect(() => {\n    if (token) {\n      fetchOrderInfo();\n    }\n  }, [token]);\n\n  const fetchOrderInfo = async () => {\n    try {\n      const response = await axios.get(`/api/reviews/order-info/${token}`);\n      \n      if (response.data.success) {\n        setOrderInfo(response.data.order);\n        \n        // Check if already reviewed\n        if (response.data.order.review_submitted) {\n          setError('You have already submitted a review for this delivery.');\n        }\n      } else {\n        setError(response.data.message || 'Invalid review link');\n      }\n    } catch (err: any) {\n      console.error('Error fetching order info:', err);\n      setError(err.response?.data?.message || 'Failed to load order information');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!rating) {\n      setError('Please select a rating');\n      return;\n    }\n\n    setSubmitting(true);\n    setError(null);\n\n    try {\n      const response = await axios.post('/api/reviews/submit-public', {\n        review_token: token,\n        rating,\n        comment: comment.trim(),\n      });\n\n      if (response.data.success) {\n        setSubmitted(true);\n        \n        // Redirect to thank you page after 3 seconds\n        setTimeout(() => {\n          navigate('/');\n        }, 3000);\n      } else {\n        setError(response.data.message || 'Failed to submit review');\n      }\n    } catch (err: any) {\n      console.error('Error submitting review:', err);\n      setError(err.response?.data?.message || 'Failed to submit review');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <Container maxWidth=\"sm\" sx={{ mt: 8, textAlign: 'center' }}>\n        <CircularProgress />\n        <Typography variant=\"body1\" sx={{ mt: 2 }}>\n          Loading review form...\n        </Typography>\n      </Container>\n    );\n  }\n\n  if (submitted) {\n    return (\n      <Container maxWidth=\"sm\" sx={{ mt: 8 }}>\n        <Paper sx={{ p: 4, textAlign: 'center' }}>\n          <CheckCircle sx={{ fontSize: 80, color: 'success.main', mb: 2 }} />\n          <Typography variant=\"h4\" gutterBottom>\n            Thank You!\n          </Typography>\n          <Typography variant=\"body1\" color=\"text.secondary\" paragraph>\n            Your review has been submitted successfully.\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            Your feedback helps other customers make better delivery choices.\n          </Typography>\n          <Button\n            variant=\"contained\"\n            onClick={() => navigate('/')}\n            sx={{ mt: 3 }}\n          >\n            Back to Home\n          </Button>\n        </Paper>\n      </Container>\n    );\n  }\n\n  if (error && !orderInfo) {\n    return (\n      <Container maxWidth=\"sm\" sx={{ mt: 8 }}>\n        <Alert severity=\"error\">{error}</Alert>\n        <Button\n          variant=\"outlined\"\n          onClick={() => navigate('/')}\n          sx={{ mt: 2 }}\n        >\n          Back to Home\n        </Button>\n      </Container>\n    );\n  }\n\n  return (\n    <Container maxWidth=\"sm\" sx={{ mt: 8, mb: 8 }}>\n      <Paper sx={{ p: 4 }}>\n        <Box sx={{ textAlign: 'center', mb: 4 }}>\n          <Star sx={{ fontSize: 60, color: 'primary.main', mb: 2 }} />\n          <Typography variant=\"h4\" gutterBottom>\n            Rate Your Delivery\n          </Typography>\n          <Typography variant=\"body1\" color=\"text.secondary\">\n            How was your experience with {orderInfo?.courier_name}?\n          </Typography>\n        </Box>\n\n        {orderInfo && (\n          <Box sx={{ mb: 4, p: 2, bgcolor: 'grey.50', borderRadius: 1 }}>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              Order: <strong>#{orderInfo.order_number}</strong>\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              Courier: <strong>{orderInfo.courier_name}</strong>\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              Delivered: <strong>{new Date(orderInfo.delivered_at).toLocaleDateString()}</strong>\n            </Typography>\n          </Box>\n        )}\n\n        {error && (\n          <Alert severity=\"error\" sx={{ mb: 3 }}>\n            {error}\n          </Alert>\n        )}\n\n        <form onSubmit={handleSubmit}>\n          <Box sx={{ mb: 4, textAlign: 'center' }}>\n            <Typography variant=\"subtitle1\" gutterBottom>\n              Your Rating\n            </Typography>\n            <Rating\n              value={rating}\n              onChange={(_, newValue) => setRating(newValue || 0)}\n              size=\"large\"\n              sx={{ fontSize: '3rem' }}\n            />\n            <Box sx={{ mt: 1 }}>\n              {rating >= 4.5 && <Chip label=\"Excellent!\" color=\"success\" />}\n              {rating >= 3.5 && rating < 4.5 && <Chip label=\"Good\" color=\"primary\" />}\n              {rating >= 2.5 && rating < 3.5 && <Chip label=\"Average\" color=\"warning\" />}\n              {rating < 2.5 && rating > 0 && <Chip label=\"Needs Improvement\" color=\"error\" />}\n            </Box>\n          </Box>\n\n          <TextField\n            fullWidth\n            multiline\n            rows={4}\n            label=\"Your Review (Optional)\"\n            placeholder=\"Tell us about your delivery experience...\"\n            value={comment}\n            onChange={(e) => setComment(e.target.value)}\n            sx={{ mb: 3 }}\n          />\n\n          <Button\n            type=\"submit\"\n            variant=\"contained\"\n            fullWidth\n            size=\"large\"\n            disabled={submitting || !rating}\n            startIcon={submitting ? <CircularProgress size={20} /> : null}\n          >\n            {submitting ? 'Submitting...' : 'Submit Review'}\n          </Button>\n\n          <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: 'block', mt: 2, textAlign: 'center' }}>\n            Your review will be publicly visible and help other customers\n          </Typography>\n        </form>\n      </Paper>\n\n      <Box sx={{ mt: 3, textAlign: 'center' }}>\n        <Typography variant=\"body2\" color=\"text.secondary\">\n          Powered by <strong>Performile</strong> - Trusted Delivery Reviews\n        </Typography>\n      </Box>\n    </Container>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\ResetPassword.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\Settings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\SubscriptionCancel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\SubscriptionPlans.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is assigned a value but never used.","line":57,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":57,"endColumn":48},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":68,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":68,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2057,2060],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2057,2060],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":123,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":123,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3719,3722],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3719,3722],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Box,\n  Container,\n  Typography,\n  Card,\n  CardContent,\n  Button,\n  Grid,\n  Chip,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  CircularProgress,\n  Alert,\n  ToggleButtonGroup,\n  ToggleButton,\n} from '@mui/material';\nimport {\n  Check as CheckIcon,\n  Star as StarIcon,\n  TrendingUp as TrendingUpIcon,\n} from '@mui/icons-material';\nimport { useQuery } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport { useAuthStore } from '@/store/authStore';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'react-hot-toast';\nimport { PublicHeader } from '@/components/layout/PublicHeader';\n\ninterface SubscriptionPlan {\n  subscription_plan_id: number;\n  plan_id: number;\n  plan_name: string;\n  description: string;\n  plan_description: string;\n  monthly_price: number;\n  annual_price: number;\n  user_type: 'merchant' | 'courier';\n  features: string[];\n  is_popular?: boolean;\n  stripe_price_id_monthly?: string;\n  stripe_price_id_yearly?: string;\n}\n\nexport const SubscriptionPlans: React.FC = () => {\n  const { user } = useAuthStore();\n  const navigate = useNavigate();\n  const [billingCycle, setBillingCycle] = useState<'monthly' | 'yearly'>('monthly');\n  const [loadingPlanId, setLoadingPlanId] = useState<number | null>(null);\n  const [selectedUserType, setSelectedUserType] = useState<'merchant' | 'courier'>(\n    user?.user_role === 'courier' ? 'courier' : 'merchant'\n  );\n\n  // Fetch subscription plans from public API\n  const { data: plansResponse, isLoading, error } = useQuery({\n    queryKey: ['subscription-plans', selectedUserType],\n    queryFn: async () => {\n      try {\n        // Use public API endpoint (no auth required)\n        // If user is logged in, use their role, otherwise use selected type\n        const userType = user?.user_role || selectedUserType;\n        const response = await apiClient.get('/subscriptions/public', { \n          params: { user_type: userType } \n        });\n        return response.data;\n      } catch (error: any) {\n        console.error('Failed to fetch subscription plans:', error);\n        return { success: false, plans: [] };\n      }\n    },\n    retry: false, // Don't retry on failure\n  });\n\n  const plans = plansResponse?.plans || [];\n\n  const handleSelectPlan = async (plan: SubscriptionPlan) => {\n    if (!user) {\n      // Redirect to register with plan info\n      navigate('/register', { \n        state: { \n          selectedPlan: {\n            id: plan.subscription_plan_id,\n            name: plan.plan_name,\n            price: billingCycle === 'monthly' ? plan.monthly_price : plan.annual_price,\n            cycle: billingCycle,\n            user_type: plan.user_type\n          }\n        } \n      });\n      return;\n    }\n\n    setLoadingPlanId(plan.subscription_plan_id);\n\n    try {\n      // Create Stripe checkout session\n      const priceId = billingCycle === 'monthly' \n        ? plan.stripe_price_id_monthly \n        : plan.stripe_price_id_yearly;\n\n      if (!priceId) {\n        toast.error('Payment configuration not available for this plan');\n        setLoadingPlanId(null);\n        return;\n      }\n\n      const response = await apiClient.post('/payments/create-checkout-session', {\n        price_id: priceId,\n        plan_id: plan.subscription_plan_id,\n        success_url: `${window.location.origin}/subscription/success`,\n        cancel_url: `${window.location.origin}/subscription/cancel`,\n      });\n\n      // Redirect to Stripe Checkout\n      if (response.data.url) {\n        window.location.href = response.data.url;\n      } else {\n        toast.error('Failed to create checkout session');\n        setLoadingPlanId(null);\n      }\n    } catch (error: any) {\n      console.error('Checkout error:', error);\n      toast.error(error.response?.data?.message || 'Failed to start checkout');\n      setLoadingPlanId(null);\n    }\n  };\n\n  const getPrice = (plan: SubscriptionPlan) => {\n    return billingCycle === 'monthly' ? plan.monthly_price : plan.annual_price;\n  };\n\n  const getSavings = (plan: SubscriptionPlan) => {\n    const monthlyCost = plan.monthly_price * 12;\n    const yearlyCost = plan.annual_price;\n    const savings = monthlyCost - yearlyCost;\n    const percentage = Math.round((savings / monthlyCost) * 100);\n    return { amount: savings, percentage };\n  };\n\n  if (isLoading) {\n    return (\n      <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '60vh' }}>\n        <CircularProgress size={60} />\n      </Box>\n    );\n  }\n\n  return (\n    <Box sx={{ background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', minHeight: '100vh' }}>\n      {/* Public Header */}\n      <PublicHeader />\n      \n      <Container maxWidth=\"lg\" sx={{ py: 8 }}>\n        {/* Header */}\n        <Box sx={{ textAlign: 'center', mb: 6 }}>\n          <Typography variant=\"h3\" sx={{ color: 'white', fontWeight: 'bold', mb: 2 }}>\n            Choose Your Plan\n          </Typography>\n          <Typography variant=\"h6\" sx={{ color: 'rgba(255,255,255,0.9)', mb: 4 }}>\n            Start optimizing your delivery performance today\n          </Typography>\n\n          {/* User Type Toggle (only show if not logged in) */}\n          {!user && (\n            <Box sx={{ mb: 3 }}>\n              <ToggleButtonGroup\n                value={selectedUserType}\n                exclusive\n                onChange={(_, value) => value && setSelectedUserType(value)}\n                sx={{\n                  background: 'white',\n                  mb: 2,\n                  '& .MuiToggleButton-root': {\n                    px: 4,\n                    py: 1.5,\n                    border: 'none',\n                    '&.Mui-selected': {\n                      background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n                      color: 'white',\n                      '&:hover': {\n                        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n                      }\n                    }\n                  }\n                }}\n              >\n                <ToggleButton value=\"merchant\">\n                   Merchant Plans\n                </ToggleButton>\n                <ToggleButton value=\"courier\">\n                   Courier Plans\n                </ToggleButton>\n              </ToggleButtonGroup>\n            </Box>\n          )}\n\n          {/* Billing Cycle Toggle */}\n          <ToggleButtonGroup\n            value={billingCycle}\n            exclusive\n            onChange={(_, value) => value && setBillingCycle(value)}\n            sx={{\n              background: 'white',\n              '& .MuiToggleButton-root': {\n                px: 4,\n                py: 1.5,\n                border: 'none',\n                '&.Mui-selected': {\n                  background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n                  color: 'white',\n                  '&:hover': {\n                    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n                  }\n                }\n              }\n            }}\n          >\n            <ToggleButton value=\"monthly\">\n              Monthly\n            </ToggleButton>\n            <ToggleButton value=\"yearly\">\n              Yearly\n              <Chip \n                label=\"Save up to 20%\" \n                size=\"small\" \n                color=\"success\" \n                sx={{ ml: 1, height: 20 }}\n              />\n            </ToggleButton>\n          </ToggleButtonGroup>\n        </Box>\n\n        {/* Plans Grid */}\n        {plans && plans.length > 0 ? (\n          <Grid container spacing={4} justifyContent=\"center\" sx={{ mt: 4, pt: 2 }}>\n            {plans.map((plan: SubscriptionPlan) => {\n              const savings = getSavings(plan);\n              const isPopular = plan.is_popular;\n              \n              return (\n                <Grid item xs={12} md={4} key={plan.subscription_plan_id}>\n                  <Card\n                    sx={{\n                      height: '100%',\n                      display: 'flex',\n                      flexDirection: 'column',\n                      position: 'relative',\n                      transform: isPopular ? 'scale(1.05)' : 'scale(1)',\n                      transition: 'transform 0.3s',\n                      border: isPopular ? '3px solid #667eea' : 'none',\n                      '&:hover': {\n                        transform: 'scale(1.05)',\n                        boxShadow: 6,\n                      }\n                    }}\n                  >\n                    {isPopular && (\n                      <Chip\n                        icon={<StarIcon />}\n                        label=\"Most Popular\"\n                        color=\"primary\"\n                        sx={{\n                          position: 'absolute',\n                          top: -12,\n                          left: '50%',\n                          transform: 'translateX(-50%)',\n                          fontWeight: 'bold',\n                        }}\n                      />\n                    )}\n\n                    <CardContent sx={{ flexGrow: 1, p: 4 }}>\n                      {/* Plan Name */}\n                      <Typography variant=\"h5\" gutterBottom fontWeight=\"bold\" align=\"center\">\n                        {plan.plan_name}\n                      </Typography>\n\n                      {/* Price */}\n                      <Box sx={{ textAlign: 'center', my: 3 }}>\n                        <Typography variant=\"h3\" color=\"primary\" fontWeight=\"bold\">\n                          ${getPrice(plan)}\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"text.secondary\">\n                          per {billingCycle === 'monthly' ? 'month' : 'year'}\n                        </Typography>\n                        {billingCycle === 'yearly' && savings.amount > 0 && (\n                          <Chip\n                            label={`Save $${savings.amount}/year (${savings.percentage}%)`}\n                            color=\"success\"\n                            size=\"small\"\n                            sx={{ mt: 1 }}\n                          />\n                        )}\n                      </Box>\n\n                      {/* Description */}\n                      <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\" sx={{ mb: 3 }}>\n                        {plan.description}\n                      </Typography>\n\n                      {/* Features */}\n                      <List dense>\n                        {plan.features?.map((feature: string, index: number) => (\n                          <ListItem key={index} sx={{ px: 0 }}>\n                            <ListItemIcon sx={{ minWidth: 36 }}>\n                              <CheckIcon color=\"success\" />\n                            </ListItemIcon>\n                            <ListItemText primary={feature} />\n                          </ListItem>\n                        ))}\n                      </List>\n\n                      {/* CTA Button */}\n                      <Button\n                        fullWidth\n                        variant={isPopular ? 'contained' : 'outlined'}\n                        size=\"large\"\n                        onClick={() => handleSelectPlan(plan)}\n                        disabled={loadingPlanId === plan.subscription_plan_id}\n                        sx={{ mt: 3 }}\n                      >\n                        {loadingPlanId === plan.subscription_plan_id ? (\n                          <CircularProgress size={24} />\n                        ) : (\n                          'Get Started'\n                        )}\n                      </Button>\n                    </CardContent>\n                  </Card>\n                </Grid>\n              );\n            })}\n          </Grid>\n        ) : (\n          <Alert severity=\"info\" sx={{ maxWidth: 600, mx: 'auto' }}>\n            <Typography variant=\"body1\">\n              No subscription plans available at the moment. Please contact support.\n            </Typography>\n          </Alert>\n        )}\n\n        {/* Features Comparison */}\n        <Box sx={{ mt: 8, textAlign: 'center' }}>\n          <Typography variant=\"h5\" sx={{ color: 'white', mb: 3 }}>\n            All Plans Include\n          </Typography>\n          <Grid container spacing={3} justifyContent=\"center\">\n            {[\n              'Real-time tracking',\n              'Performance analytics',\n              'TrustScore ratings',\n              'Email notifications',\n              'API access',\n              '24/7 support',\n            ].map((feature, index) => (\n              <Grid item xs={12} sm={6} md={4} key={index}>\n                <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: 1 }}>\n                  <TrendingUpIcon sx={{ color: 'white' }} />\n                  <Typography sx={{ color: 'white' }}>{feature}</Typography>\n                </Box>\n              </Grid>\n            ))}\n          </Grid>\n        </Box>\n\n        {/* FAQ or Contact */}\n        <Box sx={{ mt: 6, textAlign: 'center' }}>\n          <Typography variant=\"body1\" sx={{ color: 'rgba(255,255,255,0.9)', mb: 2 }}>\n            Need a custom plan or have questions?\n          </Typography>\n          <Button\n            variant=\"outlined\"\n            sx={{\n              color: 'white',\n              borderColor: 'white',\n              '&:hover': {\n                borderColor: 'white',\n                background: 'rgba(255,255,255,0.1)',\n              }\n            }}\n            onClick={() => navigate('/contact')}\n          >\n            Contact Sales\n          </Button>\n        </Box>\n      </Container>\n    </Box>\n  );\n};\n\nexport default SubscriptionPlans;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\SubscriptionSuccess.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\TrackingPage.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":49,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[827,830],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[827,830],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":74,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":74,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1581,1584],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1581,1584],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":183,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":183,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5182,5185],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5182,5185],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Container,\n  Paper,\n  Typography,\n  Box,\n  TextField,\n  Button,\n  Card,\n  CardContent,\n  Stepper,\n  Step,\n  StepLabel,\n  StepContent,\n  Chip,\n  Alert,\n  CircularProgress,\n  Divider,\n  Tabs,\n  Tab,\n} from '@mui/material';\nimport {\n  LocalShipping,\n  CheckCircle,\n  Schedule,\n  LocationOn,\n  Refresh,\n  Search,\n} from '@mui/icons-material';\nimport axios from 'axios';\nimport toast from 'react-hot-toast';\nimport { UnifiedTrackingSearch } from '../components/tracking/UnifiedTrackingSearch';\n\ninterface TrackingEvent {\n  eventTime: string;\n  status: string;\n  statusDescription: string;\n  location?: {\n    name?: string;\n    city?: string;\n    country?: string;\n  };\n}\n\ninterface TrackingData {\n  trackingNumber: string;\n  courier: string;\n  status: string;\n  currentLocation?: any;\n  estimatedDelivery?: string;\n  actualDelivery?: string;\n  events: TrackingEvent[];\n}\n\nexport const TrackingPage: React.FC = () => {\n  const [tabValue, setTabValue] = useState(0);\n  const [trackingNumber, setTrackingNumber] = useState('');\n  const [trackingData, setTrackingData] = useState<TrackingData | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  const handleTrack = async () => {\n    if (!trackingNumber.trim()) {\n      toast.error('Please enter a tracking number');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n\n    try {\n      const response = await axios.get(`/api/tracking/${trackingNumber.trim()}`);\n      setTrackingData(response.data.data);\n    } catch (err: any) {\n      setError(err.response?.data?.message || 'Failed to fetch tracking information');\n      setTrackingData(null);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleRefresh = async () => {\n    if (!trackingData) return;\n    \n    setLoading(true);\n    try {\n      await axios.post('/api/tracking/refresh', {\n        trackingNumber: trackingData.trackingNumber,\n        courier: trackingData.courier,\n      });\n      await handleTrack();\n      toast.success('Tracking information refreshed');\n    } catch (err) {\n      toast.error('Failed to refresh tracking');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    const colors: Record<string, string> = {\n      delivered: 'success',\n      out_for_delivery: 'info',\n      in_transit: 'primary',\n      picked_up: 'default',\n      failed_delivery: 'error',\n      exception: 'warning',\n    };\n    return colors[status] || 'default';\n  };\n\n  const getStatusIcon = (status: string) => {\n    if (status === 'delivered') return <CheckCircle />;\n    if (status === 'out_for_delivery') return <LocalShipping />;\n    return <Schedule />;\n  };\n\n  return (\n    <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\n      <Typography variant=\"h4\" gutterBottom>\n         Track Your Shipments\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\n        Track shipments across all couriers in one place\n      </Typography>\n\n      <Tabs value={tabValue} onChange={(e, v) => setTabValue(v)} sx={{ mb: 3 }}>\n        <Tab icon={<Search />} label=\"Quick Track\" />\n        <Tab icon={<LocalShipping />} label=\"Advanced Search\" />\n      </Tabs>\n\n      {tabValue === 0 ? (\n        <Paper sx={{ p: 4 }}>\n          <Typography variant=\"h6\" gutterBottom>\n            Quick Track by Number\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\n            Enter your tracking number to see real-time delivery status\n          </Typography>\n\n          <Box sx={{ display: 'flex', gap: 2, mb: 4 }}>\n            <TextField\n              fullWidth\n              label=\"Tracking Number\"\n              value={trackingNumber}\n              onChange={(e) => setTrackingNumber(e.target.value)}\n              onKeyPress={(e) => e.key === 'Enter' && handleTrack()}\n              placeholder=\"Enter tracking number\"\n            />\n            <Button\n              variant=\"contained\"\n              onClick={handleTrack}\n              disabled={loading}\n              sx={{ minWidth: 120 }}\n            >\n              {loading ? <CircularProgress size={24} /> : 'Track'}\n            </Button>\n          </Box>\n\n        {error && (\n          <Alert severity=\"error\" sx={{ mb: 3 }}>\n            {error}\n          </Alert>\n        )}\n\n        {trackingData && (\n          <>\n            {/* Status Header */}\n            <Card sx={{ mb: 3 }}>\n              <CardContent>\n                <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n                  <Box>\n                    <Typography variant=\"h6\">\n                      {trackingData.courier}\n                    </Typography>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      {trackingData.trackingNumber}\n                    </Typography>\n                  </Box>\n                  <Chip\n                    icon={getStatusIcon(trackingData.status)}\n                    label={trackingData.status.replace(/_/g, ' ').toUpperCase()}\n                    color={getStatusColor(trackingData.status) as any}\n                  />\n                </Box>\n\n                <Divider sx={{ my: 2 }} />\n\n                {trackingData.estimatedDelivery && (\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1 }}>\n                    <Schedule color=\"action\" />\n                    <Typography variant=\"body2\">\n                      Estimated Delivery: {new Date(trackingData.estimatedDelivery).toLocaleString()}\n                    </Typography>\n                  </Box>\n                )}\n\n                {trackingData.actualDelivery && (\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1 }}>\n                    <CheckCircle color=\"success\" />\n                    <Typography variant=\"body2\">\n                      Delivered: {new Date(trackingData.actualDelivery).toLocaleString()}\n                    </Typography>\n                  </Box>\n                )}\n\n                {trackingData.currentLocation && (\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                    <LocationOn color=\"action\" />\n                    <Typography variant=\"body2\">\n                      Current Location: {trackingData.currentLocation.name || 'In Transit'}\n                    </Typography>\n                  </Box>\n                )}\n\n                <Button\n                  size=\"small\"\n                  startIcon={<Refresh />}\n                  onClick={handleRefresh}\n                  disabled={loading}\n                  sx={{ mt: 2 }}\n                >\n                  Refresh\n                </Button>\n              </CardContent>\n            </Card>\n\n            {/* Tracking Events */}\n            <Card>\n              <CardContent>\n                <Typography variant=\"h6\" gutterBottom>\n                  Tracking History\n                </Typography>\n\n                <Stepper orientation=\"vertical\">\n                  {(trackingData.events || []).map((event, index) => (\n                    <Step key={index} active={true} completed={index > 0}>\n                      <StepLabel>\n                        <Typography variant=\"subtitle2\">\n                          {event.statusDescription}\n                        </Typography>\n                        <Typography variant=\"caption\" color=\"text.secondary\">\n                          {new Date(event.eventTime).toLocaleString()}\n                        </Typography>\n                      </StepLabel>\n                      <StepContent>\n                        {event.location && (\n                          <Typography variant=\"body2\" color=\"text.secondary\">\n                             {event.location.name || event.location.city}\n                            {event.location.country && `, ${event.location.country}`}\n                          </Typography>\n                        )}\n                      </StepContent>\n                    </Step>\n                  ))}\n                </Stepper>\n\n                {(!trackingData.events || trackingData.events.length === 0) && (\n                  <Alert severity=\"info\">\n                    No tracking events available yet\n                  </Alert>\n                )}\n              </CardContent>\n            </Card>\n          </>\n        )}\n\n          {!trackingData && !error && !loading && (\n            <Alert severity=\"info\">\n              Enter a tracking number above to see delivery status\n            </Alert>\n          )}\n        </Paper>\n      ) : (\n        <UnifiedTrackingSearch />\n      )}\n    </Container>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\TrustScores.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'LocalShipping' is defined but never used.","line":31,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":16},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":187,"column":82,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":187,"endColumn":85,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5518,5521],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5518,5521],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":260,"column":83,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":260,"endColumn":86,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8571,8574],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8571,8574],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Box,\n  Grid,\n  Card,\n  CardContent,\n  Typography,\n  TextField,\n  InputAdornment,\n  Chip,\n  Avatar,\n  LinearProgress,\n  Button,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Paper,\n} from '@mui/material';\nimport {\n  Search,\n  Star,\n  TrendingUp,\n  TrendingDown,\n  LocalShipping,\n  Schedule,\n  CheckCircle,\n  ThumbUp,\n} from '@mui/icons-material';\nimport { useQuery } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport { useAuthStore } from '@/store/authStore';\nimport { CourierLogo } from '@/components/courier/CourierLogo';\n\ninterface CourierTrustScore {\n  courier_id: string;\n  courier_name: string;\n  courier_code?: string; // Added for CourierLogo\n  overall_score: number; // Changed from trust_score\n  performance_grade?: string;\n  avg_rating: number; // Changed from rating\n  completion_rate: number;\n  on_time_rate: number;\n  response_time?: number;\n  total_orders: number;\n  total_reviews: number;\n  last_updated: string;\n}\n\nexport const TrustScores: React.FC = () => {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedCourier, setSelectedCourier] = useState<CourierTrustScore | null>(null);\n  const [detailsOpen, setDetailsOpen] = useState(false);\n  const { user } = useAuthStore();\n\n  const { data: trustScoresData, isLoading } = useQuery({\n    queryKey: ['trust-scores', searchTerm],\n    queryFn: async () => {\n      const params = new URLSearchParams();\n      if (searchTerm) params.append('search', searchTerm);\n\n      const response = await apiClient.get(`/trustscore?${params.toString()}`);\n      return response.data;\n    },\n    refetchInterval: 60000, // Refresh every minute\n  });\n\n  const couriers = Array.isArray(trustScoresData?.data) ? trustScoresData.data : [];\n\n  const getGradeColor = (grade: string) => {\n    switch (grade?.toUpperCase()) {\n      case 'A+': return 'success';\n      case 'A': return 'success';\n      case 'B+': return 'info';\n      case 'B': return 'info';\n      case 'C+': return 'warning';\n      case 'C': return 'warning';\n      default: return 'error';\n    }\n  };\n\n  const getTrendIcon = (score: number) => {\n    if (score >= 80) return <TrendingUp color=\"success\" />;\n    if (score >= 60) return <TrendingUp color=\"warning\" />;\n    return <TrendingDown color=\"error\" />;\n  };\n\n  const handleViewDetails = (courier: CourierTrustScore) => {\n    setSelectedCourier(courier);\n    setDetailsOpen(true);\n  };\n\n  const MetricCard: React.FC<{ label: string; value: number; suffix?: string; icon: React.ReactNode }> = ({\n    label,\n    value,\n    suffix = '',\n    icon,\n  }) => (\n    <Card sx={{ height: '100%' }}>\n      <CardContent>\n        <Box sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>\n          <Avatar sx={{ bgcolor: 'primary.main', mr: 2, width: 32, height: 32 }}>\n            {icon}\n          </Avatar>\n          <Typography variant=\"h6\" component=\"div\">\n            {Number(value).toFixed(1)}{suffix}\n          </Typography>\n        </Box>\n        <Typography variant=\"body2\" color=\"text.secondary\">\n          {label}\n        </Typography>\n        <LinearProgress\n          variant=\"determinate\"\n          value={suffix === '%' ? value : (value / 5) * 100}\n          sx={{ mt: 1 }}\n        />\n      </CardContent>\n    </Card>\n  );\n\n  if (isLoading) {\n    return (\n      <Box>\n        <Typography variant=\"h4\" gutterBottom>\n          Trust Scores\n        </Typography>\n        <LinearProgress sx={{ mb: 4 }} />\n      </Box>\n    );\n  }\n\n  return (\n    <Box>\n      <Typography variant=\"h4\" gutterBottom>\n        Trust Scores\n      </Typography>\n      <Typography variant=\"body1\" color=\"text.secondary\" sx={{ mb: 4 }}>\n        Monitor and compare courier performance metrics and trust scores.\n      </Typography>\n\n      {/* Search and Filters */}\n      <Box sx={{ mb: 4 }}>\n        <TextField\n          fullWidth\n          placeholder=\"Search couriers by name...\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <Search />\n              </InputAdornment>\n            ),\n          }}\n          sx={{ maxWidth: 400 }}\n        />\n      </Box>\n\n      {/* Couriers Grid */}\n      <Grid container spacing={3}>\n        {couriers.map((courier: CourierTrustScore) => (\n          <Grid item xs={12} sm={6} md={4} key={courier.courier_id}>\n            <Card sx={{ height: '100%', cursor: 'pointer' }} onClick={() => handleViewDetails(courier)}>\n              <CardContent>\n                <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\n                  <Box sx={{ mr: 2 }}>\n                    <CourierLogo\n                      courierCode={courier.courier_code || courier.courier_name}\n                      courierName={courier.courier_name}\n                      size=\"large\"\n                      variant=\"rounded\"\n                    />\n                  </Box>\n                  <Box sx={{ flexGrow: 1 }}>\n                    <Typography variant=\"h6\" noWrap>\n                      {courier.courier_name}\n                    </Typography>\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                      <Chip\n                        label={courier.performance_grade || 'N/A'}\n                        color={getGradeColor(courier.performance_grade || '') as any}\n                        size=\"small\"\n                      />\n                      {getTrendIcon(courier.overall_score)}\n                    </Box>\n                  </Box>\n                </Box>\n\n                <Box sx={{ mb: 2 }}>\n                  <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 1 }}>\n                    <Typography variant=\"body2\">Trust Score</Typography>\n                    <Typography variant=\"body2\" fontWeight=\"bold\">\n                      {courier.overall_score ? Number(courier.overall_score).toFixed(1) : '0.0'}/100\n                    </Typography>\n                  </Box>\n                  <LinearProgress\n                    variant=\"determinate\"\n                    value={courier.overall_score || 0}\n                    sx={{ height: 8, borderRadius: 4 }}\n                  />\n                </Box>\n\n                <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 1 }}>\n                  <Typography variant=\"caption\">Rating</Typography>\n                  <Typography variant=\"caption\">\n                    {courier.avg_rating ? Number(courier.avg_rating).toFixed(1) : '0.0'}/5 \n                  </Typography>\n                </Box>\n\n                <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 1 }}>\n                  <Typography variant=\"caption\">On-Time Rate</Typography>\n                  <Typography variant=\"caption\">\n                    {courier.on_time_rate ? Number(courier.on_time_rate).toFixed(1) : '0'}%\n                  </Typography>\n                </Box>\n\n                <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 2 }}>\n                  <Typography variant=\"caption\">Completion Rate</Typography>\n                  <Typography variant=\"caption\">\n                    {courier.completion_rate ? Number(courier.completion_rate).toFixed(1) : '0'}%\n                  </Typography>\n                </Box>\n\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  {courier.total_orders || 0} orders  {courier.total_reviews || 0} reviews\n                </Typography>\n              </CardContent>\n            </Card>\n          </Grid>\n        ))}\n      </Grid>\n\n      {/* Detailed View Dialog */}\n      <Dialog\n        open={detailsOpen}\n        onClose={() => setDetailsOpen(false)}\n        maxWidth=\"md\"\n        fullWidth\n      >\n        <DialogTitle>\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n            <CourierLogo\n              courierCode={selectedCourier?.courier_code || selectedCourier?.courier_name || ''}\n              courierName={selectedCourier?.courier_name || ''}\n              size=\"xlarge\"\n              variant=\"rounded\"\n            />\n            <Box>\n              <Typography variant=\"h6\">\n                {selectedCourier?.courier_name}\n              </Typography>\n              <Chip\n                label={selectedCourier?.performance_grade || 'N/A'}\n                color={getGradeColor(selectedCourier?.performance_grade || '') as any}\n                size=\"small\"\n              />\n            </Box>\n          </Box>\n        </DialogTitle>\n        \n        <DialogContent>\n          {selectedCourier && (\n            <Box>\n              {/* Overall Trust Score */}\n              <Box sx={{ mb: 4, textAlign: 'center' }}>\n                <Typography variant=\"h3\" color=\"primary\" gutterBottom>\n                  {selectedCourier.overall_score ? Number(selectedCourier.overall_score).toFixed(1) : '0.0'}\n                </Typography>\n                <Typography variant=\"h6\" color=\"text.secondary\">\n                  Trust Score out of 100\n                </Typography>\n                <LinearProgress\n                  variant=\"determinate\"\n                  value={selectedCourier.overall_score || 0}\n                  sx={{ mt: 2, height: 12, borderRadius: 6 }}\n                />\n              </Box>\n\n              {/* Metrics Grid */}\n              <Grid container spacing={2} sx={{ mb: 4 }}>\n                <Grid item xs={6} sm={3}>\n                  <MetricCard\n                    label=\"Rating\"\n                    value={selectedCourier.avg_rating || 0}\n                    suffix=\"/5\"\n                    icon={<Star />}\n                  />\n                </Grid>\n                <Grid item xs={6} sm={3}>\n                  <MetricCard\n                    label=\"On-Time Rate\"\n                    value={selectedCourier.on_time_rate || 0}\n                    suffix=\"%\"\n                    icon={<Schedule />}\n                  />\n                </Grid>\n                <Grid item xs={6} sm={3}>\n                  <MetricCard\n                    label=\"Completion Rate\"\n                    value={selectedCourier.completion_rate || 0}\n                    suffix=\"%\"\n                    icon={<CheckCircle />}\n                  />\n                </Grid>\n                <Grid item xs={6} sm={3}>\n                  <MetricCard\n                    label=\"Customer Satisfaction\"\n                    value={selectedCourier.avg_rating || 0}\n                    suffix=\"/5\"\n                    icon={<ThumbUp />}\n                  />\n                </Grid>\n              </Grid>\n\n              {/* Performance Summary */}\n              <TableContainer component={Paper}>\n                <Table>\n                  <TableHead>\n                    <TableRow>\n                      <TableCell>Metric</TableCell>\n                      <TableCell align=\"right\">Value</TableCell>\n                      <TableCell align=\"right\">Industry Avg</TableCell>\n                    </TableRow>\n                  </TableHead>\n                  <TableBody>\n                    <TableRow>\n                      <TableCell>Response Time</TableCell>\n                      <TableCell align=\"right\">\n                        {selectedCourier.response_time ? Number(selectedCourier.response_time).toFixed(1) : '0'} min\n                      </TableCell>\n                      <TableCell align=\"right\">15.2 min</TableCell>\n                    </TableRow>\n                    <TableRow>\n                      <TableCell>Total Orders</TableCell>\n                      <TableCell align=\"right\">\n                        {selectedCourier.total_orders?.toLocaleString() || '0'}\n                      </TableCell>\n                      <TableCell align=\"right\">1,247</TableCell>\n                    </TableRow>\n                    <TableRow>\n                      <TableCell>Total Reviews</TableCell>\n                      <TableCell align=\"right\">\n                        {selectedCourier.total_reviews?.toLocaleString() || '0'}\n                      </TableCell>\n                      <TableCell align=\"right\">892</TableCell>\n                    </TableRow>\n                    <TableRow>\n                      <TableCell>Last Updated</TableCell>\n                      <TableCell align=\"right\" colSpan={2}>\n                        {selectedCourier.last_updated\n                          ? new Date(selectedCourier.last_updated).toLocaleString()\n                          : 'Never'}\n                      </TableCell>\n                    </TableRow>\n                  </TableBody>\n                </Table>\n              </TableContainer>\n            </Box>\n          )}\n        </DialogContent>\n        \n        <DialogActions>\n          <Button onClick={() => setDetailsOpen(false)}>Close</Button>\n          {user?.user_role === 'merchant' && (\n            <Button variant=\"contained\" onClick={() => setDetailsOpen(false)}>\n              Select Courier\n            </Button>\n          )}\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\admin\\FeatureFlagsSettings.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has a missing dependency: 'localPlans.length'. Either include it or remove the dependency array.","line":67,"column":6,"nodeType":"ArrayExpression","endLine":67,"endColumn":13,"suggestions":[{"desc":"Update the dependencies array to be: [localPlans.length, plans]","fix":{"range":[2336,2343],"text":"[localPlans.length, plans]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Grid,\n  Switch,\n  FormControlLabel,\n  Button,\n  Alert,\n  CircularProgress,\n  Divider,\n  Chip,\n} from '@mui/material';\nimport {\n  Save as SaveIcon,\n  Flag as FlagIcon,\n} from '@mui/icons-material';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport { toast } from 'react-hot-toast';\n\ninterface SubscriptionPlan {\n  plan_id: string;\n  plan_name: string;\n  tier: string;\n  features: {\n    [key: string]: boolean;\n  };\n  monthly_price: number;\n  annual_price: number;\n}\n\nconst availableFeatures = [\n  { key: 'proximity_matching', label: 'Proximity Matching', description: 'Match couriers based on location' },\n  { key: 'advanced_analytics', label: 'Advanced Analytics', description: 'Detailed reports and insights' },\n  { key: 'priority_support', label: 'Priority Support', description: '24/7 priority customer support' },\n  { key: 'api_access', label: 'API Access', description: 'RESTful API for integrations' },\n  { key: 'white_label', label: 'White Label', description: 'Custom branding options' },\n  { key: 'custom_integrations', label: 'Custom Integrations', description: 'Build custom integrations' },\n  { key: 'bulk_operations', label: 'Bulk Operations', description: 'Bulk import/export capabilities' },\n  { key: 'advanced_reporting', label: 'Advanced Reporting', description: 'Custom report builder' },\n  { key: 'multi_user', label: 'Multi-User Access', description: 'Team collaboration features' },\n  { key: 'sla_guarantees', label: 'SLA Guarantees', description: 'Service level agreements' },\n];\n\nexport const FeatureFlagsSettings: React.FC = () => {\n  const queryClient = useQueryClient();\n  const [localPlans, setLocalPlans] = useState<SubscriptionPlan[]>([]);\n  const [hasChanges, setHasChanges] = useState(false);\n\n  // Fetch subscription plans\n  const { data: plans, isLoading, error } = useQuery({\n    queryKey: ['subscription-plans'],\n    queryFn: async () => {\n      const response = await apiClient.get('/admin/subscription-plans');\n      return response.data.data as SubscriptionPlan[];\n    },\n  });\n\n  // Initialize local state\n  React.useEffect(() => {\n    if (plans && localPlans.length === 0) {\n      setLocalPlans(plans);\n    }\n  }, [plans]);\n\n  // Update features mutation\n  const updateFeaturesMutation = useMutation({\n    mutationFn: async (plan: SubscriptionPlan) => {\n      await apiClient.put(`/admin/subscription-plans/${plan.plan_id}/features`, {\n        features: plan.features,\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['subscription-plans'] });\n      toast.success('Features updated successfully');\n      setHasChanges(false);\n    },\n    onError: () => {\n      toast.error('Failed to update features');\n    },\n  });\n\n  const handleFeatureToggle = (planId: string, featureKey: string) => {\n    setLocalPlans((prev) =>\n      prev.map((plan) => {\n        if (plan.plan_id === planId) {\n          return {\n            ...plan,\n            features: {\n              ...plan.features,\n              [featureKey]: !plan.features[featureKey],\n            },\n          };\n        }\n        return plan;\n      })\n    );\n    setHasChanges(true);\n  };\n\n  const handleSave = () => {\n    localPlans.forEach((plan) => {\n      updateFeaturesMutation.mutate(plan);\n    });\n  };\n\n  const handleReset = () => {\n    if (plans) {\n      setLocalPlans(plans);\n      setHasChanges(false);\n    }\n  };\n\n  const getTierColor = (tier: string): 'default' | 'primary' | 'secondary' | 'success' => {\n    switch (tier.toLowerCase()) {\n      case 'free':\n      case 'basic':\n        return 'default';\n      case 'pro':\n      case 'professional':\n        return 'primary';\n      case 'enterprise':\n      case 'unlimited':\n        return 'success';\n      default:\n        return 'secondary';\n    }\n  };\n\n  if (isLoading || localPlans.length === 0) {\n    return (\n      <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '60vh' }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  if (error) {\n    return (\n      <Box sx={{ p: 3 }}>\n        <Alert severity=\"error\">Failed to load subscription plans. Please try again.</Alert>\n      </Box>\n    );\n  }\n\n  return (\n    <Box sx={{ p: 3 }}>\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n        <Box>\n          <Typography variant=\"h4\" gutterBottom>\n             Feature Flags\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            Configure which features are available in each subscription plan\n          </Typography>\n        </Box>\n        <Box sx={{ display: 'flex', gap: 2 }}>\n          <Button\n            variant=\"outlined\"\n            onClick={handleReset}\n            disabled={!hasChanges || updateFeaturesMutation.isPending}\n          >\n            Reset\n          </Button>\n          <Button\n            variant=\"contained\"\n            startIcon={<SaveIcon />}\n            onClick={handleSave}\n            disabled={!hasChanges || updateFeaturesMutation.isPending}\n          >\n            {updateFeaturesMutation.isPending ? 'Saving...' : 'Save Changes'}\n          </Button>\n        </Box>\n      </Box>\n\n      {hasChanges && (\n        <Alert severity=\"info\" sx={{ mb: 3 }}>\n          You have unsaved changes\n        </Alert>\n      )}\n\n      <Grid container spacing={3}>\n        {localPlans.map((plan) => (\n          <Grid item xs={12} md={6} lg={4} key={plan.plan_id}>\n            <Card>\n              <CardContent>\n                <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n                  <Typography variant=\"h6\">{plan.plan_name}</Typography>\n                  <Chip label={plan.tier} color={getTierColor(plan.tier)} size=\"small\" />\n                </Box>\n\n                <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\n                  ${plan.monthly_price}/mo  ${plan.annual_price}/yr\n                </Typography>\n\n                <Divider sx={{ my: 2 }} />\n\n                <Typography variant=\"subtitle2\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                  <FlagIcon fontSize=\"small\" />\n                  Features\n                </Typography>\n\n                <Box sx={{ mt: 2 }}>\n                  {availableFeatures.map((feature) => (\n                    <Box key={feature.key} sx={{ mb: 1 }}>\n                      <FormControlLabel\n                        control={\n                          <Switch\n                            checked={plan.features[feature.key] || false}\n                            onChange={() => handleFeatureToggle(plan.plan_id, feature.key)}\n                            size=\"small\"\n                          />\n                        }\n                        label={\n                          <Box>\n                            <Typography variant=\"body2\">{feature.label}</Typography>\n                            <Typography variant=\"caption\" color=\"text.secondary\">\n                              {feature.description}\n                            </Typography>\n                          </Box>\n                        }\n                      />\n                    </Box>\n                  ))}\n                </Box>\n\n                <Divider sx={{ my: 2 }} />\n\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  {Object.values(plan.features).filter(Boolean).length} of {availableFeatures.length} features enabled\n                </Typography>\n              </CardContent>\n            </Card>\n          </Grid>\n        ))}\n      </Grid>\n\n      <Card sx={{ mt: 3 }}>\n        <CardContent>\n          <Typography variant=\"h6\" gutterBottom>\n             Feature Descriptions\n          </Typography>\n          <Grid container spacing={2} sx={{ mt: 1 }}>\n            {availableFeatures.map((feature) => (\n              <Grid item xs={12} sm={6} key={feature.key}>\n                <Box sx={{ p: 2, bgcolor: 'action.hover', borderRadius: 1 }}>\n                  <Typography variant=\"body2\" fontWeight=\"bold\">\n                    {feature.label}\n                  </Typography>\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    {feature.description}\n                  </Typography>\n                </Box>\n              </Grid>\n            ))}\n          </Grid>\n        </CardContent>\n      </Card>\n    </Box>\n  );\n};\n\nexport default FeatureFlagsSettings;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\admin\\ManageCarriers.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Avatar' is defined but never used.","line":7,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'LocalShipping' is defined but never used.","line":31,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":16},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":102,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":102,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2837,2840],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2837,2840],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":123,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":123,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3559,3562],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3559,3562],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":137,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":137,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4031,4034],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4031,4034],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Box,\n  Typography,\n  Button,\n  Grid,\n  Avatar,\n  Chip,\n  IconButton,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  TextField,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Paper,\n  Switch,\n  FormControlLabel,\n} from '@mui/material';\nimport {\n  Add,\n  Edit,\n  Delete,\n  Phone,\n  Email,\n  LocalShipping,\n  Star\n} from '@mui/icons-material';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { useForm, Controller } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\nimport { apiClient } from '@/services/apiClient';\nimport toast from 'react-hot-toast';\nimport { CourierLogo } from '@/components/courier/CourierLogo';\nimport { IntegrationStatusBadge } from '@/components/courier/IntegrationStatusBadge';\n\ninterface Carrier {\n  courier_id: string;\n  courier_name: string;\n  courier_code?: string; // Added for CourierLogo\n  contact_email: string;\n  contact_phone: string;\n  service_areas: string[];\n  is_active: boolean;\n  trust_score?: number;\n  total_orders?: number;\n  has_api_integration?: boolean; // Added for integration status\n  integration_status?: string; // Added for integration status\n  created_at: string;\n}\n\ninterface CarrierFormData {\n  courier_name: string;\n  contact_email: string;\n  contact_phone: string;\n  service_areas: string;\n  is_active: boolean;\n}\n\nconst schema = yup.object({\n  courier_name: yup.string().required('Carrier name is required').max(255),\n  contact_email: yup.string().email('Invalid email').required('Email is required'),\n  contact_phone: yup.string().required('Phone is required'),\n  service_areas: yup.string().required('Service areas are required'),\n  is_active: yup.boolean().required(),\n});\n\nexport const ManageCarriers: React.FC = () => {\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [editingCarrier, setEditingCarrier] = useState<Carrier | null>(null);\n  const queryClient = useQueryClient();\n\n  const { data: carriers = [] } = useQuery({\n    queryKey: ['admin-carriers'],\n    queryFn: async () => {\n      const response = await apiClient.get<{ data: Carrier[] }>('/admin/carriers');\n      return response.data.data;\n    }\n  });\n\n  const createCarrierMutation = useMutation({\n    mutationFn: async (data: CarrierFormData) => {\n      const payload = {\n        ...data,\n        service_areas: data.service_areas.split(',').map(area => area.trim()),\n      };\n      const response = await apiClient.post('/admin/carriers', payload);\n      return response.data;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['admin-carriers'] });\n      setDialogOpen(false);\n      reset();\n      toast.success('Carrier created successfully');\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || 'Failed to create carrier');\n    },\n  });\n\n  const updateCarrierMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: CarrierFormData }) => {\n      const payload = {\n        ...data,\n        service_areas: data.service_areas.split(',').map(area => area.trim()),\n      };\n      const response = await apiClient.put(`/admin/carriers/${id}`, payload);\n      return response.data;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['admin-carriers'] });\n      setDialogOpen(false);\n      setEditingCarrier(null);\n      reset();\n      toast.success('Carrier updated successfully');\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || 'Failed to update carrier');\n    },\n  });\n\n  const deleteCarrierMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const response = await apiClient.delete(`/admin/carriers/${id}`);\n      return response.data;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['admin-carriers'] });\n      toast.success('Carrier deleted successfully');\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || 'Failed to delete carrier');\n    },\n  });\n\n  const {\n    control,\n    handleSubmit,\n    formState: { errors },\n    reset,\n    setValue,\n  } = useForm<CarrierFormData>({\n    resolver: yupResolver(schema),\n    defaultValues: {\n      courier_name: '',\n      contact_email: '',\n      contact_phone: '',\n      service_areas: '',\n      is_active: true,\n    },\n  });\n\n  const handleOpenDialog = (carrier?: Carrier) => {\n    if (carrier) {\n      setEditingCarrier(carrier);\n      setValue('courier_name', carrier.courier_name);\n      setValue('contact_email', carrier.contact_email);\n      setValue('contact_phone', carrier.contact_phone);\n      setValue('service_areas', carrier.service_areas.join(', '));\n      setValue('is_active', carrier.is_active);\n    } else {\n      setEditingCarrier(null);\n      reset();\n    }\n    setDialogOpen(true);\n  };\n\n  const handleCloseDialog = () => {\n    setDialogOpen(false);\n    setEditingCarrier(null);\n    reset();\n  };\n\n  const onSubmit = (data: CarrierFormData) => {\n    if (editingCarrier) {\n      updateCarrierMutation.mutate({ id: editingCarrier.courier_id, data });\n    } else {\n      createCarrierMutation.mutate(data);\n    }\n  };\n\n  const handleDelete = (id: string) => {\n    if (window.confirm('Are you sure you want to delete this carrier?')) {\n      deleteCarrierMutation.mutate(id);\n    }\n  };\n\n  return (\n    <Box>\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 4 }}>\n        <Typography variant=\"h4\" gutterBottom>\n          Manage Carriers\n        </Typography>\n        <Button\n          variant=\"contained\"\n          startIcon={<Add />}\n          onClick={() => handleOpenDialog()}\n        >\n          Add Carrier\n        </Button>\n      </Box>\n\n      <TableContainer component={Paper}>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>Carrier</TableCell>\n              <TableCell>Contact</TableCell>\n              <TableCell>Service Areas</TableCell>\n              <TableCell>Trust Score</TableCell>\n              <TableCell>Orders</TableCell>\n              <TableCell>Status</TableCell>\n              <TableCell>Actions</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {(carriers || []).map((carrier: Carrier) => (\n              <TableRow key={carrier.courier_id}>\n                <TableCell>\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n                    <CourierLogo\n                      courierCode={carrier.courier_code || carrier.courier_name}\n                      courierName={carrier.courier_name}\n                      size=\"medium\"\n                      variant=\"rounded\"\n                    />\n                    <Box sx={{ flexGrow: 1 }}>\n                      <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                        <Typography variant=\"subtitle2\">\n                          {carrier.courier_name}\n                        </Typography>\n                        {carrier.has_api_integration && (\n                          <IntegrationStatusBadge\n                            status={carrier.integration_status || 'not_configured'}\n                            size=\"small\"\n                          />\n                        )}\n                      </Box>\n                      <Typography variant=\"caption\" color=\"text.secondary\">\n                        ID: {carrier.courier_id.slice(0, 8)}...\n                      </Typography>\n                    </Box>\n                  </Box>\n                </TableCell>\n                <TableCell>\n                  <Box>\n                    <Box sx={{ display: 'flex', alignItems: 'center', mb: 0.5 }}>\n                      <Email sx={{ fontSize: 16, mr: 1 }} />\n                      <Typography variant=\"body2\">{carrier.contact_email}</Typography>\n                    </Box>\n                    <Box sx={{ display: 'flex', alignItems: 'center' }}>\n                      <Phone sx={{ fontSize: 16, mr: 1 }} />\n                      <Typography variant=\"body2\">{carrier.contact_phone}</Typography>\n                    </Box>\n                  </Box>\n                </TableCell>\n                <TableCell>\n                  <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\n                    {carrier.service_areas.slice(0, 3).map((area, index) => (\n                      <Chip key={index} label={area} size=\"small\" />\n                    ))}\n                    {carrier.service_areas.length > 3 && (\n                      <Chip label={`+${carrier.service_areas.length - 3} more`} size=\"small\" />\n                    )}\n                  </Box>\n                </TableCell>\n                <TableCell>\n                  <Box sx={{ display: 'flex', alignItems: 'center' }}>\n                    <Star sx={{ color: 'warning.main', mr: 0.5 }} />\n                    <Typography variant=\"body2\">\n                      {carrier.trust_score?.toFixed(1) || 'N/A'}\n                    </Typography>\n                  </Box>\n                </TableCell>\n                <TableCell>\n                  <Typography variant=\"body2\">\n                    {carrier.total_orders?.toLocaleString() || '0'}\n                  </Typography>\n                </TableCell>\n                <TableCell>\n                  <Chip\n                    label={carrier.is_active ? 'Active' : 'Inactive'}\n                    color={carrier.is_active ? 'success' : 'default'}\n                    size=\"small\"\n                  />\n                </TableCell>\n                <TableCell>\n                  <IconButton\n                    size=\"small\"\n                    onClick={() => handleOpenDialog(carrier)}\n                    color=\"primary\"\n                  >\n                    <Edit />\n                  </IconButton>\n                  <IconButton\n                    size=\"small\"\n                    onClick={() => handleDelete(carrier.courier_id)}\n                    color=\"error\"\n                  >\n                    <Delete />\n                  </IconButton>\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </TableContainer>\n\n      {/* Add/Edit Dialog */}\n      <Dialog open={dialogOpen} onClose={handleCloseDialog} maxWidth=\"md\" fullWidth>\n        <DialogTitle>\n          {editingCarrier ? 'Edit Carrier' : 'Add New Carrier'}\n        </DialogTitle>\n        <DialogContent>\n          <Box component=\"form\" sx={{ mt: 2 }}>\n            <Grid container spacing={2}>\n              <Grid item xs={12} sm={6}>\n                <Controller\n                  name=\"courier_name\"\n                  control={control}\n                  render={({ field }) => (\n                    <TextField\n                      {...field}\n                      fullWidth\n                      label=\"Carrier Name\"\n                      error={!!errors.courier_name}\n                      helperText={errors.courier_name?.message}\n                    />\n                  )}\n                />\n              </Grid>\n              <Grid item xs={12} sm={6}>\n                <Controller\n                  name=\"contact_email\"\n                  control={control}\n                  render={({ field }) => (\n                    <TextField\n                      {...field}\n                      fullWidth\n                      label=\"Contact Email\"\n                      type=\"email\"\n                      error={!!errors.contact_email}\n                      helperText={errors.contact_email?.message}\n                    />\n                  )}\n                />\n              </Grid>\n              <Grid item xs={12} sm={6}>\n                <Controller\n                  name=\"contact_phone\"\n                  control={control}\n                  render={({ field }) => (\n                    <TextField\n                      {...field}\n                      fullWidth\n                      label=\"Contact Phone\"\n                      error={!!errors.contact_phone}\n                      helperText={errors.contact_phone?.message}\n                    />\n                  )}\n                />\n              </Grid>\n              <Grid item xs={12} sm={6}>\n                <Controller\n                  name=\"is_active\"\n                  control={control}\n                  render={({ field }) => (\n                    <FormControlLabel\n                      control={<Switch {...field} checked={field.value} />}\n                      label=\"Active\"\n                    />\n                  )}\n                />\n              </Grid>\n              <Grid item xs={12}>\n                <Controller\n                  name=\"service_areas\"\n                  control={control}\n                  render={({ field }) => (\n                    <TextField\n                      {...field}\n                      fullWidth\n                      label=\"Service Areas\"\n                      placeholder=\"Enter areas separated by commas (e.g., New York, Los Angeles, Chicago)\"\n                      multiline\n                      rows={2}\n                      error={!!errors.service_areas}\n                      helperText={errors.service_areas?.message || 'Separate multiple areas with commas'}\n                    />\n                  )}\n                />\n              </Grid>\n            </Grid>\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleCloseDialog}>Cancel</Button>\n          <Button\n            onClick={handleSubmit(onSubmit)}\n            variant=\"contained\"\n            disabled={createCarrierMutation.isPending || updateCarrierMutation.isPending}\n          >\n            {editingCarrier ? 'Update' : 'Create'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\admin\\ManageCouriers.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":103,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":103,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2473,2476],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2473,2476],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Chip,\n  IconButton,\n  TextField,\n  InputAdornment,\n  Button,\n  Grid,\n  Avatar,\n  Menu,\n  MenuItem,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Tabs,\n  Tab,\n  Alert,\n  Rating,\n  LinearProgress,\n} from '@mui/material';\nimport {\n  Search as SearchIcon,\n  MoreVert as MoreVertIcon,\n  LocalShipping as CourierIcon,\n  TrendingUp as TrendingUpIcon,\n  Star as StarIcon,\n  Email as EmailIcon,\n  Phone as PhoneIcon,\n  CheckCircle as ActiveIcon,\n  Cancel as InactiveIcon,\n  Download as DownloadIcon,\n  Visibility as ViewIcon,\n} from '@mui/icons-material';\nimport { useQuery } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\n\ninterface Courier {\n  user_id: string;\n  email: string;\n  first_name: string;\n  last_name: string;\n  phone: string;\n  is_active: boolean;\n  subscription_tier: string;\n  created_at: string;\n  last_login: string;\n  trust_score: number;\n  total_deliveries: number;\n  successful_deliveries: number;\n  avg_rating: number;\n  total_reviews: number;\n  leads_downloaded: number;\n  competitor_data_purchased: number;\n  revenue_generated: number;\n}\n\ninterface TabPanelProps {\n  children?: React.ReactNode;\n  index: number;\n  value: number;\n}\n\nfunction TabPanel(props: TabPanelProps) {\n  const { children, value, index, ...other } = props;\n  return (\n    <div hidden={value !== index} {...other}>\n      {value === index && <Box sx={{ p: 3 }}>{children}</Box>}\n    </div>\n  );\n}\n\nexport const ManageCouriers: React.FC = () => {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterStatus, setFilterStatus] = useState<'all' | 'active' | 'inactive'>('all');\n  const [selectedCourier, setSelectedCourier] = useState<Courier | null>(null);\n  const [detailsOpen, setDetailsOpen] = useState(false);\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n  const [activeTab, setActiveTab] = useState(0);\n\n  // Fetch couriers data\n  const { data: couriersData, isLoading } = useQuery({\n    queryKey: ['admin-couriers', filterStatus],\n    queryFn: async () => {\n      const response = await apiClient.get('/admin/users', {\n        params: { role: 'courier', status: filterStatus }\n      });\n      return response.data;\n    }\n  });\n\n  const couriers: Courier[] = Array.isArray(couriersData?.data) \n    ? couriersData.data.map((c: any) => ({\n        ...c,\n        trust_score: Number(c.trust_score) || 0,\n        avg_rating: Number(c.avg_rating) || 0,\n        total_deliveries: Number(c.total_deliveries) || 0,\n        successful_deliveries: Number(c.successful_deliveries) || 0,\n        revenue_generated: Number(c.revenue_generated) || 0\n      }))\n    : [];\n\n  const filteredCouriers = couriers.filter(courier =>\n    courier.email.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    `${courier.first_name} ${courier.last_name}`.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const handleMenuClick = (event: React.MouseEvent<HTMLElement>, courier: Courier) => {\n    setAnchorEl(event.currentTarget);\n    setSelectedCourier(courier);\n  };\n\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleViewDetails = () => {\n    setDetailsOpen(true);\n    handleMenuClose();\n  };\n\n  const getTierColor = (tier: string) => {\n    switch (tier) {\n      case 'tier3': return 'success';\n      case 'tier2': return 'primary';\n      case 'tier1': return 'default';\n      default: return 'default';\n    }\n  };\n\n  const getTierLabel = (tier: string) => {\n    switch (tier) {\n      case 'tier3': return 'Premium';\n      case 'tier2': return 'Professional';\n      case 'tier1': return 'Basic';\n      default: return tier;\n    }\n  };\n\n  const getTrustScoreColor = (score: number) => {\n    if (score >= 90) return 'success';\n    if (score >= 70) return 'primary';\n    if (score >= 50) return 'warning';\n    return 'error';\n  };\n\n  return (\n    <Box sx={{ p: 3 }}>\n      {/* Header */}\n      <Box sx={{ mb: 3 }}>\n        <Typography variant=\"h4\" gutterBottom>\n          Courier Management\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\">\n          Manage courier accounts, performance, and activity\n        </Typography>\n      </Box>\n\n      {/* Stats Cards */}\n      <Grid container spacing={3} sx={{ mb: 3 }}>\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n                <Box>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    Total Couriers\n                  </Typography>\n                  <Typography variant=\"h4\">\n                    {couriers.length}\n                  </Typography>\n                </Box>\n                <Avatar sx={{ bgcolor: 'primary.main' }}>\n                  <CourierIcon />\n                </Avatar>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n                <Box>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    Active Couriers\n                  </Typography>\n                  <Typography variant=\"h4\">\n                    {couriers.filter(c => c.is_active).length}\n                  </Typography>\n                </Box>\n                <Avatar sx={{ bgcolor: 'success.main' }}>\n                  <ActiveIcon />\n                </Avatar>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n                <Box>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    Avg Trust Score\n                  </Typography>\n                  <Typography variant=\"h4\">\n                    {couriers.length > 0 \n                      ? (couriers.reduce((sum, c) => sum + c.trust_score, 0) / couriers.length).toFixed(1)\n                      : '0.0'}\n                  </Typography>\n                </Box>\n                <Avatar sx={{ bgcolor: 'info.main' }}>\n                  <StarIcon />\n                </Avatar>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n                <Box>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    Total Deliveries\n                  </Typography>\n                  <Typography variant=\"h4\">\n                    {couriers.reduce((sum, c) => sum + c.total_deliveries, 0).toLocaleString()}\n                  </Typography>\n                </Box>\n                <Avatar sx={{ bgcolor: 'warning.main' }}>\n                  <TrendingUpIcon />\n                </Avatar>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n\n      {/* Filters and Search */}\n      <Card sx={{ mb: 3 }}>\n        <CardContent>\n          <Grid container spacing={2} alignItems=\"center\">\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                size=\"small\"\n                placeholder=\"Search couriers...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                InputProps={{\n                  startAdornment: (\n                    <InputAdornment position=\"start\">\n                      <SearchIcon />\n                    </InputAdornment>\n                  ),\n                }}\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <Box sx={{ display: 'flex', gap: 1 }}>\n                <Button\n                  variant={filterStatus === 'all' ? 'contained' : 'outlined'}\n                  onClick={() => setFilterStatus('all')}\n                  size=\"small\"\n                >\n                  All\n                </Button>\n                <Button\n                  variant={filterStatus === 'active' ? 'contained' : 'outlined'}\n                  onClick={() => setFilterStatus('active')}\n                  size=\"small\"\n                  color=\"success\"\n                >\n                  Active\n                </Button>\n                <Button\n                  variant={filterStatus === 'inactive' ? 'contained' : 'outlined'}\n                  onClick={() => setFilterStatus('inactive')}\n                  size=\"small\"\n                  color=\"error\"\n                >\n                  Inactive\n                </Button>\n              </Box>\n            </Grid>\n          </Grid>\n        </CardContent>\n      </Card>\n\n      {/* Couriers Table */}\n      <Card>\n        <TableContainer>\n          <Table>\n            <TableHead>\n              <TableRow>\n                <TableCell>Courier</TableCell>\n                <TableCell>Contact</TableCell>\n                <TableCell>Subscription</TableCell>\n                <TableCell align=\"center\">Trust Score</TableCell>\n                <TableCell align=\"center\">Rating</TableCell>\n                <TableCell align=\"center\">Deliveries</TableCell>\n                <TableCell align=\"center\">Success Rate</TableCell>\n                <TableCell align=\"center\">Leads</TableCell>\n                <TableCell>Status</TableCell>\n                <TableCell align=\"center\">Actions</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {isLoading ? (\n                <TableRow>\n                  <TableCell colSpan={10} align=\"center\">\n                    Loading couriers...\n                  </TableCell>\n                </TableRow>\n              ) : filteredCouriers.length === 0 ? (\n                <TableRow>\n                  <TableCell colSpan={10} align=\"center\">\n                    No couriers found\n                  </TableCell>\n                </TableRow>\n              ) : (\n                filteredCouriers.map((courier) => (\n                  <TableRow key={courier.user_id} hover>\n                    <TableCell>\n                      <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                        <Avatar sx={{ bgcolor: 'primary.main' }}>\n                          {courier.first_name?.[0]}{courier.last_name?.[0]}\n                        </Avatar>\n                        <Box>\n                          <Typography variant=\"body2\" fontWeight=\"medium\">\n                            {courier.first_name} {courier.last_name}\n                          </Typography>\n                          <Typography variant=\"caption\" color=\"text.secondary\">\n                            ID: {courier.user_id.substring(0, 8)}...\n                          </Typography>\n                        </Box>\n                      </Box>\n                    </TableCell>\n                    <TableCell>\n                      <Box>\n                        <Typography variant=\"body2\" sx={{ display: 'flex', alignItems: 'center', gap: 0.5 }}>\n                          <EmailIcon fontSize=\"small\" />\n                          {courier.email}\n                        </Typography>\n                        {courier.phone && (\n                          <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: 'flex', alignItems: 'center', gap: 0.5 }}>\n                            <PhoneIcon fontSize=\"small\" />\n                            {courier.phone}\n                          </Typography>\n                        )}\n                      </Box>\n                    </TableCell>\n                    <TableCell>\n                      <Chip\n                        label={getTierLabel(courier.subscription_tier)}\n                        color={getTierColor(courier.subscription_tier)}\n                        size=\"small\"\n                      />\n                    </TableCell>\n                    <TableCell align=\"center\">\n                      <Chip\n                        label={Number(courier.trust_score || 0).toFixed(1)}\n                        color={getTrustScoreColor(Number(courier.trust_score || 0))}\n                        size=\"small\"\n                        icon={<StarIcon />}\n                      />\n                    </TableCell>\n                    <TableCell align=\"center\">\n                      <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\n                        <Rating value={courier.avg_rating} readOnly size=\"small\" precision={0.1} />\n                        <Typography variant=\"caption\" color=\"text.secondary\">\n                          ({courier.total_reviews} reviews)\n                        </Typography>\n                      </Box>\n                    </TableCell>\n                    <TableCell align=\"center\">\n                      <Typography variant=\"body2\" fontWeight=\"medium\">\n                        {courier.total_deliveries}\n                      </Typography>\n                    </TableCell>\n                    <TableCell align=\"center\">\n                      <Box sx={{ width: '100%' }}>\n                        <Typography variant=\"body2\" fontWeight=\"medium\" gutterBottom>\n                          {courier.total_deliveries > 0 \n                            ? Math.round((courier.successful_deliveries / courier.total_deliveries) * 100)\n                            : 0}%\n                        </Typography>\n                        <LinearProgress \n                          variant=\"determinate\" \n                          value={courier.total_deliveries > 0 \n                            ? (courier.successful_deliveries / courier.total_deliveries) * 100\n                            : 0}\n                          color={courier.successful_deliveries / courier.total_deliveries >= 0.9 ? 'success' : 'primary'}\n                        />\n                      </Box>\n                    </TableCell>\n                    <TableCell align=\"center\">\n                      <Typography variant=\"body2\" fontWeight=\"medium\">\n                        {courier.leads_downloaded}\n                      </Typography>\n                    </TableCell>\n                    <TableCell>\n                      <Chip\n                        icon={courier.is_active ? <ActiveIcon /> : <InactiveIcon />}\n                        label={courier.is_active ? 'Active' : 'Inactive'}\n                        color={courier.is_active ? 'success' : 'default'}\n                        size=\"small\"\n                      />\n                    </TableCell>\n                    <TableCell align=\"center\">\n                      <IconButton\n                        size=\"small\"\n                        onClick={(e) => handleMenuClick(e, courier)}\n                      >\n                        <MoreVertIcon />\n                      </IconButton>\n                    </TableCell>\n                  </TableRow>\n                ))\n              )}\n            </TableBody>\n          </Table>\n        </TableContainer>\n      </Card>\n\n      {/* Action Menu */}\n      <Menu\n        anchorEl={anchorEl}\n        open={Boolean(anchorEl)}\n        onClose={handleMenuClose}\n      >\n        <MenuItem onClick={handleViewDetails}>\n          <ViewIcon fontSize=\"small\" sx={{ mr: 1 }} />\n          View Details\n        </MenuItem>\n        <MenuItem onClick={handleMenuClose}>\n          <EmailIcon fontSize=\"small\" sx={{ mr: 1 }} />\n          Send Email\n        </MenuItem>\n        <MenuItem onClick={handleMenuClose}>\n          <DownloadIcon fontSize=\"small\" sx={{ mr: 1 }} />\n          Export Data\n        </MenuItem>\n      </Menu>\n\n      {/* Details Dialog */}\n      <Dialog\n        open={detailsOpen}\n        onClose={() => setDetailsOpen(false)}\n        maxWidth=\"md\"\n        fullWidth\n      >\n        <DialogTitle>\n          Courier Details: {selectedCourier?.first_name} {selectedCourier?.last_name}\n        </DialogTitle>\n        <DialogContent>\n          {selectedCourier && (\n            <Box>\n              <Tabs value={activeTab} onChange={(_, v) => setActiveTab(v)}>\n                <Tab label=\"Overview\" />\n                <Tab label=\"Performance\" />\n                <Tab label=\"Activity\" />\n                <Tab label=\"Revenue\" />\n              </Tabs>\n\n              <TabPanel value={activeTab} index={0}>\n                <Grid container spacing={2}>\n                  <Grid item xs={12} md={6}>\n                    <Typography variant=\"subtitle2\" color=\"text.secondary\">Email</Typography>\n                    <Typography variant=\"body1\" gutterBottom>{selectedCourier.email}</Typography>\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <Typography variant=\"subtitle2\" color=\"text.secondary\">Phone</Typography>\n                    <Typography variant=\"body1\" gutterBottom>{selectedCourier.phone || 'N/A'}</Typography>\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <Typography variant=\"subtitle2\" color=\"text.secondary\">Subscription</Typography>\n                    <Chip label={getTierLabel(selectedCourier.subscription_tier)} color={getTierColor(selectedCourier.subscription_tier)} size=\"small\" />\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <Typography variant=\"subtitle2\" color=\"text.secondary\">Status</Typography>\n                    <Chip label={selectedCourier.is_active ? 'Active' : 'Inactive'} color={selectedCourier.is_active ? 'success' : 'default'} size=\"small\" />\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <Typography variant=\"subtitle2\" color=\"text.secondary\">Member Since</Typography>\n                    <Typography variant=\"body1\">{new Date(selectedCourier.created_at).toLocaleDateString()}</Typography>\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <Typography variant=\"subtitle2\" color=\"text.secondary\">Last Login</Typography>\n                    <Typography variant=\"body1\">{selectedCourier.last_login ? new Date(selectedCourier.last_login).toLocaleDateString() : 'Never'}</Typography>\n                  </Grid>\n                </Grid>\n              </TabPanel>\n\n              <TabPanel value={activeTab} index={1}>\n                <Grid container spacing={2}>\n                  <Grid item xs={6}>\n                    <Card variant=\"outlined\">\n                      <CardContent>\n                        <Typography variant=\"h4\" color={getTrustScoreColor(Number(selectedCourier.trust_score || 0))}>{Number(selectedCourier.trust_score || 0).toFixed(1)}</Typography>\n                        <Typography variant=\"body2\" color=\"text.secondary\">Trust Score</Typography>\n                      </CardContent>\n                    </Card>\n                  </Grid>\n                  <Grid item xs={6}>\n                    <Card variant=\"outlined\">\n                      <CardContent>\n                        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                          <Typography variant=\"h4\">{selectedCourier.avg_rating.toFixed(1)}</Typography>\n                          <StarIcon color=\"warning\" />\n                        </Box>\n                        <Typography variant=\"body2\" color=\"text.secondary\">Average Rating</Typography>\n                      </CardContent>\n                    </Card>\n                  </Grid>\n                  <Grid item xs={6}>\n                    <Card variant=\"outlined\">\n                      <CardContent>\n                        <Typography variant=\"h4\">{selectedCourier.total_deliveries}</Typography>\n                        <Typography variant=\"body2\" color=\"text.secondary\">Total Deliveries</Typography>\n                      </CardContent>\n                    </Card>\n                  </Grid>\n                  <Grid item xs={6}>\n                    <Card variant=\"outlined\">\n                      <CardContent>\n                        <Typography variant=\"h4\" color=\"success.main\">\n                          {selectedCourier.total_deliveries > 0 \n                            ? Math.round((selectedCourier.successful_deliveries / selectedCourier.total_deliveries) * 100)\n                            : 0}%\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"text.secondary\">Success Rate</Typography>\n                      </CardContent>\n                    </Card>\n                  </Grid>\n                </Grid>\n              </TabPanel>\n\n              <TabPanel value={activeTab} index={2}>\n                <Grid container spacing={2}>\n                  <Grid item xs={6}>\n                    <Card variant=\"outlined\">\n                      <CardContent>\n                        <Typography variant=\"h4\">{selectedCourier.leads_downloaded}</Typography>\n                        <Typography variant=\"body2\" color=\"text.secondary\">Leads Downloaded</Typography>\n                      </CardContent>\n                    </Card>\n                  </Grid>\n                  <Grid item xs={6}>\n                    <Card variant=\"outlined\">\n                      <CardContent>\n                        <Typography variant=\"h4\">{selectedCourier.competitor_data_purchased}</Typography>\n                        <Typography variant=\"body2\" color=\"text.secondary\">Data Purchased</Typography>\n                      </CardContent>\n                    </Card>\n                  </Grid>\n                </Grid>\n                <Alert severity=\"info\" sx={{ mt: 2 }}>Activity timeline will be displayed here</Alert>\n              </TabPanel>\n\n              <TabPanel value={activeTab} index={3}>\n                <Card variant=\"outlined\">\n                  <CardContent>\n                    <Typography variant=\"h3\" color=\"success.main\" gutterBottom>\n                      ${selectedCourier.revenue_generated.toLocaleString()}\n                    </Typography>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      Total Revenue Generated\n                    </Typography>\n                  </CardContent>\n                </Card>\n              </TabPanel>\n            </Box>\n          )}\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setDetailsOpen(false)}>Close</Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\admin\\ManageMerchants.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useEffect' is defined but never used.","line":1,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Paper' is defined but never used.","line":4,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CircularProgress' is defined but never used.","line":25,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":19},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Grid' is not defined.","line":147,"column":8,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":147,"endColumn":12},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Grid' is not defined.","line":148,"column":10,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":148,"endColumn":14},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Card' is not defined.","line":149,"column":12,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":149,"endColumn":16},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'CardContent' is not defined.","line":150,"column":14,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":150,"endColumn":25},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Grid' is not defined.","line":168,"column":10,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":168,"endColumn":14},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Card' is not defined.","line":169,"column":12,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":169,"endColumn":16},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'CardContent' is not defined.","line":170,"column":14,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":170,"endColumn":25},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Grid' is not defined.","line":188,"column":10,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":188,"endColumn":14},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Card' is not defined.","line":189,"column":12,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":189,"endColumn":16},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'CardContent' is not defined.","line":190,"column":14,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":190,"endColumn":25},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Grid' is not defined.","line":208,"column":10,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":208,"endColumn":14},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Card' is not defined.","line":209,"column":12,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":209,"endColumn":16},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'CardContent' is not defined.","line":210,"column":14,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":210,"endColumn":25},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Card' is not defined.","line":230,"column":8,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":230,"endColumn":12},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'CardContent' is not defined.","line":231,"column":10,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":231,"endColumn":21},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Grid' is not defined.","line":232,"column":12,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":232,"endColumn":16},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Grid' is not defined.","line":233,"column":14,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":233,"endColumn":18},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Grid' is not defined.","line":249,"column":14,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":249,"endColumn":18},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Card' is not defined.","line":281,"column":8,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":281,"endColumn":12},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Tabs' is not defined.","line":430,"column":16,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":430,"endColumn":20},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Tab' is not defined.","line":431,"column":18,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":431,"endColumn":21},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Tab' is not defined.","line":432,"column":18,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":432,"endColumn":21},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Tab' is not defined.","line":433,"column":18,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":433,"endColumn":21},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Tab' is not defined.","line":434,"column":18,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":434,"endColumn":21},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Grid' is not defined.","line":438,"column":18,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":438,"endColumn":22},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Grid' is not defined.","line":439,"column":20,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":439,"endColumn":24},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Grid' is not defined.","line":443,"column":20,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":443,"endColumn":24},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Grid' is not defined.","line":447,"column":20,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":447,"endColumn":24},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Grid' is not defined.","line":451,"column":20,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":451,"endColumn":24},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Grid' is not defined.","line":455,"column":20,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":455,"endColumn":24},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Grid' is not defined.","line":459,"column":20,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":459,"endColumn":24},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Grid' is not defined.","line":471,"column":18,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":471,"endColumn":22},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Grid' is not defined.","line":472,"column":20,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":472,"endColumn":24},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Card' is not defined.","line":473,"column":22,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":473,"endColumn":26},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'CardContent' is not defined.","line":474,"column":24,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":474,"endColumn":35},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Grid' is not defined.","line":480,"column":20,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":480,"endColumn":24},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Card' is not defined.","line":481,"column":22,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":481,"endColumn":26},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'CardContent' is not defined.","line":482,"column":24,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":482,"endColumn":35},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Grid' is not defined.","line":488,"column":20,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":488,"endColumn":24},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Card' is not defined.","line":489,"column":22,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":489,"endColumn":26},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'CardContent' is not defined.","line":490,"column":24,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":490,"endColumn":35},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Grid' is not defined.","line":496,"column":20,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":496,"endColumn":24},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Card' is not defined.","line":497,"column":22,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":497,"endColumn":26},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'CardContent' is not defined.","line":498,"column":24,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":498,"endColumn":35},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Card' is not defined.","line":508,"column":18,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":508,"endColumn":22},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'CardContent' is not defined.","line":509,"column":20,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":509,"endColumn":31}],"suppressedMessages":[],"errorCount":49,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  Paper,\n  Typography,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  IconButton,\n  Chip,\n  TextField,\n  InputAdornment,\n  Menu,\n  MenuItem,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  Avatar,\n  Alert,\n  CircularProgress,\n} from '@mui/material';\nimport { UserAvatar } from '@/components/common/UserAvatar';\nimport {\n  Search as SearchIcon,\n  MoreVert as MoreVertIcon,\n  Store as StoreIcon,\n  TrendingUp as TrendingUpIcon,\n  AttachMoney as MoneyIcon,\n  Email as EmailIcon,\n  Phone as PhoneIcon,\n  CheckCircle as ActiveIcon,\n  Cancel as InactiveIcon,\n  Download as DownloadIcon,\n  Visibility as ViewIcon,\n} from '@mui/icons-material';\nimport { useQuery } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\n\ninterface Merchant {\n  user_id: string;\n  email: string;\n  first_name: string;\n  last_name: string;\n  phone: string;\n  is_active: boolean;\n  subscription_tier: string;\n  created_at: string;\n  last_login: string;\n  store_count: number;\n  leads_posted: number;\n  leads_downloaded: number;\n  revenue_generated: number;\n  active_leads: number;\n}\n\ninterface TabPanelProps {\n  children?: React.ReactNode;\n  index: number;\n  value: number;\n}\n\nfunction TabPanel(props: TabPanelProps) {\n  const { children, value, index, ...other } = props;\n  return (\n    <div hidden={value !== index} {...other}>\n      {value === index && <Box sx={{ p: 3 }}>{children}</Box>}\n    </div>\n  );\n}\n\nexport const ManageMerchants: React.FC = () => {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterStatus, setFilterStatus] = useState<'all' | 'active' | 'inactive'>('all');\n  const [selectedMerchant, setSelectedMerchant] = useState<Merchant | null>(null);\n  const [detailsOpen, setDetailsOpen] = useState(false);\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n  const [activeTab, setActiveTab] = useState(0);\n\n  // Fetch merchants data\n  const { data: merchantsData, isLoading } = useQuery({\n    queryKey: ['admin-merchants', filterStatus],\n    queryFn: async () => {\n      const response = await apiClient.get('/admin/users', {\n        params: { role: 'merchant', status: filterStatus }\n      });\n      return response.data;\n    }\n  });\n\n  const merchants: Merchant[] = Array.isArray(merchantsData?.data) ? merchantsData.data : [];\n\n  const filteredMerchants = merchants.filter(merchant =>\n    merchant.email.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    `${merchant.first_name} ${merchant.last_name}`.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const handleMenuClick = (event: React.MouseEvent<HTMLElement>, merchant: Merchant) => {\n    setAnchorEl(event.currentTarget);\n    setSelectedMerchant(merchant);\n  };\n\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleViewDetails = () => {\n    setDetailsOpen(true);\n    handleMenuClose();\n  };\n\n  const getTierColor = (tier: string) => {\n    switch (tier) {\n      case 'tier3': return 'success';\n      case 'tier2': return 'primary';\n      case 'tier1': return 'default';\n      default: return 'default';\n    }\n  };\n\n  const getTierLabel = (tier: string) => {\n    switch (tier) {\n      case 'tier3': return 'Premium';\n      case 'tier2': return 'Professional';\n      case 'tier1': return 'Basic';\n      default: return tier;\n    }\n  };\n\n  return (\n    <Box sx={{ p: 3 }}>\n      {/* Header */}\n      <Box sx={{ mb: 3 }}>\n        <Typography variant=\"h4\" gutterBottom>\n          Merchant Management\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\">\n          Manage merchant accounts, subscriptions, and activity\n        </Typography>\n      </Box>\n\n      {/* Stats Cards */}\n      <Grid container spacing={3} sx={{ mb: 3 }}>\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n                <Box>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    Total Merchants\n                  </Typography>\n                  <Typography variant=\"h4\">\n                    {merchants.length}\n                  </Typography>\n                </Box>\n                <Avatar sx={{ bgcolor: 'primary.main' }}>\n                  <StoreIcon />\n                </Avatar>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n                <Box>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    Active Merchants\n                  </Typography>\n                  <Typography variant=\"h4\">\n                    {merchants.filter(m => m.is_active).length}\n                  </Typography>\n                </Box>\n                <Avatar sx={{ bgcolor: 'success.main' }}>\n                  <ActiveIcon />\n                </Avatar>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n                <Box>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    Total Leads Posted\n                  </Typography>\n                  <Typography variant=\"h4\">\n                    {merchants.reduce((sum, m) => sum + m.leads_posted, 0)}\n                  </Typography>\n                </Box>\n                <Avatar sx={{ bgcolor: 'info.main' }}>\n                  <TrendingUpIcon />\n                </Avatar>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n                <Box>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    Total Revenue\n                  </Typography>\n                  <Typography variant=\"h4\">\n                    ${merchants.reduce((sum, m) => sum + m.revenue_generated, 0).toLocaleString()}\n                  </Typography>\n                </Box>\n                <Avatar sx={{ bgcolor: 'warning.main' }}>\n                  <MoneyIcon />\n                </Avatar>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n\n      {/* Filters and Search */}\n      <Card sx={{ mb: 3 }}>\n        <CardContent>\n          <Grid container spacing={2} alignItems=\"center\">\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                size=\"small\"\n                placeholder=\"Search merchants...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                InputProps={{\n                  startAdornment: (\n                    <InputAdornment position=\"start\">\n                      <SearchIcon />\n                    </InputAdornment>\n                  ),\n                }}\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <Box sx={{ display: 'flex', gap: 1 }}>\n                <Button\n                  variant={filterStatus === 'all' ? 'contained' : 'outlined'}\n                  onClick={() => setFilterStatus('all')}\n                  size=\"small\"\n                >\n                  All\n                </Button>\n                <Button\n                  variant={filterStatus === 'active' ? 'contained' : 'outlined'}\n                  onClick={() => setFilterStatus('active')}\n                  size=\"small\"\n                  color=\"success\"\n                >\n                  Active\n                </Button>\n                <Button\n                  variant={filterStatus === 'inactive' ? 'contained' : 'outlined'}\n                  onClick={() => setFilterStatus('inactive')}\n                  size=\"small\"\n                  color=\"error\"\n                >\n                  Inactive\n                </Button>\n              </Box>\n            </Grid>\n          </Grid>\n        </CardContent>\n      </Card>\n\n      {/* Merchants Table */}\n      <Card>\n        <TableContainer>\n          <Table>\n            <TableHead>\n              <TableRow>\n                <TableCell>Merchant</TableCell>\n                <TableCell>Contact</TableCell>\n                <TableCell>Subscription</TableCell>\n                <TableCell align=\"center\">Stores</TableCell>\n                <TableCell align=\"center\">Leads Posted</TableCell>\n                <TableCell align=\"center\">Active Leads</TableCell>\n                <TableCell align=\"center\">Revenue</TableCell>\n                <TableCell>Status</TableCell>\n                <TableCell align=\"center\">Actions</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {isLoading ? (\n                <TableRow>\n                  <TableCell colSpan={9} align=\"center\">\n                    Loading merchants...\n                  </TableCell>\n                </TableRow>\n              ) : filteredMerchants.length === 0 ? (\n                <TableRow>\n                  <TableCell colSpan={9} align=\"center\">\n                    No merchants found\n                  </TableCell>\n                </TableRow>\n              ) : (\n                filteredMerchants.map((merchant) => (\n                  <TableRow key={merchant.user_id} hover>\n                    <TableCell>\n                      <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                        <UserAvatar\n                          name={`${merchant.first_name} ${merchant.last_name}`}\n                          size=\"medium\"\n                          type=\"consumer\"\n                        />\n                        <Box>\n                          <Typography variant=\"body2\" fontWeight=\"medium\">\n                            {merchant.first_name} {merchant.last_name}\n                          </Typography>\n                          <Typography variant=\"caption\" color=\"text.secondary\">\n                            ID: {merchant.user_id.substring(0, 8)}...\n                          </Typography>\n                        </Box>\n                      </Box>\n                    </TableCell>\n                    <TableCell>\n                      <Box>\n                        <Typography variant=\"body2\" sx={{ display: 'flex', alignItems: 'center', gap: 0.5 }}>\n                          <EmailIcon fontSize=\"small\" />\n                          {merchant.email}\n                        </Typography>\n                        {merchant.phone && (\n                          <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: 'flex', alignItems: 'center', gap: 0.5 }}>\n                            <PhoneIcon fontSize=\"small\" />\n                            {merchant.phone}\n                          </Typography>\n                        )}\n                      </Box>\n                    </TableCell>\n                    <TableCell>\n                      <Chip\n                        label={getTierLabel(merchant.subscription_tier)}\n                        color={getTierColor(merchant.subscription_tier)}\n                        size=\"small\"\n                      />\n                    </TableCell>\n                    <TableCell align=\"center\">\n                      <Typography variant=\"body2\" fontWeight=\"medium\">\n                        {merchant.store_count}\n                      </Typography>\n                    </TableCell>\n                    <TableCell align=\"center\">\n                      <Typography variant=\"body2\" fontWeight=\"medium\">\n                        {merchant.leads_posted}\n                      </Typography>\n                    </TableCell>\n                    <TableCell align=\"center\">\n                      <Chip\n                        label={merchant.active_leads}\n                        color={merchant.active_leads > 0 ? 'success' : 'default'}\n                        size=\"small\"\n                      />\n                    </TableCell>\n                    <TableCell align=\"center\">\n                      <Typography variant=\"body2\" fontWeight=\"medium\" color=\"success.main\">\n                        ${merchant.revenue_generated.toLocaleString()}\n                      </Typography>\n                    </TableCell>\n                    <TableCell>\n                      <Chip\n                        icon={merchant.is_active ? <ActiveIcon /> : <InactiveIcon />}\n                        label={merchant.is_active ? 'Active' : 'Inactive'}\n                        color={merchant.is_active ? 'success' : 'default'}\n                        size=\"small\"\n                      />\n                    </TableCell>\n                    <TableCell align=\"center\">\n                      <IconButton\n                        size=\"small\"\n                        onClick={(e) => handleMenuClick(e, merchant)}\n                      >\n                        <MoreVertIcon />\n                      </IconButton>\n                    </TableCell>\n                  </TableRow>\n                ))\n              )}\n            </TableBody>\n          </Table>\n        </TableContainer>\n      </Card>\n\n      {/* Action Menu */}\n      <Menu\n        anchorEl={anchorEl}\n        open={Boolean(anchorEl)}\n        onClose={handleMenuClose}\n      >\n        <MenuItem onClick={handleViewDetails}>\n          <ViewIcon fontSize=\"small\" sx={{ mr: 1 }} />\n          View Details\n        </MenuItem>\n        <MenuItem onClick={handleMenuClose}>\n          <EmailIcon fontSize=\"small\" sx={{ mr: 1 }} />\n          Send Email\n        </MenuItem>\n        <MenuItem onClick={handleMenuClose}>\n          <DownloadIcon fontSize=\"small\" sx={{ mr: 1 }} />\n          Export Data\n        </MenuItem>\n      </Menu>\n\n      {/* Details Dialog */}\n      <Dialog\n        open={detailsOpen}\n        onClose={() => setDetailsOpen(false)}\n        maxWidth=\"md\"\n        fullWidth\n      >\n        <DialogTitle>\n          Merchant Details: {selectedMerchant?.first_name} {selectedMerchant?.last_name}\n        </DialogTitle>\n        <DialogContent>\n          {selectedMerchant && (\n            <Box>\n              <Tabs value={activeTab} onChange={(_, v) => setActiveTab(v)}>\n                <Tab label=\"Overview\" />\n                <Tab label=\"Activity\" />\n                <Tab label=\"Leads\" />\n                <Tab label=\"Revenue\" />\n              </Tabs>\n\n              <TabPanel value={activeTab} index={0}>\n                <Grid container spacing={2}>\n                  <Grid item xs={12} md={6}>\n                    <Typography variant=\"subtitle2\" color=\"text.secondary\">Email</Typography>\n                    <Typography variant=\"body1\" gutterBottom>{selectedMerchant.email}</Typography>\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <Typography variant=\"subtitle2\" color=\"text.secondary\">Phone</Typography>\n                    <Typography variant=\"body1\" gutterBottom>{selectedMerchant.phone || 'N/A'}</Typography>\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <Typography variant=\"subtitle2\" color=\"text.secondary\">Subscription</Typography>\n                    <Chip label={getTierLabel(selectedMerchant.subscription_tier)} color={getTierColor(selectedMerchant.subscription_tier)} size=\"small\" />\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <Typography variant=\"subtitle2\" color=\"text.secondary\">Status</Typography>\n                    <Chip label={selectedMerchant.is_active ? 'Active' : 'Inactive'} color={selectedMerchant.is_active ? 'success' : 'default'} size=\"small\" />\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <Typography variant=\"subtitle2\" color=\"text.secondary\">Member Since</Typography>\n                    <Typography variant=\"body1\">{new Date(selectedMerchant.created_at).toLocaleDateString()}</Typography>\n                  </Grid>\n                  <Grid item xs={12} md={6}>\n                    <Typography variant=\"subtitle2\" color=\"text.secondary\">Last Login</Typography>\n                    <Typography variant=\"body1\">{selectedMerchant.last_login ? new Date(selectedMerchant.last_login).toLocaleDateString() : 'Never'}</Typography>\n                  </Grid>\n                </Grid>\n              </TabPanel>\n\n              <TabPanel value={activeTab} index={1}>\n                <Alert severity=\"info\">Activity timeline will be displayed here</Alert>\n              </TabPanel>\n\n              <TabPanel value={activeTab} index={2}>\n                <Grid container spacing={2}>\n                  <Grid item xs={6}>\n                    <Card variant=\"outlined\">\n                      <CardContent>\n                        <Typography variant=\"h4\">{selectedMerchant.leads_posted}</Typography>\n                        <Typography variant=\"body2\" color=\"text.secondary\">Total Leads Posted</Typography>\n                      </CardContent>\n                    </Card>\n                  </Grid>\n                  <Grid item xs={6}>\n                    <Card variant=\"outlined\">\n                      <CardContent>\n                        <Typography variant=\"h4\">{selectedMerchant.active_leads}</Typography>\n                        <Typography variant=\"body2\" color=\"text.secondary\">Active Leads</Typography>\n                      </CardContent>\n                    </Card>\n                  </Grid>\n                  <Grid item xs={6}>\n                    <Card variant=\"outlined\">\n                      <CardContent>\n                        <Typography variant=\"h4\">{selectedMerchant.leads_downloaded}</Typography>\n                        <Typography variant=\"body2\" color=\"text.secondary\">Total Downloads</Typography>\n                      </CardContent>\n                    </Card>\n                  </Grid>\n                  <Grid item xs={6}>\n                    <Card variant=\"outlined\">\n                      <CardContent>\n                        <Typography variant=\"h4\">{selectedMerchant.leads_downloaded > 0 ? Math.round((selectedMerchant.leads_downloaded / selectedMerchant.leads_posted) * 100) : 0}%</Typography>\n                        <Typography variant=\"body2\" color=\"text.secondary\">Conversion Rate</Typography>\n                      </CardContent>\n                    </Card>\n                  </Grid>\n                </Grid>\n              </TabPanel>\n\n              <TabPanel value={activeTab} index={3}>\n                <Card variant=\"outlined\">\n                  <CardContent>\n                    <Typography variant=\"h3\" color=\"success.main\" gutterBottom>\n                      ${selectedMerchant.revenue_generated.toLocaleString()}\n                    </Typography>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      Total Revenue Generated\n                    </Typography>\n                  </CardContent>\n                </Card>\n              </TabPanel>\n            </Box>\n          )}\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setDetailsOpen(false)}>Close</Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\admin\\ManageStores.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":120,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":120,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2979,2982],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2979,2982],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":137,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":137,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3555,3558],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3555,3558],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":151,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":151,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4017,4020],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4017,4020],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":163,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":163,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4265,4268],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4265,4268],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":490,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":490,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16002,16005],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16002,16005],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Box,\n  Typography,\n  Button,\n  Grid,\n  Avatar,\n  Chip,\n  IconButton,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  TextField,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Paper,\n  Switch,\n  FormControlLabel\n} from '@mui/material';\nimport {\n  Add,\n  Edit,\n  Delete,\n  Store,\n  Email,\n  Phone,\n  LocationOn,\n  Business,\n} from '@mui/icons-material';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { useForm, Controller } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\nimport { apiClient } from '@/services/apiClient';\nimport toast from 'react-hot-toast';\n\ninterface EcommerceStore {\n  store_id: string;\n  store_name: string;\n  store_description: string;\n  contact_email: string;\n  contact_phone: string;\n  address: string;\n  website_url?: string;\n  business_type: string;\n  is_active: boolean;\n  created_at: string;\n  total_orders?: number;\n  owner_name: string;\n}\n\ninterface StoreFormData {\n  store_name: string;\n  store_description: string;\n  contact_email: string;\n  contact_phone: string;\n  address: string;\n  website_url?: string;\n  business_type: string;\n  is_active: boolean;\n  owner_name: string;\n}\n\nconst schema = yup.object({\n  store_name: yup.string().required('Store name is required').max(255),\n  store_description: yup.string().required('Description is required').max(1000),\n  contact_email: yup.string().email('Invalid email').required('Email is required'),\n  contact_phone: yup.string().required('Phone is required'),\n  address: yup.string().required('Address is required'),\n  website_url: yup.string().url('Invalid URL').notRequired(),\n  business_type: yup.string().required('Business type is required'),\n  is_active: yup.boolean().required(),\n  owner_name: yup.string().required('Owner name is required').max(255),\n});\n\nconst businessTypes = [\n  'Retail',\n  'Wholesale',\n  'Manufacturing',\n  'E-commerce',\n  'Marketplace',\n  'Dropshipping',\n  'Subscription',\n  'Other',\n];\n\nexport const ManageStores: React.FC = () => {\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [editingStore, setEditingStore] = useState<EcommerceStore | null>(null);\n  const queryClient = useQueryClient();\n\n  const { data: stores } = useQuery({\n    queryKey: ['admin-stores'],\n    queryFn: async () => {\n      const response = await apiClient.get('/admin/stores');\n      return response.data.data;\n    }\n  });\n\n  const createStoreMutation = useMutation({\n    mutationFn: async (data: StoreFormData) => {\n      const response = await apiClient.post('/admin/stores', data);\n      return response.data;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['admin-stores'] });\n      setDialogOpen(false);\n      reset();\n      toast.success('Store created successfully');\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || 'Failed to create store');\n    },\n  });\n\n  const updateStoreMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: StoreFormData }) => {\n      const response = await apiClient.put(`/admin/stores/${id}`, data);\n      return response.data;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['admin-stores'] });\n      setDialogOpen(false);\n      setEditingStore(null);\n      reset();\n      toast.success('Store updated successfully');\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || 'Failed to update store');\n    },\n  });\n\n  const deleteStoreMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const response = await apiClient.delete(`/admin/stores/${id}`);\n      return response.data;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['admin-stores'] });\n      toast.success('Store deleted successfully');\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || 'Failed to delete store');\n    },\n  });\n\n  const {\n    control,\n    handleSubmit,\n    formState: { errors },\n    reset,\n    setValue,\n  } = useForm({\n    resolver: yupResolver(schema) as any,\n    defaultValues: {\n      store_name: '',\n      store_description: '',\n      contact_email: '',\n      contact_phone: '',\n      address: '',\n      website_url: '',\n      business_type: '',\n      is_active: true,\n      owner_name: '',\n    },\n  });\n\n  const handleOpenDialog = (store?: EcommerceStore) => {\n    if (store) {\n      setEditingStore(store);\n      setValue('store_name', store.store_name);\n      setValue('store_description', store.store_description);\n      setValue('contact_email', store.contact_email);\n      setValue('contact_phone', store.contact_phone);\n      setValue('address', store.address);\n      setValue('website_url', store.website_url || '');\n      setValue('business_type', store.business_type);\n      setValue('is_active', store.is_active);\n      setValue('owner_name', store.owner_name);\n    } else {\n      setEditingStore(null);\n      reset();\n    }\n    setDialogOpen(true);\n  };\n\n  const handleCloseDialog = () => {\n    setDialogOpen(false);\n    setEditingStore(null);\n    reset();\n  };\n\n  const onSubmit = (data: StoreFormData) => {\n    if (editingStore) {\n      updateStoreMutation.mutate({ id: editingStore.store_id, data });\n    } else {\n      createStoreMutation.mutate(data);\n    }\n  };\n\n  const handleDelete = (id: string) => {\n    if (window.confirm('Are you sure you want to delete this store?')) {\n      deleteStoreMutation.mutate(id);\n    }\n  };\n\n  return (\n    <Box>\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 4 }}>\n        <Typography variant=\"h4\" gutterBottom>\n          Manage E-commerce Stores\n        </Typography>\n        <Button\n          variant=\"contained\"\n          startIcon={<Add />}\n          onClick={() => handleOpenDialog()}\n        >\n          Add Store\n        </Button>\n      </Box>\n\n      <TableContainer component={Paper}>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>Store</TableCell>\n              <TableCell>Owner</TableCell>\n              <TableCell>Contact</TableCell>\n              <TableCell>Business Type</TableCell>\n              <TableCell>Orders</TableCell>\n              <TableCell>Status</TableCell>\n              <TableCell>Actions</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {stores?.map((store: EcommerceStore) => (\n              <TableRow key={store.store_id}>\n                <TableCell>\n                  <Box sx={{ display: 'flex', alignItems: 'center' }}>\n                    <Avatar sx={{ mr: 2, bgcolor: 'secondary.main' }}>\n                      <Store />\n                    </Avatar>\n                    <Box>\n                      <Typography variant=\"subtitle2\">\n                        {store.store_name}\n                      </Typography>\n                      <Typography variant=\"caption\" color=\"text.secondary\">\n                        {store.store_description.length > 50\n                          ? `${store.store_description.slice(0, 50)}...`\n                          : store.store_description}\n                      </Typography>\n                      {store.website_url && (\n                        <Typography variant=\"caption\" display=\"block\" color=\"primary\">\n                          {store.website_url}\n                        </Typography>\n                      )}\n                    </Box>\n                  </Box>\n                </TableCell>\n                <TableCell>\n                  <Box sx={{ display: 'flex', alignItems: 'center' }}>\n                    <Business sx={{ fontSize: 16, mr: 1 }} />\n                    <Typography variant=\"body2\">{store.owner_name}</Typography>\n                  </Box>\n                </TableCell>\n                <TableCell>\n                  <Box>\n                    <Box sx={{ display: 'flex', alignItems: 'center', mb: 0.5 }}>\n                      <Email sx={{ fontSize: 16, mr: 1 }} />\n                      <Typography variant=\"body2\">{store.contact_email}</Typography>\n                    </Box>\n                    <Box sx={{ display: 'flex', alignItems: 'center', mb: 0.5 }}>\n                      <Phone sx={{ fontSize: 16, mr: 1 }} />\n                      <Typography variant=\"body2\">{store.contact_phone}</Typography>\n                    </Box>\n                    <Box sx={{ display: 'flex', alignItems: 'center' }}>\n                      <LocationOn sx={{ fontSize: 16, mr: 1 }} />\n                      <Typography variant=\"body2\" noWrap sx={{ maxWidth: 200 }}>\n                        {store.address}\n                      </Typography>\n                    </Box>\n                  </Box>\n                </TableCell>\n                <TableCell>\n                  <Chip label={store.business_type} size=\"small\" color=\"info\" />\n                </TableCell>\n                <TableCell>\n                  <Typography variant=\"body2\">\n                    {store.total_orders?.toLocaleString() || '0'}\n                  </Typography>\n                </TableCell>\n                <TableCell>\n                  <Chip\n                    label={store.is_active ? 'Active' : 'Inactive'}\n                    color={store.is_active ? 'success' : 'default'}\n                    size=\"small\"\n                  />\n                </TableCell>\n                <TableCell>\n                  <IconButton\n                    size=\"small\"\n                    onClick={() => handleOpenDialog(store)}\n                    color=\"primary\"\n                  >\n                    <Edit />\n                  </IconButton>\n                  <IconButton\n                    size=\"small\"\n                    onClick={() => handleDelete(store.store_id)}\n                    color=\"error\"\n                  >\n                    <Delete />\n                  </IconButton>\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </TableContainer>\n\n      {/* Add/Edit Dialog */}\n      <Dialog open={dialogOpen} onClose={handleCloseDialog} maxWidth=\"md\" fullWidth>\n        <DialogTitle>\n          {editingStore ? 'Edit Store' : 'Add New Store'}\n        </DialogTitle>\n        <DialogContent>\n          <Box component=\"form\" sx={{ mt: 2 }}>\n            <Grid container spacing={2}>\n              <Grid item xs={12} sm={6}>\n                <Controller\n                  name=\"store_name\"\n                  control={control}\n                  render={({ field }) => (\n                    <TextField\n                      {...field}\n                      fullWidth\n                      label=\"Store Name\"\n                      error={!!errors.store_name}\n                      helperText={errors.store_name?.message}\n                    />\n                  )}\n                />\n              </Grid>\n              <Grid item xs={12} sm={6}>\n                <Controller\n                  name=\"owner_name\"\n                  control={control}\n                  render={({ field }) => (\n                    <TextField\n                      {...field}\n                      fullWidth\n                      label=\"Owner Name\"\n                      error={!!errors.owner_name}\n                      helperText={errors.owner_name?.message}\n                    />\n                  )}\n                />\n              </Grid>\n              <Grid item xs={12}>\n                <Controller\n                  name=\"store_description\"\n                  control={control}\n                  render={({ field }) => (\n                    <TextField\n                      {...field}\n                      fullWidth\n                      label=\"Store Description\"\n                      multiline\n                      rows={3}\n                      error={!!errors.store_description}\n                      helperText={errors.store_description?.message}\n                    />\n                  )}\n                />\n              </Grid>\n              <Grid item xs={12} sm={6}>\n                <Controller\n                  name=\"contact_email\"\n                  control={control}\n                  render={({ field }) => (\n                    <TextField\n                      {...field}\n                      fullWidth\n                      label=\"Contact Email\"\n                      type=\"email\"\n                      error={!!errors.contact_email}\n                      helperText={errors.contact_email?.message}\n                    />\n                  )}\n                />\n              </Grid>\n              <Grid item xs={12} sm={6}>\n                <Controller\n                  name=\"contact_phone\"\n                  control={control}\n                  render={({ field }) => (\n                    <TextField\n                      {...field}\n                      fullWidth\n                      label=\"Contact Phone\"\n                      error={!!errors.contact_phone}\n                      helperText={errors.contact_phone?.message}\n                    />\n                  )}\n                />\n              </Grid>\n              <Grid item xs={12}>\n                <Controller\n                  name=\"address\"\n                  control={control}\n                  render={({ field }) => (\n                    <TextField\n                      {...field}\n                      fullWidth\n                      label=\"Business Address\"\n                      multiline\n                      rows={2}\n                      error={!!errors.address}\n                      helperText={errors.address?.message}\n                    />\n                  )}\n                />\n              </Grid>\n              <Grid item xs={12} sm={6}>\n                <Controller\n                  name=\"website_url\"\n                  control={control}\n                  render={({ field }) => (\n                    <TextField\n                      {...field}\n                      fullWidth\n                      label=\"Website URL (Optional)\"\n                      placeholder=\"https://example.com\"\n                      error={!!errors.website_url}\n                      helperText={errors.website_url?.message}\n                    />\n                  )}\n                />\n              </Grid>\n              <Grid item xs={12} sm={6}>\n                <Controller\n                  name=\"business_type\"\n                  control={control}\n                  render={({ field }) => (\n                    <FormControl fullWidth error={!!errors.business_type}>\n                      <InputLabel>Business Type</InputLabel>\n                      <Select {...field} label=\"Business Type\">\n                        {businessTypes.map((type) => (\n                          <MenuItem key={type} value={type}>\n                            {type}\n                          </MenuItem>\n                        ))}\n                      </Select>\n                      {errors.business_type && (\n                        <Typography variant=\"caption\" color=\"error\" sx={{ ml: 2, mt: 0.5 }}>\n                          {errors.business_type.message}\n                        </Typography>\n                      )}\n                    </FormControl>\n                  )}\n                />\n              </Grid>\n              <Grid item xs={12}>\n                <Controller\n                  name=\"is_active\"\n                  control={control}\n                  render={({ field }) => (\n                    <FormControlLabel\n                      control={<Switch {...field} checked={field.value} />}\n                      label=\"Active\"\n                    />\n                  )}\n                />\n              </Grid>\n            </Grid>\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleCloseDialog}>Cancel</Button>\n          <Button\n            onClick={handleSubmit(onSubmit as any)}\n            variant=\"contained\"\n            disabled={createStoreMutation.isPending || updateStoreMutation.isPending}\n          >\n            {editingStore ? 'Update' : 'Create'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\admin\\ManageSubscriptions.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":61,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":61,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1105,1108],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1105,1108],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":62,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":62,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1125,1128],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1125,1128],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":111,"column":77,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":111,"endColumn":80,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2863,2866],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2863,2866],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":117,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":117,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3135,3138],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3135,3138],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":117,"column":80,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":117,"endColumn":83,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3145,3148],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3145,3148],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Container,\n  Grid,\n  Card,\n  CardContent,\n  Typography,\n  Button,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Paper,\n  IconButton,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  TextField,\n  Chip,\n  Box,\n  Tab,\n  Tabs,\n  CircularProgress,\n  Alert\n} from '@mui/material';\nimport {\n  Edit,\n  Delete,\n  Add,\n  AttachMoney,\n  People,\n  TrendingUp\n} from '@mui/icons-material';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\n\ninterface TabPanelProps {\n  children?: React.ReactNode;\n  index: number;\n  value: number;\n}\n\nfunction TabPanel(props: TabPanelProps) {\n  const { children, value, index, ...other } = props;\n  return (\n    <div role=\"tabpanel\" hidden={value !== index} {...other}>\n      {value === index && <Box sx={{ p: 3 }}>{children}</Box>}\n    </div>\n  );\n}\n\ninterface SubscriptionPlan {\n  plan_id: string;\n  plan_name: string;\n  user_role: string;\n  price_monthly: number;\n  price_yearly: number;\n  features_json: any;\n  limits_json: any;\n  max_couriers?: number | null;\n  max_shops?: number | null;\n  is_active: boolean;\n  active_subscribers?: number;\n  monthly_revenue?: number;\n}\n\ninterface Addon {\n  addon_id: string;\n  addon_name: string;\n  addon_type: string;\n  user_role: string;\n  price: number;\n  billing_cycle: string;\n  description: string;\n  is_active: boolean;\n}\n\nexport const ManageSubscriptions: React.FC = () => {\n  const [activeTab, setActiveTab] = useState(0);\n  const [editDialogOpen, setEditDialogOpen] = useState(false);\n  const [selectedPlan, setSelectedPlan] = useState<SubscriptionPlan | null>(null);\n  const queryClient = useQueryClient();\n  \n  // Fetch subscription plans from API\n  const { data: plansData, isLoading: plansLoading, error: plansError } = useQuery({\n    queryKey: ['admin', 'subscription-plans'],\n    queryFn: async () => {\n      const response = await apiClient.get('/api/admin/subscription-plans-v2');\n      return response.data;\n    }\n  });\n\n  // Fetch active subscriptions for statistics\n  const { data: subscriptionsData, isLoading: subscriptionsLoading } = useQuery({\n    queryKey: ['admin', 'subscriptions'],\n    queryFn: async () => {\n      const response = await apiClient.get('/api/admin/subscriptions');\n      return response.data;\n    }\n  });\n\n  // Separate plans by role\n  const merchantPlans: SubscriptionPlan[] = plansData?.data?.filter((p: SubscriptionPlan) => p.user_role === 'merchant') || [];\n  const courierPlans: SubscriptionPlan[] = plansData?.data?.filter((p: SubscriptionPlan) => p.user_role === 'courier') || [];\n\n  // Calculate statistics from subscriptions data\n  const totalSubscribers = subscriptionsData?.data?.length || 0;\n  const monthlyRevenue = subscriptionsData?.data?.reduce((sum: number, sub: any) => {\n    const plan = plansData?.data?.find((p: SubscriptionPlan) => p.plan_id === sub.plan_id);\n    return sum + (plan?.price_monthly || 0);\n  }, 0) || 0;\n\n  // Calculate subscriber count per plan\n  const planSubscriberCounts = subscriptionsData?.data?.reduce((acc: any, sub: any) => {\n    acc[sub.plan_id] = (acc[sub.plan_id] || 0) + 1;\n    return acc;\n  }, {}) || {};\n\n  // Add subscriber counts and revenue to plans\n  const enrichedMerchantPlans = merchantPlans.map(plan => ({\n    ...plan,\n    active_subscribers: planSubscriberCounts[plan.plan_id] || 0,\n    monthly_revenue: (planSubscriberCounts[plan.plan_id] || 0) * plan.price_monthly\n  }));\n\n  const enrichedCourierPlans = courierPlans.map(plan => ({\n    ...plan,\n    active_subscribers: planSubscriberCounts[plan.plan_id] || 0,\n    monthly_revenue: (planSubscriberCounts[plan.plan_id] || 0) * plan.price_monthly\n  }));\n\n  // Addons - keep empty for now (can be added later)\n  const addons: Addon[] = [];\n\n  // Mutation for updating plan\n  const updatePlanMutation = useMutation({\n    mutationFn: async (plan: SubscriptionPlan) => {\n      const response = await apiClient.put('/api/admin/subscription-plans-v2', plan);\n      return response.data;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['admin', 'subscription-plans'] });\n      setEditDialogOpen(false);\n    }\n  });\n\n  // Mutation for creating plan\n  const createPlanMutation = useMutation({\n    mutationFn: async (plan: Partial<SubscriptionPlan>) => {\n      const response = await apiClient.post('/api/admin/subscription-plans-v2', plan);\n      return response.data;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['admin', 'subscription-plans'] });\n      setEditDialogOpen(false);\n    }\n  });\n\n  // Mutation for deleting plan\n  const deletePlanMutation = useMutation({\n    mutationFn: async (planId: string) => {\n      const response = await apiClient.delete(`/api/admin/subscription-plans-v2?plan_id=${planId}`);\n      return response.data;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['admin', 'subscription-plans'] });\n    }\n  });\n\n  const handleEditPlan = (plan: SubscriptionPlan) => {\n    setSelectedPlan(plan);\n    setEditDialogOpen(true);\n  };\n\n  const handleNewPlan = () => {\n    setSelectedPlan({\n      plan_id: '',\n      plan_name: '',\n      user_role: 'merchant',\n      price_monthly: 0,\n      price_yearly: 0,\n      features_json: {},\n      limits_json: {},\n      max_couriers: null,\n      max_shops: null,\n      is_active: true\n    });\n    setEditDialogOpen(true);\n  };\n\n  const handleSavePlan = () => {\n    if (!selectedPlan) return;\n\n    if (selectedPlan.plan_id) {\n      // Update existing plan\n      updatePlanMutation.mutate(selectedPlan);\n    } else {\n      // Create new plan\n      createPlanMutation.mutate(selectedPlan);\n    }\n  };\n\n  const handleDeletePlan = (planId: string) => {\n    if (confirm('Are you sure you want to delete this plan? This cannot be undone.')) {\n      deletePlanMutation.mutate(planId);\n    }\n  };\n\n  const renderPlanTable = (plans: SubscriptionPlan[]) => (\n    <TableContainer component={Paper}>\n      <Table>\n        <TableHead>\n          <TableRow>\n            <TableCell>Plan Name</TableCell>\n            <TableCell>Monthly Price</TableCell>\n            <TableCell>Yearly Price</TableCell>\n            <TableCell>Limits</TableCell>\n            <TableCell>Subscribers</TableCell>\n            <TableCell>Revenue</TableCell>\n            <TableCell>Status</TableCell>\n            <TableCell>Actions</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {plans.map((plan) => (\n            <TableRow key={plan.plan_id}>\n              <TableCell>{plan.plan_name}</TableCell>\n              <TableCell>${plan.price_monthly}</TableCell>\n              <TableCell>${plan.price_yearly}</TableCell>\n              <TableCell>\n                {plan.max_couriers === null || plan.max_couriers === -1 ? 'Unlimited' : plan.max_couriers} couriers,{' '}\n                {plan.max_shops === null || plan.max_shops === -1 ? 'Unlimited' : plan.max_shops} shops\n              </TableCell>\n              <TableCell>\n                <Chip label={plan.active_subscribers} color=\"primary\" size=\"small\" />\n              </TableCell>\n              <TableCell>${plan.monthly_revenue?.toFixed(2)}</TableCell>\n              <TableCell>\n                <Chip \n                  label={plan.is_active ? 'Active' : 'Inactive'} \n                  color={plan.is_active ? 'success' : 'default'}\n                  size=\"small\"\n                />\n              </TableCell>\n              <TableCell>\n                <IconButton size=\"small\" onClick={() => handleEditPlan(plan)}>\n                  <Edit />\n                </IconButton>\n                <IconButton \n                  size=\"small\" \n                  color=\"error\"\n                  onClick={() => handleDeletePlan(plan.plan_id)}\n                  disabled={deletePlanMutation.isPending}\n                >\n                  <Delete />\n                </IconButton>\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  );\n\n  // Show loading state\n  if (plansLoading || subscriptionsLoading) {\n    return (\n      <Container maxWidth=\"xl\">\n        <Box sx={{ py: 4, display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '400px' }}>\n          <CircularProgress />\n        </Box>\n      </Container>\n    );\n  }\n\n  // Show error state\n  if (plansError) {\n    return (\n      <Container maxWidth=\"xl\">\n        <Box sx={{ py: 4 }}>\n          <Alert severity=\"error\">\n            Failed to load subscription plans. Please try again.\n          </Alert>\n        </Box>\n      </Container>\n    );\n  }\n\n  return (\n    <Container maxWidth=\"xl\">\n      <Box sx={{ py: 4 }}>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n          <Typography variant=\"h4\">\n            Subscription Management\n          </Typography>\n          <Button \n            variant=\"contained\" \n            startIcon={<Add />}\n            onClick={handleNewPlan}\n          >\n            New Plan\n          </Button>\n        </Box>\n\n        {/* Summary Cards */}\n        <Grid container spacing={3} sx={{ mb: 3 }}>\n          <Grid item xs={12} md={4}>\n            <Card>\n              <CardContent>\n                <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n                  <Box>\n                    <Typography color=\"text.secondary\" gutterBottom>\n                      Total Subscribers\n                    </Typography>\n                    <Typography variant=\"h4\">\n                      {totalSubscribers}\n                    </Typography>\n                  </Box>\n                  <People color=\"primary\" sx={{ fontSize: 48 }} />\n                </Box>\n              </CardContent>\n            </Card>\n          </Grid>\n          <Grid item xs={12} md={4}>\n            <Card>\n              <CardContent>\n                <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n                  <Box>\n                    <Typography color=\"text.secondary\" gutterBottom>\n                      Monthly Revenue\n                    </Typography>\n                    <Typography variant=\"h4\">\n                      ${monthlyRevenue.toFixed(2)}\n                    </Typography>\n                  </Box>\n                  <AttachMoney color=\"success\" sx={{ fontSize: 48 }} />\n                </Box>\n              </CardContent>\n            </Card>\n          </Grid>\n          <Grid item xs={12} md={4}>\n            <Card>\n              <CardContent>\n                <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n                  <Box>\n                    <Typography color=\"text.secondary\" gutterBottom>\n                      Active Plans\n                    </Typography>\n                    <Typography variant=\"h4\">\n                      {(merchantPlans.length + courierPlans.length)}\n                    </Typography>\n                  </Box>\n                  <TrendingUp color=\"info\" sx={{ fontSize: 48 }} />\n                </Box>\n              </CardContent>\n            </Card>\n          </Grid>\n        </Grid>\n\n        {/* Tabs */}\n        <Paper sx={{ mb: 3 }}>\n          <Tabs value={activeTab} onChange={(e, v) => setActiveTab(v)}>\n            <Tab label=\"Merchant Plans\" />\n            <Tab label=\"Courier Plans\" />\n            <Tab label=\"Add-ons\" />\n          </Tabs>\n        </Paper>\n\n        {/* Merchant Plans Tab */}\n        <TabPanel value={activeTab} index={0}>\n          {enrichedMerchantPlans.length > 0 ? (\n            renderPlanTable(enrichedMerchantPlans)\n          ) : (\n            <Alert severity=\"info\">No merchant plans found.</Alert>\n          )}\n        </TabPanel>\n\n        {/* Courier Plans Tab */}\n        <TabPanel value={activeTab} index={1}>\n          {enrichedCourierPlans.length > 0 ? (\n            renderPlanTable(enrichedCourierPlans)\n          ) : (\n            <Alert severity=\"info\">No courier plans found.</Alert>\n          )}\n        </TabPanel>\n\n        {/* Add-ons Tab */}\n        <TabPanel value={activeTab} index={2}>\n          {addons.length > 0 ? (\n            <TableContainer component={Paper}>\n              <Table>\n                <TableHead>\n                  <TableRow>\n                    <TableCell>Add-on Name</TableCell>\n                    <TableCell>Type</TableCell>\n                    <TableCell>Role</TableCell>\n                    <TableCell>Price</TableCell>\n                    <TableCell>Billing</TableCell>\n                    <TableCell>Status</TableCell>\n                    <TableCell>Actions</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {addons.map((addon) => (\n                    <TableRow key={addon.addon_id}>\n                      <TableCell>{addon.addon_name}</TableCell>\n                      <TableCell>\n                        <Chip label={addon.addon_type} size=\"small\" />\n                      </TableCell>\n                      <TableCell>{addon.user_role}</TableCell>\n                      <TableCell>${addon.price}</TableCell>\n                      <TableCell>{addon.billing_cycle}</TableCell>\n                      <TableCell>\n                        <Chip \n                          label={addon.is_active ? 'Active' : 'Inactive'} \n                          color={addon.is_active ? 'success' : 'default'}\n                          size=\"small\"\n                        />\n                      </TableCell>\n                      <TableCell>\n                        <IconButton size=\"small\">\n                          <Edit />\n                        </IconButton>\n                        <IconButton size=\"small\" color=\"error\">\n                          <Delete />\n                        </IconButton>\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </TableContainer>\n          ) : (\n            <Alert severity=\"info\">\n              No add-ons configured yet. Add-ons allow users to purchase additional features beyond their subscription plan.\n            </Alert>\n          )}\n        </TabPanel>\n\n        {/* Edit/Create Dialog */}\n        <Dialog open={editDialogOpen} onClose={() => setEditDialogOpen(false)} maxWidth=\"md\" fullWidth>\n          <DialogTitle>\n            {selectedPlan?.plan_id ? 'Edit Subscription Plan' : 'Create New Subscription Plan'}\n          </DialogTitle>\n          <DialogContent>\n            <Grid container spacing={2} sx={{ mt: 1 }}>\n              <Grid item xs={12}>\n                <TextField\n                  fullWidth\n                  label=\"Plan Name\"\n                  value={selectedPlan?.plan_name || ''}\n                  onChange={(e) => setSelectedPlan(prev => prev ? {...prev, plan_name: e.target.value} : null)}\n                />\n              </Grid>\n              <Grid item xs={6}>\n                <TextField\n                  fullWidth\n                  label=\"Monthly Price\"\n                  type=\"number\"\n                  value={selectedPlan?.price_monthly || 0}\n                  onChange={(e) => setSelectedPlan(prev => prev ? {...prev, price_monthly: parseFloat(e.target.value)} : null)}\n                  InputProps={{ startAdornment: '$' }}\n                />\n              </Grid>\n              <Grid item xs={6}>\n                <TextField\n                  fullWidth\n                  label=\"Yearly Price\"\n                  type=\"number\"\n                  value={selectedPlan?.price_yearly || 0}\n                  onChange={(e) => setSelectedPlan(prev => prev ? {...prev, price_yearly: parseFloat(e.target.value)} : null)}\n                  InputProps={{ startAdornment: '$' }}\n                />\n              </Grid>\n              <Grid item xs={6}>\n                <TextField\n                  fullWidth\n                  label=\"Courier Limit\"\n                  type=\"number\"\n                  value={selectedPlan?.max_couriers || ''}\n                  onChange={(e) => setSelectedPlan(prev => prev ? {...prev, max_couriers: e.target.value ? parseInt(e.target.value) : null} : null)}\n                  helperText=\"Leave empty for unlimited\"\n                />\n              </Grid>\n              <Grid item xs={6}>\n                <TextField\n                  fullWidth\n                  label=\"Shop Limit\"\n                  type=\"number\"\n                  value={selectedPlan?.max_shops || ''}\n                  onChange={(e) => setSelectedPlan(prev => prev ? {...prev, max_shops: e.target.value ? parseInt(e.target.value) : null} : null)}\n                  helperText=\"Leave empty for unlimited\"\n                />\n              </Grid>\n            </Grid>\n          </DialogContent>\n          <DialogActions>\n            <Button \n              onClick={() => setEditDialogOpen(false)}\n              disabled={updatePlanMutation.isPending || createPlanMutation.isPending}\n            >\n              Cancel\n            </Button>\n            <Button \n              onClick={handleSavePlan} \n              variant=\"contained\"\n              disabled={updatePlanMutation.isPending || createPlanMutation.isPending}\n            >\n              {updatePlanMutation.isPending || createPlanMutation.isPending ? (\n                <CircularProgress size={24} />\n              ) : (\n                selectedPlan?.plan_id ? 'Save Changes' : 'Create Plan'\n              )}\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </Box>\n    </Container>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\admin\\ReviewBuilder.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":116,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":116,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2968,2971],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2968,2971],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":207,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":207,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5690,5693],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5690,5693],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":228,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":228,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6611,6614],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6611,6614],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":249,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":249,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7536,7539],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7536,7539],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":497,"column":52,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[16839,16941],"text":"\n                This review will affect the courier&apos;s TrustScore calculation based on:\n              "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[16839,16941],"text":"\n                This review will affect the courier&lsquo;s TrustScore calculation based on:\n              "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[16839,16941],"text":"\n                This review will affect the courier&#39;s TrustScore calculation based on:\n              "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[16839,16941],"text":"\n                This review will affect the courier&rsquo;s TrustScore calculation based on:\n              "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Grid,\n  TextField,\n  Button,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Rating,\n  Chip,\n  Alert,\n  Divider,\n  Paper,\n  List,\n  ListItem,\n  ListItemText,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  FormControlLabel,\n  Checkbox,\n  Stack,\n} from '@mui/material';\nimport {\n  Send as SendIcon,\n  Preview as PreviewIcon,\n  Warning as WarningIcon,\n  CheckCircle as CheckCircleIcon,\n} from '@mui/icons-material';\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport toast from 'react-hot-toast';\n\ninterface ReviewForm {\n  order_id: string;\n  courier_id: string;\n  consumer_id: string;\n  rating: number;\n  review_text: string;\n  damaged: boolean;\n  late: boolean;\n  switched_service: boolean;\n  delivery_speed: number;\n  packaging_quality: number;\n  communication: number;\n  professionalism: number;\n}\n\nexport const ReviewBuilder: React.FC = () => {\n  const queryClient = useQueryClient();\n  const [previewOpen, setPreviewOpen] = useState(false);\n  const [formData, setFormData] = useState<ReviewForm>({\n    order_id: '',\n    courier_id: '',\n    consumer_id: '',\n    rating: 5,\n    review_text: '',\n    damaged: false,\n    late: false,\n    switched_service: false,\n    delivery_speed: 5,\n    packaging_quality: 5,\n    communication: 5,\n    professionalism: 5,\n  });\n\n  // Fetch orders for selection\n  const { data: ordersData } = useQuery({\n    queryKey: ['admin-orders'],\n    queryFn: async () => {\n      const response = await apiClient.get('/admin/orders');\n      return response.data;\n    },\n  });\n\n  // Fetch couriers for selection\n  const { data: couriersData } = useQuery({\n    queryKey: ['admin-couriers'],\n    queryFn: async () => {\n      const response = await apiClient.get('/admin/users', { params: { role: 'courier' } });\n      return response.data;\n    },\n  });\n\n  // Fetch consumers for selection\n  const { data: consumersData } = useQuery({\n    queryKey: ['admin-consumers'],\n    queryFn: async () => {\n      const response = await apiClient.get('/admin/users', { params: { role: 'consumer' } });\n      return response.data;\n    },\n  });\n\n  const orders = Array.isArray(ordersData?.data) ? ordersData.data : [];\n  const couriers = Array.isArray(couriersData?.data) ? couriersData.data : [];\n  const consumers = Array.isArray(consumersData?.data) ? consumersData.data : [];\n\n  // Submit review mutation\n  const submitReviewMutation = useMutation({\n    mutationFn: async (data: ReviewForm) => {\n      const response = await apiClient.post('/admin/reviews', data);\n      return response.data;\n    },\n    onSuccess: () => {\n      toast.success('Review created successfully!');\n      queryClient.invalidateQueries({ queryKey: ['reviews'] });\n      queryClient.invalidateQueries({ queryKey: ['admin-couriers'] });\n      resetForm();\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || 'Failed to create review');\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({\n      order_id: '',\n      courier_id: '',\n      consumer_id: '',\n      rating: 5,\n      review_text: '',\n      damaged: false,\n      late: false,\n      switched_service: false,\n      delivery_speed: 5,\n      packaging_quality: 5,\n      communication: 5,\n      professionalism: 5,\n    });\n  };\n\n  const handleSubmit = () => {\n    if (!formData.order_id || !formData.courier_id || !formData.consumer_id) {\n      toast.error('Please fill in all required fields');\n      return;\n    }\n\n    submitReviewMutation.mutate(formData);\n  };\n\n  const calculateOverallRating = () => {\n    const ratings = [\n      formData.delivery_speed,\n      formData.packaging_quality,\n      formData.communication,\n      formData.professionalism,\n    ];\n    const avg = ratings.reduce((a, b) => a + b, 0) / ratings.length;\n    \n    // Deduct points for issues\n    let deductions = 0;\n    if (formData.damaged) deductions += 1;\n    if (formData.late) deductions += 0.5;\n    if (formData.switched_service) deductions += 0.5;\n    \n    return Math.max(1, Math.min(5, avg - deductions));\n  };\n\n  const getIssueChips = (): string[] => {\n    const issues: string[] = [];\n    if (formData.damaged) issues.push('Damaged');\n    if (formData.late) issues.push('Late Delivery');\n    if (formData.switched_service) issues.push('Service Switched');\n    return issues;\n  };\n\n  return (\n    <Box sx={{ p: 3 }}>\n      {/* Header */}\n      <Box sx={{ mb: 3 }}>\n        <Typography variant=\"h4\" gutterBottom>\n          Review Builder\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\">\n          Create and manage customer reviews for courier performance tracking\n        </Typography>\n      </Box>\n\n      <Grid container spacing={3}>\n        {/* Left Column - Form */}\n        <Grid item xs={12} md={8}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Review Details\n              </Typography>\n\n              <Grid container spacing={2} sx={{ mt: 1 }}>\n                {/* Order Selection */}\n                <Grid item xs={12}>\n                  <FormControl fullWidth>\n                    <InputLabel>Order *</InputLabel>\n                    <Select\n                      value={formData.order_id}\n                      onChange={(e) => setFormData({ ...formData, order_id: e.target.value })}\n                      label=\"Order *\"\n                    >\n                      <MenuItem value=\"\">\n                        <em>Select an order</em>\n                      </MenuItem>\n                      {orders.map((order: any) => (\n                        <MenuItem key={order.order_id} value={order.order_id}>\n                          Order #{order.order_id.substring(0, 8)} - {order.pickup_address}\n                        </MenuItem>\n                      ))}\n                    </Select>\n                  </FormControl>\n                </Grid>\n\n                {/* Courier Selection */}\n                <Grid item xs={12} md={6}>\n                  <FormControl fullWidth>\n                    <InputLabel>Courier *</InputLabel>\n                    <Select\n                      value={formData.courier_id}\n                      onChange={(e) => setFormData({ ...formData, courier_id: e.target.value })}\n                      label=\"Courier *\"\n                    >\n                      <MenuItem value=\"\">\n                        <em>Select a courier</em>\n                      </MenuItem>\n                      {couriers.map((courier: any) => (\n                        <MenuItem key={courier.user_id} value={courier.user_id}>\n                          {courier.first_name} {courier.last_name} ({courier.email})\n                        </MenuItem>\n                      ))}\n                    </Select>\n                  </FormControl>\n                </Grid>\n\n                {/* Consumer Selection */}\n                <Grid item xs={12} md={6}>\n                  <FormControl fullWidth>\n                    <InputLabel>Consumer *</InputLabel>\n                    <Select\n                      value={formData.consumer_id}\n                      onChange={(e) => setFormData({ ...formData, consumer_id: e.target.value })}\n                      label=\"Consumer *\"\n                    >\n                      <MenuItem value=\"\">\n                        <em>Select a consumer</em>\n                      </MenuItem>\n                      {consumers.map((consumer: any) => (\n                        <MenuItem key={consumer.user_id} value={consumer.user_id}>\n                          {consumer.first_name} {consumer.last_name} ({consumer.email})\n                        </MenuItem>\n                      ))}\n                    </Select>\n                  </FormControl>\n                </Grid>\n\n                <Grid item xs={12}>\n                  <Divider sx={{ my: 2 }} />\n                  <Typography variant=\"subtitle1\" gutterBottom>\n                    Performance Ratings\n                  </Typography>\n                </Grid>\n\n                {/* Delivery Speed */}\n                <Grid item xs={12} md={6}>\n                  <Typography variant=\"body2\" gutterBottom>\n                    Delivery Speed\n                  </Typography>\n                  <Rating\n                    value={formData.delivery_speed}\n                    onChange={(_, value) => setFormData({ ...formData, delivery_speed: value || 5 })}\n                    size=\"large\"\n                  />\n                </Grid>\n\n                {/* Packaging Quality */}\n                <Grid item xs={12} md={6}>\n                  <Typography variant=\"body2\" gutterBottom>\n                    Packaging Quality\n                  </Typography>\n                  <Rating\n                    value={formData.packaging_quality}\n                    onChange={(_, value) => setFormData({ ...formData, packaging_quality: value || 5 })}\n                    size=\"large\"\n                  />\n                </Grid>\n\n                {/* Communication */}\n                <Grid item xs={12} md={6}>\n                  <Typography variant=\"body2\" gutterBottom>\n                    Communication\n                  </Typography>\n                  <Rating\n                    value={formData.communication}\n                    onChange={(_, value) => setFormData({ ...formData, communication: value || 5 })}\n                    size=\"large\"\n                  />\n                </Grid>\n\n                {/* Professionalism */}\n                <Grid item xs={12} md={6}>\n                  <Typography variant=\"body2\" gutterBottom>\n                    Professionalism\n                  </Typography>\n                  <Rating\n                    value={formData.professionalism}\n                    onChange={(_, value) => setFormData({ ...formData, professionalism: value || 5 })}\n                    size=\"large\"\n                  />\n                </Grid>\n\n                <Grid item xs={12}>\n                  <Divider sx={{ my: 2 }} />\n                  <Typography variant=\"subtitle1\" gutterBottom>\n                    Delivery Issues\n                  </Typography>\n                </Grid>\n\n                {/* Issue Checkboxes */}\n                <Grid item xs={12}>\n                  <Stack spacing={1}>\n                    <FormControlLabel\n                      control={\n                        <Checkbox\n                          checked={formData.damaged}\n                          onChange={(e) => setFormData({ ...formData, damaged: e.target.checked })}\n                        />\n                      }\n                      label=\"Package was damaged\"\n                    />\n                    <FormControlLabel\n                      control={\n                        <Checkbox\n                          checked={formData.late}\n                          onChange={(e) => setFormData({ ...formData, late: e.target.checked })}\n                        />\n                      }\n                      label=\"Delivery was late\"\n                    />\n                    <FormControlLabel\n                      control={\n                        <Checkbox\n                          checked={formData.switched_service}\n                          onChange={(e) => setFormData({ ...formData, switched_service: e.target.checked })}\n                        />\n                      }\n                      label=\"Service was switched without notice\"\n                    />\n                  </Stack>\n                </Grid>\n\n                <Grid item xs={12}>\n                  <Divider sx={{ my: 2 }} />\n                  <Typography variant=\"subtitle1\" gutterBottom>\n                    Review Text\n                  </Typography>\n                </Grid>\n\n                {/* Review Text */}\n                <Grid item xs={12}>\n                  <TextField\n                    fullWidth\n                    multiline\n                    rows={4}\n                    label=\"Review Comments\"\n                    value={formData.review_text}\n                    onChange={(e) => setFormData({ ...formData, review_text: e.target.value })}\n                    placeholder=\"Enter detailed review comments...\"\n                    helperText=\"Provide specific feedback about the delivery experience\"\n                  />\n                </Grid>\n\n                {/* Action Buttons */}\n                <Grid item xs={12}>\n                  <Box sx={{ display: 'flex', gap: 2, mt: 2 }}>\n                    <Button\n                      variant=\"outlined\"\n                      startIcon={<PreviewIcon />}\n                      onClick={() => setPreviewOpen(true)}\n                    >\n                      Preview\n                    </Button>\n                    <Button\n                      variant=\"contained\"\n                      startIcon={<SendIcon />}\n                      onClick={handleSubmit}\n                      disabled={submitReviewMutation.isPending}\n                    >\n                      {submitReviewMutation.isPending ? 'Creating...' : 'Create Review'}\n                    </Button>\n                    <Button variant=\"outlined\" color=\"secondary\" onClick={resetForm}>\n                      Reset\n                    </Button>\n                  </Box>\n                </Grid>\n              </Grid>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        {/* Right Column - Preview & Summary */}\n        <Grid item xs={12} md={4}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Review Summary\n              </Typography>\n\n              <Box sx={{ mb: 3, textAlign: 'center' }}>\n                <Typography variant=\"h2\" color=\"primary\">\n                  {calculateOverallRating().toFixed(1)}\n                </Typography>\n                <Rating value={calculateOverallRating()} readOnly precision={0.1} size=\"large\" />\n                <Typography variant=\"caption\" color=\"text.secondary\" display=\"block\">\n                  Calculated Overall Rating\n                </Typography>\n              </Box>\n\n              <Divider sx={{ my: 2 }} />\n\n              <Typography variant=\"subtitle2\" gutterBottom>\n                Performance Breakdown\n              </Typography>\n              <List dense>\n                <ListItem>\n                  <ListItemText\n                    primary=\"Delivery Speed\"\n                    secondary={\n                      <Rating value={formData.delivery_speed} readOnly size=\"small\" />\n                    }\n                  />\n                </ListItem>\n                <ListItem>\n                  <ListItemText\n                    primary=\"Packaging Quality\"\n                    secondary={\n                      <Rating value={formData.packaging_quality} readOnly size=\"small\" />\n                    }\n                  />\n                </ListItem>\n                <ListItem>\n                  <ListItemText\n                    primary=\"Communication\"\n                    secondary={\n                      <Rating value={formData.communication} readOnly size=\"small\" />\n                    }\n                  />\n                </ListItem>\n                <ListItem>\n                  <ListItemText\n                    primary=\"Professionalism\"\n                    secondary={\n                      <Rating value={formData.professionalism} readOnly size=\"small\" />\n                    }\n                  />\n                </ListItem>\n              </List>\n\n              {getIssueChips().length > 0 && (\n                <>\n                  <Divider sx={{ my: 2 }} />\n                  <Typography variant=\"subtitle2\" gutterBottom>\n                    Reported Issues\n                  </Typography>\n                  <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 1 }}>\n                    {getIssueChips().map((issue) => (\n                      <Chip\n                        key={issue}\n                        label={issue}\n                        color=\"error\"\n                        size=\"small\"\n                        icon={<WarningIcon />}\n                      />\n                    ))}\n                  </Box>\n                </>\n              )}\n\n              {getIssueChips().length === 0 && (\n                <>\n                  <Divider sx={{ my: 2 }} />\n                  <Alert severity=\"success\" icon={<CheckCircleIcon />}>\n                    No issues reported\n                  </Alert>\n                </>\n              )}\n            </CardContent>\n          </Card>\n\n          <Card sx={{ mt: 2 }}>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Impact on TrustScore\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\n                This review will affect the courier's TrustScore calculation based on:\n              </Typography>\n              <List dense>\n                <ListItem>\n                  <ListItemText\n                    primary=\"Rating Weight\"\n                    secondary=\"40% of TrustScore\"\n                  />\n                </ListItem>\n                <ListItem>\n                  <ListItemText\n                    primary=\"Time Decay\"\n                    secondary=\"Recent reviews weighted higher\"\n                  />\n                </ListItem>\n                <ListItem>\n                  <ListItemText\n                    primary=\"Issue Penalties\"\n                    secondary={`${getIssueChips().length} issue(s) will reduce score`}\n                  />\n                </ListItem>\n              </List>\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n\n      {/* Preview Dialog */}\n      <Dialog open={previewOpen} onClose={() => setPreviewOpen(false)} maxWidth=\"sm\" fullWidth>\n        <DialogTitle>Review Preview</DialogTitle>\n        <DialogContent>\n          <Paper variant=\"outlined\" sx={{ p: 2, mb: 2 }}>\n            <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 2 }}>\n              <Typography variant=\"h6\">\n                {calculateOverallRating().toFixed(1)} / 5.0\n              </Typography>\n              <Rating value={calculateOverallRating()} readOnly precision={0.1} />\n            </Box>\n            \n            {getIssueChips().length > 0 && (\n              <Box sx={{ mb: 2, display: 'flex', gap: 1, flexWrap: 'wrap' }}>\n                {getIssueChips().map((issue) => (\n                  <Chip key={issue} label={issue} color=\"error\" size=\"small\" />\n                ))}\n              </Box>\n            )}\n\n            <Typography variant=\"body2\" paragraph>\n              {formData.review_text || 'No review text provided'}\n            </Typography>\n\n            <Divider sx={{ my: 2 }} />\n\n            <Grid container spacing={1}>\n              <Grid item xs={6}>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  Delivery Speed\n                </Typography>\n                <Rating value={formData.delivery_speed} readOnly size=\"small\" />\n              </Grid>\n              <Grid item xs={6}>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  Packaging\n                </Typography>\n                <Rating value={formData.packaging_quality} readOnly size=\"small\" />\n              </Grid>\n              <Grid item xs={6}>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  Communication\n                </Typography>\n                <Rating value={formData.communication} readOnly size=\"small\" />\n              </Grid>\n              <Grid item xs={6}>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  Professionalism\n                </Typography>\n                <Rating value={formData.professionalism} readOnly size=\"small\" />\n              </Grid>\n            </Grid>\n          </Paper>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setPreviewOpen(false)}>Close</Button>\n          <Button variant=\"contained\" onClick={() => {\n            setPreviewOpen(false);\n            handleSubmit();\n          }}>\n            Create Review\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\admin\\RoleManagement.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":97,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":97,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2752,2755],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2752,2755],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":299,"column":32,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[9642,9746],"text":"\n                Changing a user&apos;s role will immediately affect their access permissions.\n              "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[9642,9746],"text":"\n                Changing a user&lsquo;s role will immediately affect their access permissions.\n              "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[9642,9746],"text":"\n                Changing a user&#39;s role will immediately affect their access permissions.\n              "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[9642,9746],"text":"\n                Changing a user&rsquo;s role will immediately affect their access permissions.\n              "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  TablePagination,\n  TextField,\n  Select,\n  MenuItem,\n  Button,\n  Chip,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Alert,\n  CircularProgress,\n  InputAdornment,\n} from '@mui/material';\nimport {\n  Search as SearchIcon,\n  Edit as EditIcon,\n  AdminPanelSettings as AdminIcon,\n  Store as MerchantIcon,\n  LocalShipping as CourierIcon,\n  Person as UserIcon,\n} from '@mui/icons-material';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport { toast } from 'react-hot-toast';\n\ninterface User {\n  user_id: string;\n  email: string;\n  full_name: string;\n  user_role: string;\n  created_at: string;\n  last_login: string;\n}\n\nconst roleConfig = {\n  admin: { label: 'Admin', icon: AdminIcon, color: 'error' as const },\n  merchant: { label: 'Merchant', icon: MerchantIcon, color: 'primary' as const },\n  courier: { label: 'Courier', icon: CourierIcon, color: 'success' as const },\n  user: { label: 'User', icon: UserIcon, color: 'default' as const },\n};\n\nexport const RoleManagement: React.FC = () => {\n  const [page, setPage] = useState(0);\n  const [rowsPerPage, setRowsPerPage] = useState(25);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [roleFilter, setRoleFilter] = useState('all');\n  const [editDialog, setEditDialog] = useState<{ open: boolean; user: User | null }>({\n    open: false,\n    user: null,\n  });\n  const [newRole, setNewRole] = useState('');\n\n  const queryClient = useQueryClient();\n\n  // Fetch users\n  const { data, isLoading, error } = useQuery({\n    queryKey: ['admin-users', page, rowsPerPage, searchQuery, roleFilter],\n    queryFn: async () => {\n      const params = new URLSearchParams({\n        limit: rowsPerPage.toString(),\n        offset: (page * rowsPerPage).toString(),\n      });\n      if (searchQuery) params.append('search', searchQuery);\n      if (roleFilter !== 'all') params.append('role', roleFilter);\n\n      const response = await apiClient.get(`/admin/users?${params}`);\n      return response.data.data;\n    },\n  });\n\n  const users = data?.users || [];\n  const totalUsers = data?.total || 0;\n\n  // Update role mutation\n  const updateRoleMutation = useMutation({\n    mutationFn: async ({ userId, role }: { userId: string; role: string }) => {\n      await apiClient.put(`/admin/users/${userId}/role`, { role });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['admin-users'] });\n      toast.success('User role updated successfully');\n      setEditDialog({ open: false, user: null });\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || 'Failed to update role');\n    },\n  });\n\n  const handleEditRole = (user: User) => {\n    setEditDialog({ open: true, user });\n    setNewRole(user.user_role);\n  };\n\n  const handleSaveRole = () => {\n    if (editDialog.user && newRole) {\n      updateRoleMutation.mutate({\n        userId: editDialog.user.user_id,\n        role: newRole,\n      });\n    }\n  };\n\n  const getRoleIcon = (role: string) => {\n    const config = roleConfig[role as keyof typeof roleConfig] || roleConfig.user;\n    const Icon = config.icon;\n    return <Icon fontSize=\"small\" />;\n  };\n\n  const getRoleChip = (role: string) => {\n    const config = roleConfig[role as keyof typeof roleConfig] || roleConfig.user;\n    return (\n      <Chip\n        label={config.label}\n        color={config.color}\n        size=\"small\"\n        icon={getRoleIcon(role)}\n      />\n    );\n  };\n\n  if (isLoading) {\n    return (\n      <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '60vh' }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  if (error) {\n    return (\n      <Box sx={{ p: 3 }}>\n        <Alert severity=\"error\">Failed to load users. Please try again.</Alert>\n      </Box>\n    );\n  }\n\n  return (\n    <Box sx={{ p: 3 }}>\n      <Typography variant=\"h4\" gutterBottom>\n         Role Management\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        Manage user roles and permissions\n      </Typography>\n\n      <Card>\n        <CardContent>\n          {/* Filters */}\n          <Box sx={{ display: 'flex', gap: 2, mb: 3 }}>\n            <TextField\n              placeholder=\"Search by name or email...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              size=\"small\"\n              sx={{ flexGrow: 1 }}\n              InputProps={{\n                startAdornment: (\n                  <InputAdornment position=\"start\">\n                    <SearchIcon />\n                  </InputAdornment>\n                ),\n              }}\n            />\n            <Select\n              value={roleFilter}\n              onChange={(e) => setRoleFilter(e.target.value)}\n              size=\"small\"\n              sx={{ minWidth: 150 }}\n            >\n              <MenuItem value=\"all\">All Roles</MenuItem>\n              <MenuItem value=\"admin\">Admin</MenuItem>\n              <MenuItem value=\"merchant\">Merchant</MenuItem>\n              <MenuItem value=\"courier\">Courier</MenuItem>\n              <MenuItem value=\"user\">User</MenuItem>\n            </Select>\n          </Box>\n\n          {/* Users Table */}\n          <TableContainer>\n            <Table>\n              <TableHead>\n                <TableRow>\n                  <TableCell>User</TableCell>\n                  <TableCell>Email</TableCell>\n                  <TableCell>Role</TableCell>\n                  <TableCell>Created</TableCell>\n                  <TableCell>Last Login</TableCell>\n                  <TableCell align=\"right\">Actions</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {users.map((user: User) => (\n                  <TableRow key={user.user_id} hover>\n                    <TableCell>\n                      <Typography variant=\"body2\" fontWeight=\"medium\">\n                        {user.full_name || 'N/A'}\n                      </Typography>\n                    </TableCell>\n                    <TableCell>{user.email}</TableCell>\n                    <TableCell>{getRoleChip(user.user_role)}</TableCell>\n                    <TableCell>\n                      {new Date(user.created_at).toLocaleDateString()}\n                    </TableCell>\n                    <TableCell>\n                      {user.last_login\n                        ? new Date(user.last_login).toLocaleDateString()\n                        : 'Never'}\n                    </TableCell>\n                    <TableCell align=\"right\">\n                      <Button\n                        size=\"small\"\n                        startIcon={<EditIcon />}\n                        onClick={() => handleEditRole(user)}\n                      >\n                        Change Role\n                      </Button>\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </TableContainer>\n\n          {/* Pagination */}\n          <TablePagination\n            component=\"div\"\n            count={totalUsers}\n            page={page}\n            onPageChange={(e, newPage) => setPage(newPage)}\n            rowsPerPage={rowsPerPage}\n            onRowsPerPageChange={(e) => {\n              setRowsPerPage(parseInt(e.target.value, 10));\n              setPage(0);\n            }}\n            rowsPerPageOptions={[10, 25, 50, 100]}\n          />\n        </CardContent>\n      </Card>\n\n      {/* Edit Role Dialog */}\n      <Dialog open={editDialog.open} onClose={() => setEditDialog({ open: false, user: null })}>\n        <DialogTitle>Change User Role</DialogTitle>\n        <DialogContent>\n          {editDialog.user && (\n            <Box sx={{ pt: 2 }}>\n              <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\n                User: <strong>{editDialog.user.full_name || editDialog.user.email}</strong>\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\n                Current Role: {getRoleChip(editDialog.user.user_role)}\n              </Typography>\n\n              <Select\n                fullWidth\n                value={newRole}\n                onChange={(e) => setNewRole(e.target.value)}\n                sx={{ mt: 2 }}\n              >\n                <MenuItem value=\"admin\">\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                    <AdminIcon fontSize=\"small\" />\n                    Admin - Full system access\n                  </Box>\n                </MenuItem>\n                <MenuItem value=\"merchant\">\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                    <MerchantIcon fontSize=\"small\" />\n                    Merchant - Store management\n                  </Box>\n                </MenuItem>\n                <MenuItem value=\"courier\">\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                    <CourierIcon fontSize=\"small\" />\n                    Courier - Delivery management\n                  </Box>\n                </MenuItem>\n                <MenuItem value=\"user\">\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                    <UserIcon fontSize=\"small\" />\n                    User - Basic access\n                  </Box>\n                </MenuItem>\n              </Select>\n\n              <Alert severity=\"warning\" sx={{ mt: 2 }}>\n                Changing a user's role will immediately affect their access permissions.\n              </Alert>\n            </Box>\n          )}\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setEditDialog({ open: false, user: null })}>\n            Cancel\n          </Button>\n          <Button\n            variant=\"contained\"\n            onClick={handleSaveRole}\n            disabled={updateRoleMutation.isPending || newRole === editDialog.user?.user_role}\n          >\n            {updateRoleMutation.isPending ? 'Saving...' : 'Save Changes'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n};\n\nexport default RoleManagement;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\admin\\ServiceAnalytics.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'GeographicHeatmap' is defined but never used.","line":33,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ServiceReviewsList' is defined but never used.","line":34,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":65,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1314,1317],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1314,1317],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":66,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1381,1384],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1381,1384],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'reviewsData' is assigned a value but never used.","line":67,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":67,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":67,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":67,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1442,1445],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1442,1445],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Admin Service Analytics Dashboard\n * Week 4 - Admin Integration\n * \n * Comprehensive view of service performance and parcel points for admins\n */\n\nimport React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  Typography,\n  Grid,\n  Card,\n  CardContent,\n  Tabs,\n  Tab,\n  Button,\n  CircularProgress,\n  Alert,\n  Chip,\n  Paper\n} from '@mui/material';\nimport {\n  TrendingUp,\n  Map as MapIcon,\n  Assessment,\n  Store,\n  Refresh\n} from '@mui/icons-material';\nimport {\n  ServicePerformanceCard,\n  ServiceComparisonChart,\n  GeographicHeatmap,\n  ServiceReviewsList\n} from '../../components/service-performance';\nimport {\n  ParcelPointMap,\n  CoverageChecker\n} from '../../components/parcel-points';\n\ninterface TabPanelProps {\n  children?: React.Node;\n  index: number;\n  value: number;\n}\n\nfunction TabPanel(props: TabPanelProps) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`analytics-tabpanel-${index}`}\n      aria-labelledby={`analytics-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box sx={{ py: 3 }}>{children}</Box>}\n    </div>\n  );\n}\n\nexport const ServiceAnalytics: React.FC = () => {\n  const [currentTab, setCurrentTab] = useState(0);\n  const [performanceData, setPerformanceData] = useState<any[]>([]);\n  const [comparisonData, setComparisonData] = useState<any[]>([]);\n  const [reviewsData, setReviewsData] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    fetchAnalyticsData();\n  }, []);\n\n  const fetchAnalyticsData = async () => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      // Fetch service performance data\n      const perfResponse = await fetch('/api/service-performance?period_type=monthly&limit=10');\n      const perfData = await perfResponse.json();\n\n      if (perfData.success) {\n        setPerformanceData(perfData.data);\n        \n        // Get top 5 for comparison\n        const top5 = perfData.data.slice(0, 5);\n        setComparisonData(top5);\n      }\n\n      // Fetch reviews for home delivery service\n      const reviewsResponse = await fetch('/api/service-performance?action=reviews&service_type_id=home_delivery&limit=20');\n      const reviewsResult = await reviewsResponse.json();\n\n      if (reviewsResult.success) {\n        setReviewsData(reviewsResult.data);\n      }\n    } catch (err) {\n      console.error('Error fetching analytics:', err);\n      setError('Failed to load analytics data');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleTabChange = (event: React.SyntheticEvent, newValue: number) => {\n    setCurrentTab(newValue);\n  };\n\n  return (\n    <Box>\n      {/* Header */}\n      <Box mb={4}>\n        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={2}>\n          <Box>\n            <Typography variant=\"h4\" gutterBottom>\n              Service Analytics Dashboard\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              Comprehensive performance metrics and parcel point analytics\n            </Typography>\n          </Box>\n          <Button\n            variant=\"outlined\"\n            startIcon={<Refresh />}\n            onClick={fetchAnalyticsData}\n            disabled={loading}\n          >\n            Refresh Data\n          </Button>\n        </Box>\n\n        {/* Quick Stats */}\n        <Grid container spacing={2}>\n          <Grid item xs={12} sm={6} md={3}>\n            <Card>\n              <CardContent>\n                <Box display=\"flex\" alignItems=\"center\" gap={1} mb={1}>\n                  <Assessment color=\"primary\" />\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    Services Tracked\n                  </Typography>\n                </Box>\n                <Typography variant=\"h4\">\n                  {performanceData.length}\n                </Typography>\n              </CardContent>\n            </Card>\n          </Grid>\n          <Grid item xs={12} sm={6} md={3}>\n            <Card>\n              <CardContent>\n                <Box display=\"flex\" alignItems=\"center\" gap={1} mb={1}>\n                  <TrendingUp color=\"success\" />\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    Avg Trust Score\n                  </Typography>\n                </Box>\n                <Typography variant=\"h4\">\n                  {performanceData.length > 0\n                    ? (performanceData.reduce((sum, item) => sum + item.trust_score, 0) / performanceData.length).toFixed(1)\n                    : '0.0'}\n                </Typography>\n              </CardContent>\n            </Card>\n          </Grid>\n          <Grid item xs={12} sm={6} md={3}>\n            <Card>\n              <CardContent>\n                <Box display=\"flex\" alignItems=\"center\" gap={1} mb={1}>\n                  <Store color=\"info\" />\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    Total Orders\n                  </Typography>\n                </Box>\n                <Typography variant=\"h4\">\n                  {performanceData.reduce((sum, item) => sum + item.total_orders, 0).toLocaleString()}\n                </Typography>\n              </CardContent>\n            </Card>\n          </Grid>\n          <Grid item xs={12} sm={6} md={3}>\n            <Card>\n              <CardContent>\n                <Box display=\"flex\" alignItems=\"center\" gap={1} mb={1}>\n                  <MapIcon color=\"warning\" />\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    Coverage Areas\n                  </Typography>\n                </Box>\n                <Typography variant=\"h4\">\n                  {performanceData.reduce((sum, item) => sum + (item.coverage_area_count || 0), 0)}\n                </Typography>\n              </CardContent>\n            </Card>\n          </Grid>\n        </Grid>\n      </Box>\n\n      {/* Tabs */}\n      <Paper sx={{ mb: 3 }}>\n        <Tabs\n          value={currentTab}\n          onChange={handleTabChange}\n          variant=\"scrollable\"\n          scrollButtons=\"auto\"\n        >\n          <Tab label=\"Performance Overview\" icon={<Assessment />} iconPosition=\"start\" />\n          <Tab label=\"Service Comparison\" icon={<TrendingUp />} iconPosition=\"start\" />\n          <Tab label=\"Geographic Analysis\" icon={<MapIcon />} iconPosition=\"start\" />\n          <Tab label=\"Parcel Points Map\" icon={<Store />} iconPosition=\"start\" />\n          <Tab label=\"Coverage Checker\" icon={<MapIcon />} iconPosition=\"start\" />\n        </Tabs>\n      </Paper>\n\n      {/* Error Message */}\n      {error && (\n        <Alert severity=\"error\" sx={{ mb: 3 }}>\n          {error}\n        </Alert>\n      )}\n\n      {/* Loading State */}\n      {loading && (\n        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight={400}>\n          <CircularProgress />\n        </Box>\n      )}\n\n      {/* Tab Panels */}\n      {!loading && (\n        <>\n          {/* Tab 1: Performance Overview */}\n          <TabPanel value={currentTab} index={0}>\n            <Grid container spacing={3}>\n              {performanceData.length === 0 ? (\n                <Grid item xs={12}>\n                  <Alert severity=\"info\">\n                    No performance data available. Data will appear once orders are processed.\n                  </Alert>\n                </Grid>\n              ) : (\n                performanceData.map((data) => (\n                  <Grid item xs={12} md={6} lg={4} key={data.performance_id}>\n                    <ServicePerformanceCard data={data} />\n                  </Grid>\n                ))\n              )}\n            </Grid>\n          </TabPanel>\n\n          {/* Tab 2: Service Comparison */}\n          <TabPanel value={currentTab} index={1}>\n            {comparisonData.length >= 2 ? (\n              <ServiceComparisonChart\n                data={comparisonData}\n                title=\"Top 5 Services Comparison\"\n              />\n            ) : (\n              <Alert severity=\"info\">\n                Need at least 2 services with data to show comparison chart.\n              </Alert>\n            )}\n          </TabPanel>\n\n          {/* Tab 3: Geographic Analysis */}\n          <TabPanel value={currentTab} index={2}>\n            {performanceData.length > 0 ? (\n              <Box>\n                <Typography variant=\"h6\" gutterBottom>\n                  Select a courier to view geographic performance\n                </Typography>\n                <Grid container spacing={2} mb={3}>\n                  {[...new Set(performanceData.map(p => p.courier_name))].map((courierName) => (\n                    <Grid item key={courierName}>\n                      <Chip\n                        label={courierName}\n                        onClick={() => {\n                          // Would fetch geographic data for this courier\n                          console.log('Selected courier:', courierName);\n                        }}\n                        color=\"primary\"\n                        variant=\"outlined\"\n                      />\n                    </Grid>\n                  ))}\n                </Grid>\n                <Alert severity=\"info\">\n                  Geographic data will be displayed here. Select a courier above to view area-specific performance.\n                </Alert>\n              </Box>\n            ) : (\n              <Alert severity=\"info\">\n                No geographic data available yet.\n              </Alert>\n            )}\n          </TabPanel>\n\n          {/* Tab 4: Parcel Points Map */}\n          <TabPanel value={currentTab} index={3}>\n            <ParcelPointMap />\n          </TabPanel>\n\n          {/* Tab 5: Coverage Checker */}\n          <TabPanel value={currentTab} index={4}>\n            <CoverageChecker />\n          </TabPanel>\n        </>\n      )}\n    </Box>\n  );\n};\n\nexport default ServiceAnalytics;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\admin\\SubscriptionManagement.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isLoading' is assigned a value but never used.","line":73,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":73,"endColumn":37},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is assigned a value but never used.","line":73,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":73,"endColumn":44},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":340,"column":101,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":340,"endColumn":104,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11151,11154],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11151,11154],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":353,"column":96,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":353,"endColumn":99,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11686,11689],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11686,11689],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Box,\n  Paper,\n  Typography,\n  Button,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  TextField,\n  Select,\n  MenuItem,\n  FormControl,\n  InputLabel,\n  Switch,\n  FormControlLabel,\n  Chip,\n  IconButton,\n  Tabs,\n  Tab,\n  Grid,\n  Card,\n  CardContent,\n  InputAdornment\n} from '@mui/material';\nimport {\n  Add as AddIcon,\n  Edit as EditIcon,\n  Delete as DeleteIcon,\n  Save as SaveIcon,\n  Close as CloseIcon\n} from '@mui/icons-material';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\n\ninterface SubscriptionPlan {\n  plan_id: number;\n  plan_name: string;\n  plan_slug: string;\n  user_type: 'merchant' | 'courier';\n  tier: 1 | 2 | 3;\n  monthly_price: number;\n  annual_price?: number;\n  max_orders_per_month?: number;\n  max_emails_per_month?: number;\n  max_sms_per_month?: number;\n  max_push_notifications_per_month?: number;\n  max_couriers?: number;\n  max_team_members?: number;\n  max_shops?: number;\n  description?: string;\n  features: Record<string, boolean>;\n  is_popular: boolean;\n  is_active: boolean;\n  is_visible: boolean;\n  display_order: number;\n}\n\nconst SubscriptionManagement: React.FC = () => {\n  const [activeTab, setActiveTab] = useState<'merchant' | 'courier'>('merchant');\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [editingPlan, setEditingPlan] = useState<SubscriptionPlan | null>(null);\n  const queryClient = useQueryClient();\n\n  // Fetch subscription plans\n  const { data: plansData, isLoading, error } = useQuery({\n    queryKey: ['admin-subscription-plans', activeTab],\n    queryFn: async () => {\n      const response = await apiClient.get('/admin/subscriptions', {\n        params: { \n          user_type: activeTab,\n          include_inactive: true \n        }\n      });\n      return response.data;\n    }\n  });\n\n  const plans = plansData?.plans || [];\n\n  // Create/Update mutation\n  const saveMutation = useMutation({\n    mutationFn: async (plan: Partial<SubscriptionPlan>) => {\n      const url = plan.plan_id \n        ? `/api/admin/subscriptions?plan_id=${plan.plan_id}`\n        : '/api/admin/subscriptions';\n      \n      const response = await fetch(url, {\n        method: plan.plan_id ? 'PUT' : 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(plan)\n      });\n\n      if (!response.ok) throw new Error('Failed to save plan');\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['subscription-plans'] });\n      setDialogOpen(false);\n      setEditingPlan(null);\n    }\n  });\n\n  // Delete mutation\n  const deleteMutation = useMutation({\n    mutationFn: async (planId: number) => {\n      const response = await fetch(`/api/admin/subscriptions?plan_id=${planId}`, {\n        method: 'DELETE'\n      });\n      if (!response.ok) throw new Error('Failed to delete plan');\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['subscription-plans'] });\n    }\n  });\n\n  const handleEdit = (plan: SubscriptionPlan) => {\n    setEditingPlan(plan);\n    setDialogOpen(true);\n  };\n\n  const handleCreate = () => {\n    setEditingPlan({\n      plan_id: 0,\n      plan_name: '',\n      plan_slug: '',\n      user_type: activeTab,\n      tier: 1,\n      monthly_price: 0,\n      features: {},\n      is_popular: false,\n      is_active: true,\n      is_visible: true,\n      display_order: 0\n    } as SubscriptionPlan);\n    setDialogOpen(true);\n  };\n\n  const handleSave = () => {\n    if (editingPlan) {\n      saveMutation.mutate(editingPlan);\n    }\n  };\n\n  const handleDelete = (planId: number) => {\n    if (confirm('Are you sure you want to deactivate this plan?')) {\n      deleteMutation.mutate(planId);\n    }\n  };\n\n  return (\n    <Box sx={{ p: 3 }}>\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n        <Typography variant=\"h4\">Subscription Management</Typography>\n        <Button\n          variant=\"contained\"\n          startIcon={<AddIcon />}\n          onClick={handleCreate}\n        >\n          Create Plan\n        </Button>\n      </Box>\n\n      {/* Tabs for Merchant/Courier */}\n      <Paper sx={{ mb: 3 }}>\n        <Tabs value={activeTab} onChange={(_, v) => setActiveTab(v)}>\n          <Tab label=\"Merchant Plans\" value=\"merchant\" />\n          <Tab label=\"Courier Plans\" value=\"courier\" />\n        </Tabs>\n      </Paper>\n\n      {/* Plans Summary Cards */}\n      <Grid container spacing={3} sx={{ mb: 3 }}>\n        {plans.map((plan: SubscriptionPlan) => (\n          <Grid item xs={12} md={4} key={plan.plan_id}>\n            <Card>\n              <CardContent>\n                <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start', mb: 2 }}>\n                  <Box>\n                    <Typography variant=\"h6\">{plan.plan_name}</Typography>\n                    <Typography variant=\"caption\" color=\"text.secondary\">\n                      Tier {plan.tier}\n                    </Typography>\n                  </Box>\n                  <Box>\n                    {plan.is_popular && (\n                      <Chip label=\"Popular\" color=\"primary\" size=\"small\" sx={{ mb: 1 }} />\n                    )}\n                    {!plan.is_active && (\n                      <Chip label=\"Inactive\" color=\"error\" size=\"small\" />\n                    )}\n                  </Box>\n                </Box>\n\n                <Typography variant=\"h4\" sx={{ mb: 2 }}>\n                  ${plan.monthly_price}\n                  <Typography component=\"span\" variant=\"body2\" color=\"text.secondary\">\n                    /month\n                  </Typography>\n                </Typography>\n\n                <Box sx={{ mb: 2 }}>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                     Orders: {plan.max_orders_per_month || 'Unlimited'}/month\n                  </Typography>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                     Emails: {plan.max_emails_per_month || 'Unlimited'}/month\n                  </Typography>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                     SMS: {plan.max_sms_per_month || 'None'}/month\n                  </Typography>\n                  {plan.user_type === 'merchant' && (\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                       Couriers: {plan.max_couriers || 'Unlimited'}\n                    </Typography>\n                  )}\n                  {plan.user_type === 'courier' && (\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                       Team: {plan.max_team_members || 'Unlimited'}\n                    </Typography>\n                  )}\n                </Box>\n\n                <Box sx={{ display: 'flex', gap: 1 }}>\n                  <Button\n                    size=\"small\"\n                    startIcon={<EditIcon />}\n                    onClick={() => handleEdit(plan)}\n                  >\n                    Edit\n                  </Button>\n                  <Button\n                    size=\"small\"\n                    color=\"error\"\n                    startIcon={<DeleteIcon />}\n                    onClick={() => handleDelete(plan.plan_id)}\n                  >\n                    Deactivate\n                  </Button>\n                </Box>\n              </CardContent>\n            </Card>\n          </Grid>\n        ))}\n      </Grid>\n\n      {/* Detailed Table View */}\n      <TableContainer component={Paper}>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>Plan Name</TableCell>\n              <TableCell>Tier</TableCell>\n              <TableCell>Price</TableCell>\n              <TableCell>Orders</TableCell>\n              <TableCell>Emails</TableCell>\n              <TableCell>SMS</TableCell>\n              <TableCell>Team</TableCell>\n              <TableCell>Status</TableCell>\n              <TableCell>Actions</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {plans.map((plan: SubscriptionPlan) => (\n              <TableRow key={plan.plan_id}>\n                <TableCell>\n                  {plan.plan_name}\n                  {plan.is_popular && (\n                    <Chip label=\"Popular\" size=\"small\" color=\"primary\" sx={{ ml: 1 }} />\n                  )}\n                </TableCell>\n                <TableCell>Tier {plan.tier}</TableCell>\n                <TableCell>${plan.monthly_price}/mo</TableCell>\n                <TableCell>{plan.max_orders_per_month || ''}</TableCell>\n                <TableCell>{plan.max_emails_per_month || ''}</TableCell>\n                <TableCell>{plan.max_sms_per_month || '0'}</TableCell>\n                <TableCell>\n                  {plan.user_type === 'merchant' \n                    ? (plan.max_couriers || '') + ' couriers'\n                    : (plan.max_team_members || '') + ' members'\n                  }\n                </TableCell>\n                <TableCell>\n                  <Chip\n                    label={plan.is_active ? 'Active' : 'Inactive'}\n                    color={plan.is_active ? 'success' : 'default'}\n                    size=\"small\"\n                  />\n                </TableCell>\n                <TableCell>\n                  <IconButton size=\"small\" onClick={() => handleEdit(plan)}>\n                    <EditIcon />\n                  </IconButton>\n                  <IconButton size=\"small\" color=\"error\" onClick={() => handleDelete(plan.plan_id)}>\n                    <DeleteIcon />\n                  </IconButton>\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </TableContainer>\n\n      {/* Create/Edit Dialog */}\n      <Dialog open={dialogOpen} onClose={() => setDialogOpen(false)} maxWidth=\"md\" fullWidth>\n        <DialogTitle>\n          {editingPlan?.plan_id ? 'Edit Subscription Plan' : 'Create Subscription Plan'}\n        </DialogTitle>\n        <DialogContent>\n          <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2, mt: 2 }}>\n            <TextField\n              label=\"Plan Name\"\n              value={editingPlan?.plan_name || ''}\n              onChange={(e) => setEditingPlan({ ...editingPlan!, plan_name: e.target.value })}\n              fullWidth\n            />\n\n            <TextField\n              label=\"Plan Slug\"\n              value={editingPlan?.plan_slug || ''}\n              onChange={(e) => setEditingPlan({ ...editingPlan!, plan_slug: e.target.value })}\n              helperText=\"URL-friendly identifier (e.g., merchant-starter)\"\n              fullWidth\n            />\n\n            <Grid container spacing={2}>\n              <Grid item xs={6}>\n                <FormControl fullWidth>\n                  <InputLabel>User Type</InputLabel>\n                  <Select\n                    value={editingPlan?.user_type || 'merchant'}\n                    onChange={(e) => setEditingPlan({ ...editingPlan!, user_type: e.target.value as any })}\n                  >\n                    <MenuItem value=\"merchant\">Merchant</MenuItem>\n                    <MenuItem value=\"courier\">Courier</MenuItem>\n                  </Select>\n                </FormControl>\n              </Grid>\n\n              <Grid item xs={6}>\n                <FormControl fullWidth>\n                  <InputLabel>Tier</InputLabel>\n                  <Select\n                    value={editingPlan?.tier || 1}\n                    onChange={(e) => setEditingPlan({ ...editingPlan!, tier: e.target.value as any })}\n                  >\n                    <MenuItem value={1}>Tier 1 (Starter)</MenuItem>\n                    <MenuItem value={2}>Tier 2 (Professional)</MenuItem>\n                    <MenuItem value={3}>Tier 3 (Enterprise)</MenuItem>\n                  </Select>\n                </FormControl>\n              </Grid>\n            </Grid>\n\n            <Grid container spacing={2}>\n              <Grid item xs={6}>\n                <TextField\n                  label=\"Monthly Price\"\n                  type=\"number\"\n                  value={editingPlan?.monthly_price || 0}\n                  onChange={(e) => setEditingPlan({ ...editingPlan!, monthly_price: parseFloat(e.target.value) })}\n                  InputProps={{\n                    startAdornment: <InputAdornment position=\"start\">$</InputAdornment>\n                  }}\n                  fullWidth\n                />\n              </Grid>\n\n              <Grid item xs={6}>\n                <TextField\n                  label=\"Annual Price (Optional)\"\n                  type=\"number\"\n                  value={editingPlan?.annual_price || ''}\n                  onChange={(e) => setEditingPlan({ ...editingPlan!, annual_price: parseFloat(e.target.value) || undefined })}\n                  InputProps={{\n                    startAdornment: <InputAdornment position=\"start\">$</InputAdornment>\n                  }}\n                  fullWidth\n                />\n              </Grid>\n            </Grid>\n\n            <Typography variant=\"subtitle2\" sx={{ mt: 2 }}>\n              Usage Limits (Leave empty for unlimited)\n            </Typography>\n\n            <Grid container spacing={2}>\n              <Grid item xs={6}>\n                <TextField\n                  label=\"Max Orders/Month\"\n                  type=\"number\"\n                  value={editingPlan?.max_orders_per_month || ''}\n                  onChange={(e) => setEditingPlan({ ...editingPlan!, max_orders_per_month: parseInt(e.target.value) || undefined })}\n                  placeholder=\"Unlimited\"\n                  fullWidth\n                />\n              </Grid>\n\n              <Grid item xs={6}>\n                <TextField\n                  label=\"Max Emails/Month\"\n                  type=\"number\"\n                  value={editingPlan?.max_emails_per_month || ''}\n                  onChange={(e) => setEditingPlan({ ...editingPlan!, max_emails_per_month: parseInt(e.target.value) || undefined })}\n                  placeholder=\"Unlimited\"\n                  fullWidth\n                />\n              </Grid>\n\n              <Grid item xs={6}>\n                <TextField\n                  label=\"Max SMS/Month\"\n                  type=\"number\"\n                  value={editingPlan?.max_sms_per_month || ''}\n                  onChange={(e) => setEditingPlan({ ...editingPlan!, max_sms_per_month: parseInt(e.target.value) || undefined })}\n                  placeholder=\"0\"\n                  fullWidth\n                />\n              </Grid>\n\n              <Grid item xs={6}>\n                <TextField\n                  label=\"Max Push Notifications/Month\"\n                  type=\"number\"\n                  value={editingPlan?.max_push_notifications_per_month || ''}\n                  onChange={(e) => setEditingPlan({ ...editingPlan!, max_push_notifications_per_month: parseInt(e.target.value) || undefined })}\n                  placeholder=\"Unlimited\"\n                  fullWidth\n                />\n              </Grid>\n\n              {editingPlan?.user_type === 'merchant' && (\n                <>\n                  <Grid item xs={6}>\n                    <TextField\n                      label=\"Max Couriers\"\n                      type=\"number\"\n                      value={editingPlan?.max_couriers || ''}\n                      onChange={(e) => setEditingPlan({ ...editingPlan!, max_couriers: parseInt(e.target.value) || undefined })}\n                      placeholder=\"Unlimited\"\n                      fullWidth\n                    />\n                  </Grid>\n\n                  <Grid item xs={6}>\n                    <TextField\n                      label=\"Max Shops\"\n                      type=\"number\"\n                      value={editingPlan?.max_shops || ''}\n                      onChange={(e) => setEditingPlan({ ...editingPlan!, max_shops: parseInt(e.target.value) || undefined })}\n                      placeholder=\"Unlimited\"\n                      fullWidth\n                    />\n                  </Grid>\n                </>\n              )}\n\n              {editingPlan?.user_type === 'courier' && (\n                <Grid item xs={6}>\n                  <TextField\n                    label=\"Max Team Members\"\n                    type=\"number\"\n                    value={editingPlan?.max_team_members || ''}\n                    onChange={(e) => setEditingPlan({ ...editingPlan!, max_team_members: parseInt(e.target.value) || undefined })}\n                    placeholder=\"Unlimited\"\n                    fullWidth\n                  />\n                </Grid>\n              )}\n            </Grid>\n\n            <TextField\n              label=\"Description\"\n              value={editingPlan?.description || ''}\n              onChange={(e) => setEditingPlan({ ...editingPlan!, description: e.target.value })}\n              multiline\n              rows={2}\n              fullWidth\n            />\n\n            <Box sx={{ display: 'flex', gap: 2 }}>\n              <FormControlLabel\n                control={\n                  <Switch\n                    checked={editingPlan?.is_popular || false}\n                    onChange={(e) => setEditingPlan({ ...editingPlan!, is_popular: e.target.checked })}\n                  />\n                }\n                label=\"Mark as Popular\"\n              />\n\n              <FormControlLabel\n                control={\n                  <Switch\n                    checked={editingPlan?.is_active !== false}\n                    onChange={(e) => setEditingPlan({ ...editingPlan!, is_active: e.target.checked })}\n                  />\n                }\n                label=\"Active\"\n              />\n\n              <FormControlLabel\n                control={\n                  <Switch\n                    checked={editingPlan?.is_visible !== false}\n                    onChange={(e) => setEditingPlan({ ...editingPlan!, is_visible: e.target.checked })}\n                  />\n                }\n                label=\"Visible to Users\"\n              />\n            </Box>\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setDialogOpen(false)} startIcon={<CloseIcon />}>\n            Cancel\n          </Button>\n          <Button\n            onClick={handleSave}\n            variant=\"contained\"\n            startIcon={<SaveIcon />}\n            disabled={saveMutation.isPending}\n          >\n            {saveMutation.isPending ? 'Saving...' : 'Save Plan'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n};\n\nexport default SubscriptionManagement;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\admin\\SystemSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":100,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2407,2410],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2407,2410],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":127,"column":77,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":127,"endColumn":80,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3183,3186],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3183,3186],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Tabs,\n  Tab,\n  TextField,\n  Switch,\n  Button,\n  Alert,\n  Divider,\n  Grid,\n  FormControlLabel,\n  CircularProgress,\n  Chip,\n  Paper,\n} from '@mui/material';\nimport {\n  Save as SaveIcon,\n  Refresh as RefreshIcon,\n  Backup as BackupIcon,\n  RestoreFromTrash as RestoreIcon,\n  Info as InfoIcon,\n} from '@mui/icons-material';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\n\ninterface SystemSettings {\n  email: EmailSettings;\n  api: ApiSettings;\n  security: SecuritySettings;\n  features: FeatureSettings;\n  maintenance: MaintenanceSettings;\n}\n\ninterface EmailSettings {\n  smtp_host: string;\n  smtp_port: number;\n  smtp_secure: boolean;\n  from_email: string;\n  from_name: string;\n  smtp_username?: string;\n}\n\ninterface ApiSettings {\n  rate_limit_per_hour: number;\n  max_request_size_mb: number;\n  enable_cors: boolean;\n  api_version: string;\n}\n\ninterface SecuritySettings {\n  session_timeout_minutes: number;\n  max_login_attempts: number;\n  require_2fa: boolean;\n  password_min_length: number;\n  enable_ip_whitelist: boolean;\n}\n\ninterface FeatureSettings {\n  enable_notifications: boolean;\n  enable_email_notifications: boolean;\n  enable_proximity_matching: boolean;\n  enable_realtime_updates: boolean;\n  enable_advanced_analytics: boolean;\n}\n\ninterface MaintenanceSettings {\n  maintenance_mode: boolean;\n  maintenance_message: string;\n  scheduled_maintenance?: string;\n}\n\nexport const SystemSettings: React.FC = () => {\n  const [activeTab, setActiveTab] = useState(0);\n  const [hasChanges, setHasChanges] = useState(false);\n  const [localSettings, setLocalSettings] = useState<SystemSettings | null>(null);\n  const queryClient = useQueryClient();\n\n  // Fetch settings\n  const { data: settings, isLoading, error, refetch } = useQuery({\n    queryKey: ['admin-settings'],\n    queryFn: async () => {\n      const response = await apiClient.get('/admin/settings');\n      return response.data.data as SystemSettings;\n    },\n  });\n\n  // Initialize local settings when data loads\n  React.useEffect(() => {\n    if (settings && !localSettings) {\n      setLocalSettings(settings);\n    }\n  }, [settings, localSettings]);\n\n  // Update settings mutation\n  const updateMutation = useMutation({\n    mutationFn: async (data: { category: string; settings: any }) => {\n      return apiClient.put('/admin/settings', data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['admin-settings'] });\n      setHasChanges(false);\n    },\n  });\n\n  // Reset settings mutation\n  const resetMutation = useMutation({\n    mutationFn: async (category?: string) => {\n      return apiClient.post('/admin/settings/reset', { category });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['admin-settings'] });\n      setHasChanges(false);\n    },\n  });\n\n  // Backup settings mutation\n  const backupMutation = useMutation({\n    mutationFn: async () => {\n      return apiClient.get('/admin/settings/backup');\n    },\n  });\n\n  const handleChange = (category: keyof SystemSettings, key: string, value: any) => {\n    if (!localSettings) return;\n    \n    setLocalSettings({\n      ...localSettings,\n      [category]: {\n        ...localSettings[category],\n        [key]: value,\n      },\n    });\n    setHasChanges(true);\n  };\n\n  const handleSave = async () => {\n    if (!localSettings) return;\n\n    const categories: (keyof SystemSettings)[] = ['email', 'api', 'security', 'features', 'maintenance'];\n    const category = categories[activeTab];\n\n    await updateMutation.mutateAsync({\n      category,\n      settings: localSettings[category],\n    });\n  };\n\n  const handleReset = async () => {\n    const categories: (keyof SystemSettings)[] = ['email', 'api', 'security', 'features', 'maintenance'];\n    const category = categories[activeTab];\n    await resetMutation.mutateAsync(category);\n    refetch();\n  };\n\n  const handleBackup = async () => {\n    const result = await backupMutation.mutateAsync();\n    const backup = result.data.data;\n    \n    // Download backup as JSON file\n    const blob = new Blob([JSON.stringify(backup, null, 2)], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `settings-backup-${backup.backup_id}.json`;\n    a.click();\n    URL.revokeObjectURL(url);\n  };\n\n  if (isLoading) {\n    return (\n      <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '400px' }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  if (error) {\n    return (\n      <Box sx={{ p: 3 }}>\n        <Alert severity=\"error\">\n          Failed to load system settings. Please try again later.\n        </Alert>\n      </Box>\n    );\n  }\n\n  if (!localSettings) {\n    return null;\n  }\n\n  return (\n    <Box sx={{ p: 3 }}>\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n        <Box>\n          <Typography variant=\"h4\" gutterBottom>\n             System Settings\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            Configure platform-wide settings and features\n          </Typography>\n        </Box>\n        <Box sx={{ display: 'flex', gap: 1 }}>\n          <Button\n            variant=\"outlined\"\n            startIcon={<BackupIcon />}\n            onClick={handleBackup}\n            disabled={backupMutation.isPending}\n          >\n            Backup\n          </Button>\n          <Button\n            variant=\"outlined\"\n            startIcon={<RefreshIcon />}\n            onClick={() => refetch()}\n          >\n            Refresh\n          </Button>\n        </Box>\n      </Box>\n\n      <Alert severity=\"success\" icon={<InfoIcon />} sx={{ mb: 3 }}>\n        <strong>System Settings Active:</strong> Changes are saved to database and take effect immediately. \n        Complete audit trail maintained for all modifications.\n      </Alert>\n\n      {(updateMutation.isSuccess || resetMutation.isSuccess) && (\n        <Alert severity=\"success\" sx={{ mb: 2 }} onClose={() => {\n          updateMutation.reset();\n          resetMutation.reset();\n        }}>\n          Settings updated successfully! Changes are now active.\n        </Alert>\n      )}\n\n      {(updateMutation.isError || resetMutation.isError) && (\n        <Alert severity=\"error\" sx={{ mb: 2 }}>\n          Failed to update settings. Please try again.\n        </Alert>\n      )}\n\n      <Card>\n        <Tabs \n          value={activeTab} \n          onChange={(e, v) => setActiveTab(v)}\n          variant=\"scrollable\"\n          scrollButtons=\"auto\"\n        >\n          <Tab label=\" Email\" />\n          <Tab label=\" API\" />\n          <Tab label=\" Security\" />\n          <Tab label=\" Features\" />\n          <Tab label=\" Maintenance\" />\n        </Tabs>\n\n        <CardContent sx={{ p: 3 }}>\n          {/* Email Configuration Tab */}\n          {activeTab === 0 && (\n            <Grid container spacing={3}>\n              <Grid item xs={12}>\n                <Typography variant=\"h6\" gutterBottom>\n                  Email Configuration\n                </Typography>\n                <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\n                  Configure SMTP settings for outgoing emails\n                </Typography>\n              </Grid>\n\n              <Grid item xs={12} md={6}>\n                <TextField\n                  fullWidth\n                  label=\"SMTP Host\"\n                  value={localSettings.email.smtp_host}\n                  onChange={(e) => handleChange('email', 'smtp_host', e.target.value)}\n                  helperText=\"e.g., smtp.sendgrid.net\"\n                />\n              </Grid>\n\n              <Grid item xs={12} md={6}>\n                <TextField\n                  fullWidth\n                  type=\"number\"\n                  label=\"SMTP Port\"\n                  value={localSettings.email.smtp_port}\n                  onChange={(e) => handleChange('email', 'smtp_port', parseInt(e.target.value))}\n                  helperText=\"Common ports: 587 (TLS), 465 (SSL), 25\"\n                />\n              </Grid>\n\n              <Grid item xs={12} md={6}>\n                <TextField\n                  fullWidth\n                  label=\"From Email\"\n                  type=\"email\"\n                  value={localSettings.email.from_email}\n                  onChange={(e) => handleChange('email', 'from_email', e.target.value)}\n                  helperText=\"Email address for outgoing messages\"\n                />\n              </Grid>\n\n              <Grid item xs={12} md={6}>\n                <TextField\n                  fullWidth\n                  label=\"From Name\"\n                  value={localSettings.email.from_name}\n                  onChange={(e) => handleChange('email', 'from_name', e.target.value)}\n                  helperText=\"Display name for outgoing messages\"\n                />\n              </Grid>\n\n              <Grid item xs={12}>\n                <FormControlLabel\n                  control={\n                    <Switch\n                      checked={localSettings.email.smtp_secure}\n                      onChange={(e) => handleChange('email', 'smtp_secure', e.target.checked)}\n                    />\n                  }\n                  label=\"Use Secure Connection (TLS/SSL)\"\n                />\n              </Grid>\n            </Grid>\n          )}\n\n          {/* API Settings Tab */}\n          {activeTab === 1 && (\n            <Grid container spacing={3}>\n              <Grid item xs={12}>\n                <Typography variant=\"h6\" gutterBottom>\n                  API Configuration\n                </Typography>\n                <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\n                  Configure API behavior and limits\n                </Typography>\n              </Grid>\n\n              <Grid item xs={12} md={6}>\n                <TextField\n                  fullWidth\n                  type=\"number\"\n                  label=\"Rate Limit (per hour)\"\n                  value={localSettings.api.rate_limit_per_hour}\n                  onChange={(e) => handleChange('api', 'rate_limit_per_hour', parseInt(e.target.value))}\n                  helperText=\"Maximum requests per hour per user\"\n                  inputProps={{ min: 10, max: 100000 }}\n                />\n              </Grid>\n\n              <Grid item xs={12} md={6}>\n                <TextField\n                  fullWidth\n                  type=\"number\"\n                  label=\"Max Request Size (MB)\"\n                  value={localSettings.api.max_request_size_mb}\n                  onChange={(e) => handleChange('api', 'max_request_size_mb', parseInt(e.target.value))}\n                  helperText=\"Maximum size for API requests\"\n                  inputProps={{ min: 1, max: 100 }}\n                />\n              </Grid>\n\n              <Grid item xs={12} md={6}>\n                <TextField\n                  fullWidth\n                  label=\"API Version\"\n                  value={localSettings.api.api_version}\n                  onChange={(e) => handleChange('api', 'api_version', e.target.value)}\n                  helperText=\"Current API version\"\n                  disabled\n                />\n              </Grid>\n\n              <Grid item xs={12}>\n                <FormControlLabel\n                  control={\n                    <Switch\n                      checked={localSettings.api.enable_cors}\n                      onChange={(e) => handleChange('api', 'enable_cors', e.target.checked)}\n                    />\n                  }\n                  label=\"Enable CORS (Cross-Origin Resource Sharing)\"\n                />\n              </Grid>\n            </Grid>\n          )}\n\n          {/* Security Settings Tab */}\n          {activeTab === 2 && (\n            <Grid container spacing={3}>\n              <Grid item xs={12}>\n                <Typography variant=\"h6\" gutterBottom>\n                  Security Configuration\n                </Typography>\n                <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\n                  Configure authentication and security settings\n                </Typography>\n              </Grid>\n\n              <Grid item xs={12} md={6}>\n                <TextField\n                  fullWidth\n                  type=\"number\"\n                  label=\"Session Timeout (minutes)\"\n                  value={localSettings.security.session_timeout_minutes}\n                  onChange={(e) => handleChange('security', 'session_timeout_minutes', parseInt(e.target.value))}\n                  helperText=\"Auto-logout after inactivity\"\n                  inputProps={{ min: 5, max: 1440 }}\n                />\n              </Grid>\n\n              <Grid item xs={12} md={6}>\n                <TextField\n                  fullWidth\n                  type=\"number\"\n                  label=\"Max Login Attempts\"\n                  value={localSettings.security.max_login_attempts}\n                  onChange={(e) => handleChange('security', 'max_login_attempts', parseInt(e.target.value))}\n                  helperText=\"Lock account after failed attempts\"\n                  inputProps={{ min: 3, max: 10 }}\n                />\n              </Grid>\n\n              <Grid item xs={12} md={6}>\n                <TextField\n                  fullWidth\n                  type=\"number\"\n                  label=\"Password Min Length\"\n                  value={localSettings.security.password_min_length}\n                  onChange={(e) => handleChange('security', 'password_min_length', parseInt(e.target.value))}\n                  helperText=\"Minimum password length\"\n                  inputProps={{ min: 8, max: 128 }}\n                />\n              </Grid>\n\n              <Grid item xs={12}>\n                <FormControlLabel\n                  control={\n                    <Switch\n                      checked={localSettings.security.require_2fa}\n                      onChange={(e) => handleChange('security', 'require_2fa', e.target.checked)}\n                    />\n                  }\n                  label=\"Require Two-Factor Authentication (2FA)\"\n                />\n              </Grid>\n\n              <Grid item xs={12}>\n                <FormControlLabel\n                  control={\n                    <Switch\n                      checked={localSettings.security.enable_ip_whitelist}\n                      onChange={(e) => handleChange('security', 'enable_ip_whitelist', e.target.checked)}\n                    />\n                  }\n                  label=\"Enable IP Whitelist\"\n                />\n              </Grid>\n            </Grid>\n          )}\n\n          {/* Features Tab */}\n          {activeTab === 3 && (\n            <Grid container spacing={3}>\n              <Grid item xs={12}>\n                <Typography variant=\"h6\" gutterBottom>\n                  Feature Toggles\n                </Typography>\n                <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\n                  Enable or disable platform features\n                </Typography>\n              </Grid>\n\n              <Grid item xs={12}>\n                <Paper variant=\"outlined\" sx={{ p: 2, mb: 2 }}>\n                  <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                    <Box>\n                      <Typography variant=\"subtitle1\">Notifications System</Typography>\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        In-app notification system\n                      </Typography>\n                    </Box>\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                      <Chip \n                        label=\"Active\" \n                        color=\"success\" \n                        size=\"small\" \n                        sx={{ display: localSettings.features.enable_notifications ? 'flex' : 'none' }}\n                      />\n                      <Switch\n                        checked={localSettings.features.enable_notifications}\n                        onChange={(e) => handleChange('features', 'enable_notifications', e.target.checked)}\n                      />\n                    </Box>\n                  </Box>\n                </Paper>\n\n                <Paper variant=\"outlined\" sx={{ p: 2, mb: 2 }}>\n                  <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                    <Box>\n                      <Typography variant=\"subtitle1\">Email Notifications</Typography>\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        Send email notifications to users\n                      </Typography>\n                    </Box>\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                      <Chip \n                        label=\"Coming Soon\" \n                        color=\"warning\" \n                        size=\"small\"\n                      />\n                      <Switch\n                        checked={localSettings.features.enable_email_notifications}\n                        onChange={(e) => handleChange('features', 'enable_email_notifications', e.target.checked)}\n                      />\n                    </Box>\n                  </Box>\n                </Paper>\n\n                <Paper variant=\"outlined\" sx={{ p: 2, mb: 2 }}>\n                  <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                    <Box>\n                      <Typography variant=\"subtitle1\">Proximity Matching</Typography>\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        Match orders with nearby couriers\n                      </Typography>\n                    </Box>\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                      <Chip \n                        label=\"Coming Soon\" \n                        color=\"warning\" \n                        size=\"small\"\n                      />\n                      <Switch\n                        checked={localSettings.features.enable_proximity_matching}\n                        onChange={(e) => handleChange('features', 'enable_proximity_matching', e.target.checked)}\n                      />\n                    </Box>\n                  </Box>\n                </Paper>\n\n                <Paper variant=\"outlined\" sx={{ p: 2, mb: 2 }}>\n                  <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                    <Box>\n                      <Typography variant=\"subtitle1\">Real-time Updates</Typography>\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        WebSocket-based live updates\n                      </Typography>\n                    </Box>\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                      <Chip \n                        label=\"Coming Soon\" \n                        color=\"warning\" \n                        size=\"small\"\n                      />\n                      <Switch\n                        checked={localSettings.features.enable_realtime_updates}\n                        onChange={(e) => handleChange('features', 'enable_realtime_updates', e.target.checked)}\n                      />\n                    </Box>\n                  </Box>\n                </Paper>\n\n                <Paper variant=\"outlined\" sx={{ p: 2 }}>\n                  <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                    <Box>\n                      <Typography variant=\"subtitle1\">Advanced Analytics</Typography>\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        Advanced reporting and insights\n                      </Typography>\n                    </Box>\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                      <Chip \n                        label=\"Beta\" \n                        color=\"info\" \n                        size=\"small\"\n                      />\n                      <Switch\n                        checked={localSettings.features.enable_advanced_analytics}\n                        onChange={(e) => handleChange('features', 'enable_advanced_analytics', e.target.checked)}\n                      />\n                    </Box>\n                  </Box>\n                </Paper>\n              </Grid>\n            </Grid>\n          )}\n\n          {/* Maintenance Tab */}\n          {activeTab === 4 && (\n            <Grid container spacing={3}>\n              <Grid item xs={12}>\n                <Typography variant=\"h6\" gutterBottom>\n                  Maintenance Mode\n                </Typography>\n                <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\n                  Configure maintenance mode and scheduled downtime\n                </Typography>\n              </Grid>\n\n              <Grid item xs={12}>\n                <Alert severity=\"warning\" sx={{ mb: 2 }}>\n                  <strong>Warning:</strong> Enabling maintenance mode will prevent users from accessing the platform.\n                </Alert>\n              </Grid>\n\n              <Grid item xs={12}>\n                <FormControlLabel\n                  control={\n                    <Switch\n                      checked={localSettings.maintenance.maintenance_mode}\n                      onChange={(e) => handleChange('maintenance', 'maintenance_mode', e.target.checked)}\n                      color=\"warning\"\n                    />\n                  }\n                  label={\n                    <Box>\n                      <Typography variant=\"subtitle1\">\n                        Enable Maintenance Mode\n                      </Typography>\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        Users will see a maintenance page\n                      </Typography>\n                    </Box>\n                  }\n                />\n              </Grid>\n\n              <Grid item xs={12}>\n                <TextField\n                  fullWidth\n                  multiline\n                  rows={4}\n                  label=\"Maintenance Message\"\n                  value={localSettings.maintenance.maintenance_message}\n                  onChange={(e) => handleChange('maintenance', 'maintenance_message', e.target.value)}\n                  helperText=\"Message to display to users during maintenance\"\n                  placeholder=\"We're performing scheduled maintenance. We'll be back soon!\"\n                />\n              </Grid>\n\n              <Grid item xs={12}>\n                <TextField\n                  fullWidth\n                  type=\"datetime-local\"\n                  label=\"Scheduled Maintenance\"\n                  value={localSettings.maintenance.scheduled_maintenance || ''}\n                  onChange={(e) => handleChange('maintenance', 'scheduled_maintenance', e.target.value)}\n                  helperText=\"Schedule future maintenance (optional)\"\n                  InputLabelProps={{ shrink: true }}\n                />\n              </Grid>\n            </Grid>\n          )}\n\n          <Divider sx={{ my: 3 }} />\n\n          <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n            <Button\n              variant=\"outlined\"\n              color=\"warning\"\n              startIcon={<RestoreIcon />}\n              onClick={handleReset}\n              disabled={resetMutation.isPending}\n            >\n              Reset to Default\n            </Button>\n\n            <Box sx={{ display: 'flex', gap: 2 }}>\n              <Button\n                variant=\"outlined\"\n                onClick={() => {\n                  setLocalSettings(settings);\n                  setHasChanges(false);\n                }}\n                disabled={!hasChanges}\n              >\n                Cancel\n              </Button>\n              <Button\n                variant=\"contained\"\n                startIcon={<SaveIcon />}\n                onClick={handleSave}\n                disabled={!hasChanges || updateMutation.isPending}\n              >\n                {updateMutation.isPending ? 'Saving...' : 'Save Changes'}\n              </Button>\n            </Box>\n          </Box>\n        </CardContent>\n      </Card>\n    </Box>\n  );\n};\n\nexport default SystemSettings;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\analytics\\AdminAnalytics.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setPeriod' is assigned a value but never used.","line":102,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":102,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":133,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":133,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3406,3409],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3406,3409],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":137,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":137,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3552,3555],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3552,3555],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":144,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":144,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3781,3784],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3781,3784],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":302,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":302,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9429,9432],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9429,9432],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Tabs,\n  Tab,\n  Grid,\n  CircularProgress,\n  Alert,\n} from '@mui/material';\nimport {\n  TrendingUp as TrendingUpIcon,\n  TrendingDown as TrendingDownIcon,\n  LocalShipping as ShippingIcon,\n  Store as StoreIcon,\n  Star as StarIcon,\n  Assessment as AssessmentIcon,\n} from '@mui/icons-material';\nimport { useQuery } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport { Line } from 'react-chartjs-2';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend,\n} from 'chart.js';\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend\n);\n\ninterface MetricCardProps {\n  title: string;\n  value: string | number;\n  change?: number;\n  icon: React.ReactNode;\n  color?: string;\n}\n\nconst MetricCard: React.FC<MetricCardProps> = ({ title, value, change, icon, color = 'primary' }) => {\n  const isPositive = change && change > 0;\n  const isNegative = change && change < 0;\n\n  return (\n    <Card>\n      <CardContent>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>\n          <Box>\n            <Typography color=\"text.secondary\" variant=\"body2\" gutterBottom>\n              {title}\n            </Typography>\n            <Typography variant=\"h4\" component=\"div\">\n              {value}\n            </Typography>\n            {change !== undefined && (\n              <Box sx={{ display: 'flex', alignItems: 'center', mt: 1 }}>\n                {isPositive && <TrendingUpIcon color=\"success\" fontSize=\"small\" />}\n                {isNegative && <TrendingDownIcon color=\"error\" fontSize=\"small\" />}\n                <Typography\n                  variant=\"body2\"\n                  color={isPositive ? 'success.main' : isNegative ? 'error.main' : 'text.secondary'}\n                  sx={{ ml: 0.5 }}\n                >\n                  {change > 0 ? '+' : ''}{change}%\n                </Typography>\n              </Box>\n            )}\n          </Box>\n          <Box\n            sx={{\n              bgcolor: `${color}.light`,\n              borderRadius: 2,\n              p: 1,\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n            }}\n          >\n            {icon}\n          </Box>\n        </Box>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport const AdminAnalytics: React.FC = () => {\n  const [activeTab, setActiveTab] = useState(0);\n  const [period, setPeriod] = useState(30);\n\n  // Fetch platform analytics\n  const { data: platformData, isLoading, error } = useQuery({\n    queryKey: ['platform-analytics', period],\n    queryFn: async () => {\n      const response = await apiClient.get(`/analytics/platform?period=${period}`);\n      return response.data.data;\n    },\n  });\n\n  if (isLoading) {\n    return (\n      <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '60vh' }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  if (error) {\n    return (\n      <Box sx={{ p: 3 }}>\n        <Alert severity=\"error\">Failed to load analytics data. Please try again.</Alert>\n      </Box>\n    );\n  }\n\n  const { summary, trends, topCouriers } = platformData || {};\n\n  // Prepare chart data\n  const chartData = {\n    labels: trends?.map((t: any) => new Date(t.metric_date).toLocaleDateString()) || [],\n    datasets: [\n      {\n        label: 'Total Orders',\n        data: trends?.map((t: any) => t.total_orders) || [],\n        borderColor: 'rgb(75, 192, 192)',\n        backgroundColor: 'rgba(75, 192, 192, 0.2)',\n        tension: 0.4,\n      },\n      {\n        label: 'Delivered Orders',\n        data: trends?.map((t: any) => t.delivered_orders) || [],\n        borderColor: 'rgb(54, 162, 235)',\n        backgroundColor: 'rgba(54, 162, 235, 0.2)',\n        tension: 0.4,\n      },\n    ],\n  };\n\n  const chartOptions = {\n    responsive: true,\n    plugins: {\n      legend: {\n        position: 'top' as const,\n      },\n      title: {\n        display: true,\n        text: `Order Trends (Last ${period} Days)`,\n      },\n    },\n    scales: {\n      y: {\n        beginAtZero: true,\n      },\n    },\n  };\n\n  return (\n    <Box sx={{ p: 3 }}>\n      <Typography variant=\"h4\" gutterBottom>\n         Analytics Dashboard\n      </Typography>\n\n      <Tabs value={activeTab} onChange={(e, v) => setActiveTab(v)} sx={{ mb: 3 }}>\n        <Tab label=\"Platform Overview\" />\n        <Tab label=\"Top Performers\" />\n        <Tab label=\"Trends\" />\n      </Tabs>\n\n      {/* Tab 1: Platform Overview */}\n      {activeTab === 0 && (\n        <Box>\n          <Grid container spacing={3}>\n            {/* Metrics Cards */}\n            <Grid item xs={12} sm={6} md={3}>\n              <MetricCard\n                title=\"Total Orders\"\n                value={summary?.total_orders?.toLocaleString() || '0'}\n                change={summary?.orders_growth}\n                icon={<AssessmentIcon color=\"primary\" />}\n                color=\"primary\"\n              />\n            </Grid>\n            <Grid item xs={12} sm={6} md={3}>\n              <MetricCard\n                title=\"Active Couriers\"\n                value={summary?.active_couriers?.toLocaleString() || '0'}\n                icon={<ShippingIcon color=\"success\" />}\n                color=\"success\"\n              />\n            </Grid>\n            <Grid item xs={12} sm={6} md={3}>\n              <MetricCard\n                title=\"Active Stores\"\n                value={summary?.active_stores?.toLocaleString() || '0'}\n                icon={<StoreIcon color=\"info\" />}\n                color=\"info\"\n              />\n            </Grid>\n            <Grid item xs={12} sm={6} md={3}>\n              <MetricCard\n                title=\"Average Rating\"\n                value={summary?.avg_rating?.toFixed(2) || '0.00'}\n                change={summary?.rating_growth}\n                icon={<StarIcon color=\"warning\" />}\n                color=\"warning\"\n              />\n            </Grid>\n\n            {/* Performance Metrics */}\n            <Grid item xs={12} md={6}>\n              <Card>\n                <CardContent>\n                  <Typography variant=\"h6\" gutterBottom>\n                    Performance Metrics\n                  </Typography>\n                  <Box sx={{ mt: 2 }}>\n                    <Box sx={{ mb: 2 }}>\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        Completion Rate\n                      </Typography>\n                      <Typography variant=\"h5\">\n                        {summary?.avg_completion_rate?.toFixed(1) || '0'}%\n                      </Typography>\n                    </Box>\n                    <Box sx={{ mb: 2 }}>\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        On-Time Rate\n                      </Typography>\n                      <Typography variant=\"h5\">\n                        {summary?.avg_on_time_rate?.toFixed(1) || '0'}%\n                      </Typography>\n                    </Box>\n                    <Box>\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        Trust Score\n                      </Typography>\n                      <Typography variant=\"h5\">\n                        {summary?.avg_trust_score?.toFixed(1) || '0'}\n                      </Typography>\n                    </Box>\n                  </Box>\n                </CardContent>\n              </Card>\n            </Grid>\n\n            {/* Order Status Breakdown */}\n            <Grid item xs={12} md={6}>\n              <Card>\n                <CardContent>\n                  <Typography variant=\"h6\" gutterBottom>\n                    Order Status\n                  </Typography>\n                  <Box sx={{ mt: 2 }}>\n                    <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 1 }}>\n                      <Typography variant=\"body2\">Delivered</Typography>\n                      <Typography variant=\"body2\" fontWeight=\"bold\">\n                        {summary?.delivered_orders?.toLocaleString() || '0'}\n                      </Typography>\n                    </Box>\n                    <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 1 }}>\n                      <Typography variant=\"body2\">In Transit</Typography>\n                      <Typography variant=\"body2\" fontWeight=\"bold\">\n                        {summary?.in_transit_orders?.toLocaleString() || '0'}\n                      </Typography>\n                    </Box>\n                    <Box sx={{ display: 'flex', justifyContent: 'space-between' }}>\n                      <Typography variant=\"body2\">Pending</Typography>\n                      <Typography variant=\"body2\" fontWeight=\"bold\">\n                        {summary?.pending_orders?.toLocaleString() || '0'}\n                      </Typography>\n                    </Box>\n                  </Box>\n                </CardContent>\n              </Card>\n            </Grid>\n          </Grid>\n        </Box>\n      )}\n\n      {/* Tab 2: Top Performers */}\n      {activeTab === 1 && (\n        <Box>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                 Top Performing Couriers\n              </Typography>\n              <Box sx={{ mt: 2 }}>\n                {topCouriers?.map((courier: any, index: number) => (\n                  <Box\n                    key={courier.courier_id}\n                    sx={{\n                      display: 'flex',\n                      justifyContent: 'space-between',\n                      alignItems: 'center',\n                      p: 2,\n                      mb: 1,\n                      bgcolor: index < 3 ? 'action.hover' : 'transparent',\n                      borderRadius: 1,\n                    }}\n                  >\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n                      <Typography variant=\"h6\" color=\"text.secondary\">\n                        #{index + 1}\n                      </Typography>\n                      <Box>\n                        <Typography variant=\"body1\" fontWeight=\"bold\">\n                          {courier.courier_name}\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"text.secondary\">\n                          {courier.total_orders} orders  {courier.completion_rate?.toFixed(1)}% completion\n                        </Typography>\n                      </Box>\n                    </Box>\n                    <Box sx={{ textAlign: 'right' }}>\n                      <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.5 }}>\n                        <StarIcon color=\"warning\" fontSize=\"small\" />\n                        <Typography variant=\"body1\" fontWeight=\"bold\">\n                          {courier.avg_rating?.toFixed(2)}\n                        </Typography>\n                      </Box>\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        Trust: {courier.trust_score?.toFixed(1)}\n                      </Typography>\n                    </Box>\n                  </Box>\n                ))}\n              </Box>\n            </CardContent>\n          </Card>\n        </Box>\n      )}\n\n      {/* Tab 3: Trends */}\n      {activeTab === 2 && (\n        <Box>\n          <Card>\n            <CardContent>\n              <Line data={chartData} options={chartOptions} />\n            </CardContent>\n          </Card>\n        </Box>\n      )}\n    </Box>\n  );\n};\n\nexport default AdminAnalytics;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\analytics\\CourierAnalytics.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'PendingIcon' is defined but never used.","line":15,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":26},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":113,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":113,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3173,3176],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3173,3176],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":117,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":117,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3318,3321],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3318,3321],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":124,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":124,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3539,3542],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3539,3542],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Grid,\n  CircularProgress,\n  Alert,\n  LinearProgress,\n} from '@mui/material';\nimport {\n  LocalShipping as DeliveryIcon,\n  CheckCircle as CompletedIcon,\n  Schedule as PendingIcon,\n  Star as RatingIcon,\n  TrendingUp as TrendIcon,\n} from '@mui/icons-material';\nimport { useQuery } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport { Line, Doughnut } from 'react-chartjs-2';\nimport { useAuthStore } from '@/store/authStore';\nimport { PerformanceByLocation } from '@/components/analytics/PerformanceByLocation';\n\ninterface MetricCardProps {\n  title: string;\n  value: string | number;\n  subtitle?: string;\n  icon: React.ReactNode;\n  color?: string;\n}\n\nconst MetricCard: React.FC<MetricCardProps> = ({ title, value, subtitle, icon, color = 'primary' }) => {\n  return (\n    <Card>\n      <CardContent>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>\n          <Box>\n            <Typography color=\"text.secondary\" variant=\"body2\" gutterBottom>\n              {title}\n            </Typography>\n            <Typography variant=\"h4\" component=\"div\">\n              {value}\n            </Typography>\n            {subtitle && (\n              <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1 }}>\n                {subtitle}\n              </Typography>\n            )}\n          </Box>\n          <Box\n            sx={{\n              bgcolor: `${color}.light`,\n              borderRadius: 2,\n              p: 1,\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n            }}\n          >\n            {icon}\n          </Box>\n        </Box>\n      </CardContent>\n    </Card>\n  );\n};\n\ninterface PerformanceBarProps {\n  label: string;\n  value: number;\n  color: 'primary' | 'success' | 'warning' | 'error' | 'info';\n}\n\nconst PerformanceBar: React.FC<PerformanceBarProps> = ({ label, value, color }) => {\n  return (\n    <Box sx={{ mb: 2 }}>\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 0.5 }}>\n        <Typography variant=\"body2\">{label}</Typography>\n        <Typography variant=\"body2\" fontWeight=\"bold\">\n          {value.toFixed(1)}%\n        </Typography>\n      </Box>\n      <LinearProgress\n        variant=\"determinate\"\n        value={value}\n        color={color}\n        sx={{ height: 8, borderRadius: 1 }}\n      />\n    </Box>\n  );\n};\n\nexport const CourierAnalytics: React.FC = () => {\n  const { user } = useAuthStore();\n  const courierId = user?.user_id; // Simplified - should get actual courier_id\n\n  // Fetch courier analytics\n  const { data: courierData, isLoading, error } = useQuery({\n    queryKey: ['courier-analytics', courierId],\n    queryFn: async () => {\n      if (!courierId) return null;\n      const response = await apiClient.get(`/analytics/courier?courier_id=${courierId}`);\n      return response.data.data;\n    },\n    enabled: !!courierId,\n  });\n\n  const { summary, trends, statusBreakdown, performanceMetrics } = courierData || {};\n\n  // Prepare trend chart\n  const trendChartData = {\n    labels: trends?.map((t: any) => new Date(t.order_date).toLocaleDateString()) || [],\n    datasets: [\n      {\n        label: 'Total Orders',\n        data: trends?.map((t: any) => t.order_count) || [],\n        borderColor: 'rgb(75, 192, 192)',\n        backgroundColor: 'rgba(75, 192, 192, 0.2)',\n        tension: 0.4,\n      },\n      {\n        label: 'Delivered',\n        data: trends?.map((t: any) => t.delivered_count) || [],\n        borderColor: 'rgb(54, 162, 235)',\n        backgroundColor: 'rgba(54, 162, 235, 0.2)',\n        tension: 0.4,\n      },\n    ],\n  };\n\n  const trendChartOptions = {\n    responsive: true,\n    plugins: {\n      legend: {\n        position: 'top' as const,\n      },\n      title: {\n        display: true,\n        text: 'Order Trends (Last 30 Days)',\n      },\n    },\n  };\n\n  // Prepare status breakdown chart\n  const statusChartData = {\n    labels: ['Delivered', 'In Transit', 'Pending', 'Cancelled'],\n    datasets: [\n      {\n        data: [\n          statusBreakdown?.delivered || 0,\n          statusBreakdown?.in_transit || 0,\n          statusBreakdown?.pending || 0,\n          statusBreakdown?.cancelled || 0,\n        ],\n        backgroundColor: [\n          'rgba(75, 192, 192, 0.8)',\n          'rgba(54, 162, 235, 0.8)',\n          'rgba(255, 206, 86, 0.8)',\n          'rgba(255, 99, 132, 0.8)',\n        ],\n        borderColor: [\n          'rgba(75, 192, 192, 1)',\n          'rgba(54, 162, 235, 1)',\n          'rgba(255, 206, 86, 1)',\n          'rgba(255, 99, 132, 1)',\n        ],\n        borderWidth: 1,\n      },\n    ],\n  };\n\n  if (isLoading) {\n    return (\n      <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '60vh' }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  if (error) {\n    return (\n      <Box sx={{ p: 3 }}>\n        <Alert severity=\"error\">Failed to load courier analytics. Please try again.</Alert>\n      </Box>\n    );\n  }\n\n  if (!summary) {\n    return (\n      <Box sx={{ p: 3 }}>\n        <Alert severity=\"info\">No analytics data available yet.</Alert>\n      </Box>\n    );\n  }\n\n  return (\n    <Box sx={{ p: 3 }}>\n      <Typography variant=\"h4\" gutterBottom>\n         Courier Performance\n      </Typography>\n\n      <Grid container spacing={3}>\n        {/* Metrics Cards */}\n        <Grid item xs={12} sm={6} md={3}>\n          <MetricCard\n            title=\"Total Orders\"\n            value={summary.total_orders?.toLocaleString() || '0'}\n            subtitle={`${summary.delivered_orders || 0} delivered`}\n            icon={<DeliveryIcon color=\"primary\" />}\n            color=\"primary\"\n          />\n        </Grid>\n        <Grid item xs={12} sm={6} md={3}>\n          <MetricCard\n            title=\"Completion Rate\"\n            value={`${summary.completion_rate?.toFixed(1) || '0'}%`}\n            subtitle={`${summary.in_transit_orders || 0} in transit`}\n            icon={<CompletedIcon color=\"success\" />}\n            color=\"success\"\n          />\n        </Grid>\n        <Grid item xs={12} sm={6} md={3}>\n          <MetricCard\n            title=\"Average Rating\"\n            value={summary.avg_rating?.toFixed(2) || '0.00'}\n            subtitle={`${summary.total_reviews || 0} reviews`}\n            icon={<RatingIcon color=\"warning\" />}\n            color=\"warning\"\n          />\n        </Grid>\n        <Grid item xs={12} sm={6} md={3}>\n          <MetricCard\n            title=\"Trust Score\"\n            value={summary.trust_score?.toFixed(1) || '0'}\n            subtitle={`${summary.customer_count || 0} customers`}\n            icon={<TrendIcon color=\"info\" />}\n            color=\"info\"\n          />\n        </Grid>\n\n        {/* Performance Metrics */}\n        <Grid item xs={12} md={6}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Performance Metrics\n              </Typography>\n              <Box sx={{ mt: 2 }}>\n                <PerformanceBar\n                  label=\"Completion Rate\"\n                  value={performanceMetrics?.completion_rate || 0}\n                  color=\"success\"\n                />\n                <PerformanceBar\n                  label=\"On-Time Rate\"\n                  value={performanceMetrics?.on_time_rate || 0}\n                  color=\"primary\"\n                />\n                <PerformanceBar\n                  label=\"Trust Score\"\n                  value={performanceMetrics?.trust_score || 0}\n                  color=\"info\"\n                />\n              </Box>\n              <Box sx={{ mt: 2, p: 2, bgcolor: 'grey.100', borderRadius: 1 }}>\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  Average Delivery Time\n                </Typography>\n                <Typography variant=\"h5\">\n                  {summary.avg_delivery_days?.toFixed(1) || '0'} days\n                </Typography>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        {/* Order Status Breakdown */}\n        <Grid item xs={12} md={6}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Order Status Breakdown\n              </Typography>\n              <Box sx={{ mt: 2, display: 'flex', justifyContent: 'center' }}>\n                <Doughnut data={statusChartData} />\n              </Box>\n              <Grid container spacing={1} sx={{ mt: 2 }}>\n                <Grid item xs={6}>\n                  <Box sx={{ textAlign: 'center', p: 1, bgcolor: 'success.light', borderRadius: 1 }}>\n                    <Typography variant=\"h6\">{statusBreakdown?.delivered || 0}</Typography>\n                    <Typography variant=\"caption\">Delivered</Typography>\n                  </Box>\n                </Grid>\n                <Grid item xs={6}>\n                  <Box sx={{ textAlign: 'center', p: 1, bgcolor: 'info.light', borderRadius: 1 }}>\n                    <Typography variant=\"h6\">{statusBreakdown?.in_transit || 0}</Typography>\n                    <Typography variant=\"caption\">In Transit</Typography>\n                  </Box>\n                </Grid>\n                <Grid item xs={6}>\n                  <Box sx={{ textAlign: 'center', p: 1, bgcolor: 'warning.light', borderRadius: 1 }}>\n                    <Typography variant=\"h6\">{statusBreakdown?.pending || 0}</Typography>\n                    <Typography variant=\"caption\">Pending</Typography>\n                  </Box>\n                </Grid>\n                <Grid item xs={6}>\n                  <Box sx={{ textAlign: 'center', p: 1, bgcolor: 'error.light', borderRadius: 1 }}>\n                    <Typography variant=\"h6\">{statusBreakdown?.cancelled || 0}</Typography>\n                    <Typography variant=\"caption\">Cancelled</Typography>\n                  </Box>\n                </Grid>\n              </Grid>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        {/* Trend Chart */}\n        <Grid item xs={12}>\n          <Card>\n            <CardContent>\n              <Line data={trendChartData} options={trendChartOptions} />\n            </CardContent>\n          </Card>\n        </Grid>\n\n        {/* Recent Activity */}\n        <Grid item xs={12}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Recent Activity\n              </Typography>\n              <Grid container spacing={2} sx={{ mt: 1 }}>\n                <Grid item xs={12} md={4}>\n                  <Box sx={{ p: 2, border: '1px solid', borderColor: 'divider', borderRadius: 1 }}>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      Last Order\n                    </Typography>\n                    <Typography variant=\"body1\">\n                      {summary.last_order_date\n                        ? new Date(summary.last_order_date).toLocaleDateString()\n                        : 'N/A'}\n                    </Typography>\n                  </Box>\n                </Grid>\n                <Grid item xs={12} md={4}>\n                  <Box sx={{ p: 2, border: '1px solid', borderColor: 'divider', borderRadius: 1 }}>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      Last Review\n                    </Typography>\n                    <Typography variant=\"body1\">\n                      {summary.last_review_date\n                        ? new Date(summary.last_review_date).toLocaleDateString()\n                        : 'N/A'}\n                    </Typography>\n                  </Box>\n                </Grid>\n                <Grid item xs={12} md={4}>\n                  <Box sx={{ p: 2, border: '1px solid', borderColor: 'divider', borderRadius: 1 }}>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      Last Calculated\n                    </Typography>\n                    <Typography variant=\"body1\">\n                      {summary.last_calculated\n                        ? new Date(summary.last_calculated).toLocaleDateString()\n                        : 'N/A'}\n                    </Typography>\n                  </Box>\n                </Grid>\n              </Grid>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        {/* Performance by Location */}\n        <Grid item xs={12}>\n          <PerformanceByLocation />\n        </Grid>\n      </Grid>\n    </Box>\n  );\n};\n\nexport default CourierAnalytics;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\analytics\\MerchantAnalytics.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setShopId' is assigned a value but never used.","line":75,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":75,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":96,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":96,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2598,2601],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2598,2601],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":100,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2741,2744],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2741,2744],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":107,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":107,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2961,2964],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2961,2964],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Grid,\n  CircularProgress,\n  Alert,\n  Select,\n  MenuItem,\n  FormControl,\n  InputLabel,\n  Chip,\n} from '@mui/material';\nimport {\n  ShoppingCart as OrdersIcon,\n  AttachMoney as RevenueIcon,\n  LocalShipping as DeliveryIcon,\n  Star as RatingIcon,\n} from '@mui/icons-material';\nimport { useQuery } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport { Line, Doughnut } from 'react-chartjs-2';\nimport { Chart as ChartJS, ArcElement } from 'chart.js';\nimport { PerformanceByLocation } from '@/components/analytics/PerformanceByLocation';\n\nChartJS.register(ArcElement);\n\ninterface MetricCardProps {\n  title: string;\n  value: string | number;\n  subtitle?: string;\n  icon: React.ReactNode;\n  color?: string;\n}\n\nconst MetricCard: React.FC<MetricCardProps> = ({ title, value, subtitle, icon, color = 'primary' }) => {\n  return (\n    <Card>\n      <CardContent>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>\n          <Box>\n            <Typography color=\"text.secondary\" variant=\"body2\" gutterBottom>\n              {title}\n            </Typography>\n            <Typography variant=\"h4\" component=\"div\">\n              {value}\n            </Typography>\n            {subtitle && (\n              <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1 }}>\n                {subtitle}\n              </Typography>\n            )}\n          </Box>\n          <Box\n            sx={{\n              bgcolor: `${color}.light`,\n              borderRadius: 2,\n              p: 1,\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n            }}\n          >\n            {icon}\n          </Box>\n        </Box>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport const MerchantAnalytics: React.FC = () => {\n  const [shopId, setShopId] = useState('');\n  const [period, setPeriod] = useState('daily');\n  const [days, setDays] = useState(30);\n\n  // Fetch shop analytics\n  const { data: shopData, isLoading, error } = useQuery({\n    queryKey: ['shop-analytics', shopId, period, days],\n    queryFn: async () => {\n      if (!shopId) return null;\n      const response = await apiClient.get(\n        `/analytics/shop?shop_id=${shopId}&period=${period}&days=${days}`\n      );\n      return response.data.data;\n    },\n    enabled: !!shopId,\n  });\n\n  const { summary, trends, deliveryBreakdown } = shopData || {};\n\n  // Prepare trend chart data\n  const trendChartData = {\n    labels: trends?.map((t: any) => new Date(t.snapshot_date).toLocaleDateString()) || [],\n    datasets: [\n      {\n        label: 'Revenue',\n        data: trends?.map((t: any) => t.total_revenue) || [],\n        borderColor: 'rgb(75, 192, 192)',\n        backgroundColor: 'rgba(75, 192, 192, 0.2)',\n        yAxisID: 'y',\n      },\n      {\n        label: 'Orders',\n        data: trends?.map((t: any) => t.total_orders) || [],\n        borderColor: 'rgb(54, 162, 235)',\n        backgroundColor: 'rgba(54, 162, 235, 0.2)',\n        yAxisID: 'y1',\n      },\n    ],\n  };\n\n  const trendChartOptions = {\n    responsive: true,\n    interaction: {\n      mode: 'index' as const,\n      intersect: false,\n    },\n    plugins: {\n      title: {\n        display: true,\n        text: 'Revenue & Orders Trend',\n      },\n    },\n    scales: {\n      y: {\n        type: 'linear' as const,\n        display: true,\n        position: 'left' as const,\n        title: {\n          display: true,\n          text: 'Revenue',\n        },\n      },\n      y1: {\n        type: 'linear' as const,\n        display: true,\n        position: 'right' as const,\n        title: {\n          display: true,\n          text: 'Orders',\n        },\n        grid: {\n          drawOnChartArea: false,\n        },\n      },\n    },\n  };\n\n  // Prepare delivery method chart\n  const deliveryChartData = {\n    labels: ['Home Delivery', 'Parcel Shop', 'Parcel Locker'],\n    datasets: [\n      {\n        data: [\n          deliveryBreakdown?.home_delivery || 0,\n          deliveryBreakdown?.parcel_shop || 0,\n          deliveryBreakdown?.parcel_locker || 0,\n        ],\n        backgroundColor: [\n          'rgba(54, 162, 235, 0.8)',\n          'rgba(255, 206, 86, 0.8)',\n          'rgba(75, 192, 192, 0.8)',\n        ],\n        borderColor: [\n          'rgba(54, 162, 235, 1)',\n          'rgba(255, 206, 86, 1)',\n          'rgba(75, 192, 192, 1)',\n        ],\n        borderWidth: 1,\n      },\n    ],\n  };\n\n  if (!shopId) {\n    return (\n      <Box sx={{ p: 3 }}>\n        <Typography variant=\"h4\" gutterBottom>\n           Shop Analytics\n        </Typography>\n        <Alert severity=\"info\">\n          Please select a shop to view analytics.\n        </Alert>\n      </Box>\n    );\n  }\n\n  if (isLoading) {\n    return (\n      <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '60vh' }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  if (error) {\n    return (\n      <Box sx={{ p: 3 }}>\n        <Alert severity=\"error\">Failed to load shop analytics. Please try again.</Alert>\n      </Box>\n    );\n  }\n\n  return (\n    <Box sx={{ p: 3 }}>\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n        <Typography variant=\"h4\">\n           Shop Analytics\n        </Typography>\n        <Box sx={{ display: 'flex', gap: 2 }}>\n          <FormControl size=\"small\" sx={{ minWidth: 150 }}>\n            <InputLabel>Period</InputLabel>\n            <Select value={period} onChange={(e) => setPeriod(e.target.value)} label=\"Period\">\n              <MenuItem value=\"daily\">Daily</MenuItem>\n              <MenuItem value=\"weekly\">Weekly</MenuItem>\n              <MenuItem value=\"monthly\">Monthly</MenuItem>\n            </Select>\n          </FormControl>\n          <FormControl size=\"small\" sx={{ minWidth: 120 }}>\n            <InputLabel>Days</InputLabel>\n            <Select value={days} onChange={(e) => setDays(Number(e.target.value))} label=\"Days\">\n              <MenuItem value={7}>7 days</MenuItem>\n              <MenuItem value={30}>30 days</MenuItem>\n              <MenuItem value={90}>90 days</MenuItem>\n            </Select>\n          </FormControl>\n        </Box>\n      </Box>\n\n      <Grid container spacing={3}>\n        {/* Metrics Cards */}\n        <Grid item xs={12} sm={6} md={3}>\n          <MetricCard\n            title=\"Total Orders\"\n            value={summary?.total_orders?.toLocaleString() || '0'}\n            subtitle={`${summary?.completed_orders || 0} completed`}\n            icon={<OrdersIcon color=\"primary\" />}\n            color=\"primary\"\n          />\n        </Grid>\n        <Grid item xs={12} sm={6} md={3}>\n          <MetricCard\n            title=\"Total Revenue\"\n            value={`$${summary?.total_revenue?.toLocaleString() || '0'}`}\n            subtitle={`Avg: $${summary?.average_order_value?.toFixed(2) || '0'}`}\n            icon={<RevenueIcon color=\"success\" />}\n            color=\"success\"\n          />\n        </Grid>\n        <Grid item xs={12} sm={6} md={3}>\n          <MetricCard\n            title=\"On-Time Rate\"\n            value={`${summary?.on_time_delivery_rate?.toFixed(1) || '0'}%`}\n            subtitle={`${summary?.average_delivery_time_hours?.toFixed(1) || '0'} hrs avg`}\n            icon={<DeliveryIcon color=\"info\" />}\n            color=\"info\"\n          />\n        </Grid>\n        <Grid item xs={12} sm={6} md={3}>\n          <MetricCard\n            title=\"Satisfaction\"\n            value={summary?.customer_satisfaction_score?.toFixed(2) || '0.00'}\n            subtitle={`Completion: ${summary?.completion_rate || '0'}%`}\n            icon={<RatingIcon color=\"warning\" />}\n            color=\"warning\"\n          />\n        </Grid>\n\n        {/* Trend Chart */}\n        <Grid item xs={12} md={8}>\n          <Card>\n            <CardContent>\n              <Line data={trendChartData} options={trendChartOptions} />\n            </CardContent>\n          </Card>\n        </Grid>\n\n        {/* Delivery Method Breakdown */}\n        <Grid item xs={12} md={4}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Delivery Methods\n              </Typography>\n              <Box sx={{ mt: 2, display: 'flex', justifyContent: 'center' }}>\n                <Doughnut data={deliveryChartData} />\n              </Box>\n              <Box sx={{ mt: 2 }}>\n                <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 1 }}>\n                  <Typography variant=\"body2\">Home Delivery</Typography>\n                  <Chip label={deliveryBreakdown?.home_delivery || 0} size=\"small\" color=\"primary\" />\n                </Box>\n                <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 1 }}>\n                  <Typography variant=\"body2\">Parcel Shop</Typography>\n                  <Chip label={deliveryBreakdown?.parcel_shop || 0} size=\"small\" color=\"warning\" />\n                </Box>\n                <Box sx={{ display: 'flex', justifyContent: 'space-between' }}>\n                  <Typography variant=\"body2\">Parcel Locker</Typography>\n                  <Chip label={deliveryBreakdown?.parcel_locker || 0} size=\"small\" color=\"info\" />\n                </Box>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        {/* Order Status */}\n        <Grid item xs={12}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Order Status Overview\n              </Typography>\n              <Grid container spacing={2} sx={{ mt: 1 }}>\n                <Grid item xs={12} sm={3}>\n                  <Box sx={{ textAlign: 'center', p: 2, bgcolor: 'success.light', borderRadius: 1 }}>\n                    <Typography variant=\"h4\">{summary?.completed_orders || 0}</Typography>\n                    <Typography variant=\"body2\">Completed</Typography>\n                  </Box>\n                </Grid>\n                <Grid item xs={12} sm={3}>\n                  <Box sx={{ textAlign: 'center', p: 2, bgcolor: 'info.light', borderRadius: 1 }}>\n                    <Typography variant=\"h4\">{summary?.pending_orders || 0}</Typography>\n                    <Typography variant=\"body2\">Pending</Typography>\n                  </Box>\n                </Grid>\n                <Grid item xs={12} sm={3}>\n                  <Box sx={{ textAlign: 'center', p: 2, bgcolor: 'error.light', borderRadius: 1 }}>\n                    <Typography variant=\"h4\">{summary?.cancelled_orders || 0}</Typography>\n                    <Typography variant=\"body2\">Cancelled</Typography>\n                  </Box>\n                </Grid>\n                <Grid item xs={12} sm={3}>\n                  <Box sx={{ textAlign: 'center', p: 2, bgcolor: 'grey.300', borderRadius: 1 }}>\n                    <Typography variant=\"h4\">{summary?.courier_count || 0}</Typography>\n                    <Typography variant=\"body2\">Couriers Used</Typography>\n                  </Box>\n                </Grid>\n              </Grid>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        {/* Performance by Location */}\n        <Grid item xs={12}>\n          <PerformanceByLocation />\n        </Grid>\n      </Grid>\n    </Box>\n  );\n};\n\nexport default MerchantAnalytics;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\consumer\\C2CCreate.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\consumer\\Dashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FileText' is defined but never used.","line":7,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Star' is defined but never used.","line":9,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":7}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuthStore } from '../../store/authStore';\nimport {\n  Package,\n  Truck,\n  FileText,\n  RotateCcw,\n  Star,\n  Send,\n  AlertCircle,\n  TrendingUp,\n} from 'lucide-react';\n\ninterface DashboardStats {\n  totalOrders: number;\n  activeShipments: number;\n  pendingClaims: number;\n  c2cShipments: number;\n}\n\nconst ConsumerDashboard: React.FC = () => {\n  const navigate = useNavigate();\n  const { user } = useAuthStore();\n  const [stats, setStats] = useState<DashboardStats>({\n    totalOrders: 0,\n    activeShipments: 0,\n    pendingClaims: 0,\n    c2cShipments: 0,\n  });\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (user?.user_role !== 'consumer') {\n      navigate('/login');\n      return;\n    }\n\n    fetchDashboardStats();\n  }, [user, navigate]);\n\n  const fetchDashboardStats = async () => {\n    try {\n      const response = await fetch('/api/consumer/dashboard-stats', {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`,\n        },\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        setStats(data);\n      }\n    } catch (error) {\n      console.error('Failed to fetch dashboard stats:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const quickActions = [\n    {\n      icon: Send,\n      title: 'Ship Package',\n      description: 'Send a package with C2C shipping',\n      color: 'bg-blue-500',\n      action: () => navigate('/consumer/c2c/create'),\n    },\n    {\n      icon: Package,\n      title: 'Track Order',\n      description: 'Track your shipments',\n      color: 'bg-green-500',\n      action: () => navigate('/consumer/orders'),\n    },\n    {\n      icon: AlertCircle,\n      title: 'File Claim',\n      description: 'Report an issue with delivery',\n      color: 'bg-orange-500',\n      action: () => navigate('/consumer/claims/create'),\n    },\n    {\n      icon: RotateCcw,\n      title: 'Request Return',\n      description: 'Return an item',\n      color: 'bg-purple-500',\n      action: () => navigate('/consumer/returns/create'),\n    },\n  ];\n\n  const statCards = [\n    {\n      icon: Package,\n      title: 'Total Orders',\n      value: stats.totalOrders,\n      color: 'text-blue-600',\n      bgColor: 'bg-blue-50',\n    },\n    {\n      icon: Truck,\n      title: 'Active Shipments',\n      value: stats.activeShipments,\n      color: 'text-green-600',\n      bgColor: 'bg-green-50',\n    },\n    {\n      icon: Send,\n      title: 'C2C Shipments',\n      value: stats.c2cShipments,\n      color: 'text-purple-600',\n      bgColor: 'bg-purple-50',\n    },\n    {\n      icon: AlertCircle,\n      title: 'Pending Claims',\n      value: stats.pendingClaims,\n      color: 'text-orange-600',\n      bgColor: 'bg-orange-50',\n    },\n  ];\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <div className=\"bg-white shadow\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h1 className=\"text-3xl font-bold text-gray-900\">\n                Welcome back, {user?.first_name}!\n              </h1>\n              <p className=\"mt-1 text-sm text-gray-500\">\n                Manage your orders, shipments, and deliveries\n              </p>\n            </div>\n            <button\n              onClick={() => navigate('/consumer/c2c/create')}\n              className=\"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n            >\n              <Send className=\"h-4 w-4 mr-2\" />\n              Ship Package\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Stats Grid */}\n        <div className=\"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4 mb-8\">\n          {statCards.map((stat, index) => (\n            <div\n              key={index}\n              className=\"bg-white overflow-hidden shadow rounded-lg hover:shadow-md transition-shadow\"\n            >\n              <div className=\"p-5\">\n                <div className=\"flex items-center\">\n                  <div className={`flex-shrink-0 ${stat.bgColor} rounded-md p-3`}>\n                    <stat.icon className={`h-6 w-6 ${stat.color}`} />\n                  </div>\n                  <div className=\"ml-5 w-0 flex-1\">\n                    <dl>\n                      <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                        {stat.title}\n                      </dt>\n                      <dd className=\"flex items-baseline\">\n                        <div className=\"text-2xl font-semibold text-gray-900\">\n                          {stat.value}\n                        </div>\n                      </dd>\n                    </dl>\n                  </div>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        {/* Quick Actions */}\n        <div className=\"mb-8\">\n          <h2 className=\"text-lg font-medium text-gray-900 mb-4\">Quick Actions</h2>\n          <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4\">\n            {quickActions.map((action, index) => (\n              <button\n                key={index}\n                onClick={action.action}\n                className=\"relative group bg-white p-6 rounded-lg shadow hover:shadow-lg transition-all duration-200 text-left\"\n              >\n                <div className={`inline-flex p-3 rounded-lg ${action.color} text-white mb-4`}>\n                  <action.icon className=\"h-6 w-6\" />\n                </div>\n                <h3 className=\"text-lg font-medium text-gray-900 mb-1\">\n                  {action.title}\n                </h3>\n                <p className=\"text-sm text-gray-500\">{action.description}</p>\n                <div className=\"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity\">\n                  <TrendingUp className=\"h-5 w-5 text-gray-400\" />\n                </div>\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Recent Activity */}\n        <div className=\"bg-white shadow rounded-lg\">\n          <div className=\"px-4 py-5 sm:p-6\">\n            <h2 className=\"text-lg font-medium text-gray-900 mb-4\">\n              Recent Activity\n            </h2>\n            <div className=\"space-y-4\">\n              {/* Placeholder for recent activity */}\n              <div className=\"text-center py-12 text-gray-500\">\n                <Package className=\"h-12 w-12 mx-auto mb-4 text-gray-400\" />\n                <p>No recent activity</p>\n                <p className=\"text-sm mt-1\">\n                  Your orders and shipments will appear here\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ConsumerDashboard;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\consumer\\Orders.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\courier\\CourierCheckoutAnalytics.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Paper' is defined but never used.","line":16,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TrendingDown' is defined but never used.","line":25,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Store' is defined but never used.","line":26,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Inventory' is defined but never used.","line":29,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'BarChart' is defined but never used.","line":41,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":41,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Bar' is defined but never used.","line":42,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":42,"endColumn":6},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":160,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":160,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4199,4202],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4199,4202],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":164,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":164,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4403,4406],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4403,4406],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":170,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":170,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4583,4586],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4583,4586],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":279,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":279,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8586,8589],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8586,8589],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":356,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":356,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11354,11357],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11354,11357],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":415,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":415,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13791,13794],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13791,13794],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":479,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":479,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16355,16358],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16355,16358],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":526,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":526,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18450,18453],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18450,18453],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":568,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":568,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20319,20322],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20319,20322],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":593,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":593,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21262,21265],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21262,21265],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":612,"column":19,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[21993,22037],"text":"\n              What&apos;s included:\n            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[21993,22037],"text":"\n              What&lsquo;s included:\n            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[21993,22037],"text":"\n              What&#39;s included:\n            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[21993,22037],"text":"\n              What&rsquo;s included:\n            "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":17,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Tabs,\n  Tab,\n  Grid,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Paper,\n  Chip,\n  LinearProgress,\n  Alert,\n  Button,\n  CircularProgress,\n} from '@mui/material';\nimport {\n  TrendingUp,\n  TrendingDown,\n  Store,\n  LocalShipping,\n  AttachMoney,\n  Inventory,\n  Scale,\n  LocationOn,\n  Lock,\n  Upgrade,\n} from '@mui/icons-material';\nimport { useQuery } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport { useAuthStore } from '@/store/authStore';\nimport {\n  LineChart,\n  Line,\n  BarChart,\n  Bar,\n  PieChart,\n  Pie,\n  Cell,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  ResponsiveContainer,\n} from 'recharts';\n\ninterface TabPanelProps {\n  children?: React.ReactNode;\n  index: number;\n  value: number;\n}\n\nconst TabPanel: React.FC<TabPanelProps> = ({ children, value, index }) => {\n  return (\n    <div hidden={value !== index} style={{ marginTop: '24px' }}>\n      {value === index && <Box>{children}</Box>}\n    </div>\n  );\n};\n\nconst COLORS = ['#0088FE', '#00C49F', '#FFBB28', '#FF8042', '#8884D8'];\n\nexport const CourierCheckoutAnalytics: React.FC = () => {\n  const { user } = useAuthStore();\n  const [activeTab, setActiveTab] = useState(0);\n\n  // Fetch My Merchants analytics\n  const { data: myMerchantsData, isLoading: loadingMyMerchants } = useQuery({\n    queryKey: ['courier-checkout-analytics', user?.user_id],\n    queryFn: async () => {\n      const response = await apiClient.get('/courier/checkout-analytics');\n      return response.data.data;\n    },\n    enabled: !!user,\n  });\n\n  // Fetch Market Insights (premium)\n  const { data: marketInsightsData, isLoading: loadingMarketInsights, error: marketError } = useQuery({\n    queryKey: ['courier-market-insights', user?.user_id],\n    queryFn: async () => {\n      const response = await apiClient.get('/market-insights/courier');\n      return response.data.data;\n    },\n    enabled: !!user && activeTab === 1,\n  });\n\n  const handleTabChange = (_event: React.SyntheticEvent, newValue: number) => {\n    setActiveTab(newValue);\n  };\n\n  const isPremium = marketInsightsData && !marketError;\n\n  return (\n    <Box sx={{ p: 3 }}>\n      {/* Header */}\n      <Box sx={{ mb: 3 }}>\n        <Typography variant=\"h4\" gutterBottom>\n           Checkout Analytics\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\">\n          Track your performance in merchant checkouts and discover opportunities\n        </Typography>\n      </Box>\n\n      {/* Tabs */}\n      <Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\n        <Tabs value={activeTab} onChange={handleTabChange}>\n          <Tab label=\" My Merchants\" />\n          <Tab \n            label={\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                 Market Insights\n                {!isPremium && <Chip label=\"Premium\" size=\"small\" color=\"warning\" />}\n              </Box>\n            }\n          />\n        </Tabs>\n      </Box>\n\n      {/* Tab 1: My Merchants */}\n      <TabPanel value={activeTab} index={0}>\n        {loadingMyMerchants ? (\n          <Box sx={{ display: 'flex', justifyContent: 'center', p: 4 }}>\n            <CircularProgress />\n          </Box>\n        ) : myMerchantsData ? (\n          <MyMerchantsTab data={myMerchantsData} />\n        ) : (\n          <Alert severity=\"info\">No data available yet. Start accepting orders to see your analytics!</Alert>\n        )}\n      </TabPanel>\n\n      {/* Tab 2: Market Insights */}\n      <TabPanel value={activeTab} index={1}>\n        {!isPremium && marketError ? (\n          <PremiumGate error={marketError} />\n        ) : loadingMarketInsights ? (\n          <Box sx={{ display: 'flex', justifyContent: 'center', p: 4 }}>\n            <CircularProgress />\n          </Box>\n        ) : marketInsightsData ? (\n          <MarketInsightsTab data={marketInsightsData} />\n        ) : null}\n      </TabPanel>\n    </Box>\n  );\n};\n\n// =====================================================\n// My Merchants Tab Component\n// =====================================================\n\nconst MyMerchantsTab: React.FC<{ data: any }> = ({ data }) => {\n  const { summary, topMerchants, distribution, trend, subscription } = data;\n\n  // Prepare position distribution data for pie chart\n  const positionData = distribution.map((item: any) => ({\n    name: `Position ${item.position_shown}`,\n    value: parseFloat(item.percentage),\n  }));\n\n  // Prepare trend data for line chart\n  const trendData = trend.map((item: any) => ({\n    date: new Date(item.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' }),\n    position: parseFloat(item.avg_position),\n    appearances: parseInt(item.appearances),\n    selections: parseInt(item.selections),\n  }));\n\n  return (\n    <Box>\n      {/* Summary Cards */}\n      <Grid container spacing={3} sx={{ mb: 3 }}>\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>\n                <LocalShipping sx={{ mr: 1, color: 'primary.main' }} />\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  Avg Position\n                </Typography>\n              </Box>\n              <Typography variant=\"h4\">\n                #{summary?.avg_position || 0}\n              </Typography>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Out of {summary?.total_appearances || 0} appearances\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>\n                <TrendingUp sx={{ mr: 1, color: 'success.main' }} />\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  Selection Rate\n                </Typography>\n              </Box>\n              <Typography variant=\"h4\">\n                {summary?.selection_rate || 0}%\n              </Typography>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                {summary?.times_selected || 0} times selected\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>\n                <AttachMoney sx={{ mr: 1, color: 'warning.main' }} />\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  Avg Order Value\n                </Typography>\n              </Box>\n              <Typography variant=\"h4\">\n                ${summary?.avg_order_value?.toFixed(2) || '0.00'}\n              </Typography>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Per order\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>\n                <Scale sx={{ mr: 1, color: 'info.main' }} />\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  Avg Package Weight\n                </Typography>\n              </Box>\n              <Typography variant=\"h4\">\n                {summary?.avg_package_weight?.toFixed(1) || '0.0'} kg\n              </Typography>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Per package\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n\n      {/* Charts Row */}\n      <Grid container spacing={3} sx={{ mb: 3 }}>\n        {/* Position Distribution */}\n        <Grid item xs={12} md={6}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Position Distribution\n              </Typography>\n              <ResponsiveContainer width=\"100%\" height={300}>\n                <PieChart>\n                  <Pie\n                    data={positionData}\n                    cx=\"50%\"\n                    cy=\"50%\"\n                    labelLine={false}\n                    label={(entry) => `${entry.name}: ${entry.value}%`}\n                    outerRadius={80}\n                    fill=\"#8884d8\"\n                    dataKey=\"value\"\n                  >\n                    {positionData.map((_entry: any, index: number) => (\n                      <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\n                    ))}\n                  </Pie>\n                  <Tooltip />\n                </PieChart>\n              </ResponsiveContainer>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        {/* Trend Chart */}\n        <Grid item xs={12} md={6}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Position Trend (Last 7 Days)\n              </Typography>\n              <ResponsiveContainer width=\"100%\" height={300}>\n                <LineChart data={trendData}>\n                  <CartesianGrid strokeDasharray=\"3 3\" />\n                  <XAxis dataKey=\"date\" />\n                  <YAxis yAxisId=\"left\" />\n                  <YAxis yAxisId=\"right\" orientation=\"right\" />\n                  <Tooltip />\n                  <Legend />\n                  <Line\n                    yAxisId=\"left\"\n                    type=\"monotone\"\n                    dataKey=\"position\"\n                    stroke=\"#8884d8\"\n                    name=\"Avg Position\"\n                  />\n                  <Line\n                    yAxisId=\"right\"\n                    type=\"monotone\"\n                    dataKey=\"selections\"\n                    stroke=\"#82ca9d\"\n                    name=\"Selections\"\n                  />\n                </LineChart>\n              </ResponsiveContainer>\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n\n      {/* Top Merchants Table */}\n      <Card>\n        <CardContent>\n          <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n            <Typography variant=\"h6\">\n              Top Merchants by Performance\n            </Typography>\n            {subscription?.isLimited && (\n              <Chip\n                label={`Showing ${subscription.maxMerchants} of ${subscription.maxMerchants + subscription.hiddenMerchants}`}\n                color=\"warning\"\n                size=\"small\"\n                icon={<Lock />}\n              />\n            )}\n          </Box>\n\n          <TableContainer>\n            <Table>\n              <TableHead>\n                <TableRow>\n                  <TableCell>Merchant</TableCell>\n                  <TableCell align=\"center\">Avg Position</TableCell>\n                  <TableCell align=\"center\">Appearances</TableCell>\n                  <TableCell align=\"center\">Selections</TableCell>\n                  <TableCell align=\"center\">Selection Rate</TableCell>\n                  <TableCell align=\"center\">Avg Order Value</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {topMerchants?.map((merchant: any, index: number) => (\n                  <TableRow key={index}>\n                    <TableCell>\n                      <Box>\n                        <Typography variant=\"body2\" fontWeight=\"bold\">\n                          {merchant.merchant_name || 'Unknown'}\n                        </Typography>\n                        {merchant.store_name && (\n                          <Typography variant=\"caption\" color=\"text.secondary\">\n                            {merchant.store_name}\n                          </Typography>\n                        )}\n                      </Box>\n                    </TableCell>\n                    <TableCell align=\"center\">\n                      <Chip\n                        label={`#${merchant.avg_position}`}\n                        size=\"small\"\n                        color={parseFloat(merchant.avg_position) <= 2 ? 'success' : 'default'}\n                      />\n                    </TableCell>\n                    <TableCell align=\"center\">{merchant.appearances}</TableCell>\n                    <TableCell align=\"center\">{merchant.selections}</TableCell>\n                    <TableCell align=\"center\">\n                      <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                        <LinearProgress\n                          variant=\"determinate\"\n                          value={parseFloat(merchant.selection_rate)}\n                          sx={{ flexGrow: 1, height: 8, borderRadius: 4 }}\n                        />\n                        <Typography variant=\"caption\">\n                          {merchant.selection_rate}%\n                        </Typography>\n                      </Box>\n                    </TableCell>\n                    <TableCell align=\"center\">\n                      ${parseFloat(merchant.avg_order_value || 0).toFixed(2)}\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </TableContainer>\n\n          {subscription?.isLimited && (\n            <Alert severity=\"info\" sx={{ mt: 2 }}>\n              {subscription.upgradeMessage} - <Button size=\"small\">Upgrade Now</Button>\n            </Alert>\n          )}\n        </CardContent>\n      </Card>\n    </Box>\n  );\n};\n\n// =====================================================\n// Market Insights Tab Component\n// =====================================================\n\nconst MarketInsightsTab: React.FC<{ data: any }> = ({ data }) => {\n  const { merchantSegments, geographicOpportunities, industryTrends, marketBenchmarks } = data;\n\n  return (\n    <Box>\n      <Alert severity=\"success\" sx={{ mb: 3 }}>\n         <strong>Anonymized Market Data</strong> - All merchant identities are protected. Data shows market trends and opportunities.\n      </Alert>\n\n      {/* Market Benchmarks */}\n      <Grid container spacing={3} sx={{ mb: 3 }}>\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\n                Market Avg Position\n              </Typography>\n              <Typography variant=\"h4\">\n                #{marketBenchmarks?.market_avg_position || 'N/A'}\n              </Typography>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Top 25%: #{marketBenchmarks?.top_25_position || 'N/A'}\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\n                Market Avg Selection Rate\n              </Typography>\n              <Typography variant=\"h4\">\n                {marketBenchmarks?.market_avg_selection_rate || 0}%\n              </Typography>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Top 25%: {marketBenchmarks?.top_25_selection_rate || 0}%\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n\n      {/* Merchant Segments */}\n      <Card sx={{ mb: 3 }}>\n        <CardContent>\n          <Typography variant=\"h6\" gutterBottom>\n             Merchant Segments by Order Value\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n            Discover which merchant segments offer the best opportunities\n          </Typography>\n          <TableContainer>\n            <Table>\n              <TableHead>\n                <TableRow>\n                  <TableCell>Segment</TableCell>\n                  <TableCell align=\"right\">Merchants</TableCell>\n                  <TableCell align=\"right\">Avg Order Value</TableCell>\n                  <TableCell align=\"right\">Selection Rate</TableCell>\n                  <TableCell align=\"right\">Total Checkouts</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {merchantSegments?.map((segment: any, index: number) => (\n                  <TableRow key={index}>\n                    <TableCell>\n                      <Chip label={segment.segment} color=\"primary\" size=\"small\" />\n                    </TableCell>\n                    <TableCell align=\"right\">{segment.merchant_count}</TableCell>\n                    <TableCell align=\"right\">${segment.avg_order_value}</TableCell>\n                    <TableCell align=\"right\">\n                      <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'flex-end', gap: 1 }}>\n                        {segment.avg_selection_rate}%\n                        <LinearProgress \n                          variant=\"determinate\" \n                          value={parseFloat(segment.avg_selection_rate)} \n                          sx={{ width: 60, height: 6, borderRadius: 3 }}\n                        />\n                      </Box>\n                    </TableCell>\n                    <TableCell align=\"right\">{segment.total_checkouts}</TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </TableContainer>\n        </CardContent>\n      </Card>\n\n      {/* Geographic Opportunities */}\n      <Card sx={{ mb: 3 }}>\n        <CardContent>\n          <Typography variant=\"h6\" gutterBottom>\n             Geographic Opportunities\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n            Top locations with active merchant demand\n          </Typography>\n          <TableContainer>\n            <Table>\n              <TableHead>\n                <TableRow>\n                  <TableCell>Location</TableCell>\n                  <TableCell align=\"right\">Merchants</TableCell>\n                  <TableCell align=\"right\">Checkouts</TableCell>\n                  <TableCell align=\"right\">Avg Order Value</TableCell>\n                  <TableCell align=\"right\">Selection Rate</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {geographicOpportunities?.slice(0, 10).map((location: any, index: number) => (\n                  <TableRow key={index}>\n                    <TableCell>\n                      <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                        <LocationOn fontSize=\"small\" color=\"action\" />\n                        {location.delivery_city}, {location.delivery_country}\n                      </Box>\n                    </TableCell>\n                    <TableCell align=\"right\">{location.merchant_count}</TableCell>\n                    <TableCell align=\"right\">{location.total_checkouts}</TableCell>\n                    <TableCell align=\"right\">${location.avg_order_value}</TableCell>\n                    <TableCell align=\"right\">{location.selection_rate}%</TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </TableContainer>\n        </CardContent>\n      </Card>\n\n      {/* Industry Trends */}\n      {industryTrends && industryTrends.length > 0 && (\n        <Card>\n          <CardContent>\n            <Typography variant=\"h6\" gutterBottom>\n               Industry Trends\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n              Merchant types based on order patterns\n            </Typography>\n            <TableContainer>\n              <Table>\n                <TableHead>\n                  <TableRow>\n                    <TableCell>Industry Type</TableCell>\n                    <TableCell align=\"right\">Merchants</TableCell>\n                    <TableCell align=\"right\">Avg Order Value</TableCell>\n                    <TableCell align=\"right\">Avg Items/Order</TableCell>\n                    <TableCell align=\"right\">Avg Weight (kg)</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {industryTrends.map((trend: any, index: number) => (\n                    <TableRow key={index}>\n                      <TableCell>\n                        <Chip label={trend.industry_type} size=\"small\" />\n                      </TableCell>\n                      <TableCell align=\"right\">{trend.merchant_count}</TableCell>\n                      <TableCell align=\"right\">${trend.avg_order_value}</TableCell>\n                      <TableCell align=\"right\">{trend.avg_items_per_order}</TableCell>\n                      <TableCell align=\"right\">{trend.avg_package_weight || 'N/A'}</TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </TableContainer>\n          </CardContent>\n        </Card>\n      )}\n    </Box>\n  );\n};\n\n// =====================================================\n// Premium Gate Component\n// =====================================================\n\nconst PremiumGate: React.FC<{ error: any }> = ({ error }) => {\n  const premiumInfo = error?.response?.data?.premium;\n\n  return (\n    <Card sx={{ maxWidth: 600, mx: 'auto', mt: 4 }}>\n      <CardContent sx={{ textAlign: 'center', p: 4 }}>\n        <Lock sx={{ fontSize: 64, color: 'warning.main', mb: 2 }} />\n        \n        <Typography variant=\"h5\" gutterBottom>\n           Market Insights Premium\n        </Typography>\n        \n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n          Unlock anonymized market data to discover opportunities and benchmark your performance\n        </Typography>\n\n        {premiumInfo?.benefits && (\n          <Box sx={{ textAlign: 'left', mb: 3 }}>\n            <Typography variant=\"subtitle2\" gutterBottom>\n              What's included:\n            </Typography>\n            {premiumInfo.benefits.map((benefit: string, index: number) => (\n              <Box key={index} sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1 }}>\n                <TrendingUp sx={{ fontSize: 16, color: 'success.main' }} />\n                <Typography variant=\"body2\">{benefit}</Typography>\n              </Box>\n            ))}\n          </Box>\n        )}\n\n        <Box sx={{ mb: 3 }}>\n          <Typography variant=\"h3\" color=\"primary\">\n            ${premiumInfo?.price || 29}\n            <Typography component=\"span\" variant=\"body2\" color=\"text.secondary\">\n              /{premiumInfo?.billing || 'month'}\n            </Typography>\n          </Typography>\n        </Box>\n\n        <Button\n          variant=\"contained\"\n          size=\"large\"\n          startIcon={<Upgrade />}\n          fullWidth\n        >\n          Upgrade to Premium\n        </Button>\n\n        <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mt: 2, display: 'block' }}>\n          Cancel anytime. No long-term commitment.\n        </Typography>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default CourierCheckoutAnalytics;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\courier\\CourierDirectory.tsx","messages":[{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useQuery\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":53,"column":45,"nodeType":"Identifier","endLine":53,"endColumn":53},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":64,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":64,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1727,1730],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1727,1730],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":215,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":215,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7080,7083],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7080,7083],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Grid,\n  Avatar,\n  Chip,\n  Rating,\n  LinearProgress,\n  TextField,\n  InputAdornment,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n} from '@mui/material';\nimport {\n  Search as SearchIcon,\n  Star as StarIcon,\n  TrendingUp as TrendingUpIcon,\n  LocalShipping as CourierIcon,\n} from '@mui/icons-material';\nimport { CourierLogo } from '@/components/courier/CourierLogo';\nimport { useQuery } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport { useAuthStore } from '@/store/authStore';\nimport { ManageCouriers } from '@/pages/admin/ManageCouriers';\n\ninterface AnonymousCourier {\n  courier_id: string;\n  trust_score: number;\n  avg_rating: number;\n  total_deliveries: number;\n  successful_deliveries: number;\n  total_reviews: number;\n  location_area: string; // e.g., \"North District\", \"City Center\"\n  subscription_tier: string;\n}\n\nexport const CourierDirectory: React.FC = () => {\n  const { user } = useAuthStore();\n  const [searchTerm, setSearchTerm] = useState('');\n  const [sortBy, setSortBy] = useState<'trust_score' | 'rating' | 'deliveries'>('trust_score');\n\n  // If admin, show full management page\n  if (user?.user_role === 'admin') {\n    return <ManageCouriers />;\n  }\n\n  // Fetch anonymized courier data\n  const { data: couriersData, isLoading } = useQuery({\n    queryKey: ['courier-directory', sortBy],\n    queryFn: async () => {\n      const response = await apiClient.get('/couriers/directory', {\n        params: { sort: sortBy }\n      });\n      return response.data;\n    }\n  });\n\n  const couriers: AnonymousCourier[] = Array.isArray(couriersData?.data) \n    ? couriersData.data.map((c: any) => ({\n        ...c,\n        trust_score: Number(c.trust_score) || 0,\n        avg_rating: Number(c.avg_rating) || 0,\n        total_deliveries: Number(c.total_deliveries) || 0,\n        successful_deliveries: Number(c.successful_deliveries) || 0,\n        total_reviews: Number(c.total_reviews) || 0\n      }))\n    : [];\n\n  const filteredCouriers = couriers.filter(courier =>\n    courier.location_area.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const getTrustScoreColor = (score: number) => {\n    if (score >= 90) return 'success';\n    if (score >= 70) return 'primary';\n    if (score >= 50) return 'warning';\n    return 'error';\n  };\n\n  const getSuccessRate = (courier: AnonymousCourier) => {\n    if (courier.total_deliveries === 0) return 0;\n    return Math.round((courier.successful_deliveries / courier.total_deliveries) * 100);\n  };\n\n  return (\n    <Box sx={{ p: 3 }}>\n      {/* Header */}\n      <Box sx={{ mb: 3 }}>\n        <Typography variant=\"h4\" gutterBottom>\n          Courier Performance Directory\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\">\n          Compare your performance with other couriers in your area (anonymized data)\n        </Typography>\n      </Box>\n\n      {/* Stats Overview */}\n      <Grid container spacing={3} sx={{ mb: 3 }}>\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n                <Box>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    Total Couriers\n                  </Typography>\n                  <Typography variant=\"h4\">\n                    {couriers.length}\n                  </Typography>\n                </Box>\n                <Avatar sx={{ bgcolor: 'primary.main' }}>\n                  <CourierIcon />\n                </Avatar>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n                <Box>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    Avg Trust Score\n                  </Typography>\n                  <Typography variant=\"h4\">\n                    {couriers.length > 0 \n                      ? (couriers.reduce((sum, c) => sum + c.trust_score, 0) / couriers.length).toFixed(1)\n                      : '0.0'}\n                  </Typography>\n                </Box>\n                <Avatar sx={{ bgcolor: 'info.main' }}>\n                  <StarIcon />\n                </Avatar>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n                <Box>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    Avg Rating\n                  </Typography>\n                  <Typography variant=\"h4\">\n                    {couriers.length > 0 \n                      ? (couriers.reduce((sum, c) => sum + c.avg_rating, 0) / couriers.length).toFixed(1)\n                      : '0.0'}\n                  </Typography>\n                </Box>\n                <Avatar sx={{ bgcolor: 'warning.main' }}>\n                  <StarIcon />\n                </Avatar>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n                <Box>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    Total Deliveries\n                  </Typography>\n                  <Typography variant=\"h4\">\n                    {couriers.reduce((sum, c) => sum + c.total_deliveries, 0).toLocaleString()}\n                  </Typography>\n                </Box>\n                <Avatar sx={{ bgcolor: 'success.main' }}>\n                  <TrendingUpIcon />\n                </Avatar>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n\n      {/* Filters */}\n      <Card sx={{ mb: 3 }}>\n        <CardContent>\n          <Grid container spacing={2} alignItems=\"center\">\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                size=\"small\"\n                placeholder=\"Search by location area...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                InputProps={{\n                  startAdornment: (\n                    <InputAdornment position=\"start\">\n                      <SearchIcon />\n                    </InputAdornment>\n                  ),\n                }}\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <FormControl fullWidth size=\"small\">\n                <InputLabel>Sort By</InputLabel>\n                <Select\n                  value={sortBy}\n                  label=\"Sort By\"\n                  onChange={(e) => setSortBy(e.target.value as any)}\n                >\n                  <MenuItem value=\"trust_score\">Trust Score</MenuItem>\n                  <MenuItem value=\"rating\">Average Rating</MenuItem>\n                  <MenuItem value=\"deliveries\">Total Deliveries</MenuItem>\n                </Select>\n              </FormControl>\n            </Grid>\n          </Grid>\n        </CardContent>\n      </Card>\n\n      {/* Courier Cards */}\n      <Grid container spacing={3}>\n        {isLoading ? (\n          <Grid item xs={12}>\n            <Card>\n              <CardContent>\n                <Typography align=\"center\">Loading couriers...</Typography>\n              </CardContent>\n            </Card>\n          </Grid>\n        ) : filteredCouriers.length === 0 ? (\n          <Grid item xs={12}>\n            <Card>\n              <CardContent>\n                <Typography align=\"center\" color=\"text.secondary\">\n                  No couriers found\n                </Typography>\n              </CardContent>\n            </Card>\n          </Grid>\n        ) : (\n          filteredCouriers.map((courier, index) => (\n            <Grid item xs={12} sm={6} md={4} key={courier.courier_id}>\n              <Card>\n                <CardContent>\n                  <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\n                    <Box sx={{ position: 'relative', mr: 2 }}>\n                      <CourierLogo\n                        courierCode={courier.courier_code || `Courier-${index + 1}`}\n                        courierName={`Courier #${courier.courier_id.substring(0, 8)}`}\n                        size=\"large\"\n                        variant=\"rounded\"\n                      />\n                      <Box\n                        sx={{\n                          position: 'absolute',\n                          top: -8,\n                          right: -8,\n                          width: 24,\n                          height: 24,\n                          borderRadius: '50%',\n                          bgcolor: 'primary.main',\n                          color: 'white',\n                          display: 'flex',\n                          alignItems: 'center',\n                          justifyContent: 'center',\n                          fontSize: '0.75rem',\n                          fontWeight: 'bold',\n                          border: '2px solid white',\n                        }}\n                      >\n                        #{index + 1}\n                      </Box>\n                    </Box>\n                    <Box sx={{ flexGrow: 1 }}>\n                      <Typography variant=\"h6\">\n                        Courier #{courier.courier_id.substring(0, 8)}\n                      </Typography>\n                      <Typography variant=\"caption\" color=\"text.secondary\">\n                        {courier.location_area}\n                      </Typography>\n                    </Box>\n                    <Chip\n                      label={Number(courier.trust_score || 0).toFixed(1)}\n                      color={getTrustScoreColor(Number(courier.trust_score || 0))}\n                      size=\"small\"\n                      icon={<StarIcon />}\n                    />\n                  </Box>\n\n                  <Box sx={{ mb: 2 }}>\n                    <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 0.5 }}>\n                      <Typography variant=\"body2\">Rating</Typography>\n                      <Typography variant=\"body2\" fontWeight=\"medium\">\n                        {Number(courier.avg_rating || 0).toFixed(1)} / 5.0\n                      </Typography>\n                    </Box>\n                    <Rating value={courier.avg_rating} readOnly size=\"small\" precision={0.1} />\n                    <Typography variant=\"caption\" color=\"text.secondary\">\n                      ({courier.total_reviews} reviews)\n                    </Typography>\n                  </Box>\n\n                  <Box sx={{ mb: 2 }}>\n                    <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 0.5 }}>\n                      <Typography variant=\"body2\">Success Rate</Typography>\n                      <Typography variant=\"body2\" fontWeight=\"medium\">\n                        {getSuccessRate(courier)}%\n                      </Typography>\n                    </Box>\n                    <LinearProgress\n                      variant=\"determinate\"\n                      value={getSuccessRate(courier)}\n                      color={getSuccessRate(courier) >= 90 ? 'success' : 'primary'}\n                    />\n                  </Box>\n\n                  <Box sx={{ display: 'flex', justifyContent: 'space-between' }}>\n                    <Box>\n                      <Typography variant=\"caption\" color=\"text.secondary\">\n                        Deliveries\n                      </Typography>\n                      <Typography variant=\"body2\" fontWeight=\"medium\">\n                        {courier.total_deliveries}\n                      </Typography>\n                    </Box>\n                    <Box>\n                      <Typography variant=\"caption\" color=\"text.secondary\">\n                        Tier\n                      </Typography>\n                      <Typography variant=\"body2\" fontWeight=\"medium\">\n                        {courier.subscription_tier}\n                      </Typography>\n                    </Box>\n                  </Box>\n                </CardContent>\n              </Card>\n            </Grid>\n          ))\n        )}\n      </Grid>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\integrations\\ApiKeysManagement.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FormControl' is defined but never used.","line":34,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'InputLabel' is defined but never used.","line":35,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Select' is defined but never used.","line":36,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MenuItem' is defined but never used.","line":37,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":37,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Info' is defined but never used.","line":53,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":53,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'user' is assigned a value but never used.","line":107,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":107,"endColumn":15},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":145,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":145,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3309,3312],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3309,3312],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":159,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":159,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3770,3773],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3770,3773],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":176,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":176,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4371,4374],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4371,4374],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":575,"column":73,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[18896,18967],"text":" Copy this API key now. You won&apos;t be able to see it again!\n            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[18896,18967],"text":" Copy this API key now. You won&lsquo;t be able to see it again!\n            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[18896,18967],"text":" Copy this API key now. You won&#39;t be able to see it again!\n            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[18896,18967],"text":" Copy this API key now. You won&rsquo;t be able to see it again!\n            "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":596,"column":14,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[19646,19691],"text":"\n            I&apos;ve Saved My API Key\n          "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[19646,19691],"text":"\n            I&lsquo;ve Saved My API Key\n          "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[19646,19691],"text":"\n            I&#39;ve Saved My API Key\n          "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[19646,19691],"text":"\n            I&rsquo;ve Saved My API Key\n          "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ApiKeysManagement Component\n * Manage API keys for external access to Performile platform\n * \n * Week 3 Phase 3: Frontend UI\n * Created: October 19, 2025\n */\n\nimport React, { useState } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Button,\n  Grid,\n  TextField,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  IconButton,\n  Chip,\n  Alert,\n  CircularProgress,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Paper,\n  Tooltip,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Stack,\n  Checkbox,\n  FormControlLabel,\n  FormGroup,\n  Divider,\n  Link,\n} from '@mui/material';\nimport {\n  Add,\n  Delete,\n  ContentCopy,\n  Refresh,\n  Visibility,\n  VisibilityOff,\n  Code,\n  Info,\n  Warning as WarningIcon,\n} from '@mui/icons-material';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport { useAuthStore } from '@/store/authStore';\nimport toast from 'react-hot-toast';\n\ninterface ApiKey {\n  api_key_id: string;\n  user_id: string;\n  shop_id?: string;\n  key_name: string;\n  api_key: string;\n  api_key_prefix: string;\n  permissions: Record<string, string[]>;\n  rate_limit_per_hour: number;\n  is_active: boolean;\n  last_used_at?: string;\n  total_requests: number;\n  expires_at?: string;\n  created_at: string;\n  updated_at: string;\n}\n\nconst AVAILABLE_PERMISSIONS = [\n  {\n    resource: 'orders',\n    actions: ['read', 'write', 'delete'],\n    description: 'Access to order management',\n  },\n  {\n    resource: 'tracking',\n    actions: ['read', 'write'],\n    description: 'Access to tracking information',\n  },\n  {\n    resource: 'reviews',\n    actions: ['read', 'write'],\n    description: 'Access to reviews and ratings',\n  },\n  {\n    resource: 'claims',\n    actions: ['read', 'write'],\n    description: 'Access to claims management',\n  },\n  {\n    resource: 'analytics',\n    actions: ['read'],\n    description: 'Access to analytics data',\n  },\n];\n\nexport const ApiKeysManagement: React.FC = () => {\n  const { user } = useAuthStore();\n  const queryClient = useQueryClient();\n  \n  const [addDialogOpen, setAddDialogOpen] = useState(false);\n  const [keyDisplayDialog, setKeyDisplayDialog] = useState(false);\n  const [newApiKey, setNewApiKey] = useState('');\n  const [showKeys, setShowKeys] = useState<Record<string, boolean>>({});\n  \n  // Form state\n  const [formData, setFormData] = useState({\n    key_name: '',\n    permissions: {} as Record<string, string[]>,\n    rate_limit_per_hour: 1000,\n    expires_in_days: 365,\n  });\n\n  // Fetch API keys\n  const { data: apiKeys, isLoading } = useQuery({\n    queryKey: ['api-keys'],\n    queryFn: async () => {\n      const response = await apiClient.get('/week3-integrations/api-keys');\n      return response.data.data as ApiKey[];\n    },\n  });\n\n  // Generate API key mutation\n  const generateKeyMutation = useMutation({\n    mutationFn: async (data: typeof formData) => {\n      const response = await apiClient.post('/week3-integrations/api-keys', data);\n      return response.data;\n    },\n    onSuccess: (data) => {\n      queryClient.invalidateQueries({ queryKey: ['api-keys'] });\n      setNewApiKey(data.data.api_key);\n      setKeyDisplayDialog(true);\n      setAddDialogOpen(false);\n      resetForm();\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || 'Failed to generate API key');\n    },\n  });\n\n  // Revoke API key mutation\n  const revokeKeyMutation = useMutation({\n    mutationFn: async (id: string) => {\n      await apiClient.delete(`/week3-integrations/api-keys/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['api-keys'] });\n      toast.success('API key revoked successfully');\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || 'Failed to revoke API key');\n    },\n  });\n\n  // Regenerate API key mutation\n  const regenerateKeyMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const response = await apiClient.post(`/week3-integrations/api-keys/${id}/regenerate`);\n      return response.data;\n    },\n    onSuccess: (data) => {\n      queryClient.invalidateQueries({ queryKey: ['api-keys'] });\n      setNewApiKey(data.data.api_key);\n      setKeyDisplayDialog(true);\n      toast.success('API key regenerated successfully');\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || 'Failed to regenerate API key');\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({\n      key_name: '',\n      permissions: {},\n      rate_limit_per_hour: 1000,\n      expires_in_days: 365,\n    });\n  };\n\n  const handleAdd = () => {\n    setAddDialogOpen(true);\n    resetForm();\n  };\n\n  const handleRevoke = (id: string) => {\n    if (window.confirm('Are you sure you want to revoke this API key? This action cannot be undone.')) {\n      revokeKeyMutation.mutate(id);\n    }\n  };\n\n  const handleRegenerate = (id: string) => {\n    if (window.confirm('Are you sure you want to regenerate this API key? The old key will stop working immediately.')) {\n      regenerateKeyMutation.mutate(id);\n    }\n  };\n\n  const handleCopyKey = (key: string) => {\n    navigator.clipboard.writeText(key);\n    toast.success('API key copied to clipboard');\n  };\n\n  const togglePermission = (resource: string, action: string) => {\n    setFormData(prev => {\n      const currentPermissions = prev.permissions[resource] || [];\n      const newPermissions = currentPermissions.includes(action)\n        ? currentPermissions.filter(a => a !== action)\n        : [...currentPermissions, action];\n      \n      return {\n        ...prev,\n        permissions: {\n          ...prev.permissions,\n          [resource]: newPermissions,\n        },\n      };\n    });\n  };\n\n  const toggleShowKey = (keyId: string) => {\n    setShowKeys(prev => ({\n      ...prev,\n      [keyId]: !prev[keyId],\n    }));\n  };\n\n  const getStatusColor = (apiKey: ApiKey): 'success' | 'error' | 'warning' | 'default' => {\n    if (!apiKey.is_active) return 'default';\n    if (apiKey.expires_at && new Date(apiKey.expires_at) < new Date()) return 'error';\n    if (apiKey.expires_at) {\n      const daysUntilExpiry = Math.floor((new Date(apiKey.expires_at).getTime() - new Date().getTime()) / (1000 * 60 * 60 * 24));\n      if (daysUntilExpiry < 7) return 'warning';\n    }\n    return 'success';\n  };\n\n  if (isLoading) {\n    return (\n      <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: 400 }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  return (\n    <Box>\n      {/* Header */}\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n        <Box>\n          <Typography variant=\"h4\" gutterBottom>\n            API Keys\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            Manage API keys for external access to your Performile data\n          </Typography>\n        </Box>\n        <Stack direction=\"row\" spacing={2}>\n          <Button\n            variant=\"outlined\"\n            startIcon={<Code />}\n            component={Link}\n            href=\"/docs/api\"\n            target=\"_blank\"\n          >\n            API Documentation\n          </Button>\n          <Button\n            variant=\"contained\"\n            startIcon={<Add />}\n            onClick={handleAdd}\n          >\n            Generate API Key\n          </Button>\n        </Stack>\n      </Box>\n\n      {/* Info Alert */}\n      <Alert severity=\"info\" sx={{ mb: 3 }}>\n        <Typography variant=\"body2\">\n          API keys allow external applications to access your Performile data securely.\n          Keep your API keys secret and never share them publicly. You can revoke or regenerate keys at any time.\n        </Typography>\n      </Alert>\n\n      {/* API Keys List */}\n      {apiKeys && apiKeys.length > 0 ? (\n        <TableContainer component={Paper}>\n          <Table>\n            <TableHead>\n              <TableRow>\n                <TableCell>Name</TableCell>\n                <TableCell>API Key</TableCell>\n                <TableCell>Permissions</TableCell>\n                <TableCell>Usage</TableCell>\n                <TableCell>Rate Limit</TableCell>\n                <TableCell>Expires</TableCell>\n                <TableCell>Status</TableCell>\n                <TableCell align=\"right\">Actions</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {apiKeys.map((apiKey) => (\n                <TableRow key={apiKey.api_key_id} hover>\n                  <TableCell>\n                    <Box>\n                      <Typography variant=\"body2\" fontWeight=\"medium\">\n                        {apiKey.key_name}\n                      </Typography>\n                      <Typography variant=\"caption\" color=\"text.secondary\">\n                        Created {new Date(apiKey.created_at).toLocaleDateString()}\n                      </Typography>\n                    </Box>\n                  </TableCell>\n                  <TableCell>\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                      <Typography variant=\"body2\" fontFamily=\"monospace\">\n                        {showKeys[apiKey.api_key_id]\n                          ? apiKey.api_key\n                          : `${apiKey.api_key_prefix}${'*'.repeat(32)}`}\n                      </Typography>\n                      <Tooltip title={showKeys[apiKey.api_key_id] ? 'Hide' : 'Show'}>\n                        <IconButton\n                          size=\"small\"\n                          onClick={() => toggleShowKey(apiKey.api_key_id)}\n                        >\n                          {showKeys[apiKey.api_key_id] ? <VisibilityOff /> : <Visibility />}\n                        </IconButton>\n                      </Tooltip>\n                      <Tooltip title=\"Copy\">\n                        <IconButton\n                          size=\"small\"\n                          onClick={() => handleCopyKey(apiKey.api_key)}\n                        >\n                          <ContentCopy />\n                        </IconButton>\n                      </Tooltip>\n                    </Box>\n                  </TableCell>\n                  <TableCell>\n                    <Stack direction=\"row\" spacing={0.5} flexWrap=\"wrap\">\n                      {Object.entries(apiKey.permissions).slice(0, 2).map(([resource, actions]) => (\n                        <Chip\n                          key={resource}\n                          label={`${resource}: ${(actions as string[]).join(', ')}`}\n                          size=\"small\"\n                        />\n                      ))}\n                      {Object.keys(apiKey.permissions).length > 2 && (\n                        <Chip\n                          label={`+${Object.keys(apiKey.permissions).length - 2} more`}\n                          size=\"small\"\n                          variant=\"outlined\"\n                        />\n                      )}\n                    </Stack>\n                  </TableCell>\n                  <TableCell>\n                    <Box>\n                      <Typography variant=\"body2\">\n                        {apiKey.total_requests} requests\n                      </Typography>\n                      {apiKey.last_used_at && (\n                        <Typography variant=\"caption\" color=\"text.secondary\">\n                          Last used {new Date(apiKey.last_used_at).toLocaleDateString()}\n                        </Typography>\n                      )}\n                    </Box>\n                  </TableCell>\n                  <TableCell>\n                    <Typography variant=\"body2\">\n                      {apiKey.rate_limit_per_hour}/hour\n                    </Typography>\n                  </TableCell>\n                  <TableCell>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      {apiKey.expires_at\n                        ? new Date(apiKey.expires_at).toLocaleDateString()\n                        : 'Never'}\n                    </Typography>\n                  </TableCell>\n                  <TableCell>\n                    <Chip\n                      label={apiKey.is_active ? 'Active' : 'Inactive'}\n                      color={getStatusColor(apiKey)}\n                      size=\"small\"\n                    />\n                  </TableCell>\n                  <TableCell align=\"right\">\n                    <Stack direction=\"row\" spacing={1} justifyContent=\"flex-end\">\n                      <Tooltip title=\"Regenerate\">\n                        <IconButton\n                          size=\"small\"\n                          onClick={() => handleRegenerate(apiKey.api_key_id)}\n                          disabled={regenerateKeyMutation.isPending}\n                        >\n                          <Refresh />\n                        </IconButton>\n                      </Tooltip>\n                      <Tooltip title=\"Revoke\">\n                        <IconButton\n                          size=\"small\"\n                          color=\"error\"\n                          onClick={() => handleRevoke(apiKey.api_key_id)}\n                        >\n                          <Delete />\n                        </IconButton>\n                      </Tooltip>\n                    </Stack>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </TableContainer>\n      ) : (\n        <Card>\n          <CardContent>\n            <Box sx={{ textAlign: 'center', py: 6 }}>\n              <Typography variant=\"h6\" color=\"text.secondary\" gutterBottom>\n                No API keys generated\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n                Generate your first API key to start using the Performile API\n              </Typography>\n              <Button\n                variant=\"contained\"\n                startIcon={<Add />}\n                onClick={handleAdd}\n              >\n                Generate API Key\n              </Button>\n            </Box>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Generate API Key Dialog */}\n      <Dialog\n        open={addDialogOpen}\n        onClose={() => {\n          setAddDialogOpen(false);\n          resetForm();\n        }}\n        maxWidth=\"md\"\n        fullWidth\n      >\n        <DialogTitle>Generate API Key</DialogTitle>\n        <DialogContent>\n          <Box sx={{ pt: 2 }}>\n            <Grid container spacing={3}>\n              <Grid item xs={12}>\n                <TextField\n                  fullWidth\n                  label=\"Key Name\"\n                  value={formData.key_name}\n                  onChange={(e) => setFormData({ ...formData, key_name: e.target.value })}\n                  placeholder=\"Production API Key\"\n                  helperText=\"A descriptive name to identify this API key\"\n                />\n              </Grid>\n\n              <Grid item xs={12} md={6}>\n                <TextField\n                  fullWidth\n                  label=\"Rate Limit (per hour)\"\n                  type=\"number\"\n                  value={formData.rate_limit_per_hour}\n                  onChange={(e) => setFormData({ ...formData, rate_limit_per_hour: parseInt(e.target.value) })}\n                />\n              </Grid>\n\n              <Grid item xs={12} md={6}>\n                <TextField\n                  fullWidth\n                  label=\"Expires In (days)\"\n                  type=\"number\"\n                  value={formData.expires_in_days}\n                  onChange={(e) => setFormData({ ...formData, expires_in_days: parseInt(e.target.value) })}\n                  helperText=\"0 = never expires\"\n                />\n              </Grid>\n\n              <Grid item xs={12}>\n                <Divider>\n                  <Chip label=\"Permissions\" size=\"small\" />\n                </Divider>\n              </Grid>\n\n              <Grid item xs={12}>\n                <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\n                  Select which resources and actions this API key can access\n                </Typography>\n                <Grid container spacing={2}>\n                  {AVAILABLE_PERMISSIONS.map((perm) => (\n                    <Grid item xs={12} key={perm.resource}>\n                      <Card variant=\"outlined\">\n                        <CardContent>\n                          <Typography variant=\"body2\" fontWeight=\"medium\" gutterBottom>\n                            {perm.resource.charAt(0).toUpperCase() + perm.resource.slice(1)}\n                          </Typography>\n                          <Typography variant=\"caption\" color=\"text.secondary\" gutterBottom display=\"block\">\n                            {perm.description}\n                          </Typography>\n                          <FormGroup row>\n                            {perm.actions.map((action) => (\n                              <FormControlLabel\n                                key={action}\n                                control={\n                                  <Checkbox\n                                    checked={formData.permissions[perm.resource]?.includes(action) || false}\n                                    onChange={() => togglePermission(perm.resource, action)}\n                                  />\n                                }\n                                label={action}\n                              />\n                            ))}\n                          </FormGroup>\n                        </CardContent>\n                      </Card>\n                    </Grid>\n                  ))}\n                </Grid>\n              </Grid>\n            </Grid>\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={() => {\n              setAddDialogOpen(false);\n              resetForm();\n            }}\n          >\n            Cancel\n          </Button>\n          <Button\n            variant=\"contained\"\n            onClick={() => generateKeyMutation.mutate(formData)}\n            disabled={\n              !formData.key_name ||\n              Object.keys(formData.permissions).length === 0 ||\n              generateKeyMutation.isPending\n            }\n          >\n            Generate API Key\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* Display New API Key Dialog */}\n      <Dialog\n        open={keyDisplayDialog}\n        onClose={() => setKeyDisplayDialog(false)}\n        maxWidth=\"sm\"\n        fullWidth\n      >\n        <DialogTitle>\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n            <WarningIcon color=\"warning\" />\n            API Key Generated\n          </Box>\n        </DialogTitle>\n        <DialogContent>\n          <Alert severity=\"warning\" sx={{ mb: 3 }}>\n            <Typography variant=\"body2\">\n              <strong>Important:</strong> Copy this API key now. You won't be able to see it again!\n            </Typography>\n          </Alert>\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n            <TextField\n              fullWidth\n              value={newApiKey}\n              InputProps={{\n                readOnly: true,\n                sx: { fontFamily: 'monospace', fontSize: '0.875rem' },\n              }}\n            />\n            <Tooltip title=\"Copy\">\n              <IconButton onClick={() => handleCopyKey(newApiKey)}>\n                <ContentCopy />\n              </IconButton>\n            </Tooltip>\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={() => setKeyDisplayDialog(false)}>\n            I've Saved My API Key\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\integrations\\CourierIntegrationSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Refresh' is defined but never used.","line":52,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":52,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'IntegrationStatusBadge' is defined but never used.","line":58,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":58,"endColumn":32},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'user' is assigned a value but never used.","line":91,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":91,"endColumn":15},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":142,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":142,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3630,3633],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3630,3633],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":160,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":160,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4310,4313],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4310,4313],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":175,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":175,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4884,4887],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4884,4887],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":193,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":193,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5465,5468],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5465,5468],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * CourierIntegrationSettings Component\n * Manage courier API credentials and integrations\n * \n * Week 3 Phase 3: Frontend UI\n * Created: October 19, 2025\n */\n\nimport React, { useState } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Button,\n  Grid,\n  TextField,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  IconButton,\n  Chip,\n  Alert,\n  CircularProgress,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Paper,\n  Tooltip,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Stack,\n  Divider,\n} from '@mui/material';\nimport {\n  Add,\n  Edit,\n  Delete,\n  PlayArrow,\n  CheckCircle,\n  Error,\n  Warning,\n  Info,\n  Visibility,\n  VisibilityOff,\n  Refresh,\n} from '@mui/icons-material';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport { useAuthStore } from '@/store/authStore';\nimport { CourierLogo } from '@/components/courier/CourierLogo';\nimport { IntegrationStatusBadge } from '@/components/courier/IntegrationStatusBadge';\nimport toast from 'react-hot-toast';\n\ninterface CourierCredential {\n  credential_id: string;\n  courier_name: string;\n  courier_code?: string;\n  api_key?: string;\n  api_secret?: string;\n  client_id?: string;\n  client_secret?: string;\n  base_url?: string;\n  api_version?: string;\n  rate_limit_per_minute?: number;\n  is_active: boolean;\n  last_used?: string;\n  total_requests?: number;\n  failed_requests?: number;\n  created_at: string;\n  updated_at: string;\n}\n\ninterface AvailableCourier {\n  courier_id: string;\n  courier_name: string;\n  courier_code: string;\n  api_endpoint?: string;\n  service_types: string[];\n  coverage_countries: string[];\n  has_credentials: boolean;\n}\n\nexport const CourierIntegrationSettings: React.FC = () => {\n  const { user } = useAuthStore();\n  const queryClient = useQueryClient();\n  \n  const [addDialogOpen, setAddDialogOpen] = useState(false);\n  const [editDialogOpen, setEditDialogOpen] = useState(false);\n  const [selectedCredential, setSelectedCredential] = useState<CourierCredential | null>(null);\n  const [showSecrets, setShowSecrets] = useState<Record<string, boolean>>({});\n  \n  // Form state\n  const [formData, setFormData] = useState({\n    courier_name: '',\n    api_key: '',\n    api_secret: '',\n    client_id: '',\n    client_secret: '',\n    base_url: '',\n    api_version: '',\n    rate_limit_per_minute: 60,\n  });\n\n  // Fetch available couriers\n  const { data: availableCouriers, isLoading: loadingCouriers } = useQuery({\n    queryKey: ['available-couriers'],\n    queryFn: async () => {\n      const response = await apiClient.get('/couriers');\n      return response.data.data as AvailableCourier[];\n    },\n  });\n\n  // Fetch courier credentials\n  const { data: credentials, isLoading: loadingCredentials } = useQuery({\n    queryKey: ['courier-credentials'],\n    queryFn: async () => {\n      const response = await apiClient.get('/week3-integrations/courier-credentials');\n      return response.data.data as CourierCredential[];\n    },\n  });\n\n  // Add credential mutation\n  const addCredentialMutation = useMutation({\n    mutationFn: async (data: typeof formData) => {\n      const response = await apiClient.post('/week3-integrations/courier-credentials', data);\n      return response.data;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['courier-credentials'] });\n      queryClient.invalidateQueries({ queryKey: ['available-couriers'] });\n      toast.success('Courier credentials added successfully');\n      setAddDialogOpen(false);\n      resetForm();\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || 'Failed to add credentials');\n    },\n  });\n\n  // Update credential mutation\n  const updateCredentialMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: Partial<typeof formData> }) => {\n      const response = await apiClient.put(`/week3-integrations/courier-credentials/${id}`, data);\n      return response.data;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['courier-credentials'] });\n      toast.success('Credentials updated successfully');\n      setEditDialogOpen(false);\n      setSelectedCredential(null);\n      resetForm();\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || 'Failed to update credentials');\n    },\n  });\n\n  // Delete credential mutation\n  const deleteCredentialMutation = useMutation({\n    mutationFn: async (id: string) => {\n      await apiClient.delete(`/week3-integrations/courier-credentials/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['courier-credentials'] });\n      queryClient.invalidateQueries({ queryKey: ['available-couriers'] });\n      toast.success('Credentials deleted successfully');\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || 'Failed to delete credentials');\n    },\n  });\n\n  // Test connection mutation\n  const testConnectionMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const response = await apiClient.post(`/week3-integrations/courier-credentials/${id}/test`);\n      return response.data;\n    },\n    onSuccess: (data) => {\n      if (data.success) {\n        toast.success('Connection test successful!');\n      } else {\n        toast.error('Connection test failed: ' + data.message);\n      }\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || 'Connection test failed');\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({\n      courier_name: '',\n      api_key: '',\n      api_secret: '',\n      client_id: '',\n      client_secret: '',\n      base_url: '',\n      api_version: '',\n      rate_limit_per_minute: 60,\n    });\n  };\n\n  const handleAdd = () => {\n    setAddDialogOpen(true);\n    resetForm();\n  };\n\n  const handleEdit = (credential: CourierCredential) => {\n    setSelectedCredential(credential);\n    setFormData({\n      courier_name: credential.courier_name,\n      api_key: credential.api_key || '',\n      api_secret: credential.api_secret || '',\n      client_id: credential.client_id || '',\n      client_secret: credential.client_secret || '',\n      base_url: credential.base_url || '',\n      api_version: credential.api_version || '',\n      rate_limit_per_minute: credential.rate_limit_per_minute || 60,\n    });\n    setEditDialogOpen(true);\n  };\n\n  const handleDelete = (id: string) => {\n    if (window.confirm('Are you sure you want to delete these credentials?')) {\n      deleteCredentialMutation.mutate(id);\n    }\n  };\n\n  const handleTestConnection = (id: string) => {\n    testConnectionMutation.mutate(id);\n  };\n\n  const toggleShowSecret = (credentialId: string) => {\n    setShowSecrets(prev => ({\n      ...prev,\n      [credentialId]: !prev[credentialId],\n    }));\n  };\n\n  const getStatusColor = (credential: CourierCredential): 'success' | 'error' | 'warning' | 'default' => {\n    if (!credential.is_active) return 'default';\n    if (credential.failed_requests && credential.total_requests) {\n      const failureRate = credential.failed_requests / credential.total_requests;\n      if (failureRate > 0.1) return 'error';\n      if (failureRate > 0.05) return 'warning';\n    }\n    return 'success';\n  };\n\n  const getStatusIcon = (credential: CourierCredential) => {\n    const status = getStatusColor(credential);\n    switch (status) {\n      case 'success':\n        return <CheckCircle color=\"success\" />;\n      case 'error':\n        return <Error color=\"error\" />;\n      case 'warning':\n        return <Warning color=\"warning\" />;\n      default:\n        return <Info color=\"disabled\" />;\n    }\n  };\n\n  if (loadingCouriers || loadingCredentials) {\n    return (\n      <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: 400 }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  return (\n    <Box>\n      {/* Header */}\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n        <Box>\n          <Typography variant=\"h4\" gutterBottom>\n            Courier Integrations\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            Manage API credentials for courier integrations\n          </Typography>\n        </Box>\n        <Button\n          variant=\"contained\"\n          startIcon={<Add />}\n          onClick={handleAdd}\n        >\n          Add Credentials\n        </Button>\n      </Box>\n\n      {/* Info Alert */}\n      <Alert severity=\"info\" sx={{ mb: 3 }}>\n        <Typography variant=\"body2\">\n          Connect your courier accounts to enable automated tracking, shipping label generation, and real-time updates.\n          Your API credentials are encrypted and stored securely.\n        </Typography>\n      </Alert>\n\n      {/* Credentials List */}\n      {credentials && credentials.length > 0 ? (\n        <TableContainer component={Paper}>\n          <Table>\n            <TableHead>\n              <TableRow>\n                <TableCell>Courier</TableCell>\n                <TableCell>Status</TableCell>\n                <TableCell>API Usage</TableCell>\n                <TableCell>Rate Limit</TableCell>\n                <TableCell>Last Used</TableCell>\n                <TableCell align=\"right\">Actions</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {credentials.map((credential) => (\n                <TableRow key={credential.credential_id} hover>\n                  <TableCell>\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n                      <CourierLogo\n                        courierCode={credential.courier_code || credential.courier_name}\n                        courierName={credential.courier_name}\n                        size=\"medium\"\n                        variant=\"rounded\"\n                      />\n                      <Box>\n                        <Typography variant=\"body1\" fontWeight=\"medium\">\n                          {credential.courier_name}\n                        </Typography>\n                        {credential.api_version && (\n                          <Typography variant=\"caption\" color=\"text.secondary\">\n                            API v{credential.api_version}\n                          </Typography>\n                        )}\n                      </Box>\n                    </Box>\n                  </TableCell>\n                  <TableCell>\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                      {getStatusIcon(credential)}\n                      <Chip\n                        label={credential.is_active ? 'Active' : 'Inactive'}\n                        color={getStatusColor(credential)}\n                        size=\"small\"\n                      />\n                    </Box>\n                  </TableCell>\n                  <TableCell>\n                    <Box>\n                      <Typography variant=\"body2\">\n                        {credential.total_requests || 0} requests\n                      </Typography>\n                      {credential.failed_requests && credential.failed_requests > 0 && (\n                        <Typography variant=\"caption\" color=\"error\">\n                          {credential.failed_requests} failed\n                        </Typography>\n                      )}\n                    </Box>\n                  </TableCell>\n                  <TableCell>\n                    <Typography variant=\"body2\">\n                      {credential.rate_limit_per_minute || 60}/min\n                    </Typography>\n                  </TableCell>\n                  <TableCell>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      {credential.last_used\n                        ? new Date(credential.last_used).toLocaleDateString()\n                        : 'Never'}\n                    </Typography>\n                  </TableCell>\n                  <TableCell align=\"right\">\n                    <Stack direction=\"row\" spacing={1} justifyContent=\"flex-end\">\n                      <Tooltip title=\"Test Connection\">\n                        <IconButton\n                          size=\"small\"\n                          onClick={() => handleTestConnection(credential.credential_id)}\n                          disabled={testConnectionMutation.isPending}\n                        >\n                          <PlayArrow />\n                        </IconButton>\n                      </Tooltip>\n                      <Tooltip title=\"Edit\">\n                        <IconButton\n                          size=\"small\"\n                          onClick={() => handleEdit(credential)}\n                        >\n                          <Edit />\n                        </IconButton>\n                      </Tooltip>\n                      <Tooltip title=\"Delete\">\n                        <IconButton\n                          size=\"small\"\n                          color=\"error\"\n                          onClick={() => handleDelete(credential.credential_id)}\n                        >\n                          <Delete />\n                        </IconButton>\n                      </Tooltip>\n                    </Stack>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </TableContainer>\n      ) : (\n        <Card>\n          <CardContent>\n            <Box sx={{ textAlign: 'center', py: 6 }}>\n              <Typography variant=\"h6\" color=\"text.secondary\" gutterBottom>\n                No courier integrations configured\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n                Add your first courier integration to get started\n              </Typography>\n              <Button\n                variant=\"contained\"\n                startIcon={<Add />}\n                onClick={handleAdd}\n              >\n                Add Credentials\n              </Button>\n            </Box>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Add/Edit Dialog */}\n      <Dialog\n        open={addDialogOpen || editDialogOpen}\n        onClose={() => {\n          setAddDialogOpen(false);\n          setEditDialogOpen(false);\n          setSelectedCredential(null);\n          resetForm();\n        }}\n        maxWidth=\"md\"\n        fullWidth\n      >\n        <DialogTitle>\n          {editDialogOpen ? 'Edit Courier Credentials' : 'Add Courier Credentials'}\n        </DialogTitle>\n        <DialogContent>\n          <Box sx={{ pt: 2 }}>\n            <Grid container spacing={3}>\n              <Grid item xs={12}>\n                <FormControl fullWidth>\n                  <InputLabel>Courier</InputLabel>\n                  <Select\n                    value={formData.courier_name}\n                    label=\"Courier\"\n                    onChange={(e) => setFormData({ ...formData, courier_name: e.target.value })}\n                    disabled={editDialogOpen}\n                  >\n                    {availableCouriers?.map((courier) => (\n                      <MenuItem key={courier.courier_id} value={courier.courier_name}>\n                        <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n                          <CourierLogo\n                            courierCode={courier.courier_code}\n                            courierName={courier.courier_name}\n                            size=\"small\"\n                            variant=\"rounded\"\n                          />\n                          {courier.courier_name}\n                        </Box>\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n              </Grid>\n\n              <Grid item xs={12}>\n                <Divider>\n                  <Chip label=\"API Credentials\" size=\"small\" />\n                </Divider>\n              </Grid>\n\n              <Grid item xs={12} md={6}>\n                <TextField\n                  fullWidth\n                  label=\"API Key\"\n                  value={formData.api_key}\n                  onChange={(e) => setFormData({ ...formData, api_key: e.target.value })}\n                  type={showSecrets['api_key'] ? 'text' : 'password'}\n                  InputProps={{\n                    endAdornment: (\n                      <IconButton\n                        size=\"small\"\n                        onClick={() => toggleShowSecret('api_key')}\n                      >\n                        {showSecrets['api_key'] ? <VisibilityOff /> : <Visibility />}\n                      </IconButton>\n                    ),\n                  }}\n                />\n              </Grid>\n\n              <Grid item xs={12} md={6}>\n                <TextField\n                  fullWidth\n                  label=\"API Secret\"\n                  value={formData.api_secret}\n                  onChange={(e) => setFormData({ ...formData, api_secret: e.target.value })}\n                  type={showSecrets['api_secret'] ? 'text' : 'password'}\n                  InputProps={{\n                    endAdornment: (\n                      <IconButton\n                        size=\"small\"\n                        onClick={() => toggleShowSecret('api_secret')}\n                      >\n                        {showSecrets['api_secret'] ? <VisibilityOff /> : <Visibility />}\n                      </IconButton>\n                    ),\n                  }}\n                />\n              </Grid>\n\n              <Grid item xs={12} md={6}>\n                <TextField\n                  fullWidth\n                  label=\"Client ID (OAuth2)\"\n                  value={formData.client_id}\n                  onChange={(e) => setFormData({ ...formData, client_id: e.target.value })}\n                />\n              </Grid>\n\n              <Grid item xs={12} md={6}>\n                <TextField\n                  fullWidth\n                  label=\"Client Secret (OAuth2)\"\n                  value={formData.client_secret}\n                  onChange={(e) => setFormData({ ...formData, client_secret: e.target.value })}\n                  type={showSecrets['client_secret'] ? 'text' : 'password'}\n                  InputProps={{\n                    endAdornment: (\n                      <IconButton\n                        size=\"small\"\n                        onClick={() => toggleShowSecret('client_secret')}\n                      >\n                        {showSecrets['client_secret'] ? <VisibilityOff /> : <Visibility />}\n                      </IconButton>\n                    ),\n                  }}\n                />\n              </Grid>\n\n              <Grid item xs={12}>\n                <Divider>\n                  <Chip label=\"Configuration\" size=\"small\" />\n                </Divider>\n              </Grid>\n\n              <Grid item xs={12} md={8}>\n                <TextField\n                  fullWidth\n                  label=\"Base URL\"\n                  value={formData.base_url}\n                  onChange={(e) => setFormData({ ...formData, base_url: e.target.value })}\n                  placeholder=\"https://api.courier.com\"\n                />\n              </Grid>\n\n              <Grid item xs={12} md={4}>\n                <TextField\n                  fullWidth\n                  label=\"API Version\"\n                  value={formData.api_version}\n                  onChange={(e) => setFormData({ ...formData, api_version: e.target.value })}\n                  placeholder=\"v1\"\n                />\n              </Grid>\n\n              <Grid item xs={12}>\n                <TextField\n                  fullWidth\n                  label=\"Rate Limit (requests per minute)\"\n                  type=\"number\"\n                  value={formData.rate_limit_per_minute}\n                  onChange={(e) => setFormData({ ...formData, rate_limit_per_minute: parseInt(e.target.value) })}\n                />\n              </Grid>\n            </Grid>\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={() => {\n              setAddDialogOpen(false);\n              setEditDialogOpen(false);\n              setSelectedCredential(null);\n              resetForm();\n            }}\n          >\n            Cancel\n          </Button>\n          <Button\n            variant=\"contained\"\n            onClick={() => {\n              if (editDialogOpen && selectedCredential) {\n                updateCredentialMutation.mutate({\n                  id: selectedCredential.credential_id,\n                  data: formData,\n                });\n              } else {\n                addCredentialMutation.mutate(formData);\n              }\n            }}\n            disabled={\n              !formData.courier_name ||\n              (!formData.api_key && !formData.client_id) ||\n              addCredentialMutation.isPending ||\n              updateCredentialMutation.isPending\n            }\n          >\n            {editDialogOpen ? 'Update' : 'Add'} Credentials\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\integrations\\EcommerceIntegrations.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":115,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":115,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3281,3284],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3281,3284],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":125,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":125,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3642,3645],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3642,3645],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":140,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":140,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4187,4190],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4187,4190],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":155,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":155,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4729,4732],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4729,4732],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":348,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":348,"endColumn":42},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":452,"column":73,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[15501,15587],"text":" integrations configured yet. Click &quot;Add Integration\" to get started.\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[15501,15587],"text":" integrations configured yet. Click &ldquo;Add Integration\" to get started.\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[15501,15587],"text":" integrations configured yet. Click &#34;Add Integration\" to get started.\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[15501,15587],"text":" integrations configured yet. Click &rdquo;Add Integration\" to get started.\n                "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":452,"column":89,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[15501,15587],"text":" integrations configured yet. Click \"Add Integration&quot; to get started.\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[15501,15587],"text":" integrations configured yet. Click \"Add Integration&ldquo; to get started.\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[15501,15587],"text":" integrations configured yet. Click \"Add Integration&#34; to get started.\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[15501,15587],"text":" integrations configured yet. Click \"Add Integration&rdquo; to get started.\n                "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Grid,\n  Button,\n  TextField,\n  Chip,\n  Alert,\n  Divider,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  ListItemSecondaryAction,\n  IconButton,\n  Paper,\n  Stepper,\n  Step,\n  StepLabel,\n  StepContent,\n  Tabs,\n  Tab,\n} from '@mui/material';\nimport {\n  ShoppingCart as ShopifyIcon,\n  Store as WooCommerceIcon,\n  Storefront as WixIcon,\n  ShoppingBag as PrestaShopIcon,\n  LocalMall as OpenCartIcon,\n  Shop as MagentoIcon,\n  CheckCircle as CheckCircleIcon,\n  Error as ErrorIcon,\n  Settings as SettingsIcon,\n  Sync as SyncIcon,\n  Delete as DeleteIcon,\n  Add as AddIcon,\n  ContentCopy as CopyIcon,\n  Visibility as VisibilityIcon,\n  VisibilityOff as VisibilityOffIcon,\n} from '@mui/icons-material';\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport toast from 'react-hot-toast';\n\ninterface Integration {\n  integration_id: string;\n  platform: string;\n  store_url: string;\n  api_key: string;\n  api_secret: string;\n  is_active: boolean;\n  last_sync: string;\n  orders_synced: number;\n  created_at: string;\n}\n\ninterface TabPanelProps {\n  children?: React.ReactNode;\n  index: number;\n  value: number;\n}\n\nconst TabPanel: React.FC<TabPanelProps> = ({ children, value, index }) => {\n  return (\n    <div hidden={value !== index}>\n      {value === index && <Box sx={{ pt: 3 }}>{children}</Box>}\n    </div>\n  );\n};\n\nconst platforms = [\n  { name: 'WooCommerce', icon: WooCommerceIcon, color: '#96588A', docs: 'https://woocommerce.github.io/woocommerce-rest-api-docs/' },\n  { name: 'Shopify', icon: ShopifyIcon, color: '#96BF48', docs: 'https://shopify.dev/api/admin-rest' },\n  { name: 'Wix', icon: WixIcon, color: '#0C6EFC', docs: 'https://dev.wix.com/api/rest/getting-started' },\n  { name: 'PrestaShop', icon: PrestaShopIcon, color: '#DF0067', docs: 'https://devdocs.prestashop.com/1.7/webservice/' },\n  { name: 'OpenCart', icon: OpenCartIcon, color: '#2AC2EF', docs: 'https://docs.opencart.com/en-gb/system/users/api/' },\n  { name: 'Magento', icon: MagentoIcon, color: '#EE672F', docs: 'https://devdocs.magento.com/guides/v2.4/rest/bk-rest.html' },\n];\n\nexport const EcommerceIntegrations: React.FC = () => {\n  const queryClient = useQueryClient();\n  const [activeTab, setActiveTab] = useState(0);\n  const [setupDialogOpen, setSetupDialogOpen] = useState(false);\n  const [selectedPlatform, setSelectedPlatform] = useState<string | null>(null);\n  const [showApiSecret, setShowApiSecret] = useState(false);\n  const [activeStep, setActiveStep] = useState(0);\n  \n  const [formData, setFormData] = useState({\n    store_url: '',\n    api_key: '',\n    api_secret: '',\n    webhook_url: '',\n  });\n\n  // Fetch integrations\n  const { data: integrationsData } = useQuery({\n    queryKey: ['ecommerce-integrations'],\n    queryFn: async () => {\n      const response = await apiClient.get('/integrations/ecommerce');\n      return response.data;\n    },\n  });\n\n  const integrations: Integration[] = Array.isArray(integrationsData?.data) ? integrationsData.data : [];\n\n  // Add integration mutation\n  const addIntegrationMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const response = await apiClient.post('/integrations/ecommerce', data);\n      return response.data;\n    },\n    onSuccess: () => {\n      toast.success('Integration added successfully!');\n      queryClient.invalidateQueries({ queryKey: ['ecommerce-integrations'] });\n      setSetupDialogOpen(false);\n      resetForm();\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || 'Failed to add integration');\n    },\n  });\n\n  // Sync integration mutation\n  const syncIntegrationMutation = useMutation({\n    mutationFn: async (integrationId: string) => {\n      const response = await apiClient.post(`/integrations/ecommerce/${integrationId}/sync`);\n      return response.data;\n    },\n    onSuccess: () => {\n      toast.success('Sync started successfully!');\n      queryClient.invalidateQueries({ queryKey: ['ecommerce-integrations'] });\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || 'Failed to sync');\n    },\n  });\n\n  // Delete integration mutation\n  const deleteIntegrationMutation = useMutation({\n    mutationFn: async (integrationId: string) => {\n      const response = await apiClient.delete(`/integrations/ecommerce/${integrationId}`);\n      return response.data;\n    },\n    onSuccess: () => {\n      toast.success('Integration deleted successfully!');\n      queryClient.invalidateQueries({ queryKey: ['ecommerce-integrations'] });\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || 'Failed to delete integration');\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({\n      store_url: '',\n      api_key: '',\n      api_secret: '',\n      webhook_url: '',\n    });\n    setActiveStep(0);\n    setSelectedPlatform(null);\n  };\n\n  const handleSetupPlatform = (platform: string) => {\n    setSelectedPlatform(platform);\n    setFormData({\n      ...formData,\n      webhook_url: `${window.location.origin}/api/webhooks/ecommerce/${platform.toLowerCase()}`,\n    });\n    setSetupDialogOpen(true);\n  };\n\n  const handleSubmitIntegration = () => {\n    if (!selectedPlatform || !formData.store_url || !formData.api_key || !formData.api_secret) {\n      toast.error('Please fill in all required fields');\n      return;\n    }\n\n    addIntegrationMutation.mutate({\n      platform: selectedPlatform,\n      ...formData,\n    });\n  };\n\n  const copyToClipboard = (text: string) => {\n    navigator.clipboard.writeText(text);\n    toast.success('Copied to clipboard!');\n  };\n\n  const getIntegrationsByPlatform = (platform: string) => {\n    return integrations.filter(i => i.platform === platform);\n  };\n\n  const getSetupSteps = (platform: string) => {\n    const baseSteps = [\n      {\n        label: 'Store URL',\n        description: `Enter your ${platform} store URL`,\n        content: (\n          <TextField\n            fullWidth\n            label=\"Store URL\"\n            value={formData.store_url}\n            onChange={(e) => setFormData({ ...formData, store_url: e.target.value })}\n            placeholder={`https://your-store.${platform.toLowerCase()}.com`}\n            helperText={`Your ${platform} store URL`}\n          />\n        ),\n      },\n      {\n        label: 'API Credentials',\n        description: 'Enter your API key and secret',\n        content: (\n          <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2 }}>\n            <TextField\n              fullWidth\n              label=\"API Key\"\n              value={formData.api_key}\n              onChange={(e) => setFormData({ ...formData, api_key: e.target.value })}\n              placeholder=\"Enter your API key\"\n            />\n            <TextField\n              fullWidth\n              label=\"API Secret\"\n              type={showApiSecret ? 'text' : 'password'}\n              value={formData.api_secret}\n              onChange={(e) => setFormData({ ...formData, api_secret: e.target.value })}\n              placeholder=\"Enter your API secret\"\n              InputProps={{\n                endAdornment: (\n                  <IconButton onClick={() => setShowApiSecret(!showApiSecret)} edge=\"end\">\n                    {showApiSecret ? <VisibilityOffIcon /> : <VisibilityIcon />}\n                  </IconButton>\n                ),\n              }}\n            />\n          </Box>\n        ),\n      },\n      {\n        label: 'Webhook Setup',\n        description: 'Configure webhook for real-time order sync',\n        content: (\n          <Box>\n            <Typography variant=\"body2\" paragraph>\n              Add this webhook URL to your {platform} store settings:\n            </Typography>\n            <Paper variant=\"outlined\" sx={{ p: 2, bgcolor: 'grey.50' }}>\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                <Typography variant=\"body2\" sx={{ flex: 1, fontFamily: 'monospace', wordBreak: 'break-all' }}>\n                  {formData.webhook_url}\n                </Typography>\n                <IconButton size=\"small\" onClick={() => copyToClipboard(formData.webhook_url)}>\n                  <CopyIcon fontSize=\"small\" />\n                </IconButton>\n              </Box>\n            </Paper>\n            <Alert severity=\"info\" sx={{ mt: 2 }}>\n              This webhook will automatically sync orders to Performile when they are created or updated.\n            </Alert>\n          </Box>\n        ),\n      },\n    ];\n\n    return baseSteps;\n  };\n\n  return (\n    <Box sx={{ p: 3 }}>\n      {/* Header */}\n      <Box sx={{ mb: 3 }}>\n        <Typography variant=\"h4\" gutterBottom>\n          E-commerce Integrations\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\">\n          Connect your e-commerce platforms to automatically sync orders and track deliveries\n        </Typography>\n      </Box>\n\n      {/* Stats Overview */}\n      <Grid container spacing={2} sx={{ mb: 3 }}>\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h4\" color=\"primary\">\n                {integrations.filter(i => i.is_active).length}\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Active Integrations\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h4\" color=\"success.main\">\n                {integrations.reduce((sum, i) => sum + (i.orders_synced || 0), 0)}\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Orders Synced\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h4\">\n                {platforms.length}\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Supported Platforms\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h4\" color=\"warning.main\">\n                {integrations.filter(i => !i.is_active).length}\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Inactive Integrations\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n\n      {/* Platform Tabs */}\n      <Card>\n        <Tabs\n          value={activeTab}\n          onChange={(_, newValue) => setActiveTab(newValue)}\n          variant=\"scrollable\"\n          scrollButtons=\"auto\"\n        >\n          {platforms.map((platform, index) => (\n            <Tab\n              key={platform.name}\n              label={platform.name}\n              icon={<platform.icon />}\n              iconPosition=\"start\"\n            />\n          ))}\n        </Tabs>\n\n        {platforms.map((platform, index) => (\n          <TabPanel key={platform.name} value={activeTab} index={index}>\n            <CardContent>\n              {/* Platform Header */}\n              <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 3 }}>\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n                  <platform.icon sx={{ fontSize: 48, color: platform.color }} />\n                  <Box>\n                    <Typography variant=\"h5\">{platform.name}</Typography>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      Connect your {platform.name} store to sync orders automatically\n                    </Typography>\n                  </Box>\n                </Box>\n                <Button\n                  variant=\"contained\"\n                  startIcon={<AddIcon />}\n                  onClick={() => handleSetupPlatform(platform.name)}\n                >\n                  Add Integration\n                </Button>\n              </Box>\n\n              <Divider sx={{ my: 2 }} />\n\n              {/* Existing Integrations */}\n              {getIntegrationsByPlatform(platform.name).length > 0 ? (\n                <List>\n                  {getIntegrationsByPlatform(platform.name).map((integration) => (\n                    <ListItem\n                      key={integration.integration_id}\n                      sx={{\n                        border: 1,\n                        borderColor: 'divider',\n                        borderRadius: 1,\n                        mb: 1,\n                      }}\n                    >\n                      <ListItemIcon>\n                        {integration.is_active ? (\n                          <CheckCircleIcon color=\"success\" />\n                        ) : (\n                          <ErrorIcon color=\"error\" />\n                        )}\n                      </ListItemIcon>\n                      <ListItemText\n                        primary={integration.store_url}\n                        secondary={\n                          <Box sx={{ display: 'flex', gap: 1, mt: 1 }}>\n                            <Chip\n                              size=\"small\"\n                              label={integration.is_active ? 'Active' : 'Inactive'}\n                              color={integration.is_active ? 'success' : 'default'}\n                            />\n                            <Chip\n                              size=\"small\"\n                              label={`${integration.orders_synced || 0} orders synced`}\n                            />\n                            {integration.last_sync && (\n                              <Chip\n                                size=\"small\"\n                                label={`Last sync: ${new Date(integration.last_sync).toLocaleDateString()}`}\n                              />\n                            )}\n                          </Box>\n                        }\n                      />\n                      <ListItemSecondaryAction>\n                        <IconButton\n                          edge=\"end\"\n                          onClick={() => syncIntegrationMutation.mutate(integration.integration_id)}\n                          disabled={!integration.is_active || syncIntegrationMutation.isPending}\n                        >\n                          <SyncIcon />\n                        </IconButton>\n                        <IconButton edge=\"end\">\n                          <SettingsIcon />\n                        </IconButton>\n                        <IconButton\n                          edge=\"end\"\n                          onClick={() => {\n                            if (confirm('Are you sure you want to delete this integration?')) {\n                              deleteIntegrationMutation.mutate(integration.integration_id);\n                            }\n                          }}\n                        >\n                          <DeleteIcon />\n                        </IconButton>\n                      </ListItemSecondaryAction>\n                    </ListItem>\n                  ))}\n                </List>\n              ) : (\n                <Alert severity=\"info\">\n                  No {platform.name} integrations configured yet. Click \"Add Integration\" to get started.\n                </Alert>\n              )}\n\n              {/* Documentation Link */}\n              <Box sx={{ mt: 3 }}>\n                <Typography variant=\"subtitle2\" gutterBottom>\n                  Need help?\n                </Typography>\n                <Button\n                  variant=\"outlined\"\n                  size=\"small\"\n                  href={platform.docs}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  View {platform.name} API Documentation\n                </Button>\n              </Box>\n            </CardContent>\n          </TabPanel>\n        ))}\n      </Card>\n\n      {/* Setup Dialog */}\n      <Dialog open={setupDialogOpen} onClose={() => setSetupDialogOpen(false)} maxWidth=\"md\" fullWidth>\n        <DialogTitle>\n          Setup {selectedPlatform} Integration\n        </DialogTitle>\n        <DialogContent>\n          <Stepper activeStep={activeStep} orientation=\"vertical\" sx={{ mt: 2 }}>\n            {selectedPlatform && getSetupSteps(selectedPlatform).map((step, index) => (\n              <Step key={step.label}>\n                <StepLabel>{step.label}</StepLabel>\n                <StepContent>\n                  <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\n                    {step.description}\n                  </Typography>\n                  {step.content}\n                  <Box sx={{ mt: 2 }}>\n                    <Button\n                      variant=\"contained\"\n                      onClick={() => {\n                        if (index === getSetupSteps(selectedPlatform).length - 1) {\n                          handleSubmitIntegration();\n                        } else {\n                          setActiveStep(index + 1);\n                        }\n                      }}\n                      disabled={addIntegrationMutation.isPending}\n                    >\n                      {index === getSetupSteps(selectedPlatform).length - 1 \n                        ? (addIntegrationMutation.isPending ? 'Connecting...' : 'Complete Setup')\n                        : 'Continue'}\n                    </Button>\n                    {index > 0 && (\n                      <Button onClick={() => setActiveStep(index - 1)} sx={{ ml: 1 }}>\n                        Back\n                      </Button>\n                    )}\n                  </Box>\n                </StepContent>\n              </Step>\n            ))}\n          </Stepper>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => {\n            setSetupDialogOpen(false);\n            resetForm();\n          }}>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\integrations\\IntegrationDashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Paper' is defined but never used.","line":30,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TrendingUp' is defined but never used.","line":39,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":39,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TrendingDown' is defined but never used.","line":40,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":40,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Timeline' is defined but never used.","line":45,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":45,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Speed' is defined but never used.","line":46,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":46,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CourierLogo' is defined but never used.","line":51,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'IntegrationStatusBadge' is defined but never used.","line":52,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":52,"endColumn":32},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'user' is assigned a value but never used.","line":88,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":88,"endColumn":15}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * IntegrationDashboard Component\n * Overview of all integrations with status and statistics\n * \n * Week 3 Phase 3: Frontend UI\n * Created: October 19, 2025\n */\n\nimport React, { useState } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Button,\n  Grid,\n  Chip,\n  Alert,\n  CircularProgress,\n  Stack,\n  Divider,\n  LinearProgress,\n  IconButton,\n  Tooltip,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemIcon,\n  Avatar,\n  Paper,\n} from '@mui/material';\nimport {\n  CheckCircle,\n  Error,\n  Warning,\n  Info,\n  Refresh,\n  Settings,\n  TrendingUp,\n  TrendingDown,\n  LocalShipping,\n  Webhook,\n  VpnKey,\n  Code,\n  Timeline,\n  Speed,\n} from '@mui/icons-material';\nimport { useQuery } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport { useAuthStore } from '@/store/authStore';\nimport { CourierLogo } from '@/components/courier/CourierLogo';\nimport { IntegrationStatusBadge } from '@/components/courier/IntegrationStatusBadge';\nimport { useNavigate } from 'react-router-dom';\n\ninterface IntegrationStats {\n  courier_credentials: {\n    total: number;\n    active: number;\n    inactive: number;\n  };\n  webhooks: {\n    total: number;\n    active: number;\n    total_deliveries: number;\n    failed_deliveries: number;\n  };\n  api_keys: {\n    total: number;\n    active: number;\n    total_requests: number;\n  };\n  recent_events: Array<{\n    event_id: string;\n    event_type: string;\n    entity_type: string;\n    courier_name?: string;\n    status: string;\n    created_at: string;\n  }>;\n  api_usage: {\n    today: number;\n    this_week: number;\n    this_month: number;\n  };\n}\n\nexport const IntegrationDashboard: React.FC = () => {\n  const { user } = useAuthStore();\n  const navigate = useNavigate();\n  const [refreshing, setRefreshing] = useState(false);\n\n  // Fetch integration stats\n  const { data: stats, isLoading, refetch } = useQuery({\n    queryKey: ['integration-stats'],\n    queryFn: async () => {\n      const response = await apiClient.get('/week3-integrations/stats');\n      return response.data.data as IntegrationStats;\n    },\n    refetchInterval: 30000, // Refresh every 30 seconds\n  });\n\n  const handleRefresh = async () => {\n    setRefreshing(true);\n    await refetch();\n    setTimeout(() => setRefreshing(false), 500);\n  };\n\n  const getHealthStatus = (): { status: 'healthy' | 'warning' | 'error'; message: string } => {\n    if (!stats) return { status: 'warning', message: 'Loading...' };\n\n    const hasActiveCredentials = stats.courier_credentials.active > 0;\n    const webhookFailureRate = stats.webhooks.total_deliveries > 0\n      ? stats.webhooks.failed_deliveries / stats.webhooks.total_deliveries\n      : 0;\n\n    if (!hasActiveCredentials) {\n      return { status: 'warning', message: 'No active courier integrations' };\n    }\n\n    if (webhookFailureRate > 0.1) {\n      return { status: 'error', message: 'High webhook failure rate' };\n    }\n\n    if (webhookFailureRate > 0.05) {\n      return { status: 'warning', message: 'Some webhook failures detected' };\n    }\n\n    return { status: 'healthy', message: 'All systems operational' };\n  };\n\n  const healthStatus = getHealthStatus();\n\n  if (isLoading) {\n    return (\n      <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: 400 }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  return (\n    <Box>\n      {/* Header */}\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n        <Box>\n          <Typography variant=\"h4\" gutterBottom>\n            Integration Dashboard\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            Monitor and manage all your integrations\n          </Typography>\n        </Box>\n        <Tooltip title=\"Refresh\">\n          <IconButton onClick={handleRefresh} disabled={refreshing}>\n            <Refresh className={refreshing ? 'rotating' : ''} />\n          </IconButton>\n        </Tooltip>\n      </Box>\n\n      {/* Health Status Alert */}\n      <Alert\n        severity={healthStatus.status === 'healthy' ? 'success' : healthStatus.status === 'warning' ? 'warning' : 'error'}\n        sx={{ mb: 3 }}\n        icon={\n          healthStatus.status === 'healthy' ? <CheckCircle /> :\n          healthStatus.status === 'warning' ? <Warning /> : <Error />\n        }\n      >\n        <Typography variant=\"body2\">\n          <strong>System Status:</strong> {healthStatus.message}\n        </Typography>\n      </Alert>\n\n      {/* Stats Cards */}\n      <Grid container spacing={3} sx={{ mb: 3 }}>\n        {/* Courier Integrations */}\n        <Grid item xs={12} md={4}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\n                <Avatar sx={{ bgcolor: 'primary.main', mr: 2 }}>\n                  <LocalShipping />\n                </Avatar>\n                <Box sx={{ flexGrow: 1 }}>\n                  <Typography variant=\"h4\" fontWeight=\"bold\">\n                    {stats?.courier_credentials.active || 0}\n                  </Typography>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    Active Couriers\n                  </Typography>\n                </Box>\n              </Box>\n              <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 1 }}>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  Total: {stats?.courier_credentials.total || 0}\n                </Typography>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  Inactive: {stats?.courier_credentials.inactive || 0}\n                </Typography>\n              </Box>\n              <LinearProgress\n                variant=\"determinate\"\n                value={stats?.courier_credentials.total\n                  ? (stats.courier_credentials.active / stats.courier_credentials.total) * 100\n                  : 0}\n                sx={{ mb: 2 }}\n              />\n              <Button\n                fullWidth\n                variant=\"outlined\"\n                size=\"small\"\n                startIcon={<Settings />}\n                onClick={() => navigate('/integrations/couriers')}\n              >\n                Manage Couriers\n              </Button>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        {/* Webhooks */}\n        <Grid item xs={12} md={4}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\n                <Avatar sx={{ bgcolor: 'success.main', mr: 2 }}>\n                  <Webhook />\n                </Avatar>\n                <Box sx={{ flexGrow: 1 }}>\n                  <Typography variant=\"h4\" fontWeight=\"bold\">\n                    {stats?.webhooks.total_deliveries || 0}\n                  </Typography>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    Webhook Deliveries\n                  </Typography>\n                </Box>\n              </Box>\n              <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 1 }}>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  Active: {stats?.webhooks.active || 0}\n                </Typography>\n                <Typography variant=\"caption\" color={stats?.webhooks.failed_deliveries ? 'error' : 'text.secondary'}>\n                  Failed: {stats?.webhooks.failed_deliveries || 0}\n                </Typography>\n              </Box>\n              <LinearProgress\n                variant=\"determinate\"\n                value={stats?.webhooks.total_deliveries\n                  ? ((stats.webhooks.total_deliveries - stats.webhooks.failed_deliveries) / stats.webhooks.total_deliveries) * 100\n                  : 100}\n                color={stats?.webhooks.failed_deliveries && stats.webhooks.failed_deliveries > 0 ? 'warning' : 'success'}\n                sx={{ mb: 2 }}\n              />\n              <Button\n                fullWidth\n                variant=\"outlined\"\n                size=\"small\"\n                startIcon={<Settings />}\n                onClick={() => navigate('/integrations/webhooks')}\n              >\n                Manage Webhooks\n              </Button>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        {/* API Keys */}\n        <Grid item xs={12} md={4}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\n                <Avatar sx={{ bgcolor: 'warning.main', mr: 2 }}>\n                  <VpnKey />\n                </Avatar>\n                <Box sx={{ flexGrow: 1 }}>\n                  <Typography variant=\"h4\" fontWeight=\"bold\">\n                    {stats?.api_keys.total_requests || 0}\n                  </Typography>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    API Requests\n                  </Typography>\n                </Box>\n              </Box>\n              <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 1 }}>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  Total Keys: {stats?.api_keys.total || 0}\n                </Typography>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  Active: {stats?.api_keys.active || 0}\n                </Typography>\n              </Box>\n              <LinearProgress\n                variant=\"determinate\"\n                value={stats?.api_keys.total\n                  ? (stats.api_keys.active / stats.api_keys.total) * 100\n                  : 0}\n                sx={{ mb: 2 }}\n              />\n              <Button\n                fullWidth\n                variant=\"outlined\"\n                size=\"small\"\n                startIcon={<Settings />}\n                onClick={() => navigate('/integrations/api-keys')}\n              >\n                Manage API Keys\n              </Button>\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n\n      {/* API Usage Stats */}\n      <Grid container spacing={3} sx={{ mb: 3 }}>\n        <Grid item xs={12} md={8}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                API Usage\n              </Typography>\n              <Grid container spacing={3}>\n                <Grid item xs={4}>\n                  <Box sx={{ textAlign: 'center' }}>\n                    <Typography variant=\"h3\" color=\"primary\" fontWeight=\"bold\">\n                      {stats?.api_usage.today || 0}\n                    </Typography>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      Today\n                    </Typography>\n                  </Box>\n                </Grid>\n                <Grid item xs={4}>\n                  <Box sx={{ textAlign: 'center' }}>\n                    <Typography variant=\"h3\" color=\"success.main\" fontWeight=\"bold\">\n                      {stats?.api_usage.this_week || 0}\n                    </Typography>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      This Week\n                    </Typography>\n                  </Box>\n                </Grid>\n                <Grid item xs={4}>\n                  <Box sx={{ textAlign: 'center' }}>\n                    <Typography variant=\"h3\" color=\"info.main\" fontWeight=\"bold\">\n                      {stats?.api_usage.this_month || 0}\n                    </Typography>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      This Month\n                    </Typography>\n                  </Box>\n                </Grid>\n              </Grid>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} md={4}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Quick Actions\n              </Typography>\n              <Stack spacing={1}>\n                <Button\n                  fullWidth\n                  variant=\"outlined\"\n                  startIcon={<LocalShipping />}\n                  onClick={() => navigate('/integrations/couriers')}\n                >\n                  Add Courier\n                </Button>\n                <Button\n                  fullWidth\n                  variant=\"outlined\"\n                  startIcon={<Webhook />}\n                  onClick={() => navigate('/integrations/webhooks')}\n                >\n                  Create Webhook\n                </Button>\n                <Button\n                  fullWidth\n                  variant=\"outlined\"\n                  startIcon={<VpnKey />}\n                  onClick={() => navigate('/integrations/api-keys')}\n                >\n                  Generate API Key\n                </Button>\n                <Button\n                  fullWidth\n                  variant=\"outlined\"\n                  startIcon={<Code />}\n                  onClick={() => window.open('/docs/api', '_blank')}\n                >\n                  API Documentation\n                </Button>\n              </Stack>\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n\n      {/* Recent Events */}\n      <Card>\n        <CardContent>\n          <Typography variant=\"h6\" gutterBottom>\n            Recent Integration Events\n          </Typography>\n          {stats?.recent_events && stats.recent_events.length > 0 ? (\n            <List>\n              {stats.recent_events.slice(0, 10).map((event, index) => (\n                <React.Fragment key={event.event_id}>\n                  {index > 0 && <Divider />}\n                  <ListItem>\n                    <ListItemIcon>\n                      {event.status === 'success' ? (\n                        <CheckCircle color=\"success\" />\n                      ) : event.status === 'failed' ? (\n                        <Error color=\"error\" />\n                      ) : (\n                        <Info color=\"info\" />\n                      )}\n                    </ListItemIcon>\n                    <ListItemText\n                      primary={\n                        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                          <Typography variant=\"body2\">\n                            {event.event_type.replace(/\\./g, ' ').replace(/\\b\\w/g, l => l.toUpperCase())}\n                          </Typography>\n                          {event.courier_name && (\n                            <Chip label={event.courier_name} size=\"small\" />\n                          )}\n                          <Chip\n                            label={event.status}\n                            size=\"small\"\n                            color={event.status === 'success' ? 'success' : event.status === 'failed' ? 'error' : 'default'}\n                          />\n                        </Box>\n                      }\n                      secondary={\n                        <Typography variant=\"caption\" color=\"text.secondary\">\n                          {event.entity_type}  {new Date(event.created_at).toLocaleString()}\n                        </Typography>\n                      }\n                    />\n                  </ListItem>\n                </React.Fragment>\n              ))}\n            </List>\n          ) : (\n            <Box sx={{ textAlign: 'center', py: 4 }}>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                No recent events\n              </Typography>\n            </Box>\n          )}\n        </CardContent>\n      </Card>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\integrations\\PluginSetup.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\integrations\\WebhookManagement.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FormControl' is defined but never used.","line":34,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'InputLabel' is defined but never used.","line":35,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Select' is defined but never used.","line":36,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MenuItem' is defined but never used.","line":37,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":37,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'List' is defined but never used.","line":43,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ListItem' is defined but never used.","line":44,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ListItemText' is defined but never used.","line":45,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":45,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ListItemIcon' is defined but never used.","line":46,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":46,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CheckCircle' is defined but never used.","line":53,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":53,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Error' is defined but never used.","line":54,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":54,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Warning' is defined but never used.","line":55,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":55,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Refresh' is defined but never used.","line":57,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":57,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Code' is defined but never used.","line":60,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":60,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'user' is assigned a value but never used.","line":94,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":94,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'logsDialogOpen' is assigned a value but never used.","line":99,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":99,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setLogsDialogOpen' is assigned a value but never used.","line":99,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":99,"endColumn":43},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":130,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":130,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3591,3594],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3591,3594],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":148,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":148,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4235,4238],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4235,4238],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":162,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":162,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4698,4701],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4698,4701],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":176,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":176,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5142,5145],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5142,5145],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":20,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * WebhookManagement Component\n * Manage incoming webhooks for order and tracking updates\n * \n * Week 3 Phase 3: Frontend UI\n * Created: October 19, 2025\n */\n\nimport React, { useState } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Button,\n  Grid,\n  TextField,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  IconButton,\n  Chip,\n  Alert,\n  CircularProgress,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Paper,\n  Tooltip,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Stack,\n  Checkbox,\n  FormControlLabel,\n  FormGroup,\n  Divider,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemIcon,\n} from '@mui/material';\nimport {\n  Add,\n  Edit,\n  Delete,\n  PlayArrow,\n  CheckCircle,\n  Error,\n  Warning,\n  ContentCopy,\n  Refresh,\n  Visibility,\n  VisibilityOff,\n  Code,\n} from '@mui/icons-material';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport { useAuthStore } from '@/store/authStore';\nimport toast from 'react-hot-toast';\n\ninterface Webhook {\n  webhook_id: string;\n  user_id: string;\n  shop_id?: string;\n  webhook_url: string;\n  webhook_secret: string;\n  event_types: string[];\n  is_active: boolean;\n  last_triggered_at?: string;\n  total_deliveries: number;\n  failed_deliveries: number;\n  created_at: string;\n  updated_at: string;\n}\n\nconst AVAILABLE_EVENTS = [\n  { value: 'order.created', label: 'Order Created', description: 'Triggered when a new order is created' },\n  { value: 'order.updated', label: 'Order Updated', description: 'Triggered when an order is updated' },\n  { value: 'order.cancelled', label: 'Order Cancelled', description: 'Triggered when an order is cancelled' },\n  { value: 'tracking.updated', label: 'Tracking Updated', description: 'Triggered when tracking status changes' },\n  { value: 'tracking.delivered', label: 'Tracking Delivered', description: 'Triggered when package is delivered' },\n  { value: 'review.created', label: 'Review Created', description: 'Triggered when a review is submitted' },\n  { value: 'claim.created', label: 'Claim Created', description: 'Triggered when a claim is filed' },\n  { value: 'claim.updated', label: 'Claim Updated', description: 'Triggered when claim status changes' },\n];\n\nexport const WebhookManagement: React.FC = () => {\n  const { user } = useAuthStore();\n  const queryClient = useQueryClient();\n  \n  const [addDialogOpen, setAddDialogOpen] = useState(false);\n  const [editDialogOpen, setEditDialogOpen] = useState(false);\n  const [logsDialogOpen, setLogsDialogOpen] = useState(false);\n  const [selectedWebhook, setSelectedWebhook] = useState<Webhook | null>(null);\n  const [showSecret, setShowSecret] = useState(false);\n  \n  // Form state\n  const [formData, setFormData] = useState({\n    webhook_url: '',\n    event_types: [] as string[],\n  });\n\n  // Fetch webhooks\n  const { data: webhooks, isLoading } = useQuery({\n    queryKey: ['webhooks'],\n    queryFn: async () => {\n      const response = await apiClient.get('/week3-integrations/webhooks');\n      return response.data.data as Webhook[];\n    },\n  });\n\n  // Add webhook mutation\n  const addWebhookMutation = useMutation({\n    mutationFn: async (data: typeof formData) => {\n      const response = await apiClient.post('/week3-integrations/webhooks', data);\n      return response.data;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['webhooks'] });\n      toast.success('Webhook created successfully');\n      setAddDialogOpen(false);\n      resetForm();\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || 'Failed to create webhook');\n    },\n  });\n\n  // Update webhook mutation\n  const updateWebhookMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: Partial<typeof formData> }) => {\n      const response = await apiClient.put(`/week3-integrations/webhooks/${id}`, data);\n      return response.data;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['webhooks'] });\n      toast.success('Webhook updated successfully');\n      setEditDialogOpen(false);\n      setSelectedWebhook(null);\n      resetForm();\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || 'Failed to update webhook');\n    },\n  });\n\n  // Delete webhook mutation\n  const deleteWebhookMutation = useMutation({\n    mutationFn: async (id: string) => {\n      await apiClient.delete(`/week3-integrations/webhooks/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['webhooks'] });\n      toast.success('Webhook deleted successfully');\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || 'Failed to delete webhook');\n    },\n  });\n\n  // Test webhook mutation\n  const testWebhookMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const response = await apiClient.post(`/week3-integrations/webhooks/${id}/test`);\n      return response.data;\n    },\n    onSuccess: () => {\n      toast.success('Test webhook sent successfully');\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || 'Failed to send test webhook');\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({\n      webhook_url: '',\n      event_types: [],\n    });\n  };\n\n  const handleAdd = () => {\n    setAddDialogOpen(true);\n    resetForm();\n  };\n\n  const handleEdit = (webhook: Webhook) => {\n    setSelectedWebhook(webhook);\n    setFormData({\n      webhook_url: webhook.webhook_url,\n      event_types: webhook.event_types,\n    });\n    setEditDialogOpen(true);\n  };\n\n  const handleDelete = (id: string) => {\n    if (window.confirm('Are you sure you want to delete this webhook?')) {\n      deleteWebhookMutation.mutate(id);\n    }\n  };\n\n  const handleTest = (id: string) => {\n    testWebhookMutation.mutate(id);\n  };\n\n  const handleCopySecret = (secret: string) => {\n    navigator.clipboard.writeText(secret);\n    toast.success('Webhook secret copied to clipboard');\n  };\n\n  const handleCopyUrl = (webhookId: string) => {\n    const url = `${window.location.origin}/api/week3-integrations/webhooks/receive/${webhookId}`;\n    navigator.clipboard.writeText(url);\n    toast.success('Webhook URL copied to clipboard');\n  };\n\n  const toggleEventType = (eventType: string) => {\n    setFormData(prev => ({\n      ...prev,\n      event_types: prev.event_types.includes(eventType)\n        ? prev.event_types.filter(e => e !== eventType)\n        : [...prev.event_types, eventType],\n    }));\n  };\n\n  const getStatusColor = (webhook: Webhook): 'success' | 'error' | 'warning' | 'default' => {\n    if (!webhook.is_active) return 'default';\n    if (webhook.failed_deliveries > 0 && webhook.total_deliveries > 0) {\n      const failureRate = webhook.failed_deliveries / webhook.total_deliveries;\n      if (failureRate > 0.1) return 'error';\n      if (failureRate > 0.05) return 'warning';\n    }\n    return 'success';\n  };\n\n  if (isLoading) {\n    return (\n      <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: 400 }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  return (\n    <Box>\n      {/* Header */}\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n        <Box>\n          <Typography variant=\"h4\" gutterBottom>\n            Webhook Management\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            Receive real-time updates for orders, tracking, and more\n          </Typography>\n        </Box>\n        <Button\n          variant=\"contained\"\n          startIcon={<Add />}\n          onClick={handleAdd}\n        >\n          Create Webhook\n        </Button>\n      </Box>\n\n      {/* Info Alert */}\n      <Alert severity=\"info\" sx={{ mb: 3 }}>\n        <Typography variant=\"body2\">\n          Webhooks allow you to receive real-time notifications when events occur in your Performile account.\n          Configure which events you want to receive and where to send them.\n        </Typography>\n      </Alert>\n\n      {/* Webhooks List */}\n      {webhooks && webhooks.length > 0 ? (\n        <TableContainer component={Paper}>\n          <Table>\n            <TableHead>\n              <TableRow>\n                <TableCell>Webhook URL</TableCell>\n                <TableCell>Events</TableCell>\n                <TableCell>Status</TableCell>\n                <TableCell>Deliveries</TableCell>\n                <TableCell>Last Triggered</TableCell>\n                <TableCell align=\"right\">Actions</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {webhooks.map((webhook) => (\n                <TableRow key={webhook.webhook_id} hover>\n                  <TableCell>\n                    <Box>\n                      <Typography variant=\"body2\" noWrap sx={{ maxWidth: 300 }}>\n                        {webhook.webhook_url}\n                      </Typography>\n                      <Typography variant=\"caption\" color=\"text.secondary\">\n                        ID: {webhook.webhook_id.substring(0, 8)}...\n                      </Typography>\n                    </Box>\n                  </TableCell>\n                  <TableCell>\n                    <Stack direction=\"row\" spacing={0.5} flexWrap=\"wrap\">\n                      {webhook.event_types.slice(0, 2).map((event) => (\n                        <Chip key={event} label={event} size=\"small\" />\n                      ))}\n                      {webhook.event_types.length > 2 && (\n                        <Chip label={`+${webhook.event_types.length - 2} more`} size=\"small\" variant=\"outlined\" />\n                      )}\n                    </Stack>\n                  </TableCell>\n                  <TableCell>\n                    <Chip\n                      label={webhook.is_active ? 'Active' : 'Inactive'}\n                      color={getStatusColor(webhook)}\n                      size=\"small\"\n                    />\n                  </TableCell>\n                  <TableCell>\n                    <Box>\n                      <Typography variant=\"body2\">\n                        {webhook.total_deliveries} total\n                      </Typography>\n                      {webhook.failed_deliveries > 0 && (\n                        <Typography variant=\"caption\" color=\"error\">\n                          {webhook.failed_deliveries} failed\n                        </Typography>\n                      )}\n                    </Box>\n                  </TableCell>\n                  <TableCell>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      {webhook.last_triggered_at\n                        ? new Date(webhook.last_triggered_at).toLocaleDateString()\n                        : 'Never'}\n                    </Typography>\n                  </TableCell>\n                  <TableCell align=\"right\">\n                    <Stack direction=\"row\" spacing={1} justifyContent=\"flex-end\">\n                      <Tooltip title=\"Test Webhook\">\n                        <IconButton\n                          size=\"small\"\n                          onClick={() => handleTest(webhook.webhook_id)}\n                          disabled={testWebhookMutation.isPending}\n                        >\n                          <PlayArrow />\n                        </IconButton>\n                      </Tooltip>\n                      <Tooltip title=\"Copy URL\">\n                        <IconButton\n                          size=\"small\"\n                          onClick={() => handleCopyUrl(webhook.webhook_id)}\n                        >\n                          <ContentCopy />\n                        </IconButton>\n                      </Tooltip>\n                      <Tooltip title=\"Edit\">\n                        <IconButton\n                          size=\"small\"\n                          onClick={() => handleEdit(webhook)}\n                        >\n                          <Edit />\n                        </IconButton>\n                      </Tooltip>\n                      <Tooltip title=\"Delete\">\n                        <IconButton\n                          size=\"small\"\n                          color=\"error\"\n                          onClick={() => handleDelete(webhook.webhook_id)}\n                        >\n                          <Delete />\n                        </IconButton>\n                      </Tooltip>\n                    </Stack>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </TableContainer>\n      ) : (\n        <Card>\n          <CardContent>\n            <Box sx={{ textAlign: 'center', py: 6 }}>\n              <Typography variant=\"h6\" color=\"text.secondary\" gutterBottom>\n                No webhooks configured\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n                Create your first webhook to receive real-time updates\n              </Typography>\n              <Button\n                variant=\"contained\"\n                startIcon={<Add />}\n                onClick={handleAdd}\n              >\n                Create Webhook\n              </Button>\n            </Box>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Add/Edit Dialog */}\n      <Dialog\n        open={addDialogOpen || editDialogOpen}\n        onClose={() => {\n          setAddDialogOpen(false);\n          setEditDialogOpen(false);\n          setSelectedWebhook(null);\n          resetForm();\n        }}\n        maxWidth=\"md\"\n        fullWidth\n      >\n        <DialogTitle>\n          {editDialogOpen ? 'Edit Webhook' : 'Create Webhook'}\n        </DialogTitle>\n        <DialogContent>\n          <Box sx={{ pt: 2 }}>\n            <Grid container spacing={3}>\n              <Grid item xs={12}>\n                <TextField\n                  fullWidth\n                  label=\"Webhook URL\"\n                  value={formData.webhook_url}\n                  onChange={(e) => setFormData({ ...formData, webhook_url: e.target.value })}\n                  placeholder=\"https://your-domain.com/webhooks/performile\"\n                  helperText=\"The URL where webhook events will be sent\"\n                />\n              </Grid>\n\n              <Grid item xs={12}>\n                <Divider>\n                  <Chip label=\"Event Types\" size=\"small\" />\n                </Divider>\n              </Grid>\n\n              <Grid item xs={12}>\n                <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\n                  Select which events should trigger this webhook\n                </Typography>\n                <FormGroup>\n                  <Grid container spacing={2}>\n                    {AVAILABLE_EVENTS.map((event) => (\n                      <Grid item xs={12} md={6} key={event.value}>\n                        <Card variant=\"outlined\">\n                          <CardContent sx={{ py: 1.5 }}>\n                            <FormControlLabel\n                              control={\n                                <Checkbox\n                                  checked={formData.event_types.includes(event.value)}\n                                  onChange={() => toggleEventType(event.value)}\n                                />\n                              }\n                              label={\n                                <Box>\n                                  <Typography variant=\"body2\" fontWeight=\"medium\">\n                                    {event.label}\n                                  </Typography>\n                                  <Typography variant=\"caption\" color=\"text.secondary\">\n                                    {event.description}\n                                  </Typography>\n                                </Box>\n                              }\n                            />\n                          </CardContent>\n                        </Card>\n                      </Grid>\n                    ))}\n                  </Grid>\n                </FormGroup>\n              </Grid>\n\n              {editDialogOpen && selectedWebhook && (\n                <Grid item xs={12}>\n                  <Divider>\n                    <Chip label=\"Webhook Details\" size=\"small\" />\n                  </Divider>\n                  <Box sx={{ mt: 2 }}>\n                    <Typography variant=\"body2\" gutterBottom>\n                      <strong>Webhook Secret:</strong>\n                    </Typography>\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                      <TextField\n                        fullWidth\n                        value={selectedWebhook.webhook_secret}\n                        type={showSecret ? 'text' : 'password'}\n                        InputProps={{\n                          readOnly: true,\n                          endAdornment: (\n                            <IconButton\n                              size=\"small\"\n                              onClick={() => setShowSecret(!showSecret)}\n                            >\n                              {showSecret ? <VisibilityOff /> : <Visibility />}\n                            </IconButton>\n                          ),\n                        }}\n                      />\n                      <Tooltip title=\"Copy Secret\">\n                        <IconButton\n                          onClick={() => handleCopySecret(selectedWebhook.webhook_secret)}\n                        >\n                          <ContentCopy />\n                        </IconButton>\n                      </Tooltip>\n                    </Box>\n                    <Alert severity=\"warning\" sx={{ mt: 2 }}>\n                      <Typography variant=\"caption\">\n                        Use this secret to verify webhook signatures. Keep it secure and never share it publicly.\n                      </Typography>\n                    </Alert>\n                  </Box>\n                </Grid>\n              )}\n            </Grid>\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={() => {\n              setAddDialogOpen(false);\n              setEditDialogOpen(false);\n              setSelectedWebhook(null);\n              resetForm();\n            }}\n          >\n            Cancel\n          </Button>\n          <Button\n            variant=\"contained\"\n            onClick={() => {\n              if (editDialogOpen && selectedWebhook) {\n                updateWebhookMutation.mutate({\n                  id: selectedWebhook.webhook_id,\n                  data: formData,\n                });\n              } else {\n                addWebhookMutation.mutate(formData);\n              }\n            }}\n            disabled={\n              !formData.webhook_url ||\n              formData.event_types.length === 0 ||\n              addWebhookMutation.isPending ||\n              updateWebhookMutation.isPending\n            }\n          >\n            {editDialogOpen ? 'Update' : 'Create'} Webhook\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\integrations\\index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\merchant\\MerchantCheckoutAnalytics.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Paper' is defined but never used.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TrendingUp' is defined but never used.","line":25,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Star' is defined but never used.","line":30,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'BarChart' is defined but never used.","line":39,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":39,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Bar' is defined but never used.","line":40,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":40,"endColumn":6},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":110,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":110,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2969,2972],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2969,2972],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":116,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":116,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3233,3236],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3233,3236],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":170,"column":76,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[5319,5458],"text":" Courier names are anonymized as &quot;Competitor A\", \"Competitor B\", etc. when filtering by postal code to protect competitive data.\n          "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[5319,5458],"text":" Courier names are anonymized as &ldquo;Competitor A\", \"Competitor B\", etc. when filtering by postal code to protect competitive data.\n          "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[5319,5458],"text":" Courier names are anonymized as &#34;Competitor A\", \"Competitor B\", etc. when filtering by postal code to protect competitive data.\n          "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[5319,5458],"text":" Courier names are anonymized as &rdquo;Competitor A\", \"Competitor B\", etc. when filtering by postal code to protect competitive data.\n          "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":170,"column":89,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[5319,5458],"text":" Courier names are anonymized as \"Competitor A&quot;, \"Competitor B\", etc. when filtering by postal code to protect competitive data.\n          "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[5319,5458],"text":" Courier names are anonymized as \"Competitor A&ldquo;, \"Competitor B\", etc. when filtering by postal code to protect competitive data.\n          "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[5319,5458],"text":" Courier names are anonymized as \"Competitor A&#34;, \"Competitor B\", etc. when filtering by postal code to protect competitive data.\n          "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[5319,5458],"text":" Courier names are anonymized as \"Competitor A&rdquo;, \"Competitor B\", etc. when filtering by postal code to protect competitive data.\n          "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":170,"column":92,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[5319,5458],"text":" Courier names are anonymized as \"Competitor A\", &quot;Competitor B\", etc. when filtering by postal code to protect competitive data.\n          "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[5319,5458],"text":" Courier names are anonymized as \"Competitor A\", &ldquo;Competitor B\", etc. when filtering by postal code to protect competitive data.\n          "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[5319,5458],"text":" Courier names are anonymized as \"Competitor A\", &#34;Competitor B\", etc. when filtering by postal code to protect competitive data.\n          "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[5319,5458],"text":" Courier names are anonymized as \"Competitor A\", &rdquo;Competitor B\", etc. when filtering by postal code to protect competitive data.\n          "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":170,"column":105,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[5319,5458],"text":" Courier names are anonymized as \"Competitor A\", \"Competitor B&quot;, etc. when filtering by postal code to protect competitive data.\n          "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[5319,5458],"text":" Courier names are anonymized as \"Competitor A\", \"Competitor B&ldquo;, etc. when filtering by postal code to protect competitive data.\n          "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[5319,5458],"text":" Courier names are anonymized as \"Competitor A\", \"Competitor B&#34;, etc. when filtering by postal code to protect competitive data.\n          "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[5319,5458],"text":" Courier names are anonymized as \"Competitor A\", \"Competitor B&rdquo;, etc. when filtering by postal code to protect competitive data.\n          "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":276,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":276,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9310,9313],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9310,9313],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":337,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":337,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11677,11680],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11677,11680],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":427,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":427,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15752,15755],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15752,15755],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":14,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Grid,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Paper,\n  Chip,\n  LinearProgress,\n  Alert,\n  CircularProgress,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n} from '@mui/material';\nimport {\n  TrendingUp,\n  LocalShipping,\n  AttachMoney,\n  ShoppingCart,\n  CheckCircle,\n  Star,\n} from '@mui/icons-material';\nimport { useQuery } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport { useAuthStore } from '@/store/authStore';\nimport { CourierLogo } from '@/components/courier/CourierLogo';\nimport {\n  LineChart,\n  Line,\n  BarChart,\n  Bar,\n  PieChart,\n  Pie,\n  Cell,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  ResponsiveContainer,\n} from 'recharts';\n\nconst COLORS = ['#0088FE', '#00C49F', '#FFBB28', '#FF8042', '#8884D8', '#FF6B9D'];\n\nexport const MerchantCheckoutAnalytics: React.FC = () => {\n  const { user } = useAuthStore();\n  const [timeRange, setTimeRange] = useState('30d');\n  const [postalCode, setPostalCode] = useState<string>('');\n\n  // Fetch merchant checkout analytics\n  const { data: analyticsData, isLoading } = useQuery({\n    queryKey: ['merchant-checkout-analytics', user?.user_id, timeRange, postalCode],\n    queryFn: async () => {\n      const params = new URLSearchParams({ timeRange });\n      if (postalCode) {\n        params.append('postalCode', postalCode);\n      }\n      const response = await apiClient.get(`/merchant/checkout-analytics?${params.toString()}`);\n      return response.data.data;\n    },\n    enabled: !!user,\n  });\n\n  // Anonymize courier names when postal code is selected\n  const anonymizeCourierName = (courierName: string, index: number): string => {\n    if (!postalCode) return courierName;\n    const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n    return `Competitor ${letters[index % letters.length]}`;\n  };\n\n  // Check if we should show anonymized data\n  const showAnonymized = !!postalCode;\n\n  if (isLoading) {\n    return (\n      <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '400px' }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  if (!analyticsData) {\n    return (\n      <Box sx={{ p: 3 }}>\n        <Alert severity=\"info\">\n          <Typography variant=\"h6\" gutterBottom>No Checkout Data Yet</Typography>\n          <Typography variant=\"body2\">\n            Install the Performile plugin on your e-commerce store to start tracking courier selections in checkout.\n          </Typography>\n          <Typography variant=\"body2\" sx={{ mt: 1 }}>\n            <strong>Available for:</strong> Shopify, WooCommerce, and more coming soon!\n          </Typography>\n        </Alert>\n      </Box>\n    );\n  }\n\n  const { summary, courierPerformance, trends, recentCheckouts } = analyticsData;\n\n  // Prepare courier selection data for pie chart\n  const courierSelectionData = courierPerformance?.map((courier: any, index: number) => ({\n    name: showAnonymized ? anonymizeCourierName(courier.courier_name, index) : courier.courier_name,\n    value: parseInt(courier.times_selected),\n  })) || [];\n\n  // Prepare trend data for line chart\n  const trendData = trends?.map((item: any) => ({\n    date: new Date(item.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' }),\n    checkouts: parseInt(item.total_checkouts),\n    selections: parseInt(item.total_selections),\n    avgOrderValue: parseFloat(item.avg_order_value),\n  })) || [];\n\n  return (\n    <Box sx={{ p: 3 }}>\n      {/* Header */}\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n        <Box>\n          <Typography variant=\"h4\" gutterBottom>\n             Checkout Analytics\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            Track courier selections and checkout performance\n          </Typography>\n        </Box>\n        <Box sx={{ display: 'flex', gap: 2 }}>\n          <FormControl sx={{ minWidth: 120 }}>\n            <InputLabel>Time Range</InputLabel>\n            <Select\n              value={timeRange}\n              label=\"Time Range\"\n              onChange={(e) => setTimeRange(e.target.value)}\n            >\n              <MenuItem value=\"7d\">Last 7 Days</MenuItem>\n              <MenuItem value=\"30d\">Last 30 Days</MenuItem>\n              <MenuItem value=\"90d\">Last 90 Days</MenuItem>\n            </Select>\n          </FormControl>\n          <FormControl sx={{ minWidth: 150 }}>\n            <InputLabel>Postal Code</InputLabel>\n            <Select\n              value={postalCode}\n              label=\"Postal Code\"\n              onChange={(e) => setPostalCode(e.target.value)}\n            >\n              <MenuItem value=\"\">All Postal Codes</MenuItem>\n              <MenuItem value=\"1000\">1000</MenuItem>\n              <MenuItem value=\"2000\">2000</MenuItem>\n              <MenuItem value=\"3000\">3000</MenuItem>\n              <MenuItem value=\"4000\">4000</MenuItem>\n              <MenuItem value=\"5000\">5000</MenuItem>\n            </Select>\n          </FormControl>\n        </Box>\n      </Box>\n\n      {/* Anonymization Notice */}\n      {showAnonymized && (\n        <Alert severity=\"info\" sx={{ mb: 3 }}>\n          <Typography variant=\"body2\">\n            <strong>Privacy Mode:</strong> Courier names are anonymized as \"Competitor A\", \"Competitor B\", etc. when filtering by postal code to protect competitive data.\n          </Typography>\n        </Alert>\n      )}\n\n      {/* Summary Cards */}\n      <Grid container spacing={3} sx={{ mb: 3 }}>\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>\n                <ShoppingCart sx={{ mr: 1, color: 'primary.main' }} />\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  Total Checkouts\n                </Typography>\n              </Box>\n              <Typography variant=\"h4\">\n                {summary?.total_checkouts || 0}\n              </Typography>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Courier displays\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>\n                <CheckCircle sx={{ mr: 1, color: 'success.main' }} />\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  Selection Rate\n                </Typography>\n              </Box>\n              <Typography variant=\"h4\">\n                {summary?.selection_rate || 0}%\n              </Typography>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                {summary?.total_selections || 0} couriers selected\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>\n                <AttachMoney sx={{ mr: 1, color: 'warning.main' }} />\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  Avg Order Value\n                </Typography>\n              </Box>\n              <Typography variant=\"h4\">\n                ${summary?.avg_order_value || 0}\n              </Typography>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Per checkout\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Box sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>\n                <LocalShipping sx={{ mr: 1, color: 'info.main' }} />\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  Unique Couriers\n                </Typography>\n              </Box>\n              <Typography variant=\"h4\">\n                {summary?.unique_couriers || 0}\n              </Typography>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Shown in checkout\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n\n      {/* Charts */}\n      <Grid container spacing={3} sx={{ mb: 3 }}>\n        {/* Courier Selection Distribution */}\n        <Grid item xs={12} md={6}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Courier Selection Distribution\n              </Typography>\n              {courierSelectionData.length > 0 ? (\n                <ResponsiveContainer width=\"100%\" height={300}>\n                  <PieChart>\n                    <Pie\n                      data={courierSelectionData}\n                      cx=\"50%\"\n                      cy=\"50%\"\n                      labelLine={false}\n                      label={({ name, percent }) => `${name}: ${(percent * 100).toFixed(0)}%`}\n                      outerRadius={80}\n                      fill=\"#8884d8\"\n                      dataKey=\"value\"\n                    >\n                      {courierSelectionData.map((entry: any, index: number) => (\n                        <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\n                      ))}\n                    </Pie>\n                    <Tooltip />\n                  </PieChart>\n                </ResponsiveContainer>\n              ) : (\n                <Alert severity=\"info\">No courier selections yet</Alert>\n              )}\n            </CardContent>\n          </Card>\n        </Grid>\n\n        {/* Checkout Trends */}\n        <Grid item xs={12} md={6}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Checkout Trends\n              </Typography>\n              {trendData.length > 0 ? (\n                <ResponsiveContainer width=\"100%\" height={300}>\n                  <LineChart data={trendData}>\n                    <CartesianGrid strokeDasharray=\"3 3\" />\n                    <XAxis dataKey=\"date\" />\n                    <YAxis />\n                    <Tooltip />\n                    <Legend />\n                    <Line type=\"monotone\" dataKey=\"checkouts\" stroke=\"#8884d8\" name=\"Checkouts\" />\n                    <Line type=\"monotone\" dataKey=\"selections\" stroke=\"#82ca9d\" name=\"Selections\" />\n                  </LineChart>\n                </ResponsiveContainer>\n              ) : (\n                <Alert severity=\"info\">No trend data yet</Alert>\n              )}\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n\n      {/* Courier Performance Table */}\n      <Card sx={{ mb: 3 }}>\n        <CardContent>\n          <Typography variant=\"h6\" gutterBottom>\n            Courier Performance\n          </Typography>\n          {courierPerformance && courierPerformance.length > 0 ? (\n            <TableContainer>\n              <Table>\n                <TableHead>\n                  <TableRow>\n                    <TableCell>Courier</TableCell>\n                    <TableCell align=\"right\">Shown</TableCell>\n                    <TableCell align=\"right\">Selected</TableCell>\n                    <TableCell align=\"right\">Selection Rate</TableCell>\n                    <TableCell align=\"right\">Avg Position</TableCell>\n                    <TableCell align=\"right\">Avg Order Value</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {courierPerformance.map((courier: any, index: number) => (\n                    <TableRow key={courier.courier_id}>\n                      <TableCell>\n                        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1.5 }}>\n                          {showAnonymized ? (\n                            <Box sx={{ \n                              width: 32, \n                              height: 32, \n                              borderRadius: 1,\n                              bgcolor: COLORS[index % COLORS.length],\n                              display: 'flex',\n                              alignItems: 'center',\n                              justifyContent: 'center',\n                              color: 'white',\n                              fontWeight: 'bold',\n                              fontSize: '0.875rem'\n                            }}>\n                              {String.fromCharCode(65 + index)}\n                            </Box>\n                          ) : (\n                            <CourierLogo\n                              courierCode={courier.courier_code || courier.courier_name}\n                              courierName={courier.courier_name}\n                              size=\"small\"\n                              variant=\"rounded\"\n                              showName={false}\n                            />\n                          )}\n                          <Typography variant=\"body2\">\n                            {showAnonymized ? anonymizeCourierName(courier.courier_name, index) : courier.courier_name}\n                          </Typography>\n                        </Box>\n                      </TableCell>\n                      <TableCell align=\"right\">{courier.total_appearances}</TableCell>\n                      <TableCell align=\"right\">\n                        <Chip \n                          label={courier.times_selected} \n                          size=\"small\" \n                          color=\"success\"\n                        />\n                      </TableCell>\n                      <TableCell align=\"right\">\n                        <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'flex-end', gap: 1 }}>\n                          {courier.selection_rate}%\n                          <LinearProgress \n                            variant=\"determinate\" \n                            value={parseFloat(courier.selection_rate)} \n                            sx={{ width: 60, height: 6, borderRadius: 3 }}\n                          />\n                        </Box>\n                      </TableCell>\n                      <TableCell align=\"right\">\n                        <Chip \n                          label={`#${courier.avg_position}`} \n                          size=\"small\" \n                          color={parseFloat(courier.avg_position) <= 2 ? 'success' : 'default'}\n                        />\n                      </TableCell>\n                      <TableCell align=\"right\">${courier.avg_order_value}</TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </TableContainer>\n          ) : (\n            <Alert severity=\"info\">No courier performance data yet</Alert>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Recent Checkouts */}\n      <Card>\n        <CardContent>\n          <Typography variant=\"h6\" gutterBottom>\n            Recent Checkouts\n          </Typography>\n          {recentCheckouts && recentCheckouts.length > 0 ? (\n            <TableContainer>\n              <Table>\n                <TableHead>\n                  <TableRow>\n                    <TableCell>Date</TableCell>\n                    <TableCell>Courier</TableCell>\n                    <TableCell align=\"right\">Position</TableCell>\n                    <TableCell align=\"right\">Selected</TableCell>\n                    <TableCell align=\"right\">Order Value</TableCell>\n                    <TableCell>Location</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {recentCheckouts.map((checkout: any, index: number) => (\n                    <TableRow key={index}>\n                      <TableCell>\n                        {new Date(checkout.created_at).toLocaleDateString('en-US', {\n                          month: 'short',\n                          day: 'numeric',\n                          hour: '2-digit',\n                          minute: '2-digit',\n                        })}\n                      </TableCell>\n                      <TableCell>{checkout.courier_name}</TableCell>\n                      <TableCell align=\"right\">\n                        <Chip label={`#${checkout.position_shown}`} size=\"small\" />\n                      </TableCell>\n                      <TableCell align=\"right\">\n                        {checkout.was_selected ? (\n                          <CheckCircle color=\"success\" fontSize=\"small\" />\n                        ) : (\n                          <span>-</span>\n                        )}\n                      </TableCell>\n                      <TableCell align=\"right\">\n                        ${checkout.order_value || 0}\n                      </TableCell>\n                      <TableCell>\n                        {checkout.delivery_city}, {checkout.delivery_country}\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </TableContainer>\n          ) : (\n            <Alert severity=\"info\">No recent checkouts yet</Alert>\n          )}\n        </CardContent>\n      </Card>\n    </Box>\n  );\n};\n\nexport default MerchantCheckoutAnalytics;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\notifications\\NotificationCenter.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'DeleteIcon' is defined but never used.","line":23,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":37,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[742,745],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[742,745],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Tabs,\n  Tab,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemIcon,\n  IconButton,\n  Button,\n  Chip,\n  CircularProgress,\n  Alert,\n  Pagination,\n} from '@mui/material';\nimport {\n  Circle as CircleIcon,\n  CheckCircle as CheckCircleIcon,\n  Delete as DeleteIcon,\n  Settings as SettingsIcon,\n} from '@mui/icons-material';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport { useNavigate } from 'react-router-dom';\n\ninterface Notification {\n  notification_id: string;\n  type: string;\n  title: string;\n  message: string;\n  is_read: boolean;\n  created_at: string;\n  data?: any;\n}\n\nexport const NotificationCenter: React.FC = () => {\n  const [activeTab, setActiveTab] = useState(0);\n  const [page, setPage] = useState(1);\n  const pageSize = 20;\n  const navigate = useNavigate();\n  const queryClient = useQueryClient();\n\n  const filter = activeTab === 0 ? 'all' : 'unread';\n\n  // Fetch notifications\n  const { data, isLoading, error } = useQuery({\n    queryKey: ['notifications', 'list', filter, page],\n    queryFn: async () => {\n      const offset = (page - 1) * pageSize;\n      const unreadOnly = filter === 'unread' ? 'true' : 'false';\n      const response = await apiClient.get(\n        `/notifications/list?limit=${pageSize}&offset=${offset}&unread_only=${unreadOnly}`\n      );\n      return response.data.data;\n    },\n  });\n\n  const notifications = data?.notifications || [];\n  const unreadCount = data?.unreadCount || 0;\n  const totalPages = Math.ceil((data?.total || 0) / pageSize);\n\n  // Mark as read mutation\n  const markAsReadMutation = useMutation({\n    mutationFn: async (notificationId: string) => {\n      await apiClient.put('/notifications/mark-read', {\n        notification_id: notificationId,\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['notifications'] });\n    },\n  });\n\n  // Mark all as read mutation\n  const markAllAsReadMutation = useMutation({\n    mutationFn: async () => {\n      await apiClient.put('/notifications/mark-read', {\n        mark_all: true,\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['notifications'] });\n    },\n  });\n\n  const handleTabChange = (event: React.SyntheticEvent, newValue: number) => {\n    setActiveTab(newValue);\n    setPage(1);\n  };\n\n  const handleNotificationClick = (notification: Notification) => {\n    if (!notification.is_read) {\n      markAsReadMutation.mutate(notification.notification_id);\n    }\n    \n    if (notification.data?.url) {\n      navigate(notification.data.url);\n    }\n  };\n\n  const handleMarkAsRead = (notificationId: string, event: React.MouseEvent) => {\n    event.stopPropagation();\n    markAsReadMutation.mutate(notificationId);\n  };\n\n  const handleMarkAllAsRead = () => {\n    markAllAsReadMutation.mutate();\n  };\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diffMs = now.getTime() - date.getTime();\n    const diffMins = Math.floor(diffMs / 60000);\n    const diffHours = Math.floor(diffMs / 3600000);\n    const diffDays = Math.floor(diffMs / 86400000);\n\n    if (diffMins < 1) return 'Just now';\n    if (diffMins < 60) return `${diffMins} minutes ago`;\n    if (diffHours < 24) return `${diffHours} hours ago`;\n    if (diffDays === 1) return 'Yesterday';\n    if (diffDays < 7) return `${diffDays} days ago`;\n    return date.toLocaleDateString('en-US', { \n      month: 'short', \n      day: 'numeric', \n      year: date.getFullYear() !== now.getFullYear() ? 'numeric' : undefined \n    });\n  };\n\n  const getNotificationTypeColor = (type: string): 'default' | 'primary' | 'success' | 'warning' | 'error' => {\n    switch (type) {\n      case 'new_order': return 'primary';\n      case 'order_status': return 'success';\n      case 'delivery_update': return 'primary';\n      case 'payment_received': return 'success';\n      case 'new_review': return 'warning';\n      case 'proximity_match': return 'primary';\n      case 'system_alert': return 'error';\n      default: return 'default';\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '60vh' }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  if (error) {\n    return (\n      <Box sx={{ p: 3 }}>\n        <Alert severity=\"error\">Failed to load notifications. Please try again.</Alert>\n      </Box>\n    );\n  }\n\n  return (\n    <Box sx={{ p: 3 }}>\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n        <Typography variant=\"h4\"> Notifications</Typography>\n        <Button\n          startIcon={<SettingsIcon />}\n          onClick={() => navigate('/settings/notifications')}\n        >\n          Preferences\n        </Button>\n      </Box>\n\n      <Card>\n        <CardContent>\n          <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n            <Tabs value={activeTab} onChange={handleTabChange}>\n              <Tab label={`All (${data?.total || 0})`} />\n              <Tab label={`Unread (${unreadCount})`} />\n            </Tabs>\n            {unreadCount > 0 && (\n              <Button\n                size=\"small\"\n                onClick={handleMarkAllAsRead}\n                disabled={markAllAsReadMutation.isPending}\n              >\n                Mark all as read\n              </Button>\n            )}\n          </Box>\n\n          {notifications.length === 0 ? (\n            <Box sx={{ py: 8, textAlign: 'center' }}>\n              <Typography variant=\"h6\" color=\"text.secondary\" gutterBottom>\n                No notifications\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                {filter === 'unread' \n                  ? \"You're all caught up!\" \n                  : \"You haven't received any notifications yet.\"}\n              </Typography>\n            </Box>\n          ) : (\n            <>\n              <List>\n                {notifications.map((notification: Notification) => (\n                  <ListItem\n                    key={notification.notification_id}\n                    sx={{\n                      bgcolor: notification.is_read ? 'transparent' : 'action.hover',\n                      borderRadius: 1,\n                      mb: 1,\n                      cursor: 'pointer',\n                      '&:hover': {\n                        bgcolor: notification.is_read ? 'action.hover' : 'action.selected',\n                      },\n                    }}\n                    onClick={() => handleNotificationClick(notification)}\n                    secondaryAction={\n                      !notification.is_read && (\n                        <IconButton\n                          edge=\"end\"\n                          onClick={(e) => handleMarkAsRead(notification.notification_id, e)}\n                          disabled={markAsReadMutation.isPending}\n                        >\n                          <CheckCircleIcon />\n                        </IconButton>\n                      )\n                    }\n                  >\n                    <ListItemIcon>\n                      {notification.is_read ? (\n                        <CheckCircleIcon color=\"disabled\" />\n                      ) : (\n                        <CircleIcon color=\"primary\" />\n                      )}\n                    </ListItemIcon>\n                    <ListItemText\n                      primary={\n                        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                          <Typography\n                            variant=\"body1\"\n                            fontWeight={notification.is_read ? 'normal' : 'bold'}\n                          >\n                            {notification.title}\n                          </Typography>\n                          <Chip\n                            label={notification.type.replace('_', ' ')}\n                            size=\"small\"\n                            color={getNotificationTypeColor(notification.type)}\n                          />\n                        </Box>\n                      }\n                      secondary={\n                        <>\n                          <Typography\n                            component=\"span\"\n                            variant=\"body2\"\n                            color=\"text.primary\"\n                            sx={{ display: 'block', mt: 0.5 }}\n                          >\n                            {notification.message}\n                          </Typography>\n                          <Typography\n                            component=\"span\"\n                            variant=\"caption\"\n                            color=\"text.secondary\"\n                            sx={{ display: 'block', mt: 0.5 }}\n                          >\n                            {formatDate(notification.created_at)}\n                          </Typography>\n                        </>\n                      }\n                    />\n                  </ListItem>\n                ))}\n              </List>\n\n              {totalPages > 1 && (\n                <Box sx={{ display: 'flex', justifyContent: 'center', mt: 3 }}>\n                  <Pagination\n                    count={totalPages}\n                    page={page}\n                    onChange={(e, value) => setPage(value)}\n                    color=\"primary\"\n                  />\n                </Box>\n              )}\n            </>\n          )}\n        </CardContent>\n      </Card>\n    </Box>\n  );\n};\n\nexport default NotificationCenter;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\settings\\CourierPreferences.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":79,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":79,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1895,1898],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1895,1898],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":105,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":105,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2849,2852],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2849,2852],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":143,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":143,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4147,4150],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4147,4150],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":165,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":165,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4893,4896],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4893,4896],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":183,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":183,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5618,5621],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5618,5621],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":250,"column":41,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[7646,7727],"text":"\n            No couriers selected. Click &quot;Add Courier\" to get started.\n          "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[7646,7727],"text":"\n            No couriers selected. Click &ldquo;Add Courier\" to get started.\n          "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[7646,7727],"text":"\n            No couriers selected. Click &#34;Add Courier\" to get started.\n          "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[7646,7727],"text":"\n            No couriers selected. Click &rdquo;Add Courier\" to get started.\n          "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":250,"column":53,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[7646,7727],"text":"\n            No couriers selected. Click \"Add Courier&quot; to get started.\n          "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[7646,7727],"text":"\n            No couriers selected. Click \"Add Courier&ldquo; to get started.\n          "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[7646,7727],"text":"\n            No couriers selected. Click \"Add Courier&#34; to get started.\n          "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[7646,7727],"text":"\n            No couriers selected. Click \"Add Courier&rdquo; to get started.\n          "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":254,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":254,"endColumn":42}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  Container,\n  Paper,\n  Typography,\n  Box,\n  Button,\n  Switch,\n  TextField,\n  IconButton,\n  Card,\n  CardContent,\n  Avatar,\n  Chip,\n  Alert,\n  CircularProgress,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  ListItemSecondaryAction,\n} from '@mui/material';\nimport {\n  Add,\n  DragIndicator,\n  Delete,\n  Star,\n} from '@mui/icons-material';\nimport axios from 'axios';\nimport toast from 'react-hot-toast';\n\ninterface Courier {\n  courier_id: string;\n  courier_name: string;\n  logo_url: string | null;\n  trust_score: number;\n  is_active: boolean;\n  display_order: number;\n  custom_name: string | null;\n  priority_level: number;\n}\n\ninterface AvailableCourier {\n  courier_id: string;\n  courier_name: string;\n  logo_url: string | null;\n  trust_score: number;\n}\n\nexport const CourierPreferences: React.FC = () => {\n  const [couriers, setCouriers] = useState<Courier[]>([]);\n  const [availableCouriers, setAvailableCouriers] = useState<AvailableCourier[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [addDialogOpen, setAddDialogOpen] = useState(false);\n  const [apiKey, setApiKey] = useState('');\n\n  useEffect(() => {\n    fetchMerchantCouriers();\n    fetchAvailableCouriers();\n    fetchApiKey();\n  }, []);\n\n  const fetchMerchantCouriers = async () => {\n    try {\n      // Get token from auth store\n      const authData = localStorage.getItem('performile-auth');\n      const token = authData ? JSON.parse(authData).state?.tokens?.accessToken : null;\n      \n      const response = await axios.post(\n        '/api/couriers/merchant-preferences',\n        { action: 'get_selected_couriers' },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      // Convert numeric strings to numbers\n      const couriers = (response.data.couriers || []).map((c: any) => ({\n        ...c,\n        trust_score: Number(c.trust_score) || 0,\n        display_order: Number(c.display_order) || 0,\n        priority_level: Number(c.priority_level) || 0\n      }));\n      setCouriers(couriers);\n    } catch (error) {\n      console.error('Error fetching couriers:', error);\n      toast.error('Failed to load couriers');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchAvailableCouriers = async () => {\n    try {\n      // Get token from auth store\n      const authData = localStorage.getItem('performile-auth');\n      const token = authData ? JSON.parse(authData).state?.tokens?.accessToken : null;\n      const response = await axios.post(\n        '/api/couriers/merchant-preferences',\n        { action: 'get_available_couriers' },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      // Convert trust_score from string to number\n      const couriers = (response.data.couriers || []).map((c: any) => ({\n        ...c,\n        trust_score: Number(c.trust_score) || 0\n      }));\n      setAvailableCouriers(couriers);\n    } catch (error) {\n      console.error('Error fetching available couriers:', error);\n    }\n  };\n\n  const fetchApiKey = async () => {\n    try {\n      // Get token from auth store\n      const authData = localStorage.getItem('performile-auth');\n      const token = authData ? JSON.parse(authData).state?.tokens?.accessToken : null;\n      const response = await axios.get('/api/auth/api-key', {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setApiKey(response.data.api_key || '');\n    } catch (error) {\n      console.error('Error fetching API key:', error);\n    }\n  };\n\n  const handleAddCourier = async (courierId: string) => {\n    try {\n      // Get token from auth store\n      const authData = localStorage.getItem('performile-auth');\n      const token = authData ? JSON.parse(authData).state?.tokens?.accessToken : null;\n      await axios.post(\n        '/api/couriers/merchant-preferences',\n        { action: 'add_courier', courier_id: courierId },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n\n      toast.success('Courier added successfully');\n      fetchMerchantCouriers();\n      setAddDialogOpen(false);\n    } catch (error: any) {\n      toast.error(error.response?.data?.message || 'Failed to add courier');\n    }\n  };\n\n  const handleRemoveCourier = async (courierId: string) => {\n    if (!confirm('Are you sure you want to remove this courier?')) {\n      return;\n    }\n\n    try {\n      // Get token from auth store\n      const authData = localStorage.getItem('performile-auth');\n      const token = authData ? JSON.parse(authData).state?.tokens?.accessToken : null;\n      await axios.post(\n        '/api/couriers/merchant-preferences',\n        { action: 'remove_courier', courier_id: courierId },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n\n      toast.success('Courier removed successfully');\n      fetchMerchantCouriers();\n    } catch (error: any) {\n      toast.error(error.response?.data?.message || 'Failed to remove courier');\n    }\n  };\n\n  const handleToggleActive = async (courierId: string, isActive: boolean) => {\n    try {\n      // Get token from auth store\n      const authData = localStorage.getItem('performile-auth');\n      const token = authData ? JSON.parse(authData).state?.tokens?.accessToken : null;\n      await axios.post(\n        '/api/couriers/merchant-preferences',\n        { action: 'toggle_courier_active', courier_id: courierId, is_active: !isActive },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n\n      toast.success(isActive ? 'Courier disabled' : 'Courier enabled');\n      fetchMerchantCouriers();\n    } catch (error: any) {\n      toast.error(error.response?.data?.message || 'Failed to update courier');\n    }\n  };\n\n  const copyApiKey = () => {\n    navigator.clipboard.writeText(apiKey);\n    toast.success('API key copied to clipboard');\n  };\n\n  if (loading) {\n    return (\n      <Container maxWidth=\"lg\" sx={{ mt: 4, textAlign: 'center' }}>\n        <CircularProgress />\n      </Container>\n    );\n  }\n\n  return (\n    <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\n      <Box sx={{ mb: 4 }}>\n        <Typography variant=\"h4\" gutterBottom>\n          Courier Preferences\n        </Typography>\n        <Typography variant=\"body1\" color=\"text.secondary\">\n          Select which couriers to show in your checkout. Only selected couriers will be visible to your customers.\n        </Typography>\n      </Box>\n\n      {/* API Key Section */}\n      <Paper sx={{ p: 3, mb: 3 }}>\n        <Typography variant=\"h6\" gutterBottom>\n          API Key for Plugins\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\n          Use this API key to configure WooCommerce, Shopify, or other e-commerce plugins.\n        </Typography>\n        <Box sx={{ display: 'flex', gap: 2, alignItems: 'center' }}>\n          <TextField\n            fullWidth\n            value={apiKey}\n            InputProps={{ readOnly: true }}\n            size=\"small\"\n          />\n          <Button variant=\"outlined\" onClick={copyApiKey}>\n            Copy\n          </Button>\n        </Box>\n      </Paper>\n\n      {/* Selected Couriers */}\n      <Paper sx={{ p: 3, mb: 3 }}>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n          <Typography variant=\"h6\">\n            Your Couriers ({couriers.length})\n          </Typography>\n          <Button\n            variant=\"contained\"\n            startIcon={<Add />}\n            onClick={() => setAddDialogOpen(true)}\n          >\n            Add Courier\n          </Button>\n        </Box>\n\n        {couriers.length === 0 ? (\n          <Alert severity=\"info\">\n            No couriers selected. Click \"Add Courier\" to get started.\n          </Alert>\n        ) : (\n          <List>\n            {couriers.map((courier, index) => (\n              <Card key={courier.courier_id} sx={{ mb: 2 }}>\n                <CardContent>\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n                    <IconButton size=\"small\">\n                      <DragIndicator />\n                    </IconButton>\n\n                    <Avatar src={courier.logo_url || undefined} alt={courier.courier_name}>\n                      {courier.courier_name.charAt(0)}\n                    </Avatar>\n\n                    <Box sx={{ flexGrow: 1 }}>\n                      <Typography variant=\"subtitle1\" fontWeight={600}>\n                        {courier.custom_name || courier.courier_name}\n                      </Typography>\n                      <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                        <Star fontSize=\"small\" sx={{ color: 'warning.main' }} />\n                        <Typography variant=\"body2\" color=\"text.secondary\">\n                          {courier.trust_score.toFixed(1)} TrustScore\n                        </Typography>\n                        {courier.priority_level > 0 && (\n                          <Chip label={`Priority ${courier.priority_level}`} size=\"small\" color=\"primary\" />\n                        )}\n                      </Box>\n                    </Box>\n\n                    <Switch\n                      checked={courier.is_active}\n                      onChange={() => handleToggleActive(courier.courier_id, courier.is_active)}\n                    />\n\n                    <IconButton\n                      color=\"error\"\n                      onClick={() => handleRemoveCourier(courier.courier_id)}\n                    >\n                      <Delete />\n                    </IconButton>\n                  </Box>\n                </CardContent>\n              </Card>\n            ))}\n          </List>\n        )}\n      </Paper>\n\n      {/* Add Courier Dialog */}\n      <Dialog open={addDialogOpen} onClose={() => setAddDialogOpen(false)} maxWidth=\"sm\" fullWidth>\n        <DialogTitle>Add Courier</DialogTitle>\n        <DialogContent>\n          <List>\n            {availableCouriers\n              .filter(ac => !couriers.find(c => c.courier_id === ac.courier_id))\n              .map(courier => (\n                <ListItem key={courier.courier_id} button onClick={() => handleAddCourier(courier.courier_id)}>\n                  <ListItemAvatar>\n                    <Avatar src={courier.logo_url || undefined}>\n                      {courier.courier_name.charAt(0)}\n                    </Avatar>\n                  </ListItemAvatar>\n                  <ListItemText\n                    primary={courier.courier_name}\n                    secondary={`${courier.trust_score.toFixed(1)} TrustScore`}\n                  />\n                  <ListItemSecondaryAction>\n                    <IconButton edge=\"end\" onClick={() => handleAddCourier(courier.courier_id)}>\n                      <Add />\n                    </IconButton>\n                  </ListItemSecondaryAction>\n                </ListItem>\n              ))}\n          </List>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setAddDialogOpen(false)}>Close</Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* Instructions */}\n      <Alert severity=\"info\" sx={{ mt: 3 }}>\n        <Typography variant=\"subtitle2\" gutterBottom>\n          How it works:\n        </Typography>\n        <ul style={{ margin: 0, paddingLeft: 20 }}>\n          <li>Only selected couriers will show in your checkout</li>\n          <li>Drag to reorder (top couriers are recommended first)</li>\n          <li>Toggle switch to enable/disable without removing</li>\n          <li>Use API key to configure e-commerce plugins</li>\n        </ul>\n      </Alert>\n    </Container>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\settings\\MerchantCourierSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Avatar' is defined but never used.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":9},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","line":111,"column":6,"nodeType":"ArrayExpression","endLine":111,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [fetchData]","fix":{"range":[3057,3059],"text":"[fetchData]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":194,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":194,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5545,5548],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5545,5548],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":224,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":224,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6435,6438],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6435,6438],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":244,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":244,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7066,7069],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7066,7069],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":266,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":266,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7721,7724],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7721,7724],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getCourierLogo' is assigned a value but never used.","line":276,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":276,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'logoUrl' is defined but never used.","line":276,"column":48,"nodeType":"Identifier","messageId":"unusedVar","endLine":276,"endColumn":70},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":363,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":363,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10931,10934],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10931,10934],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":418,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":418,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12969,12972],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12969,12972],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":569,"column":16,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[18397,18445],"text":"\n            You&apos;ve reached your courier limit ("},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[18397,18445],"text":"\n            You&lsquo;ve reached your courier limit ("},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[18397,18445],"text":"\n            You&#39;ve reached your courier limit ("},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[18397,18445],"text":"\n            You&rsquo;ve reached your courier limit ("},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":582,"column":41,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[18761,18842],"text":"\n            No couriers selected. Click &quot;Add Courier\" to get started.\n          "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[18761,18842],"text":"\n            No couriers selected. Click &ldquo;Add Courier\" to get started.\n          "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[18761,18842],"text":"\n            No couriers selected. Click &#34;Add Courier\" to get started.\n          "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[18761,18842],"text":"\n            No couriers selected. Click &rdquo;Add Courier\" to get started.\n          "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":582,"column":53,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[18761,18842],"text":"\n            No couriers selected. Click \"Add Courier&quot; to get started.\n          "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[18761,18842],"text":"\n            No couriers selected. Click \"Add Courier&ldquo; to get started.\n          "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[18761,18842],"text":"\n            No couriers selected. Click \"Add Courier&#34; to get started.\n          "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[18761,18842],"text":"\n            No couriers selected. Click \"Add Courier&rdquo; to get started.\n          "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":799,"column":18,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[27981,28046],"text":"\n              You&apos;ve reached your courier limit. \n              "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[27981,28046],"text":"\n              You&lsquo;ve reached your courier limit. \n              "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[27981,28046],"text":"\n              You&#39;ve reached your courier limit. \n              "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[27981,28046],"text":"\n              You&rsquo;ve reached your courier limit. \n              "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":13,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  Container,\n  Paper,\n  Typography,\n  Box,\n  Button,\n  Switch,\n  TextField,\n  IconButton,\n  Card,\n  CardContent,\n  Avatar,\n  Chip,\n  Alert,\n  CircularProgress,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  ListItemSecondaryAction,\n  LinearProgress,\n  Grid,\n  Tooltip,\n  Badge,\n} from '@mui/material';\nimport { Star, DragIndicator, Edit, Check, Close, Add, Delete, Lock, Info, Upgrade, VpnKey, CheckCircle, Warning } from '@mui/icons-material';\nimport { CourierLogo } from '@/components/courier/CourierLogo';\nimport axios from 'axios';\nimport toast from 'react-hot-toast';\nimport { useNavigate } from 'react-router-dom';\n\ninterface Courier {\n  courier_id: string;\n  courier_name: string;\n  logo_url: string | null;\n  trust_score: number;\n  is_active: boolean;\n  display_order: number;\n  custom_name: string | null;\n  custom_description: string | null;\n  priority_level: number;\n  total_deliveries: number;\n  reliability_score: number;\n  courier_code: string;\n  credentials_configured: boolean;\n  has_credentials: boolean;\n  customer_number?: string;\n  credential_id?: string;\n}\n\ninterface AvailableCourier {\n  courier_id: string;\n  courier_name: string;\n  logo_url: string | null;\n  trust_score: number;\n  total_deliveries: number;\n  is_selected: boolean;\n  can_add_more: boolean;\n  courier_code: string;\n}\n\ninterface SubscriptionInfo {\n  subscription: {\n    plan_name: string;\n    tier: number;\n    max_couriers: number | null;\n    max_shops: number | null;\n    max_orders_per_month: number | null;\n    has_api_access: boolean;\n    has_advanced_analytics: boolean;\n    has_custom_templates: boolean;\n    has_white_label: boolean;\n  };\n  usage: {\n    couriers_selected: number;\n    shops_created: number;\n    can_add_courier: boolean;\n  };\n}\n\nexport const MerchantCourierSettings: React.FC = () => {\n  const navigate = useNavigate();\n  const [couriers, setCouriers] = useState<Courier[]>([]);\n  const [availableCouriers, setAvailableCouriers] = useState<AvailableCourier[]>([]);\n  const [subscriptionInfo, setSubscriptionInfo] = useState<SubscriptionInfo | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [addDialogOpen, setAddDialogOpen] = useState(false);\n  const [editingCourier, setEditingCourier] = useState<string | null>(null);\n  const [customName, setCustomName] = useState('');\n  const [apiKey, setApiKey] = useState('');\n  \n  // Credentials management state\n  const [credentialsModalOpen, setCredentialsModalOpen] = useState(false);\n  const [selectedCourierForCredentials, setSelectedCourierForCredentials] = useState<Courier | null>(null);\n  const [credentialsForm, setCredentialsForm] = useState({\n    customer_number: '',\n    api_key: '',\n    account_name: '',\n    base_url: ''\n  });\n  const [testingConnection, setTestingConnection] = useState(false);\n  const [testResult, setTestResult] = useState<{success: boolean; message: string} | null>(null);\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  const fetchData = async () => {\n    setLoading(true);\n    try {\n      await Promise.all([\n        fetchSubscriptionInfo(),\n        fetchSelectedCouriers(),\n        fetchAvailableCouriers(),\n        fetchApiKey(),\n      ]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchSubscriptionInfo = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.post(\n        '/api/couriers/merchant-preferences',\n        { action: 'get_subscription_info' },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      setSubscriptionInfo(response.data.data);\n    } catch (error) {\n      console.error('Error fetching subscription info:', error);\n    }\n  };\n\n  const fetchSelectedCouriers = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.post(\n        '/api/couriers/merchant-preferences',\n        { action: 'get_selected_couriers' },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      setCouriers(response.data.couriers || []);\n    } catch (error) {\n      console.error('Error fetching couriers:', error);\n      toast.error('Failed to load couriers');\n    }\n  };\n\n  const fetchAvailableCouriers = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.post(\n        '/api/couriers/merchant-preferences',\n        { action: 'get_available_couriers' },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      setAvailableCouriers(response.data.couriers || []);\n    } catch (error) {\n      console.error('Error fetching available couriers:', error);\n    }\n  };\n\n  const fetchApiKey = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.get('/api/auth/api-key', {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      setApiKey(response.data.api_key || '');\n    } catch (error) {\n      console.error('Error fetching API key:', error);\n    }\n  };\n\n  const handleAddCourier = async (courierId: string) => {\n    try {\n      const token = localStorage.getItem('token');\n      await axios.post(\n        '/api/couriers/merchant-preferences',\n        { action: 'add_courier', courier_id: courierId },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n\n      toast.success('Courier added successfully');\n      fetchData();\n      setAddDialogOpen(false);\n    } catch (error: any) {\n      const message = error.response?.data?.message || 'Failed to add courier';\n      toast.error(message);\n      \n      if (message.includes('limit reached')) {\n        // Show upgrade prompt\n        setTimeout(() => {\n          if (confirm('Upgrade your subscription to add more couriers?')) {\n            navigate('/pricing');\n          }\n        }, 1000);\n      }\n    }\n  };\n\n  const handleRemoveCourier = async (courierId: string) => {\n    if (!confirm('Are you sure you want to remove this courier?')) {\n      return;\n    }\n\n    try {\n      const token = localStorage.getItem('token');\n      await axios.post(\n        '/api/couriers/merchant-preferences',\n        { action: 'remove_courier', courier_id: courierId },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n\n      toast.success('Courier removed successfully');\n      fetchData();\n    } catch (error: any) {\n      toast.error(error.response?.data?.message || 'Failed to remove courier');\n    }\n  };\n\n  const handleToggleActive = async (courierId: string, isActive: boolean) => {\n    try {\n      const token = localStorage.getItem('token');\n      await axios.post(\n        '/api/couriers/merchant-preferences',\n        { \n          action: 'toggle_courier_active', \n          courier_id: courierId,\n          is_active: !isActive \n        },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n\n      toast.success(isActive ? 'Courier disabled' : 'Courier enabled');\n      fetchSelectedCouriers();\n    } catch (error: any) {\n      toast.error(error.response?.data?.message || 'Failed to update courier');\n    }\n  };\n\n  const handleSaveCustomName = async (courierId: string) => {\n    try {\n      const token = localStorage.getItem('token');\n      await axios.post(\n        '/api/couriers/merchant-preferences',\n        { \n          action: 'update_courier_settings', \n          courier_id: courierId,\n          custom_name: customName || null\n        },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n\n      toast.success('Courier name updated');\n      setEditingCourier(null);\n      setCustomName('');\n      fetchSelectedCouriers();\n    } catch (error: any) {\n      toast.error(error.response?.data?.message || 'Failed to update courier');\n    }\n  };\n\n  const copyApiKey = () => {\n    navigator.clipboard.writeText(apiKey);\n    toast.success('API key copied to clipboard');\n  };\n\n  const getCourierLogo = (courierName: string, logoUrl: string | null) => {\n    // Try to use the logo from courier-logos folder\n    const normalizedName = courierName.toLowerCase().replace(/\\s+/g, '_');\n    const logoPath = `/courier-logos/${normalizedName}_logo.jpeg`;\n    \n    // Return the logo path or fallback to logoUrl or first letter\n    return logoPath;\n  };\n\n  const getUsagePercentage = () => {\n    if (!subscriptionInfo) return 0;\n    const { max_couriers } = subscriptionInfo.subscription;\n    const { couriers_selected } = subscriptionInfo.usage;\n    \n    if (max_couriers === null) return 0; // Unlimited\n    return (couriers_selected / max_couriers) * 100;\n  };\n\n  const getUsageColor = () => {\n    const percentage = getUsagePercentage();\n    if (percentage >= 100) return 'error';\n    if (percentage >= 80) return 'warning';\n    return 'success';\n  };\n\n  // Credentials management functions\n  const getCourierBaseUrl = (courierCode: string): string => {\n    const urls: Record<string, string> = {\n      'POSTNORD': 'https://api2.postnord.com',\n      'BRING': 'https://api.bring.com',\n      'DHL': 'https://api-eu.dhl.com',\n      'UPS': 'https://onlinetools.ups.com',\n      'FEDEX': 'https://apis.fedex.com',\n      'INSTABOX': 'https://api.instabox.io',\n      'BUDBEE': 'https://api.budbee.com',\n      'PORTERBUDDY': 'https://api.porterbuddy.com'\n    };\n    return urls[courierCode] || '';\n  };\n\n  const handleAddCredentials = (courier: Courier) => {\n    setSelectedCourierForCredentials(courier);\n    setCredentialsForm({\n      customer_number: courier.customer_number || '',\n      api_key: '',\n      account_name: '',\n      base_url: getCourierBaseUrl(courier.courier_code)\n    });\n    setTestResult(null);\n    setCredentialsModalOpen(true);\n  };\n\n  const handleTestConnection = async () => {\n    setTestingConnection(true);\n    setTestResult(null);\n    try {\n      const token = localStorage.getItem('token');\n      \n      // If credential_id exists, test existing credentials\n      if (selectedCourierForCredentials?.credential_id) {\n        const response = await axios.post(\n          '/api/merchant/test-courier-connection',\n          {\n            credential_id: selectedCourierForCredentials.credential_id\n          },\n          { headers: { Authorization: `Bearer ${token}` } }\n        );\n        \n        setTestResult({\n          success: response.data.success,\n          message: response.data.message || 'Connection successful!'\n        });\n        \n        if (response.data.success) {\n          toast.success('Connection test passed!');\n        } else {\n          toast.error('Connection test failed');\n        }\n      } else {\n        // For new credentials, we'll simulate a test\n        // In production, you'd want to test before saving\n        setTestResult({\n          success: true,\n          message: 'Credentials format validated. Will test on save.'\n        });\n        toast.success('Credentials validated!');\n      }\n    } catch (error: any) {\n      setTestResult({\n        success: false,\n        message: error.response?.data?.message || 'Connection failed'\n      });\n      toast.error('Connection test failed');\n    } finally {\n      setTestingConnection(false);\n    }\n  };\n\n  const handleSaveCredentials = async () => {\n    if (!testResult?.success) {\n      toast.error('Please test the connection first');\n      return;\n    }\n    \n    try {\n      const token = localStorage.getItem('token');\n      const courierName = selectedCourierForCredentials?.courier_name || '';\n      \n      // Check if updating existing credentials or creating new\n      if (selectedCourierForCredentials?.credential_id) {\n        // Update existing credentials\n        await axios.put(\n          `/api/merchant/courier-credentials?id=${selectedCourierForCredentials.credential_id}`,\n          {\n            api_key: credentialsForm.api_key,\n            api_secret: credentialsForm.customer_number, // Using customer_number as api_secret\n            base_url: credentialsForm.base_url || `https://api.${courierName.toLowerCase()}.com`,\n            is_active: true\n          },\n          { headers: { Authorization: `Bearer ${token}` } }\n        );\n        toast.success('Credentials updated successfully');\n      } else {\n        // Create new credentials\n        await axios.post(\n          '/api/merchant/courier-credentials',\n          {\n            courier_name: courierName,\n            api_key: credentialsForm.api_key,\n            api_secret: credentialsForm.customer_number, // Using customer_number as api_secret\n            base_url: credentialsForm.base_url || `https://api.${courierName.toLowerCase()}.com`,\n            api_version: 'v1',\n            rate_limit_per_minute: 60\n          },\n          { headers: { Authorization: `Bearer ${token}` } }\n        );\n        toast.success('Credentials saved successfully');\n      }\n      \n      setCredentialsModalOpen(false);\n      setTestResult(null);\n      fetchSelectedCouriers(); // Refresh to show updated status\n    } catch (error: any) {\n      console.error('Error saving credentials:', error);\n      toast.error(error.response?.data?.error || 'Failed to save credentials');\n    }\n  };\n\n  if (loading) {\n    return (\n      <Container maxWidth=\"lg\" sx={{ mt: 4, textAlign: 'center' }}>\n        <CircularProgress />\n      </Container>\n    );\n  }\n\n  const maxCouriers = subscriptionInfo?.subscription?.max_couriers;\n  const couriersSelected = subscriptionInfo?.usage.couriers_selected || 0;\n  const canAddMore = subscriptionInfo?.usage.can_add_courier !== false;\n  const planName = subscriptionInfo?.subscription.plan_name || 'Free';\n  const tier = subscriptionInfo?.subscription.tier || 0;\n\n  return (\n    <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\n      <Box sx={{ mb: 4 }}>\n        <Typography variant=\"h4\" gutterBottom>\n          Courier Settings\n        </Typography>\n        <Typography variant=\"body1\" color=\"text.secondary\">\n          Manage which couriers appear in your checkout. Your customers will only see the couriers you select here.\n        </Typography>\n      </Box>\n\n      {/* Subscription Status */}\n      <Paper sx={{ p: 3, mb: 3, background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', color: 'white' }}>\n        <Grid container spacing={2} alignItems=\"center\">\n          <Grid item xs={12} md={8}>\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, mb: 2 }}>\n              <Chip \n                label={planName} \n                sx={{ \n                  bgcolor: 'rgba(255,255,255,0.2)', \n                  color: 'white',\n                  fontWeight: 600 \n                }} \n              />\n              {tier >= 2 && (\n                <Chip \n                  icon={<Star sx={{ color: 'gold !important' }} />}\n                  label=\"Premium\" \n                  sx={{ bgcolor: 'rgba(255,215,0,0.3)', color: 'white' }} \n                />\n              )}\n            </Box>\n            \n            <Typography variant=\"h6\" gutterBottom>\n              Courier Selection Limit\n            </Typography>\n            \n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, mb: 1 }}>\n              <Typography variant=\"h3\" fontWeight={700}>\n                {couriersSelected}\n              </Typography>\n              <Typography variant=\"h5\" sx={{ opacity: 0.8 }}>\n                / {maxCouriers === null ? '' : maxCouriers}\n              </Typography>\n            </Box>\n            \n            {maxCouriers !== null && (\n              <Box sx={{ mt: 2 }}>\n                <LinearProgress \n                  variant=\"determinate\" \n                  value={Math.min(getUsagePercentage(), 100)}\n                  sx={{\n                    height: 8,\n                    borderRadius: 4,\n                    bgcolor: 'rgba(255,255,255,0.2)',\n                    '& .MuiLinearProgress-bar': {\n                      bgcolor: getUsagePercentage() >= 100 ? '#ff5252' : 'white',\n                    }\n                  }}\n                />\n              </Box>\n            )}\n          </Grid>\n          \n          <Grid item xs={12} md={4} sx={{ textAlign: { xs: 'left', md: 'right' } }}>\n            {!canAddMore && (\n              <Button\n                variant=\"contained\"\n                size=\"large\"\n                startIcon={<Upgrade />}\n                onClick={() => navigate('/pricing')}\n                sx={{\n                  bgcolor: 'white',\n                  color: '#667eea',\n                  '&:hover': {\n                    bgcolor: 'rgba(255,255,255,0.9)',\n                  },\n                }}\n              >\n                Upgrade Plan\n              </Button>\n            )}\n            {maxCouriers !== null && maxCouriers !== undefined && canAddMore && (\n              <Typography variant=\"body2\" sx={{ opacity: 0.9 }}>\n                {maxCouriers - couriersSelected} slots remaining\n              </Typography>\n            )}\n          </Grid>\n        </Grid>\n      </Paper>\n\n      {/* API Key Section */}\n      <Paper sx={{ p: 3, mb: 3 }}>\n        <Typography variant=\"h6\" gutterBottom>\n          API Key for E-commerce Plugins\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\n          Use this API key to configure WooCommerce, Shopify, or other e-commerce plugins.\n        </Typography>\n        <Box sx={{ display: 'flex', gap: 2, alignItems: 'center' }}>\n          <TextField\n            fullWidth\n            value={apiKey}\n            InputProps={{ readOnly: true }}\n            size=\"small\"\n            type=\"password\"\n          />\n          <Button variant=\"outlined\" onClick={copyApiKey}>\n            Copy\n          </Button>\n        </Box>\n      </Paper>\n\n      {/* Selected Couriers */}\n      <Paper sx={{ p: 3, mb: 3 }}>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n          <Typography variant=\"h6\">\n            Your Selected Couriers ({couriers.length})\n          </Typography>\n          <Button\n            variant=\"contained\"\n            startIcon={canAddMore ? <Add /> : <Lock />}\n            onClick={() => canAddMore ? setAddDialogOpen(true) : navigate('/pricing')}\n            disabled={!canAddMore && maxCouriers !== null}\n          >\n            {canAddMore ? 'Add Courier' : 'Upgrade to Add More'}\n          </Button>\n        </Box>\n\n        {!canAddMore && maxCouriers !== null && (\n          <Alert severity=\"warning\" sx={{ mb: 2 }}>\n            You've reached your courier limit ({maxCouriers} couriers). \n            <Button \n              size=\"small\" \n              onClick={() => navigate('/pricing')}\n              sx={{ ml: 1 }}\n            >\n              Upgrade Now\n            </Button>\n          </Alert>\n        )}\n\n        {couriers.length === 0 ? (\n          <Alert severity=\"info\">\n            No couriers selected. Click \"Add Courier\" to get started.\n          </Alert>\n        ) : (\n          <List>\n            {couriers.map((courier) => (\n              <Card key={courier.courier_id} sx={{ mb: 2 }}>\n                <CardContent>\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n                    <IconButton size=\"small\" sx={{ cursor: 'grab' }}>\n                      <DragIndicator />\n                    </IconButton>\n\n                    <CourierLogo\n                      courierCode={courier.courier_code || courier.courier_name}\n                      courierName={courier.courier_name}\n                      size=\"large\"\n                      variant=\"rounded\"\n                    />\n\n                    <Box sx={{ flexGrow: 1 }}>\n                      {editingCourier === courier.courier_id ? (\n                        <Box sx={{ display: 'flex', gap: 1, alignItems: 'center' }}>\n                          <TextField\n                            size=\"small\"\n                            value={customName}\n                            onChange={(e) => setCustomName(e.target.value)}\n                            placeholder={courier.courier_name}\n                            autoFocus\n                          />\n                          <IconButton \n                            size=\"small\" \n                            color=\"primary\"\n                            onClick={() => handleSaveCustomName(courier.courier_id)}\n                          >\n                            <Check />\n                          </IconButton>\n                          <IconButton \n                            size=\"small\"\n                            onClick={() => {\n                              setEditingCourier(null);\n                              setCustomName('');\n                            }}\n                          >\n                            <Close />\n                          </IconButton>\n                        </Box>\n                      ) : (\n                        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                          <Typography variant=\"subtitle1\" fontWeight={600}>\n                            {courier.custom_name || courier.courier_name}\n                          </Typography>\n                          <Tooltip title=\"Edit display name\">\n                            <IconButton \n                              size=\"small\"\n                              onClick={() => {\n                                setEditingCourier(courier.courier_id);\n                                setCustomName(courier.custom_name || courier.courier_name);\n                              }}\n                            >\n                              <Edit fontSize=\"small\" />\n                            </IconButton>\n                          </Tooltip>\n                        </Box>\n                      )}\n                      \n                      <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, flexWrap: 'wrap' }}>\n                        <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.5 }}>\n                          <Star fontSize=\"small\" sx={{ color: 'warning.main' }} />\n                          <Typography variant=\"body2\" color=\"text.secondary\">\n                            {courier.trust_score.toFixed(1)} TrustScore\n                          </Typography>\n                        </Box>\n                        \n                        <Typography variant=\"body2\" color=\"text.secondary\">\n                           {courier.total_deliveries.toLocaleString()} deliveries\n                        </Typography>\n                        \n                        {courier.priority_level > 0 && (\n                          <Chip \n                            label={`Priority ${courier.priority_level}`} \n                            size=\"small\" \n                            color=\"primary\" \n                          />\n                        )}\n                        \n                        {/* Credentials Status */}\n                        {courier.credentials_configured ? (\n                          <Chip \n                            icon={<CheckCircle />}\n                            label={`Credentials: ${courier.customer_number}`}\n                            size=\"small\" \n                            color=\"success\" \n                          />\n                        ) : (\n                          <Chip \n                            icon={<Warning />}\n                            label=\"No Credentials\"\n                            size=\"small\" \n                            color=\"warning\" \n                          />\n                        )}\n                      </Box>\n                    </Box>\n\n                    {/* Credentials Button */}\n                    {courier.credentials_configured ? (\n                      <Tooltip title=\"Edit credentials\">\n                        <IconButton\n                          color=\"primary\"\n                          onClick={() => handleAddCredentials(courier)}\n                        >\n                          <VpnKey />\n                        </IconButton>\n                      </Tooltip>\n                    ) : (\n                      <Button\n                        variant=\"outlined\"\n                        size=\"small\"\n                        startIcon={<VpnKey />}\n                        onClick={() => handleAddCredentials(courier)}\n                        sx={{ mr: 1 }}\n                      >\n                        Add Credentials\n                      </Button>\n                    )}\n\n                    <Tooltip title={courier.is_active ? 'Disable' : 'Enable'}>\n                      <Switch\n                        checked={courier.is_active}\n                        onChange={() => handleToggleActive(courier.courier_id, courier.is_active)}\n                      />\n                    </Tooltip>\n\n                    <Tooltip title=\"Remove courier\">\n                      <IconButton\n                        color=\"error\"\n                        onClick={() => handleRemoveCourier(courier.courier_id)}\n                      >\n                        <Delete />\n                      </IconButton>\n                    </Tooltip>\n                  </Box>\n                </CardContent>\n              </Card>\n            ))}\n          </List>\n        )}\n      </Paper>\n\n      {/* Add Courier Dialog */}\n      <Dialog open={addDialogOpen} onClose={() => setAddDialogOpen(false)} maxWidth=\"md\" fullWidth>\n        <DialogTitle>\n          <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n            <Typography variant=\"h6\">Add Courier</Typography>\n            <Chip \n              label={`${couriersSelected} / ${maxCouriers === null ? '' : maxCouriers} selected`}\n              color={getUsageColor()}\n            />\n          </Box>\n        </DialogTitle>\n        <DialogContent>\n          <List>\n            {availableCouriers\n              .filter(ac => !ac.is_selected)\n              .map(courier => (\n                <ListItem \n                  key={courier.courier_id}\n                  button \n                  onClick={() => canAddMore && handleAddCourier(courier.courier_id)}\n                  disabled={!canAddMore}\n                >\n                  <ListItemAvatar>\n                    <Badge\n                      badgeContent={!canAddMore ? <Lock fontSize=\"small\" /> : null}\n                      color=\"error\"\n                    >\n                      <CourierLogo\n                        courierCode={courier.courier_code || courier.courier_name}\n                        courierName={courier.courier_name}\n                        size=\"medium\"\n                        variant=\"rounded\"\n                      />\n                    </Badge>\n                  </ListItemAvatar>\n                  <ListItemText\n                    primary={courier.courier_name}\n                    secondary={\n                      <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                        <Star fontSize=\"small\" sx={{ color: 'warning.main' }} />\n                        <span>{courier.trust_score.toFixed(1)} TrustScore</span>\n                        <span> {courier.total_deliveries.toLocaleString()} deliveries</span>\n                      </Box>\n                    }\n                  />\n                  <ListItemSecondaryAction>\n                    {canAddMore ? (\n                      <IconButton \n                        edge=\"end\" \n                        onClick={() => handleAddCourier(courier.courier_id)}\n                        color=\"primary\"\n                      >\n                        <Add />\n                      </IconButton>\n                    ) : (\n                      <Tooltip title=\"Upgrade to add more couriers\">\n                        <IconButton edge=\"end\" disabled>\n                          <Lock />\n                        </IconButton>\n                      </Tooltip>\n                    )}\n                  </ListItemSecondaryAction>\n                </ListItem>\n              ))}\n          </List>\n          \n          {!canAddMore && (\n            <Alert severity=\"warning\" sx={{ mt: 2 }}>\n              You've reached your courier limit. \n              <Button \n                size=\"small\" \n                onClick={() => {\n                  setAddDialogOpen(false);\n                  navigate('/pricing');\n                }}\n                sx={{ ml: 1 }}\n              >\n                Upgrade Now\n              </Button>\n            </Alert>\n          )}\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setAddDialogOpen(false)}>Close</Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* Credentials Modal */}\n      <Dialog \n        open={credentialsModalOpen} \n        onClose={() => setCredentialsModalOpen(false)} \n        maxWidth=\"sm\" \n        fullWidth\n      >\n        <DialogTitle>\n          {selectedCourierForCredentials?.credentials_configured ? 'Edit' : 'Add'} {selectedCourierForCredentials?.courier_name} Credentials\n        </DialogTitle>\n        <DialogContent>\n          <Box sx={{ mt: 2 }}>\n            <TextField\n              fullWidth\n              label=\"Customer Number\"\n              value={credentialsForm.customer_number}\n              onChange={(e) => setCredentialsForm({...credentialsForm, customer_number: e.target.value})}\n              required\n              sx={{ mb: 2 }}\n              helperText={`Find this in your ${selectedCourierForCredentials?.courier_name} portal`}\n            />\n            \n            <TextField\n              fullWidth\n              label=\"API Key\"\n              type=\"password\"\n              value={credentialsForm.api_key}\n              onChange={(e) => setCredentialsForm({...credentialsForm, api_key: e.target.value})}\n              required\n              sx={{ mb: 2 }}\n              helperText={`Generate this in ${selectedCourierForCredentials?.courier_name} Developer Portal`}\n            />\n            \n            <TextField\n              fullWidth\n              label=\"Account Name (optional)\"\n              value={credentialsForm.account_name}\n              onChange={(e) => setCredentialsForm({...credentialsForm, account_name: e.target.value})}\n              sx={{ mb: 2 }}\n              helperText=\"e.g., Main Account, Store 1\"\n            />\n            \n            <TextField\n              fullWidth\n              label=\"API Base URL\"\n              value={credentialsForm.base_url}\n              onChange={(e) => setCredentialsForm({...credentialsForm, base_url: e.target.value})}\n              sx={{ mb: 2 }}\n              helperText=\"API endpoint URL\"\n            />\n            \n            <Button\n              fullWidth\n              variant=\"outlined\"\n              onClick={handleTestConnection}\n              disabled={testingConnection || !credentialsForm.customer_number || !credentialsForm.api_key}\n              sx={{ mb: 2 }}\n            >\n              {testingConnection ? (\n                <>\n                  <CircularProgress size={20} sx={{ mr: 1 }} />\n                  Testing Connection...\n                </>\n              ) : (\n                'Test Connection'\n              )}\n            </Button>\n            \n            {testResult && (\n              <Alert severity={testResult.success ? 'success' : 'error'} sx={{ mb: 2 }}>\n                {testResult.message}\n              </Alert>\n            )}\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setCredentialsModalOpen(false)}>\n            Cancel\n          </Button>\n          <Button \n            onClick={handleSaveCredentials}\n            variant=\"contained\"\n            disabled={!testResult?.success}\n          >\n            Save Credentials\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* Instructions */}\n      <Alert severity=\"info\" icon={<Info />}>\n        <Typography variant=\"subtitle2\" gutterBottom fontWeight={600}>\n          How Courier Selection Works:\n        </Typography>\n        <ul style={{ margin: 0, paddingLeft: 20 }}>\n          <li>Only selected couriers will appear in your checkout</li>\n          <li>Drag to reorder (top couriers are recommended first)</li>\n          <li>Toggle switch to enable/disable without removing</li>\n          <li>Customize courier names for your customers</li>\n          <li>Add API credentials to enable booking with each courier</li>\n          <li>Your subscription plan determines how many couriers you can select</li>\n        </ul>\n      </Alert>\n    </Container>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\settings\\MerchantPricingSettings.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'fetchCourierMargins' and 'fetchPricingSettings'. Either include them or remove the dependency array.","line":121,"column":6,"nodeType":"ArrayExpression","endLine":121,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [fetchCourierMargins, fetchPricingSettings]","fix":{"range":[2861,2863],"text":"[fetchCourierMargins, fetchPricingSettings]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":134,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":134,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3228,3231],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3228,3231],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":153,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":153,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3772,3775],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3772,3775],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":172,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":172,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4316,4319],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4316,4319],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":205,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":205,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5256,5259],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5256,5259],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":235,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":235,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6112,6115],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6112,6115],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  Container,\n  Paper,\n  Typography,\n  Box,\n  Button,\n  TextField,\n  Switch,\n  FormControl,\n  FormControlLabel,\n  InputLabel,\n  Select,\n  MenuItem,\n  Grid,\n  Card,\n  CardContent,\n  Divider,\n  Alert,\n  CircularProgress,\n  Chip,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  IconButton,\n  Tooltip,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n} from '@mui/material';\nimport {\n  Save,\n  Info,\n  Edit,\n  TrendingUp,\n  AttachMoney,\n  Calculate,\n  LocalShipping,\n  Settings as SettingsIcon,\n} from '@mui/icons-material';\nimport axios from 'axios';\nimport toast from 'react-hot-toast';\nimport { useAuthStore } from '@/store/authStore';\n\ninterface PricingSettings {\n  default_margin_type: 'percentage' | 'fixed';\n  default_margin_value: number;\n  round_prices: boolean;\n  round_to: number;\n  min_delivery_price?: number;\n  max_delivery_price?: number;\n  show_original_price: boolean;\n  show_savings: boolean;\n  currency: string;\n}\n\ninterface CourierMargin {\n  courier_id: string;\n  courier_name: string;\n  logo_url: string | null;\n  courier_code: string;\n  services: ServiceMargin[];\n}\n\ninterface ServiceMargin {\n  service_type: string;\n  margin_type: 'percentage' | 'fixed';\n  margin_value: number;\n  fixed_price?: number;\n  is_active: boolean;\n}\n\ninterface PriceCalculation {\n  base_price: number;\n  margin_type: string;\n  margin_value: number;\n  margin_amount: number;\n  final_price: number;\n  rounded_price: number;\n  savings: number;\n}\n\nexport const MerchantPricingSettings: React.FC = () => {\n  const { token } = useAuthStore();\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  \n  // Pricing settings state\n  const [settings, setSettings] = useState<PricingSettings>({\n    default_margin_type: 'percentage',\n    default_margin_value: 15,\n    round_prices: true,\n    round_to: 5.00,\n    min_delivery_price: undefined,\n    max_delivery_price: undefined,\n    show_original_price: false,\n    show_savings: true,\n    currency: 'NOK'\n  });\n\n  // Courier margins state\n  const [courierMargins, setCourierMargins] = useState<CourierMargin[]>([]);\n  const [editingCourier, setEditingCourier] = useState<CourierMargin | null>(null);\n  const [editDialogOpen, setEditDialogOpen] = useState(false);\n\n  // Price calculator state\n  const [calculatorOpen, setCalculatorOpen] = useState(false);\n  const [calcBasePrice, setCalcBasePrice] = useState<number>(100);\n  const [calcCourierId, setCalcCourierId] = useState<string>('');\n  const [calcServiceType, setCalcServiceType] = useState<string>('express');\n  const [calculation, setCalculation] = useState<PriceCalculation | null>(null);\n  const [calculating, setCalculating] = useState(false);\n\n  useEffect(() => {\n    fetchPricingSettings();\n    fetchCourierMargins();\n  }, []);\n\n  const fetchPricingSettings = async () => {\n    try {\n      const response = await axios.get(\n        `${import.meta.env.VITE_API_URL}/api/merchant/pricing-settings`,\n        {\n          headers: { Authorization: `Bearer ${token}` }\n        }\n      );\n      if (response.data.success) {\n        setSettings(response.data.settings);\n      }\n    } catch (error: any) {\n      console.error('Failed to fetch pricing settings:', error);\n      toast.error('Failed to load pricing settings');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchCourierMargins = async () => {\n    try {\n      const response = await axios.get(\n        `${import.meta.env.VITE_API_URL}/api/merchant/courier-margins`,\n        {\n          headers: { Authorization: `Bearer ${token}` }\n        }\n      );\n      if (response.data.success) {\n        setCourierMargins(response.data.couriers);\n      }\n    } catch (error: any) {\n      console.error('Failed to fetch courier margins:', error);\n    }\n  };\n\n  const handleSaveSettings = async () => {\n    setSaving(true);\n    try {\n      const response = await axios.post(\n        `${import.meta.env.VITE_API_URL}/api/merchant/pricing-settings`,\n        settings,\n        {\n          headers: { Authorization: `Bearer ${token}` }\n        }\n      );\n      if (response.data.success) {\n        toast.success('Pricing settings saved successfully');\n        setSettings(response.data.settings);\n      }\n    } catch (error: any) {\n      console.error('Failed to save pricing settings:', error);\n      toast.error(error.response?.data?.error || 'Failed to save settings');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleEditCourier = (courier: CourierMargin) => {\n    setEditingCourier(courier);\n    setEditDialogOpen(true);\n  };\n\n  const handleSaveCourierMargins = async () => {\n    if (!editingCourier) return;\n\n    setSaving(true);\n    try {\n      const response = await axios.post(\n        `${import.meta.env.VITE_API_URL}/api/merchant/courier-margins`,\n        {\n          courier_id: editingCourier.courier_id,\n          services: editingCourier.services\n        },\n        {\n          headers: { Authorization: `Bearer ${token}` }\n        }\n      );\n      if (response.data.success) {\n        toast.success('Courier margins saved successfully');\n        setEditDialogOpen(false);\n        fetchCourierMargins();\n      }\n    } catch (error: any) {\n      console.error('Failed to save courier margins:', error);\n      toast.error(error.response?.data?.error || 'Failed to save margins');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleCalculatePrice = async () => {\n    if (!calcCourierId || !calcBasePrice) {\n      toast.error('Please select courier and enter base price');\n      return;\n    }\n\n    setCalculating(true);\n    try {\n      const response = await axios.post(\n        `${import.meta.env.VITE_API_URL}/api/merchant/calculate-price`,\n        {\n          courier_id: calcCourierId,\n          service_type: calcServiceType,\n          base_price: calcBasePrice\n        },\n        {\n          headers: { Authorization: `Bearer ${token}` }\n        }\n      );\n      if (response.data.success) {\n        setCalculation(response.data.calculation);\n      }\n    } catch (error: any) {\n      console.error('Failed to calculate price:', error);\n      toast.error('Failed to calculate price');\n    } finally {\n      setCalculating(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight=\"400px\">\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  return (\n    <Container maxWidth=\"lg\" sx={{ py: 4 }}>\n      {/* Header */}\n      <Box mb={4}>\n        <Typography variant=\"h4\" gutterBottom>\n          <AttachMoney sx={{ mr: 1, verticalAlign: 'middle' }} />\n          Pricing & Margins Settings\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\">\n          Configure your pricing strategy and profit margins for delivery services\n        </Typography>\n      </Box>\n\n      {/* Global Margin Settings */}\n      <Paper sx={{ p: 3, mb: 3 }}>\n        <Box display=\"flex\" alignItems=\"center\" mb={3}>\n          <TrendingUp sx={{ mr: 1 }} />\n          <Typography variant=\"h6\">Global Margin Settings</Typography>\n        </Box>\n\n        <Grid container spacing={3}>\n          <Grid item xs={12} md={6}>\n            <FormControl fullWidth>\n              <InputLabel>Margin Type</InputLabel>\n              <Select\n                value={settings.default_margin_type}\n                label=\"Margin Type\"\n                onChange={(e) => setSettings({ \n                  ...settings, \n                  default_margin_type: e.target.value as 'percentage' | 'fixed' \n                })}\n              >\n                <MenuItem value=\"percentage\">Percentage (%)</MenuItem>\n                <MenuItem value=\"fixed\">Fixed Amount</MenuItem>\n              </Select>\n            </FormControl>\n          </Grid>\n\n          <Grid item xs={12} md={6}>\n            <TextField\n              fullWidth\n              label={settings.default_margin_type === 'percentage' ? 'Margin (%)' : `Margin (${settings.currency})`}\n              type=\"number\"\n              value={settings.default_margin_value}\n              onChange={(e) => setSettings({ \n                ...settings, \n                default_margin_value: parseFloat(e.target.value) || 0 \n              })}\n              InputProps={{\n                endAdornment: settings.default_margin_type === 'percentage' ? '%' : settings.currency\n              }}\n            />\n          </Grid>\n\n          <Grid item xs={12}>\n            <Alert severity=\"info\" icon={<Info />}>\n              This margin will be applied to all couriers by default. You can override it per courier below.\n            </Alert>\n          </Grid>\n        </Grid>\n      </Paper>\n\n      {/* Price Rounding Settings */}\n      <Paper sx={{ p: 3, mb: 3 }}>\n        <Box display=\"flex\" alignItems=\"center\" mb={3}>\n          <Calculate sx={{ mr: 1 }} />\n          <Typography variant=\"h6\">Price Rounding</Typography>\n        </Box>\n\n        <Grid container spacing={3}>\n          <Grid item xs={12}>\n            <FormControlLabel\n              control={\n                <Switch\n                  checked={settings.round_prices}\n                  onChange={(e) => setSettings({ \n                    ...settings, \n                    round_prices: e.target.checked \n                  })}\n                />\n              }\n              label=\"Round prices to nearest value\"\n            />\n          </Grid>\n\n          {settings.round_prices && (\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Round To\"\n                type=\"number\"\n                value={settings.round_to}\n                onChange={(e) => setSettings({ \n                  ...settings, \n                  round_to: parseFloat(e.target.value) || 1 \n                })}\n                helperText=\"Round to nearest 1, 5, 10, etc.\"\n                InputProps={{\n                  endAdornment: settings.currency\n                }}\n              />\n            </Grid>\n          )}\n\n          <Grid item xs={12} md={6}>\n            <TextField\n              fullWidth\n              label=\"Minimum Delivery Price (Optional)\"\n              type=\"number\"\n              value={settings.min_delivery_price || ''}\n              onChange={(e) => setSettings({ \n                ...settings, \n                min_delivery_price: e.target.value ? parseFloat(e.target.value) : undefined \n              })}\n              InputProps={{\n                endAdornment: settings.currency\n              }}\n            />\n          </Grid>\n\n          <Grid item xs={12} md={6}>\n            <TextField\n              fullWidth\n              label=\"Maximum Delivery Price (Optional)\"\n              type=\"number\"\n              value={settings.max_delivery_price || ''}\n              onChange={(e) => setSettings({ \n                ...settings, \n                max_delivery_price: e.target.value ? parseFloat(e.target.value) : undefined \n              })}\n              InputProps={{\n                endAdornment: settings.currency\n              }}\n            />\n          </Grid>\n        </Grid>\n      </Paper>\n\n      {/* Display Settings */}\n      <Paper sx={{ p: 3, mb: 3 }}>\n        <Box display=\"flex\" alignItems=\"center\" mb={3}>\n          <SettingsIcon sx={{ mr: 1 }} />\n          <Typography variant=\"h6\">Display Settings</Typography>\n        </Box>\n\n        <Grid container spacing={2}>\n          <Grid item xs={12}>\n            <FormControlLabel\n              control={\n                <Switch\n                  checked={settings.show_original_price}\n                  onChange={(e) => setSettings({ \n                    ...settings, \n                    show_original_price: e.target.checked \n                  })}\n                />\n              }\n              label=\"Show original price (before margin)\"\n            />\n          </Grid>\n\n          <Grid item xs={12}>\n            <FormControlLabel\n              control={\n                <Switch\n                  checked={settings.show_savings}\n                  onChange={(e) => setSettings({ \n                    ...settings, \n                    show_savings: e.target.checked \n                  })}\n                />\n              }\n              label=\"Show savings amount\"\n            />\n          </Grid>\n        </Grid>\n      </Paper>\n\n      {/* Save Button */}\n      <Box display=\"flex\" justifyContent=\"flex-end\" mb={4}>\n        <Button\n          variant=\"contained\"\n          size=\"large\"\n          startIcon={saving ? <CircularProgress size={20} /> : <Save />}\n          onClick={handleSaveSettings}\n          disabled={saving}\n        >\n          Save Settings\n        </Button>\n      </Box>\n\n      {/* Courier-Specific Margins */}\n      <Paper sx={{ p: 3, mb: 3 }}>\n        <Box display=\"flex\" alignItems=\"center\" justifyContent=\"space-between\" mb={3}>\n          <Box display=\"flex\" alignItems=\"center\">\n            <LocalShipping sx={{ mr: 1 }} />\n            <Typography variant=\"h6\">Courier-Specific Margins</Typography>\n          </Box>\n          <Button\n            variant=\"outlined\"\n            startIcon={<Calculate />}\n            onClick={() => setCalculatorOpen(true)}\n          >\n            Price Calculator\n          </Button>\n        </Box>\n\n        {courierMargins.length === 0 ? (\n          <Alert severity=\"info\">\n            No couriers selected yet. Go to Courier Preferences to select couriers first.\n          </Alert>\n        ) : (\n          <TableContainer>\n            <Table>\n              <TableHead>\n                <TableRow>\n                  <TableCell>Courier</TableCell>\n                  <TableCell>Services Configured</TableCell>\n                  <TableCell>Using Global</TableCell>\n                  <TableCell align=\"right\">Actions</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {courierMargins.map((courier) => (\n                  <TableRow key={courier.courier_id}>\n                    <TableCell>\n                      <Box display=\"flex\" alignItems=\"center\">\n                        {courier.logo_url && (\n                          <img \n                            src={courier.logo_url} \n                            alt={courier.courier_name}\n                            style={{ width: 40, height: 40, marginRight: 12, objectFit: 'contain' }}\n                          />\n                        )}\n                        <Typography>{courier.courier_name}</Typography>\n                      </Box>\n                    </TableCell>\n                    <TableCell>\n                      {courier.services.length > 0 ? (\n                        <Box display=\"flex\" gap={0.5} flexWrap=\"wrap\">\n                          {courier.services.map((service) => (\n                            <Chip \n                              key={service.service_type}\n                              label={service.service_type}\n                              size=\"small\"\n                              color=\"primary\"\n                              variant=\"outlined\"\n                            />\n                          ))}\n                        </Box>\n                      ) : (\n                        <Typography variant=\"body2\" color=\"text.secondary\">\n                          None\n                        </Typography>\n                      )}\n                    </TableCell>\n                    <TableCell>\n                      {courier.services.length === 0 ? (\n                        <Chip label=\"Yes\" size=\"small\" color=\"default\" />\n                      ) : (\n                        <Chip label=\"Custom\" size=\"small\" color=\"primary\" />\n                      )}\n                    </TableCell>\n                    <TableCell align=\"right\">\n                      <Tooltip title=\"Edit margins\">\n                        <IconButton onClick={() => handleEditCourier(courier)}>\n                          <Edit />\n                        </IconButton>\n                      </Tooltip>\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </TableContainer>\n        )}\n      </Paper>\n\n      {/* Edit Courier Margins Dialog */}\n      <Dialog \n        open={editDialogOpen} \n        onClose={() => setEditDialogOpen(false)}\n        maxWidth=\"md\"\n        fullWidth\n      >\n        <DialogTitle>\n          Edit Margins - {editingCourier?.courier_name}\n        </DialogTitle>\n        <DialogContent>\n          <Box py={2}>\n            <Alert severity=\"info\" sx={{ mb: 3 }}>\n              Configure service-specific margins. Leave empty to use global settings.\n            </Alert>\n\n            <Grid container spacing={2}>\n              {['express', 'standard', 'economy', 'same_day'].map((serviceType) => {\n                const existingService = editingCourier?.services.find(\n                  s => s.service_type === serviceType\n                );\n\n                return (\n                  <Grid item xs={12} key={serviceType}>\n                    <Card variant=\"outlined\">\n                      <CardContent>\n                        <Typography variant=\"subtitle1\" gutterBottom sx={{ textTransform: 'capitalize' }}>\n                          {serviceType.replace('_', ' ')}\n                        </Typography>\n                        <Grid container spacing={2}>\n                          <Grid item xs={6}>\n                            <FormControl fullWidth size=\"small\">\n                              <InputLabel>Type</InputLabel>\n                              <Select\n                                value={existingService?.margin_type || 'percentage'}\n                                label=\"Type\"\n                                onChange={(e) => {\n                                  if (!editingCourier) return;\n                                  const services = [...editingCourier.services];\n                                  const index = services.findIndex(s => s.service_type === serviceType);\n                                  if (index >= 0) {\n                                    services[index].margin_type = e.target.value as 'percentage' | 'fixed';\n                                  } else {\n                                    services.push({\n                                      service_type: serviceType,\n                                      margin_type: e.target.value as 'percentage' | 'fixed',\n                                      margin_value: 0,\n                                      is_active: true\n                                    });\n                                  }\n                                  setEditingCourier({ ...editingCourier, services });\n                                }}\n                              >\n                                <MenuItem value=\"percentage\">Percentage</MenuItem>\n                                <MenuItem value=\"fixed\">Fixed</MenuItem>\n                              </Select>\n                            </FormControl>\n                          </Grid>\n                          <Grid item xs={6}>\n                            <TextField\n                              fullWidth\n                              size=\"small\"\n                              label=\"Value\"\n                              type=\"number\"\n                              value={existingService?.margin_value || 0}\n                              onChange={(e) => {\n                                if (!editingCourier) return;\n                                const services = [...editingCourier.services];\n                                const index = services.findIndex(s => s.service_type === serviceType);\n                                if (index >= 0) {\n                                  services[index].margin_value = parseFloat(e.target.value) || 0;\n                                } else {\n                                  services.push({\n                                    service_type: serviceType,\n                                    margin_type: 'percentage',\n                                    margin_value: parseFloat(e.target.value) || 0,\n                                    is_active: true\n                                  });\n                                }\n                                setEditingCourier({ ...editingCourier, services });\n                              }}\n                            />\n                          </Grid>\n                        </Grid>\n                      </CardContent>\n                    </Card>\n                  </Grid>\n                );\n              })}\n            </Grid>\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setEditDialogOpen(false)}>Cancel</Button>\n          <Button \n            variant=\"contained\" \n            onClick={handleSaveCourierMargins}\n            disabled={saving}\n            startIcon={saving ? <CircularProgress size={20} /> : <Save />}\n          >\n            Save Margins\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* Price Calculator Dialog */}\n      <Dialog \n        open={calculatorOpen} \n        onClose={() => setCalculatorOpen(false)}\n        maxWidth=\"sm\"\n        fullWidth\n      >\n        <DialogTitle>Price Calculator</DialogTitle>\n        <DialogContent>\n          <Box py={2}>\n            <Grid container spacing={2}>\n              <Grid item xs={12}>\n                <FormControl fullWidth>\n                  <InputLabel>Courier</InputLabel>\n                  <Select\n                    value={calcCourierId}\n                    label=\"Courier\"\n                    onChange={(e) => setCalcCourierId(e.target.value)}\n                  >\n                    {courierMargins.map((courier) => (\n                      <MenuItem key={courier.courier_id} value={courier.courier_id}>\n                        {courier.courier_name}\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n              </Grid>\n\n              <Grid item xs={12}>\n                <FormControl fullWidth>\n                  <InputLabel>Service Type</InputLabel>\n                  <Select\n                    value={calcServiceType}\n                    label=\"Service Type\"\n                    onChange={(e) => setCalcServiceType(e.target.value)}\n                  >\n                    <MenuItem value=\"express\">Express</MenuItem>\n                    <MenuItem value=\"standard\">Standard</MenuItem>\n                    <MenuItem value=\"economy\">Economy</MenuItem>\n                    <MenuItem value=\"same_day\">Same Day</MenuItem>\n                  </Select>\n                </FormControl>\n              </Grid>\n\n              <Grid item xs={12}>\n                <TextField\n                  fullWidth\n                  label=\"Base Price\"\n                  type=\"number\"\n                  value={calcBasePrice}\n                  onChange={(e) => setCalcBasePrice(parseFloat(e.target.value) || 0)}\n                  InputProps={{\n                    endAdornment: settings.currency\n                  }}\n                />\n              </Grid>\n\n              <Grid item xs={12}>\n                <Button\n                  fullWidth\n                  variant=\"contained\"\n                  onClick={handleCalculatePrice}\n                  disabled={calculating}\n                  startIcon={calculating ? <CircularProgress size={20} /> : <Calculate />}\n                >\n                  Calculate\n                </Button>\n              </Grid>\n\n              {calculation && (\n                <Grid item xs={12}>\n                  <Card variant=\"outlined\">\n                    <CardContent>\n                      <Typography variant=\"h6\" gutterBottom>Calculation Result</Typography>\n                      <Divider sx={{ my: 1 }} />\n                      <Box display=\"flex\" justifyContent=\"space-between\" py={1}>\n                        <Typography>Base Price:</Typography>\n                        <Typography fontWeight=\"bold\">\n                          {calculation.base_price.toFixed(2)} {settings.currency}\n                        </Typography>\n                      </Box>\n                      <Box display=\"flex\" justifyContent=\"space-between\" py={1}>\n                        <Typography>Margin ({calculation.margin_type}):</Typography>\n                        <Typography>\n                          {calculation.margin_value.toFixed(2)}\n                          {calculation.margin_type === 'percentage' ? '%' : ` ${settings.currency}`}\n                        </Typography>\n                      </Box>\n                      <Box display=\"flex\" justifyContent=\"space-between\" py={1}>\n                        <Typography>Margin Amount:</Typography>\n                        <Typography color=\"success.main\">\n                          +{calculation.margin_amount.toFixed(2)} {settings.currency}\n                        </Typography>\n                      </Box>\n                      <Divider sx={{ my: 1 }} />\n                      <Box display=\"flex\" justifyContent=\"space-between\" py={1}>\n                        <Typography variant=\"h6\">Final Price:</Typography>\n                        <Typography variant=\"h6\" color=\"primary\">\n                          {calculation.rounded_price.toFixed(2)} {settings.currency}\n                        </Typography>\n                      </Box>\n                    </CardContent>\n                  </Card>\n                </Grid>\n              )}\n            </Grid>\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setCalculatorOpen(false)}>Close</Button>\n        </DialogActions>\n      </Dialog>\n    </Container>\n  );\n};\n\nexport default MerchantPricingSettings;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\settings\\NotificationPreferences.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Divider' is defined but never used.","line":10,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":10},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has a missing dependency: 'localPreferences'. Either include it or remove the dependency array.","line":75,"column":6,"nodeType":"ArrayExpression","endLine":75,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [localPreferences, preferences]","fix":{"range":[2327,2340],"text":"[localPreferences, preferences]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Switch,\n  FormControlLabel,\n  FormGroup,\n  Divider,\n  Button,\n  Alert,\n  CircularProgress,\n  Accordion,\n  AccordionSummary,\n  AccordionDetails,\n  TextField,\n  Grid,\n} from '@mui/material';\nimport {\n  ExpandMore as ExpandMoreIcon,\n  Save as SaveIcon,\n} from '@mui/icons-material';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport { toast } from 'react-hot-toast';\n\ninterface NotificationPreferences {\n  preference_id: string;\n  email_enabled: boolean;\n  push_enabled: boolean;\n  sms_enabled: boolean;\n  preferences: {\n    [key: string]: {\n      email: boolean;\n      push: boolean;\n      sms: boolean;\n    };\n  };\n  quiet_hours_enabled: boolean;\n  quiet_hours_start: string | null;\n  quiet_hours_end: string | null;\n}\n\nconst notificationTypes = [\n  { key: 'new_order', label: 'New Order', description: 'When you receive a new order' },\n  { key: 'order_status', label: 'Order Status', description: 'When order status changes' },\n  { key: 'delivery_update', label: 'Delivery Update', description: 'When delivery status changes' },\n  { key: 'payment_received', label: 'Payment Received', description: 'When payment is confirmed' },\n  { key: 'new_review', label: 'New Review', description: 'When you receive a new review' },\n  { key: 'proximity_match', label: 'Proximity Match', description: 'When a nearby courier is found' },\n  { key: 'system_alert', label: 'System Alert', description: 'Important system notifications' },\n];\n\nexport const NotificationPreferences: React.FC = () => {\n  const queryClient = useQueryClient();\n  const [hasChanges, setHasChanges] = useState(false);\n\n  // Fetch preferences\n  const { data: preferences, isLoading, error } = useQuery({\n    queryKey: ['notification-preferences'],\n    queryFn: async () => {\n      const response = await apiClient.get('/notifications/preferences');\n      return response.data.data as NotificationPreferences;\n    },\n  });\n\n  const [localPreferences, setLocalPreferences] = useState<NotificationPreferences | null>(null);\n\n  // Initialize local state when data loads\n  React.useEffect(() => {\n    if (preferences && !localPreferences) {\n      setLocalPreferences(preferences);\n    }\n  }, [preferences]);\n\n  // Update preferences mutation\n  const updateMutation = useMutation({\n    mutationFn: async (data: Partial<NotificationPreferences>) => {\n      await apiClient.put('/notifications/preferences', data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['notification-preferences'] });\n      toast.success('Preferences saved successfully');\n      setHasChanges(false);\n    },\n    onError: () => {\n      toast.error('Failed to save preferences');\n    },\n  });\n\n  const handleChannelToggle = (channel: 'email_enabled' | 'push_enabled' | 'sms_enabled') => {\n    if (!localPreferences) return;\n    setLocalPreferences({\n      ...localPreferences,\n      [channel]: !localPreferences[channel],\n    });\n    setHasChanges(true);\n  };\n\n  const handleTypeToggle = (type: string, channel: 'email' | 'push' | 'sms') => {\n    if (!localPreferences) return;\n    setLocalPreferences({\n      ...localPreferences,\n      preferences: {\n        ...localPreferences.preferences,\n        [type]: {\n          ...localPreferences.preferences[type],\n          [channel]: !localPreferences.preferences[type]?.[channel],\n        },\n      },\n    });\n    setHasChanges(true);\n  };\n\n  const handleQuietHoursToggle = () => {\n    if (!localPreferences) return;\n    setLocalPreferences({\n      ...localPreferences,\n      quiet_hours_enabled: !localPreferences.quiet_hours_enabled,\n    });\n    setHasChanges(true);\n  };\n\n  const handleQuietHoursChange = (field: 'quiet_hours_start' | 'quiet_hours_end', value: string) => {\n    if (!localPreferences) return;\n    setLocalPreferences({\n      ...localPreferences,\n      [field]: value,\n    });\n    setHasChanges(true);\n  };\n\n  const handleSave = () => {\n    if (!localPreferences) return;\n    updateMutation.mutate(localPreferences);\n  };\n\n  const handleReset = () => {\n    if (preferences) {\n      setLocalPreferences(preferences);\n      setHasChanges(false);\n    }\n  };\n\n  if (isLoading || !localPreferences) {\n    return (\n      <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '60vh' }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  if (error) {\n    return (\n      <Box sx={{ p: 3 }}>\n        <Alert severity=\"error\">Failed to load preferences. Please try again.</Alert>\n      </Box>\n    );\n  }\n\n  return (\n    <Box sx={{ p: 3 }}>\n      <Typography variant=\"h4\" gutterBottom>\n         Notification Preferences\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        Manage how and when you receive notifications\n      </Typography>\n\n      {hasChanges && (\n        <Alert severity=\"info\" sx={{ mb: 3 }}>\n          You have unsaved changes\n        </Alert>\n      )}\n\n      <Card sx={{ mb: 3 }}>\n        <CardContent>\n          <Typography variant=\"h6\" gutterBottom>\n            Notification Channels\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n            Enable or disable notification channels globally\n          </Typography>\n\n          <FormGroup>\n            <FormControlLabel\n              control={\n                <Switch\n                  checked={localPreferences.email_enabled}\n                  onChange={() => handleChannelToggle('email_enabled')}\n                />\n              }\n              label=\"Email Notifications\"\n            />\n            <FormControlLabel\n              control={\n                <Switch\n                  checked={localPreferences.push_enabled}\n                  onChange={() => handleChannelToggle('push_enabled')}\n                />\n              }\n              label=\"Push Notifications\"\n            />\n            <FormControlLabel\n              control={\n                <Switch\n                  checked={localPreferences.sms_enabled}\n                  onChange={() => handleChannelToggle('sms_enabled')}\n                />\n              }\n              label=\"SMS Notifications\"\n            />\n          </FormGroup>\n        </CardContent>\n      </Card>\n\n      <Card sx={{ mb: 3 }}>\n        <CardContent>\n          <Typography variant=\"h6\" gutterBottom>\n            Notification Types\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n            Customize notifications for each event type\n          </Typography>\n\n          {notificationTypes.map((type) => (\n            <Accordion key={type.key}>\n              <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n                <Box>\n                  <Typography variant=\"body1\" fontWeight=\"medium\">\n                    {type.label}\n                  </Typography>\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    {type.description}\n                  </Typography>\n                </Box>\n              </AccordionSummary>\n              <AccordionDetails>\n                <FormGroup>\n                  <FormControlLabel\n                    control={\n                      <Switch\n                        checked={localPreferences.preferences[type.key]?.email || false}\n                        onChange={() => handleTypeToggle(type.key, 'email')}\n                        disabled={!localPreferences.email_enabled}\n                      />\n                    }\n                    label=\"Email\"\n                  />\n                  <FormControlLabel\n                    control={\n                      <Switch\n                        checked={localPreferences.preferences[type.key]?.push || false}\n                        onChange={() => handleTypeToggle(type.key, 'push')}\n                        disabled={!localPreferences.push_enabled}\n                      />\n                    }\n                    label=\"Push\"\n                  />\n                  <FormControlLabel\n                    control={\n                      <Switch\n                        checked={localPreferences.preferences[type.key]?.sms || false}\n                        onChange={() => handleTypeToggle(type.key, 'sms')}\n                        disabled={!localPreferences.sms_enabled}\n                      />\n                    }\n                    label=\"SMS\"\n                  />\n                </FormGroup>\n              </AccordionDetails>\n            </Accordion>\n          ))}\n        </CardContent>\n      </Card>\n\n      <Card sx={{ mb: 3 }}>\n        <CardContent>\n          <Typography variant=\"h6\" gutterBottom>\n            Quiet Hours\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n            Mute notifications during specific hours\n          </Typography>\n\n          <FormControlLabel\n            control={\n              <Switch\n                checked={localPreferences.quiet_hours_enabled}\n                onChange={handleQuietHoursToggle}\n              />\n            }\n            label=\"Enable Quiet Hours\"\n            sx={{ mb: 2 }}\n          />\n\n          {localPreferences.quiet_hours_enabled && (\n            <Grid container spacing={2}>\n              <Grid item xs={12} sm={6}>\n                <TextField\n                  fullWidth\n                  type=\"time\"\n                  label=\"Start Time\"\n                  value={localPreferences.quiet_hours_start || '22:00'}\n                  onChange={(e) => handleQuietHoursChange('quiet_hours_start', e.target.value)}\n                  InputLabelProps={{ shrink: true }}\n                />\n              </Grid>\n              <Grid item xs={12} sm={6}>\n                <TextField\n                  fullWidth\n                  type=\"time\"\n                  label=\"End Time\"\n                  value={localPreferences.quiet_hours_end || '08:00'}\n                  onChange={(e) => handleQuietHoursChange('quiet_hours_end', e.target.value)}\n                  InputLabelProps={{ shrink: true }}\n                />\n              </Grid>\n            </Grid>\n          )}\n        </CardContent>\n      </Card>\n\n      <Box sx={{ display: 'flex', gap: 2, justifyContent: 'flex-end' }}>\n        <Button\n          variant=\"outlined\"\n          onClick={handleReset}\n          disabled={!hasChanges || updateMutation.isPending}\n        >\n          Reset\n        </Button>\n        <Button\n          variant=\"contained\"\n          startIcon={<SaveIcon />}\n          onClick={handleSave}\n          disabled={!hasChanges || updateMutation.isPending}\n        >\n          {updateMutation.isPending ? 'Saving...' : 'Save Preferences'}\n        </Button>\n      </Box>\n    </Box>\n  );\n};\n\nexport default NotificationPreferences;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\settings\\ProximitySettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'IconButton' is defined but never used.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MapIcon' is defined but never used.","line":23,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":49,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1089,1092],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1089,1092],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'refetch' is assigned a value but never used.","line":65,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":65,"endColumn":45},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":71,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1997,2000],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1997,2000],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":136,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":136,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3842,3845],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3842,3845],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  TextField,\n  Button,\n  Switch,\n  FormControlLabel,\n  Grid,\n  Alert,\n  Chip,\n  IconButton,\n  Divider,\n  CircularProgress,\n} from '@mui/material';\nimport {\n  Save as SaveIcon,\n  Add as AddIcon,\n  Delete as DeleteIcon,\n  MyLocation as LocationIcon,\n  Map as MapIcon,\n} from '@mui/icons-material';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\nimport { useAuthStore } from '@/store/authStore';\nimport { ProximityMap } from '@/components/maps/ProximityMap';\n\ninterface PostalCodeRange {\n  start: string;\n  end: string;\n}\n\ninterface ProximitySettings {\n  setting_id?: string;\n  entity_type: string;\n  entity_id: string;\n  delivery_range_km: number;\n  postal_code_ranges: PostalCodeRange[];\n  latitude?: number;\n  longitude?: number;\n  address?: string;\n  city?: string;\n  country?: string;\n  postal_code?: string;\n  auto_accept_within_range: boolean;\n  notify_on_nearby_orders: boolean;\n  priority_zones: any[];\n  is_active: boolean;\n}\n\nexport const ProximitySettings: React.FC = () => {\n  const { user } = useAuthStore();\n  const queryClient = useQueryClient();\n  const [hasChanges, setHasChanges] = useState(false);\n  const [newRange, setNewRange] = useState({ start: '', end: '' });\n  const [geocoding, setGeocoding] = useState(false);\n\n  // Determine entity type and ID based on user role\n  const entityType = user?.user_role === 'merchant' ? 'merchant' : 'courier';\n  const entityId = user?.user_id; // Simplified - should get actual merchant/courier ID\n\n  // Fetch settings\n  const { data: settings, isLoading, refetch } = useQuery({\n    queryKey: ['proximity-settings', entityType, entityId],\n    queryFn: async () => {\n      try {\n        const response = await apiClient.get(`/proximity/settings?entity_type=${entityType}&entity_id=${entityId}`);\n        return response.data.data;\n      } catch (error: any) {\n        if (error.response?.status === 404) {\n          // Return default settings if not found\n          return {\n            entity_type: entityType,\n            entity_id: entityId,\n            delivery_range_km: entityType === 'merchant' ? 50 : 100,\n            postal_code_ranges: [],\n            auto_accept_within_range: false,\n            notify_on_nearby_orders: true,\n            priority_zones: [],\n            is_active: true,\n          };\n        }\n        throw error;\n      }\n    },\n    enabled: !!entityId,\n  });\n\n  const [formData, setFormData] = useState<ProximitySettings | null>(null);\n\n  useEffect(() => {\n    if (settings) {\n      setFormData(settings);\n    }\n  }, [settings]);\n\n  // Save settings mutation\n  const saveMutation = useMutation({\n    mutationFn: async (data: ProximitySettings) => {\n      if (data.setting_id) {\n        return apiClient.put(`/proximity/settings?setting_id=${data.setting_id}`, data);\n      } else {\n        return apiClient.post('/proximity/settings', data);\n      }\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['proximity-settings'] });\n      setHasChanges(false);\n    },\n  });\n\n  // Geocode address mutation\n  const geocodeMutation = useMutation({\n    mutationFn: async (address: string) => {\n      const response = await apiClient.post('/proximity/geocode', { address });\n      return response.data.data;\n    },\n    onSuccess: (data) => {\n      if (formData) {\n        setFormData({\n          ...formData,\n          latitude: data.latitude,\n          longitude: data.longitude,\n          city: data.city,\n          country: data.country,\n          postal_code: data.postal_code,\n          address: data.formatted_address,\n        });\n        setHasChanges(true);\n      }\n    },\n  });\n\n  const handleChange = (field: keyof ProximitySettings, value: any) => {\n    if (formData) {\n      setFormData({ ...formData, [field]: value });\n      setHasChanges(true);\n    }\n  };\n\n  const handleAddRange = () => {\n    if (newRange.start && newRange.end && formData) {\n      setFormData({\n        ...formData,\n        postal_code_ranges: [...formData.postal_code_ranges, newRange],\n      });\n      setNewRange({ start: '', end: '' });\n      setHasChanges(true);\n    }\n  };\n\n  const handleRemoveRange = (index: number) => {\n    if (formData) {\n      const newRanges = [...formData.postal_code_ranges];\n      newRanges.splice(index, 1);\n      setFormData({ ...formData, postal_code_ranges: newRanges });\n      setHasChanges(true);\n    }\n  };\n\n  const handleGeocode = async () => {\n    if (formData?.address) {\n      setGeocoding(true);\n      try {\n        await geocodeMutation.mutateAsync(formData.address);\n      } finally {\n        setGeocoding(false);\n      }\n    }\n  };\n\n  const handleSave = () => {\n    if (formData) {\n      saveMutation.mutate(formData);\n    }\n  };\n\n  if (isLoading || !formData) {\n    return (\n      <Box sx={{ display: 'flex', justifyContent: 'center', p: 4 }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  return (\n    <Box sx={{ p: 3 }}>\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n        <Typography variant=\"h4\">\n           Proximity Settings\n        </Typography>\n        <Button\n          variant=\"contained\"\n          startIcon={<SaveIcon />}\n          onClick={handleSave}\n          disabled={!hasChanges || saveMutation.isPending}\n        >\n          {saveMutation.isPending ? 'Saving...' : 'Save Changes'}\n        </Button>\n      </Box>\n\n      {saveMutation.isSuccess && (\n        <Alert severity=\"success\" sx={{ mb: 2 }} onClose={() => saveMutation.reset()}>\n          Proximity settings saved successfully!\n        </Alert>\n      )}\n\n      {saveMutation.isError && (\n        <Alert severity=\"error\" sx={{ mb: 2 }}>\n          Failed to save settings. Please try again.\n        </Alert>\n      )}\n\n      <Grid container spacing={3}>\n        {/* Location Settings */}\n        <Grid item xs={12} md={6}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                 Location\n              </Typography>\n              <Divider sx={{ mb: 2 }} />\n\n              <TextField\n                fullWidth\n                label=\"Address\"\n                value={formData.address || ''}\n                onChange={(e) => handleChange('address', e.target.value)}\n                margin=\"normal\"\n                placeholder=\"Enter your full address\"\n              />\n\n              <Box sx={{ display: 'flex', gap: 1, mt: 1 }}>\n                <Button\n                  variant=\"outlined\"\n                  startIcon={<LocationIcon />}\n                  onClick={handleGeocode}\n                  disabled={!formData.address || geocoding}\n                  fullWidth\n                >\n                  {geocoding ? 'Geocoding...' : 'Get Coordinates'}\n                </Button>\n              </Box>\n\n              <Grid container spacing={2} sx={{ mt: 1 }}>\n                <Grid item xs={6}>\n                  <TextField\n                    fullWidth\n                    label=\"Latitude\"\n                    value={formData.latitude || ''}\n                    onChange={(e) => handleChange('latitude', parseFloat(e.target.value))}\n                    type=\"number\"\n                    inputProps={{ step: 0.000001 }}\n                  />\n                </Grid>\n                <Grid item xs={6}>\n                  <TextField\n                    fullWidth\n                    label=\"Longitude\"\n                    value={formData.longitude || ''}\n                    onChange={(e) => handleChange('longitude', parseFloat(e.target.value))}\n                    type=\"number\"\n                    inputProps={{ step: 0.000001 }}\n                  />\n                </Grid>\n              </Grid>\n\n              <Grid container spacing={2} sx={{ mt: 1 }}>\n                <Grid item xs={4}>\n                  <TextField\n                    fullWidth\n                    label=\"City\"\n                    value={formData.city || ''}\n                    onChange={(e) => handleChange('city', e.target.value)}\n                  />\n                </Grid>\n                <Grid item xs={4}>\n                  <TextField\n                    fullWidth\n                    label=\"Postal Code\"\n                    value={formData.postal_code || ''}\n                    onChange={(e) => handleChange('postal_code', e.target.value)}\n                  />\n                </Grid>\n                <Grid item xs={4}>\n                  <TextField\n                    fullWidth\n                    label=\"Country\"\n                    value={formData.country || ''}\n                    onChange={(e) => handleChange('country', e.target.value)}\n                  />\n                </Grid>\n              </Grid>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        {/* Range Settings */}\n        <Grid item xs={12} md={6}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                 Service Range\n              </Typography>\n              <Divider sx={{ mb: 2 }} />\n\n              <TextField\n                fullWidth\n                label={entityType === 'merchant' ? 'Delivery Range (km)' : 'Service Range (km)'}\n                value={formData.delivery_range_km}\n                onChange={(e) => handleChange('delivery_range_km', parseInt(e.target.value) || 0)}\n                type=\"number\"\n                margin=\"normal\"\n                helperText=\"Maximum distance for deliveries/services\"\n              />\n\n              <FormControlLabel\n                control={\n                  <Switch\n                    checked={formData.auto_accept_within_range}\n                    onChange={(e) => handleChange('auto_accept_within_range', e.target.checked)}\n                  />\n                }\n                label=\"Auto-accept orders within range\"\n                sx={{ mt: 2 }}\n              />\n\n              <FormControlLabel\n                control={\n                  <Switch\n                    checked={formData.notify_on_nearby_orders}\n                    onChange={(e) => handleChange('notify_on_nearby_orders', e.target.checked)}\n                  />\n                }\n                label=\"Notify on nearby orders\"\n              />\n\n              <FormControlLabel\n                control={\n                  <Switch\n                    checked={formData.is_active}\n                    onChange={(e) => handleChange('is_active', e.target.checked)}\n                  />\n                }\n                label=\"Proximity matching active\"\n              />\n            </CardContent>\n          </Card>\n        </Grid>\n\n        {/* Postal Code Ranges */}\n        <Grid item xs={12}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                 Postal Code Ranges\n              </Typography>\n              <Divider sx={{ mb: 2 }} />\n\n              <Box sx={{ mb: 2 }}>\n                <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\n                  Define postal code ranges you want to serve. Leave empty to use distance-based matching only.\n                </Typography>\n              </Box>\n\n              <Grid container spacing={2} sx={{ mb: 2 }}>\n                <Grid item xs={5}>\n                  <TextField\n                    fullWidth\n                    label=\"Start\"\n                    value={newRange.start}\n                    onChange={(e) => setNewRange({ ...newRange, start: e.target.value })}\n                    placeholder=\"1000\"\n                  />\n                </Grid>\n                <Grid item xs={5}>\n                  <TextField\n                    fullWidth\n                    label=\"End\"\n                    value={newRange.end}\n                    onChange={(e) => setNewRange({ ...newRange, end: e.target.value })}\n                    placeholder=\"1999\"\n                  />\n                </Grid>\n                <Grid item xs={2}>\n                  <Button\n                    variant=\"contained\"\n                    startIcon={<AddIcon />}\n                    onClick={handleAddRange}\n                    disabled={!newRange.start || !newRange.end}\n                    fullWidth\n                    sx={{ height: '56px' }}\n                  >\n                    Add\n                  </Button>\n                </Grid>\n              </Grid>\n\n              <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 1 }}>\n                {formData.postal_code_ranges.map((range, index) => (\n                  <Chip\n                    key={index}\n                    label={`${range.start} - ${range.end}`}\n                    onDelete={() => handleRemoveRange(index)}\n                    deleteIcon={<DeleteIcon />}\n                    color=\"primary\"\n                    variant=\"outlined\"\n                  />\n                ))}\n                {formData.postal_code_ranges.length === 0 && (\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    No postal code ranges defined. Using distance-based matching only.\n                  </Typography>\n                )}\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        {/* Map Preview */}\n        <Grid item xs={12}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                 Coverage Map\n              </Typography>\n              <Divider sx={{ mb: 2 }} />\n\n              <ProximityMap\n                latitude={formData.latitude}\n                longitude={formData.longitude}\n                radius={formData.delivery_range_km}\n                height={400}\n                zoom={10}\n              />\n\n              {formData.latitude && formData.longitude && (\n                <Box sx={{ mt: 2, p: 2, bgcolor: 'grey.50', borderRadius: 1 }}>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    <strong>Location:</strong> {formData.latitude.toFixed(6)}, {formData.longitude.toFixed(6)}\n                  </Typography>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    <strong>Coverage Radius:</strong> {formData.delivery_range_km} km\n                  </Typography>\n                  {formData.city && (\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      <strong>City:</strong> {formData.city}, {formData.country}\n                    </Typography>\n                  )}\n                </Box>\n              )}\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n    </Box>\n  );\n};\n\nexport default ProximitySettings;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\settings\\ReviewRequestSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":96,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":96,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2426,2429],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2426,2429],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Switch,\n  FormControlLabel,\n  TextField,\n  Button,\n  Grid,\n  Divider,\n  Alert,\n  Slider,\n  Chip,\n  FormGroup,\n  InputAdornment,\n} from '@mui/material';\nimport {\n  Save as SaveIcon,\n  Email as EmailIcon,\n  Sms as SmsIcon,\n  Notifications as NotifIcon,\n  AttachMoney as MoneyIcon,\n} from '@mui/icons-material';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/services/apiClient';\n\ninterface ReviewSettings {\n  auto_request_enabled: boolean;\n  days_after_delivery: number;\n  max_requests_per_order: number;\n  reminder_interval_days: number;\n  email_enabled: boolean;\n  sms_enabled: boolean;\n  in_app_enabled: boolean;\n  custom_message: string;\n  custom_subject: string;\n  include_incentive: boolean;\n  incentive_text: string;\n  min_order_value: number;\n  only_successful_deliveries: boolean;\n  exclude_low_ratings: boolean;\n}\n\nexport const ReviewRequestSettings: React.FC = () => {\n  const queryClient = useQueryClient();\n  const [settings, setSettings] = useState<ReviewSettings>({\n    auto_request_enabled: true,\n    days_after_delivery: 2,\n    max_requests_per_order: 3,\n    reminder_interval_days: 7,\n    email_enabled: true,\n    sms_enabled: false,\n    in_app_enabled: true,\n    custom_message: '',\n    custom_subject: '',\n    include_incentive: false,\n    incentive_text: '',\n    min_order_value: 0,\n    only_successful_deliveries: true,\n    exclude_low_ratings: false,\n  });\n\n  // Fetch settings\n  const { data: settingsData } = useQuery({\n    queryKey: ['review-settings'],\n    queryFn: async () => {\n      const response = await apiClient.get('/review-requests/settings');\n      return response.data;\n    },\n  });\n\n  // Update settings when data is fetched\n  React.useEffect(() => {\n    if (settingsData?.data) {\n      setSettings(settingsData.data);\n    }\n  }, [settingsData]);\n\n  // Save settings mutation\n  const saveSettingsMutation = useMutation({\n    mutationFn: async (data: ReviewSettings) => {\n      const response = await apiClient.put('/review-requests/settings', data);\n      return response.data;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['review-settings'] });\n    },\n  });\n\n  const handleSave = () => {\n    saveSettingsMutation.mutate(settings);\n  };\n\n  const handleChange = (field: keyof ReviewSettings, value: any) => {\n    setSettings(prev => ({ ...prev, [field]: value }));\n  };\n\n  return (\n    <Box sx={{ p: 3 }}>\n      <Typography variant=\"h4\" gutterBottom>\n        Review Request Settings\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\n        Configure automated review requests to collect feedback from your customers\n      </Typography>\n\n      {saveSettingsMutation.isSuccess && (\n        <Alert severity=\"success\" sx={{ mb: 3 }}>\n          Settings saved successfully!\n        </Alert>\n      )}\n\n      <Grid container spacing={3}>\n        {/* Automation Settings */}\n        <Grid item xs={12} md={6}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Automation\n              </Typography>\n              <Divider sx={{ mb: 2 }} />\n\n              <FormControlLabel\n                control={\n                  <Switch\n                    checked={settings.auto_request_enabled}\n                    onChange={(e) => handleChange('auto_request_enabled', e.target.checked)}\n                  />\n                }\n                label=\"Enable automatic review requests\"\n              />\n\n              <Box sx={{ mt: 3 }}>\n                <Typography variant=\"body2\" gutterBottom>\n                  Days after delivery: {settings.days_after_delivery}\n                </Typography>\n                <Slider\n                  value={settings.days_after_delivery}\n                  onChange={(_, value) => handleChange('days_after_delivery', value)}\n                  min={0}\n                  max={30}\n                  marks={[\n                    { value: 0, label: 'Immediate' },\n                    { value: 7, label: '1 week' },\n                    { value: 14, label: '2 weeks' },\n                    { value: 30, label: '1 month' },\n                  ]}\n                  disabled={!settings.auto_request_enabled}\n                />\n              </Box>\n\n              <Box sx={{ mt: 3 }}>\n                <Typography variant=\"body2\" gutterBottom>\n                  Maximum reminders per order: {settings.max_requests_per_order}\n                </Typography>\n                <Slider\n                  value={settings.max_requests_per_order}\n                  onChange={(_, value) => handleChange('max_requests_per_order', value)}\n                  min={1}\n                  max={5}\n                  marks\n                  disabled={!settings.auto_request_enabled}\n                />\n              </Box>\n\n              <Box sx={{ mt: 3 }}>\n                <Typography variant=\"body2\" gutterBottom>\n                  Reminder interval (days): {settings.reminder_interval_days}\n                </Typography>\n                <Slider\n                  value={settings.reminder_interval_days}\n                  onChange={(_, value) => handleChange('reminder_interval_days', value)}\n                  min={1}\n                  max={30}\n                  marks={[\n                    { value: 1, label: '1' },\n                    { value: 7, label: '7' },\n                    { value: 14, label: '14' },\n                    { value: 30, label: '30' },\n                  ]}\n                  disabled={!settings.auto_request_enabled}\n                />\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        {/* Channel Settings */}\n        <Grid item xs={12} md={6}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Notification Channels\n              </Typography>\n              <Divider sx={{ mb: 2 }} />\n\n              <FormGroup>\n                <FormControlLabel\n                  control={\n                    <Switch\n                      checked={settings.email_enabled}\n                      onChange={(e) => handleChange('email_enabled', e.target.checked)}\n                      icon={<EmailIcon />}\n                      checkedIcon={<EmailIcon />}\n                    />\n                  }\n                  label={\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                      <EmailIcon fontSize=\"small\" />\n                      Email notifications\n                    </Box>\n                  }\n                />\n\n                <FormControlLabel\n                  control={\n                    <Switch\n                      checked={settings.sms_enabled}\n                      onChange={(e) => handleChange('sms_enabled', e.target.checked)}\n                    />\n                  }\n                  label={\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                      <SmsIcon fontSize=\"small\" />\n                      SMS notifications\n                      <Chip label=\"Premium\" size=\"small\" color=\"primary\" />\n                    </Box>\n                  }\n                />\n\n                <FormControlLabel\n                  control={\n                    <Switch\n                      checked={settings.in_app_enabled}\n                      onChange={(e) => handleChange('in_app_enabled', e.target.checked)}\n                    />\n                  }\n                  label={\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                      <NotifIcon fontSize=\"small\" />\n                      In-app notifications\n                    </Box>\n                  }\n                />\n              </FormGroup>\n            </CardContent>\n          </Card>\n\n          <Card sx={{ mt: 3 }}>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Targeting\n              </Typography>\n              <Divider sx={{ mb: 2 }} />\n\n              <TextField\n                fullWidth\n                label=\"Minimum order value\"\n                type=\"number\"\n                value={settings.min_order_value}\n                onChange={(e) => handleChange('min_order_value', parseFloat(e.target.value) || 0)}\n                InputProps={{\n                  startAdornment: (\n                    <InputAdornment position=\"start\">\n                      <MoneyIcon fontSize=\"small\" />\n                    </InputAdornment>\n                  ),\n                }}\n                helperText=\"Only request reviews for orders above this value\"\n                sx={{ mb: 2 }}\n              />\n\n              <FormControlLabel\n                control={\n                  <Switch\n                    checked={settings.only_successful_deliveries}\n                    onChange={(e) => handleChange('only_successful_deliveries', e.target.checked)}\n                  />\n                }\n                label=\"Only successful deliveries\"\n              />\n\n              <FormControlLabel\n                control={\n                  <Switch\n                    checked={settings.exclude_low_ratings}\n                    onChange={(e) => handleChange('exclude_low_ratings', e.target.checked)}\n                  />\n                }\n                label=\"Exclude customers with previous low ratings (< 3 stars)\"\n              />\n            </CardContent>\n          </Card>\n        </Grid>\n\n        {/* Customization */}\n        <Grid item xs={12}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Message Customization\n              </Typography>\n              <Divider sx={{ mb: 2 }} />\n\n              <Grid container spacing={2}>\n                <Grid item xs={12} md={6}>\n                  <TextField\n                    fullWidth\n                    label=\"Custom subject line\"\n                    value={settings.custom_subject}\n                    onChange={(e) => handleChange('custom_subject', e.target.value)}\n                    placeholder=\"How was your delivery experience?\"\n                    helperText=\"Leave empty to use default\"\n                  />\n                </Grid>\n\n                <Grid item xs={12}>\n                  <TextField\n                    fullWidth\n                    multiline\n                    rows={4}\n                    label=\"Custom message\"\n                    value={settings.custom_message}\n                    onChange={(e) => handleChange('custom_message', e.target.value)}\n                    placeholder=\"Hi {customer_name}, we'd love to hear about your recent delivery experience...\"\n                    helperText=\"Available variables: {customer_name}, {order_id}, {delivery_date}\"\n                  />\n                </Grid>\n\n                <Grid item xs={12}>\n                  <FormControlLabel\n                    control={\n                      <Switch\n                        checked={settings.include_incentive}\n                        onChange={(e) => handleChange('include_incentive', e.target.checked)}\n                      />\n                    }\n                    label=\"Include incentive offer\"\n                  />\n                </Grid>\n\n                {settings.include_incentive && (\n                  <Grid item xs={12}>\n                    <TextField\n                      fullWidth\n                      label=\"Incentive text\"\n                      value={settings.incentive_text}\n                      onChange={(e) => handleChange('incentive_text', e.target.value)}\n                      placeholder=\"Leave a review and get 10% off your next order!\"\n                    />\n                  </Grid>\n                )}\n              </Grid>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        {/* Save Button */}\n        <Grid item xs={12}>\n          <Box sx={{ display: 'flex', justifyContent: 'flex-end', gap: 2 }}>\n            <Button\n              variant=\"contained\"\n              size=\"large\"\n              startIcon={<SaveIcon />}\n              onClick={handleSave}\n              disabled={saveSettingsMutation.isPending}\n            >\n              {saveSettingsMutation.isPending ? 'Saving...' : 'Save Settings'}\n            </Button>\n          </Box>\n        </Grid>\n      </Grid>\n    </Box>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\team\\AcceptInvitation.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[674,677],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[674,677],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":147,"column":18,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[4533,4609],"text":"\n              You&apos;ve been invited to join a team on Performile\n            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[4533,4609],"text":"\n              You&lsquo;ve been invited to join a team on Performile\n            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[4533,4609],"text":"\n              You&#39;ve been invited to join a team on Performile\n            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[4533,4609],"text":"\n              You&rsquo;ve been invited to join a team on Performile\n            "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":162,"column":77,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[5372,5526],"text":"\n              By accepting this invitation, you will gain access to the team&apos;s resources and be able to collaborate with other team members.\n            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[5372,5526],"text":"\n              By accepting this invitation, you will gain access to the team&lsquo;s resources and be able to collaborate with other team members.\n            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[5372,5526],"text":"\n              By accepting this invitation, you will gain access to the team&#39;s resources and be able to collaborate with other team members.\n            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[5372,5526],"text":"\n              By accepting this invitation, you will gain access to the team&rsquo;s resources and be able to collaborate with other team members.\n            "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport {\n  Container,\n  Card,\n  CardContent,\n  Typography,\n  Button,\n  Box,\n  Alert,\n  CircularProgress\n} from '@mui/material';\nimport { CheckCircle, Error, Business, LocalShipping } from '@mui/icons-material';\nimport { useAcceptInvitation } from '@/hooks/useTeamApi';\n\nexport const AcceptInvitation: React.FC = () => {\n  const { token } = useParams<{ token: string }>();\n  const navigate = useNavigate();\n  const [status, setStatus] = useState<'loading' | 'success' | 'error' | 'expired'>('loading');\n  const [invitationDetails, setInvitationDetails] = useState<any>(null);\n\n  const acceptInvitationMutation = useAcceptInvitation();\n\n  useEffect(() => {\n    if (!token) {\n      setStatus('error');\n      return;\n    }\n\n    // Decode invitation token to show details (in a real app, you'd validate this server-side)\n    try {\n      const decoded = JSON.parse(atob(token.split('.')[1]));\n      setInvitationDetails(decoded);\n    } catch (error) {\n      console.error('Failed to decode invitation token:', error);\n    }\n  }, [token]);\n\n  const handleAcceptInvitation = async () => {\n    if (!token) return;\n\n    try {\n      await acceptInvitationMutation.mutateAsync(token);\n      setStatus('success');\n      \n      // Redirect to team management after 3 seconds\n      setTimeout(() => {\n        navigate('/team');\n      }, 3000);\n    } catch (error) {\n      setStatus('error');\n    }\n  };\n\n  const handleDecline = () => {\n    navigate('/dashboard');\n  };\n\n  if (status === 'loading') {\n    return (\n      <Container maxWidth=\"sm\">\n        <Box sx={{ py: 8, textAlign: 'center' }}>\n          <CircularProgress />\n          <Typography variant=\"h6\" sx={{ mt: 2 }}>\n            Loading invitation details...\n          </Typography>\n        </Box>\n      </Container>\n    );\n  }\n\n  if (status === 'success') {\n    return (\n      <Container maxWidth=\"sm\">\n        <Box sx={{ py: 8 }}>\n          <Card>\n            <CardContent sx={{ textAlign: 'center', py: 4 }}>\n              <CheckCircle color=\"success\" sx={{ fontSize: 64, mb: 2 }} />\n              <Typography variant=\"h4\" gutterBottom>\n                Welcome to the Team!\n              </Typography>\n              <Typography variant=\"body1\" color=\"text.secondary\" paragraph>\n                You have successfully joined the team. You will be redirected to the team management page shortly.\n              </Typography>\n              <Button\n                variant=\"contained\"\n                onClick={() => navigate('/team')}\n                sx={{ mt: 2 }}\n              >\n                Go to Team Management\n              </Button>\n            </CardContent>\n          </Card>\n        </Box>\n      </Container>\n    );\n  }\n\n  if (status === 'error' || status === 'expired') {\n    return (\n      <Container maxWidth=\"sm\">\n        <Box sx={{ py: 8 }}>\n          <Card>\n            <CardContent sx={{ textAlign: 'center', py: 4 }}>\n              <Error color=\"error\" sx={{ fontSize: 64, mb: 2 }} />\n              <Typography variant=\"h4\" gutterBottom>\n                {status === 'expired' ? 'Invitation Expired' : 'Invalid Invitation'}\n              </Typography>\n              <Typography variant=\"body1\" color=\"text.secondary\" paragraph>\n                {status === 'expired' \n                  ? 'This invitation has expired. Please request a new invitation from your team administrator.'\n                  : 'This invitation link is invalid or has already been used.'\n                }\n              </Typography>\n              <Button\n                variant=\"contained\"\n                onClick={() => navigate('/dashboard')}\n                sx={{ mt: 2 }}\n              >\n                Go to Dashboard\n              </Button>\n            </CardContent>\n          </Card>\n        </Box>\n      </Container>\n    );\n  }\n\n  return (\n    <Container maxWidth=\"sm\">\n      <Box sx={{ py: 8 }}>\n        <Card>\n          <CardContent sx={{ py: 4 }}>\n            <Box sx={{ textAlign: 'center', mb: 4 }}>\n              {invitationDetails?.entityType === 'courier' ? (\n                <LocalShipping color=\"primary\" sx={{ fontSize: 64 }} />\n              ) : (\n                <Business color=\"primary\" sx={{ fontSize: 64 }} />\n              )}\n            </Box>\n\n            <Typography variant=\"h4\" align=\"center\" gutterBottom>\n              Team Invitation\n            </Typography>\n\n            <Typography variant=\"body1\" align=\"center\" color=\"text.secondary\" paragraph>\n              You've been invited to join a team on Performile\n            </Typography>\n\n            {invitationDetails && (\n              <Alert severity=\"info\" sx={{ mb: 3 }}>\n                <Typography variant=\"body2\">\n                  <strong>Entity:</strong> {invitationDetails.entityName || 'Team'}<br />\n                  <strong>Type:</strong> {invitationDetails.entityType === 'courier' ? 'Courier Company' : 'Store'}<br />\n                  <strong>Role:</strong> {invitationDetails.teamRole?.charAt(0).toUpperCase() + invitationDetails.teamRole?.slice(1)}<br />\n                  <strong>Invited by:</strong> {invitationDetails.invitedByName || 'Team Administrator'}\n                </Typography>\n              </Alert>\n            )}\n\n            <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\" paragraph>\n              By accepting this invitation, you will gain access to the team's resources and be able to collaborate with other team members.\n            </Typography>\n\n            <Box sx={{ display: 'flex', gap: 2, justifyContent: 'center', mt: 4 }}>\n              <Button\n                variant=\"outlined\"\n                onClick={handleDecline}\n                disabled={acceptInvitationMutation.isPending}\n              >\n                Decline\n              </Button>\n              <Button\n                variant=\"contained\"\n                onClick={handleAcceptInvitation}\n                disabled={acceptInvitationMutation.isPending}\n                startIcon={acceptInvitationMutation.isPending ? <CircularProgress size={20} /> : null}\n              >\n                {acceptInvitationMutation.isPending ? 'Accepting...' : 'Accept Invitation'}\n              </Button>\n            </Box>\n          </CardContent>\n        </Card>\n      </Box>\n    </Container>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\pages\\team\\TeamManagement.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":135,"column":20,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[3886,4045],"text":"\n            You don&apos;t have access to any courier companies or stores. \n            Contact your administrator to get access or create a new entity.\n          "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[3886,4045],"text":"\n            You don&lsquo;t have access to any courier companies or stores. \n            Contact your administrator to get access or create a new entity.\n          "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[3886,4045],"text":"\n            You don&#39;t have access to any courier companies or stores. \n            Contact your administrator to get access or create a new entity.\n          "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[3886,4045],"text":"\n            You don&rsquo;t have access to any courier companies or stores. \n            Contact your administrator to get access or create a new entity.\n          "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":145,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":145,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4176,4179],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4176,4179],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":178,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":178,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5403,5406],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5403,5406],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport {\n  Box,\n  Container,\n  Typography,\n  Card,\n  CardContent,\n  Tabs,\n  Tab,\n  Alert,\n  Skeleton\n} from '@mui/material';\nimport { TeamMembersList } from '@/components/team/TeamMembersList';\nimport { InviteMemberDialog } from '@/components/team/InviteMemberDialog';\nimport { \n  useCourierTeamMembers, \n  useStoreTeamMembers,\n  useInviteToCourierTeam,\n  useInviteToStoreTeam,\n  useUpdateTeamMemberRole,\n  useRemoveTeamMember,\n  useUserEntities\n} from '@/hooks/useTeamApi';\nimport { TeamRole } from '@/types/team';\n\ninterface TabPanelProps {\n  children?: React.ReactNode;\n  index: number;\n  value: number;\n}\n\nconst TabPanel: React.FC<TabPanelProps> = ({ children, value, index }) => {\n  return (\n    <div hidden={value !== index}>\n      {value === index && <Box sx={{ pt: 3 }}>{children}</Box>}\n    </div>\n  );\n};\n\nexport const TeamManagement: React.FC = () => {\n  const [activeTab, setActiveTab] = useState(0);\n  const [inviteDialogOpen, setInviteDialogOpen] = useState(false);\n  const [selectedEntity, setSelectedEntity] = useState<{\n    type: 'courier' | 'store';\n    id: string;\n    name: string;\n    role: TeamRole;\n  } | null>(null);\n\n  // Get user's accessible entities\n  const { data: userEntities, isLoading: entitiesLoading } = useUserEntities();\n\n  // Get team members for selected entities\n  const courierEntity = userEntities?.couriers[0];\n  const storeEntity = userEntities?.stores[0];\n\n  const { data: courierMembers, isLoading: courierMembersLoading } = useCourierTeamMembers(\n    courierEntity?.courier_id || ''\n  );\n  const { data: storeMembers, isLoading: storeMembersLoading } = useStoreTeamMembers(\n    storeEntity?.store_id || ''\n  );\n\n  // Mutations\n  const inviteToCourierMutation = useInviteToCourierTeam();\n  const inviteToStoreMutation = useInviteToStoreTeam();\n  const updateMemberRoleMutation = useUpdateTeamMemberRole();\n  const removeMemberMutation = useRemoveTeamMember();\n\n  const handleTabChange = (_: React.SyntheticEvent, newValue: number) => {\n    setActiveTab(newValue);\n  };\n\n  const handleInviteMember = (entityType: 'courier' | 'store', entityId: string, entityName: string, userRole: TeamRole) => {\n    setSelectedEntity({ type: entityType, id: entityId, name: entityName, role: userRole });\n    setInviteDialogOpen(true);\n  };\n\n  const handleSendInvitation = async (email: string, role: TeamRole) => {\n    if (!selectedEntity) return;\n\n    if (selectedEntity.type === 'courier') {\n      await inviteToCourierMutation.mutateAsync({\n        courierId: selectedEntity.id,\n        email,\n        teamRole: role\n      });\n    } else {\n      await inviteToStoreMutation.mutateAsync({\n        storeId: selectedEntity.id,\n        email,\n        teamRole: role\n      });\n    }\n  };\n\n  const handleUpdateMemberRole = (memberId: string, newRole: TeamRole) => {\n    if (!selectedEntity) return;\n\n    updateMemberRoleMutation.mutate({\n      teamMemberId: memberId,\n      teamRole: newRole,\n      // Remove entityType as it's not part of the expected type\n    });\n  };\n\n  const handleRemoveMember = (memberId: string) => {\n    if (!selectedEntity) return;\n\n    removeMemberMutation.mutate({\n      teamMemberId: memberId\n      // Remove entityType and entityId as they're not part of the expected type\n    });\n  };\n\n  if (entitiesLoading) {\n    return (\n      <Container maxWidth=\"lg\">\n        <Box sx={{ py: 4 }}>\n          <Skeleton variant=\"text\" width={300} height={40} />\n          <Skeleton variant=\"rectangular\" width=\"100%\" height={400} sx={{ mt: 2 }} />\n        </Box>\n      </Container>\n    );\n  }\n\n  if (!userEntities || (userEntities.couriers.length === 0 && userEntities.stores.length === 0)) {\n    return (\n      <Container maxWidth=\"lg\">\n        <Box sx={{ py: 4 }}>\n          <Typography variant=\"h4\" gutterBottom>\n            Team Management\n          </Typography>\n          <Alert severity=\"info\">\n            You don't have access to any courier companies or stores. \n            Contact your administrator to get access or create a new entity.\n          </Alert>\n        </Box>\n      </Container>\n    );\n  }\n\n  const availableTabs: Array<{\n    type: 'courier' | 'store';\n    entities: any[];\n  }> = [];\n  if (userEntities.couriers.length > 0) {\n    availableTabs.push({ type: 'courier' as const, entities: userEntities.couriers });\n  }\n  if (userEntities.stores.length > 0) {\n    availableTabs.push({ type: 'store' as const, entities: userEntities.stores });\n  }\n\n  return (\n    <Container maxWidth=\"lg\">\n      <Box sx={{ py: 4 }}>\n        <Typography variant=\"h4\" gutterBottom>\n          Team Management\n        </Typography>\n        <Typography variant=\"body1\" color=\"text.secondary\" paragraph>\n          Manage team members for your courier companies and stores. Invite new members, \n          assign roles, and control access permissions.\n        </Typography>\n\n        <Card>\n          <CardContent>\n            <Tabs value={activeTab} onChange={handleTabChange}>\n              {availableTabs.map((tab, index) => (\n                <Tab \n                  key={index}\n                  label={`${tab.type === 'courier' ? 'Courier Companies' : 'Stores'} (${tab.entities.length})`}\n                />\n              ))}\n            </Tabs>\n\n            {availableTabs.map((tab, tabIndex) => (\n              <TabPanel key={tabIndex} value={activeTab} index={tabIndex}>\n                {tab.entities.map((entity: any, entityIndex: number) => {\n                  const isCurrentEntity = \n                    (tab.type === 'courier' && entity.courier_id === courierEntity?.courier_id) ||\n                    (tab.type === 'store' && entity.store_id === storeEntity?.store_id);\n\n                  if (!isCurrentEntity) return null;\n\n                  const members = tab.type === 'courier' ? courierMembers : storeMembers;\n                  const loading = tab.type === 'courier' ? courierMembersLoading : storeMembersLoading;\n\n                  return (\n                    <Box key={entityIndex} sx={{ mb: 4 }}>\n                      <Typography variant=\"h6\" gutterBottom>\n                        {tab.type === 'courier' ? entity.courier_name : entity.store_name}\n                      </Typography>\n                      \n                      <TeamMembersList\n                        members={members || []}\n                        currentUserRole={entity.team_role}\n                        entityType={tab.type}\n                        onInviteMember={() => handleInviteMember(\n                          tab.type,\n                          tab.type === 'courier' ? entity.courier_id! : entity.store_id!,\n                          tab.type === 'courier' ? entity.courier_name! : entity.store_name!,\n                          entity.team_role\n                        )}\n                        onUpdateMember={(memberId, role) => {\n                          setSelectedEntity({\n                            type: tab.type,\n                            id: tab.type === 'courier' ? entity.courier_id! : entity.store_id!,\n                            name: tab.type === 'courier' ? entity.courier_name! : entity.store_name!,\n                            role: entity.team_role\n                          });\n                          handleUpdateMemberRole(memberId, role);\n                        }}\n                        onRemoveMember={(memberId) => {\n                          setSelectedEntity({\n                            type: tab.type,\n                            id: tab.type === 'courier' ? entity.courier_id! : entity.store_id!,\n                            name: tab.type === 'courier' ? entity.courier_name! : entity.store_name!,\n                            role: entity.team_role\n                          });\n                          handleRemoveMember(memberId);\n                        }}\n                        loading={loading}\n                      />\n                    </Box>\n                  );\n                })}\n              </TabPanel>\n            ))}\n          </CardContent>\n        </Card>\n\n        <InviteMemberDialog\n          open={inviteDialogOpen}\n          onClose={() => {\n            setInviteDialogOpen(false);\n            setSelectedEntity(null);\n          }}\n          onInvite={handleSendInvitation}\n          entityType={selectedEntity?.type || 'courier'}\n          loading={inviteToCourierMutation.isPending || inviteToStoreMutation.isPending}\n        />\n      </Box>\n    </Container>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\services\\apiClient.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":39,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1121,1124],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1121,1124],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":40,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1156,1159],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1156,1159],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":244,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":244,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8656,8659],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8656,8659],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":257,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":257,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8918,8921],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8918,8921],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":261,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":261,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9060,9063],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9060,9063],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":261,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":261,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9085,9088],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9085,9088],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":265,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":265,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9220,9223],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9220,9223],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":265,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":265,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9245,9248],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9245,9248],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":269,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":269,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9381,9384],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9381,9384],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":269,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":269,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9406,9409],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9406,9409],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":273,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":273,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9545,9548],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9545,9548],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":278,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":278,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9727,9730],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9727,9730],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import axios, { AxiosInstance, AxiosRequestConfig, AxiosResponse } from 'axios';\nimport { useAuthStore } from '@/store/authStore';\nimport toast from 'react-hot-toast';\n\n// Event emitter for session expiration\nexport const sessionEvents = {\n  listeners: new Set<() => void>(),\n  emit() {\n    this.listeners.forEach(listener => listener());\n  },\n  subscribe(listener: () => void) {\n    this.listeners.add(listener);\n    return () => this.listeners.delete(listener);\n  }\n};\n\n// Dynamic API URL that works for both local development and production\nconst getApiBaseUrl = () => {\n  // If VITE_API_URL is set, use it\n  if (import.meta.env.VITE_API_URL) {\n    return import.meta.env.VITE_API_URL;\n  }\n  \n  // For Vercel deployment, use /api which gets rewritten to /frontend/api\n  if (typeof window !== 'undefined') {\n    return `${window.location.origin}/api`;\n  }\n  \n  // For server-side rendering or build time, use relative path\n  return '/api';\n};\n\nconst API_BASE_URL = getApiBaseUrl();\n\nclass ApiClient {\n  private client: AxiosInstance;\n  private isRefreshing = false;\n  private failedQueue: Array<{\n    resolve: (value?: any) => void;\n    reject: (error?: any) => void;\n  }> = [];\n  private lastActivityTime = Date.now();\n  private activityCheckInterval: NodeJS.Timeout | null = null;\n\n  constructor() {\n    this.client = axios.create({\n      baseURL: API_BASE_URL,\n      timeout: 30000, // 30 second timeout for serverless cold starts\n      withCredentials: true,\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    });\n\n    this.setupInterceptors();\n    this.startActivityMonitoring();\n  }\n\n  // Sliding session: Track user activity and extend token\n  private startActivityMonitoring(): void {\n    // Update activity time on any user interaction\n    if (typeof window !== 'undefined') {\n      ['mousedown', 'keydown', 'scroll', 'touchstart'].forEach(event => {\n        window.addEventListener(event, () => {\n          this.lastActivityTime = Date.now();\n        }, { passive: true });\n      });\n\n      // Check activity every 5 minutes\n      this.activityCheckInterval = setInterval(() => {\n        const inactiveTime = Date.now() - this.lastActivityTime;\n        const FIFTEEN_MINUTES = 15 * 60 * 1000;\n\n        // If user has been active in last 15 minutes, extend token\n        if (inactiveTime < FIFTEEN_MINUTES) {\n          const { tokens } = useAuthStore.getState();\n          if (tokens?.accessToken) {\n            this.extendSession();\n          }\n        }\n      }, 5 * 60 * 1000); // Check every 5 minutes\n    }\n  }\n\n  // Extend session by refreshing token\n  private async extendSession(): Promise<void> {\n    try {\n      const { refreshToken } = useAuthStore.getState();\n      await refreshToken();\n      console.log('[ApiClient] Session extended due to user activity');\n    } catch (error) {\n      console.error('[ApiClient] Failed to extend session:', error);\n    }\n  }\n\n  // Cleanup\n  public destroy(): void {\n    if (this.activityCheckInterval) {\n      clearInterval(this.activityCheckInterval);\n    }\n  }\n\n  private setupInterceptors(): void {\n    // Request interceptor to add auth token\n    this.client.interceptors.request.use(\n      (config) => {\n        // Try to get token from auth store first\n        const state = useAuthStore.getState();\n        let tokens = state.tokens;\n        \n        // FALLBACK: If not in store, try multiple storage locations\n        if (!tokens?.accessToken) {\n          try {\n            // Try manual backup first\n            let storedTokens = localStorage.getItem('performile_tokens');\n            \n            // Try zustand persist storage\n            if (!storedTokens) {\n              const persistedAuth = localStorage.getItem('performile-auth');\n              if (persistedAuth) {\n                const parsed = JSON.parse(persistedAuth);\n                if (parsed?.state?.tokens) {\n                  storedTokens = JSON.stringify(parsed.state.tokens);\n                  console.log('[ApiClient] Using tokens from zustand persist storage');\n                }\n              }\n            }\n            \n            if (storedTokens) {\n              tokens = JSON.parse(storedTokens);\n              console.log('[ApiClient] Using tokens from localStorage backup');\n            }\n          } catch (e) {\n            console.error('[ApiClient] Failed to read tokens from localStorage:', e);\n          }\n        }\n        \n        // Debug logging\n        if (process.env.NODE_ENV === 'development') {\n          console.log('[ApiClient] Request:', { \n            url: config.url, \n            hasToken: !!tokens?.accessToken,\n            method: config.method \n          });\n        }\n        \n        if (tokens?.accessToken) {\n          config.headers.Authorization = `Bearer ${tokens.accessToken}`;\n        } else if (process.env.NODE_ENV === 'development') {\n          console.warn('[ApiClient] No access token available for request:', config.url);\n        }\n        \n        // Always send credentials (cookies)\n        config.withCredentials = true;\n        \n        return config;\n      },\n      (error) => {\n        return Promise.reject(error);\n      }\n    );\n\n    // Response interceptor to handle token refresh\n    this.client.interceptors.response.use(\n      (response) => response,\n      async (error) => {\n        const originalRequest = error.config;\n\n        if (error.response?.status === 401 && !originalRequest._retry) {\n          if (this.isRefreshing) {\n            // If already refreshing, queue the request\n            return new Promise((resolve, reject) => {\n              this.failedQueue.push({ resolve, reject });\n            }).then((token) => {\n              originalRequest.headers.Authorization = `Bearer ${token}`;\n              return this.client(originalRequest);\n            }).catch((err) => {\n              return Promise.reject(err);\n            });\n          }\n\n          originalRequest._retry = true;\n          this.isRefreshing = true;\n\n          try {\n            const { refreshToken } = useAuthStore.getState();\n            const success = await refreshToken();\n\n            if (success) {\n              const { tokens } = useAuthStore.getState();\n              \n              // Process queued requests\n              this.processQueue(null, tokens?.accessToken);\n              \n              // Retry original request\n              originalRequest.headers.Authorization = `Bearer ${tokens?.accessToken}`;\n              return this.client(originalRequest);\n            } else {\n              // Refresh failed, emit session expired event\n              this.processQueue(new Error('Session expired'), null);\n              sessionEvents.emit();\n              useAuthStore.getState().clearAuth();\n              return Promise.reject(new Error('Session expired. Please log in again.'));\n            }\n          } catch (refreshError) {\n            this.processQueue(refreshError, null);\n            sessionEvents.emit();\n            useAuthStore.getState().clearAuth();\n            return Promise.reject(new Error('Session expired. Please log in again.'));\n          } finally {\n            this.isRefreshing = false;\n          }\n        }\n\n        // Handle other error responses with improved messages\n        if (error.response?.status === 401) {\n          // Don't show toast for 401 as session modal will handle it\n          return Promise.reject(new Error('Authentication required'));\n        } else if (error.response?.status === 403) {\n          toast.error('You do not have permission to perform this action');\n        } else if (error.response?.status === 404) {\n          // Log 404 but don't show toast - let components handle it\n          console.warn('[ApiClient] 404 Not Found:', error.config?.url);\n          return Promise.reject(new Error('Resource not found'));\n        } else if (error.response?.status === 429) {\n          toast.error('Too many requests. Please try again later.');\n        } else if (error.response?.status >= 500) {\n          toast.error('Server error. Please try again later.');\n        } else if (error.response?.data?.message) {\n          toast.error(error.response.data.message);\n        } else if (error.message === 'Network Error') {\n          toast.error('Network error. Please check your connection.');\n        } else if (error.code === 'ECONNABORTED') {\n          toast.error('Request timeout. Please try again.');\n        } else if (error.message && !error.message.includes('Session expired') && !error.message.includes('Resource not found')) {\n          toast.error(error.message);\n        }\n\n        return Promise.reject(error);\n      }\n    );\n  }\n\n  private processQueue(error: any, token: string | null = null): void {\n    this.failedQueue.forEach(({ resolve, reject }) => {\n      if (error) {\n        reject(error);\n      } else {\n        resolve(token);\n      }\n    });\n\n    this.failedQueue = [];\n  }\n\n  // HTTP methods\n  async get<T = any>(url: string, config?: AxiosRequestConfig): Promise<AxiosResponse<T>> {\n    return this.client.get<T>(url, config);\n  }\n\n  async post<T = any>(url: string, data?: any, config?: AxiosRequestConfig): Promise<AxiosResponse<T>> {\n    return this.client.post<T>(url, data, config);\n  }\n\n  async put<T = any>(url: string, data?: any, config?: AxiosRequestConfig): Promise<AxiosResponse<T>> {\n    return this.client.put<T>(url, data, config);\n  }\n\n  async patch<T = any>(url: string, data?: any, config?: AxiosRequestConfig): Promise<AxiosResponse<T>> {\n    return this.client.patch<T>(url, data, config);\n  }\n\n  async delete<T = any>(url: string, config?: AxiosRequestConfig): Promise<AxiosResponse<T>> {\n    return this.client.delete<T>(url, config);\n  }\n\n  // Upload file with progress\n  async uploadFile<T = any>(\n    url: string,\n    file: File,\n    onProgress?: (progress: number) => void\n  ): Promise<AxiosResponse<T>> {\n    const formData = new FormData();\n    formData.append('file', file);\n\n    return this.client.post<T>(url, formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      },\n      onUploadProgress: (progressEvent) => {\n        if (onProgress && progressEvent.total) {\n          const progress = Math.round((progressEvent.loaded * 100) / progressEvent.total);\n          onProgress(progress);\n        }\n      },\n    });\n  }\n\n  // Get instance for direct use\n  getInstance(): AxiosInstance {\n    return this.client;\n  }\n}\n\nexport const apiClient = new ApiClient();\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\services\\authService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":75,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":75,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2611,2614],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2611,2614],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":110,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":110,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3716,3719],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3716,3719],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":148,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":148,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4980,4983],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4980,4983],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":184,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":184,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6166,6169],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6166,6169],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":215,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":215,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7170,7173],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7170,7173],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":245,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":245,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8180,8183],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8180,8183],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import axios, { AxiosResponse } from 'axios';\nimport { ApiResponse, LoginCredentials, RegisterData, User, AuthTokens } from '@/types';\n\n// Dynamic API URL that works for both local development and production\nconst getApiBaseUrl = () => {\n  // If VITE_API_URL is set, use it\n  if (import.meta.env.VITE_API_URL) {\n    return import.meta.env.VITE_API_URL;\n  }\n  \n  // For Vercel deployment, use /api (will be rewritten to /frontend/api)\n  if (typeof window !== 'undefined') {\n    return `${window.location.origin}/api`;\n  }\n  \n  // For server-side rendering or build time, use relative path\n  return '/api';\n};\n\nconst API_BASE_URL = getApiBaseUrl();\n\n// Create axios instance with interceptors\nconst apiClient = axios.create({\n  baseURL: API_BASE_URL,\n  withCredentials: true,\n  timeout: 30000, // 30 second timeout (increased for serverless cold starts)\n});\n\n// Request interceptor to add auth token\napiClient.interceptors.request.use((config) => {\n  const authData = localStorage.getItem('performile-auth');\n  if (authData) {\n    try {\n      const parsed = JSON.parse(authData);\n      const accessToken = parsed.state?.tokens?.accessToken;\n      if (accessToken) {\n        config.headers.Authorization = `Bearer ${accessToken}`;\n      }\n    } catch (error) {\n      console.warn('Failed to parse auth data from storage');\n    }\n  }\n  return config;\n});\n\n// Response interceptor for token refresh\napiClient.interceptors.response.use(\n  (response) => response,\n  async (error) => {\n    if (error.response?.status === 401) {\n      // Token expired, attempt refresh\n      const authData = localStorage.getItem('performile-auth');\n      if (authData) {\n        try {\n          const parsed = JSON.parse(authData);\n          const refreshToken = parsed.state?.tokens?.refreshToken;\n          if (refreshToken) {\n            // Attempt token refresh\n            const refreshResponse = await axios.post(`${API_BASE_URL}/auth`, \n              { action: 'refresh', refreshToken }, \n              { withCredentials: true }\n            );\n            \n            if (refreshResponse.data.success) {\n              // Update stored tokens and retry original request\n              const newTokens = refreshResponse.data.data.tokens;\n              parsed.state.tokens = newTokens;\n              localStorage.setItem('performile-auth', JSON.stringify(parsed));\n              \n              // Retry original request with new token\n              error.config.headers.Authorization = `Bearer ${newTokens.accessToken}`;\n              return apiClient.request(error.config);\n            }\n          }\n        } catch (refreshError: any) {\n          console.error('Token refresh failed:', refreshError);\n          // Clear auth state on refresh failure\n          localStorage.removeItem('performile-auth');\n          window.location.href = '/login';\n        }\n      }\n    }\n    return Promise.reject(error);\n  }\n);\n\nclass AuthService {\n  constructor() {\n    // Using apiClient with baseURL already configured\n  }\n\n  async login(credentials: LoginCredentials): Promise<ApiResponse<{ user: User; tokens: AuthTokens }>> {\n    try {\n      console.log('Attempting login with API URL:', `${API_BASE_URL}/auth`);\n      \n      const response: AxiosResponse<ApiResponse<{ user: User; tokens: AuthTokens }>> = await axios.post(\n        `${API_BASE_URL}/auth`,\n        { action: 'login', ...credentials },\n        {\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          withCredentials: true,\n          timeout: 30000, // 30 second timeout for serverless cold starts\n        }\n      );\n      \n      console.log('Login response:', response.status, response.data);\n      return response.data;\n    } catch (error: any) {\n      console.error('Login error details:', {\n        message: error.message,\n        response: error.response?.data,\n        status: error.response?.status,\n        url: error.config?.url\n      });\n      \n      // Better error handling for frontend\n      let errorMessage = 'Login failed';\n      if (error.response?.data?.message) {\n        errorMessage = error.response.data.message;\n      } else if (error.code === 'ECONNABORTED') {\n        errorMessage = 'Request timeout - please try again';\n      } else if (error.code === 'NETWORK_ERROR') {\n        errorMessage = 'Network error - please check your connection';\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n      \n      throw new Error(errorMessage);\n    }\n  }\n\n  async register(data: RegisterData): Promise<ApiResponse<{ user: User; tokens: AuthTokens }>> {\n    try {\n      const response: AxiosResponse<ApiResponse<{ user: User; tokens: AuthTokens }>> = await axios.post(\n        `${API_BASE_URL}/auth`,\n        { action: 'register', ...data },\n        {\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          withCredentials: true,\n          timeout: 10000,\n        }\n      );\n      return response.data;\n    } catch (error: any) {\n      console.error('Register error details:', {\n        message: error.message,\n        response: error.response?.data,\n        status: error.response?.status,\n        url: error.config?.url\n      });\n      \n      // Better error handling for frontend\n      let errorMessage = 'Register failed';\n      if (error.response?.data?.message) {\n        errorMessage = error.response.data.message;\n      } else if (error.code === 'ECONNABORTED') {\n        errorMessage = 'Request timeout - please try again';\n      } else if (error.code === 'NETWORK_ERROR') {\n        errorMessage = 'Network error - please check your connection';\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n      \n      throw new Error(errorMessage);\n    }\n  }\n\n  async refreshToken(refreshToken: string): Promise<ApiResponse<{ tokens: AuthTokens }>> {\n    try {\n      const response: AxiosResponse<ApiResponse<{ tokens: AuthTokens }>> = await apiClient.post(\n        `/auth`,\n        { action: 'refresh', refreshToken },\n        {\n          headers: {\n            'Content-Type': 'application/json',\n          },\n        }\n      );\n      return response.data;\n    } catch (error: any) {\n      console.error('Refresh token error details:', {\n        message: error.message,\n        response: error.response?.data,\n        status: error.response?.status,\n        url: error.config?.url\n      });\n      \n      // Better error handling for frontend\n      let errorMessage = 'Refresh token failed';\n      if (error.response?.data?.message) {\n        errorMessage = error.response.data.message;\n      } else if (error.code === 'ECONNABORTED') {\n        errorMessage = 'Request timeout - please try again';\n      } else if (error.code === 'NETWORK_ERROR') {\n        errorMessage = 'Network error - please check your connection';\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n      \n      throw new Error(errorMessage);\n    }\n  }\n\n  async logout(): Promise<ApiResponse> {\n    try {\n      const response: AxiosResponse<ApiResponse> = await apiClient.post(\n        `/auth`,\n        { action: 'logout' }\n      );\n      return response.data;\n    } catch (error: any) {\n      console.error('Logout error details:', {\n        message: error.message,\n        response: error.response?.data,\n        status: error.response?.status,\n        url: error.config?.url\n      });\n      \n      // Better error handling for frontend\n      let errorMessage = 'Logout failed';\n      if (error.response?.data?.message) {\n        errorMessage = error.response.data.message;\n      } else if (error.code === 'ECONNABORTED') {\n        errorMessage = 'Request timeout - please try again';\n      } else if (error.code === 'NETWORK_ERROR') {\n        errorMessage = 'Network error - please check your connection';\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n      \n      throw new Error(errorMessage);\n    }\n  }\n\n  async getProfile(): Promise<ApiResponse<{ user: User }>> {\n    try {\n      const response: AxiosResponse<ApiResponse<{ user: User }>> = await apiClient.get(\n        `/auth?action=profile`\n      );\n      return response.data;\n    } catch (error: any) {\n      console.error('Get profile error details:', {\n        message: error.message,\n        response: error.response?.data,\n        status: error.response?.status,\n        url: error.config?.url\n      });\n      \n      // Better error handling for frontend\n      let errorMessage = 'Get profile failed';\n      if (error.response?.data?.message) {\n        errorMessage = error.response.data.message;\n      } else if (error.code === 'ECONNABORTED') {\n        errorMessage = 'Request timeout - please try again';\n      } else if (error.code === 'NETWORK_ERROR') {\n        errorMessage = 'Network error - please check your connection';\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n      \n      throw new Error(errorMessage);\n    }\n  }\n}\n\nexport const authService = new AuthService();\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\services\\chatService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'now' is assigned a value but never used.","line":47,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":14},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":159,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":159,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4240,4243],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4240,4243],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * CHAT SERVICE\n * Handles AI chat communication with OpenAI GPT-4\n * Created: October 21, 2025\n * \n * Security:\n * - No sensitive data sent to API\n * - Rate limiting\n * - Input sanitization\n * - Error handling\n */\n\nimport axios from 'axios';\n\ninterface Message {\n  id: string;\n  role: 'user' | 'assistant';\n  content: string;\n  timestamp: Date;\n}\n\ninterface ChatRequest {\n  message: string;\n  isAuthenticated: boolean;\n  context?: {\n    hasAccount?: boolean;\n    // NO sensitive data allowed here\n  };\n  conversationHistory?: Message[];\n}\n\ninterface ChatResponse {\n  message: string;\n  conversationId?: string;\n}\n\nclass ChatService {\n  private baseURL = '/api/chat';\n  private rateLimitMap = new Map<string, number>();\n  private readonly RATE_LIMIT = 10; // 10 messages per minute\n  private readonly RATE_WINDOW = 60000; // 1 minute\n\n  /**\n   * Check rate limit\n   */\n  private checkRateLimit(userId: string = 'anonymous'): boolean {\n    const now = Date.now();\n    const userRequests = this.rateLimitMap.get(userId) || 0;\n    \n    if (userRequests >= this.RATE_LIMIT) {\n      return false;\n    }\n    \n    this.rateLimitMap.set(userId, userRequests + 1);\n    \n    // Reset after window\n    setTimeout(() => {\n      this.rateLimitMap.delete(userId);\n    }, this.RATE_WINDOW);\n    \n    return true;\n  }\n\n  /**\n   * Sanitize input to prevent injection\n   */\n  private sanitizeInput(input: string): string {\n    return input\n      .trim()\n      .replace(/<script[^>]*>.*?<\\/script>/gi, '')\n      .replace(/<[^>]+>/g, '')\n      .substring(0, 1000); // Max 1000 chars\n  }\n\n  /**\n   * Build system prompt based on context\n   */\n  private buildSystemPrompt(isAuthenticated: boolean): string {\n    const basePrompt = `You are a helpful AI assistant for Performile, a logistics performance platform. \n\nYour role is to:\n- Answer questions about Performile's features and services\n- Help users understand how to use the platform\n- Provide information about delivery tracking, courier performance, and analytics\n- Be friendly, professional, and concise\n\nImportant security rules:\n- NEVER ask for or discuss user roles, subscription plans, or sensitive data\n- NEVER provide information about specific users or their data\n- Keep responses focused on general platform features and help\n- If asked about sensitive information, politely decline and suggest contacting support\n\nPlatform features you can discuss:\n- TrustScore system for courier ratings\n- Real-time delivery tracking\n- Analytics dashboards\n- Parcel point locations\n- Service performance metrics\n- Coverage checker\n- Integration capabilities`;\n\n    if (isAuthenticated) {\n      return basePrompt + `\\n\\nThe user is logged in, so you can provide personalized help with using their dashboard and features.`;\n    }\n\n    return basePrompt + `\\n\\nThe user is not logged in. Focus on explaining platform features and encouraging them to sign up.`;\n  }\n\n  /**\n   * Send message to AI\n   */\n  async sendMessage(request: ChatRequest): Promise<ChatResponse> {\n    // Rate limiting\n    if (!this.checkRateLimit()) {\n      throw new Error('Rate limit exceeded. Please wait a moment before sending more messages.');\n    }\n\n    // Sanitize input\n    const sanitizedMessage = this.sanitizeInput(request.message);\n    \n    if (!sanitizedMessage) {\n      throw new Error('Invalid message');\n    }\n\n    try {\n      // Build conversation history for context\n      const messages = [\n        {\n          role: 'system',\n          content: this.buildSystemPrompt(request.isAuthenticated),\n        },\n        // Include last 5 messages for context\n        ...(request.conversationHistory || []).slice(-5).map(msg => ({\n          role: msg.role,\n          content: msg.content,\n        })),\n        {\n          role: 'user',\n          content: sanitizedMessage,\n        },\n      ];\n\n      const response = await axios.post<ChatResponse>(\n        this.baseURL,\n        {\n          messages,\n          // Only send safe context\n          context: {\n            isAuthenticated: request.isAuthenticated,\n            hasAccount: request.context?.hasAccount || false,\n          },\n        },\n        {\n          timeout: 30000, // 30 second timeout\n        }\n      );\n\n      return response.data;\n    } catch (error: any) {\n      console.error('Chat service error:', error);\n      \n      if (error.response?.status === 429) {\n        throw new Error('Too many requests. Please try again in a moment.');\n      }\n      \n      if (error.response?.status === 401) {\n        throw new Error('Authentication required');\n      }\n      \n      throw new Error('Failed to get response. Please try again.');\n    }\n  }\n\n  /**\n   * Get suggested questions based on context\n   */\n  getSuggestedQuestions(isAuthenticated: boolean): string[] {\n    if (isAuthenticated) {\n      return [\n        'How do I track my deliveries?',\n        'What is the TrustScore system?',\n        'How can I view analytics?',\n        'Where can I find parcel points?',\n        'How do I integrate with my e-commerce store?',\n      ];\n    }\n\n    return [\n      'What is Performile?',\n      'How does the TrustScore system work?',\n      'What features are available?',\n      'How much does it cost?',\n      'How do I sign up?',\n    ];\n  }\n}\n\nexport const chatService = new ChatService();\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\services\\claims\\types.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":69,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":69,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1505,1508],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1505,1508],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":88,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":88,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1868,1871],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1868,1871],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// =====================================================\n// Claims Management Types\n// =====================================================\n\nexport enum ClaimType {\n  DAMAGED = 'damaged',\n  LOST = 'lost',\n  DELAYED = 'delayed',\n  MISSING_ITEMS = 'missing_items',\n  WRONG_DELIVERY = 'wrong_delivery',\n  OTHER = 'other'\n}\n\nexport enum ClaimStatus {\n  DRAFT = 'draft',\n  SUBMITTED = 'submitted',\n  UNDER_REVIEW = 'under_review',\n  APPROVED = 'approved',\n  REJECTED = 'rejected',\n  PAID = 'paid',\n  CLOSED = 'closed'\n}\n\nexport enum DocumentType {\n  PHOTO_DAMAGE = 'photo_damage',\n  PHOTO_PACKAGING = 'photo_packaging',\n  RECEIPT = 'receipt',\n  INVOICE = 'invoice',\n  PROOF_OF_VALUE = 'proof_of_value',\n  CORRESPONDENCE = 'correspondence',\n  OTHER = 'other'\n}\n\nexport interface Claim {\n  claim_id: string;\n  order_id?: string;\n  tracking_number?: string;\n  courier: string;\n  claim_type: ClaimType;\n  claim_status: ClaimStatus;\n  claim_number?: string;\n  \n  // Claimant\n  claimant_id: string;\n  claimant_name: string;\n  claimant_email: string;\n  claimant_phone?: string;\n  \n  // Incident\n  incident_date: Date;\n  incident_description: string;\n  incident_location?: string;\n  \n  // Financial\n  declared_value?: number;\n  claimed_amount: number;\n  approved_amount?: number;\n  currency: string;\n  \n  // Evidence\n  photos?: string[];\n  documents?: string[];\n  proof_of_value?: string;\n  \n  // Submission\n  submitted_to_courier: boolean;\n  submission_date?: Date;\n  courier_claim_id?: string;\n  courier_response?: any;\n  \n  // Resolution\n  resolution_date?: Date;\n  resolution_notes?: string;\n  refund_method?: string;\n  refund_reference?: string;\n  \n  // Metadata\n  created_at: Date;\n  updated_at: Date;\n  created_by: string;\n}\n\nexport interface ClaimTimelineEvent {\n  timeline_id: string;\n  claim_id: string;\n  event_type: string;\n  event_description: string;\n  event_data?: any;\n  actor_id?: string;\n  actor_name?: string;\n  actor_type: string;\n  created_at: Date;\n}\n\nexport interface ClaimTemplate {\n  template_id: string;\n  courier_name: string;\n  required_fields: string[];\n  optional_fields?: string[];\n  field_mappings: Record<string, string>;\n  submission_method: 'api' | 'email' | 'web_form' | 'manual';\n  api_endpoint?: string;\n  submission_email?: string;\n  web_form_url?: string;\n  max_claim_amount?: number;\n  claim_deadline_days: number;\n  photo_required: boolean;\n  receipt_required: boolean;\n  instructions?: string;\n  notes?: string;\n}\n\nexport interface ClaimDocument {\n  document_id: string;\n  claim_id: string;\n  document_type: DocumentType;\n  file_name: string;\n  file_url: string;\n  file_size?: number;\n  mime_type?: string;\n  uploaded_by: string;\n  uploaded_at: Date;\n}\n\nexport interface ClaimNote {\n  note_id: string;\n  claim_id: string;\n  note_text: string;\n  is_internal: boolean;\n  author_id: string;\n  author_name: string;\n  created_at: Date;\n  updated_at: Date;\n}\n\nexport interface CreateClaimRequest {\n  order_id?: string;\n  tracking_number?: string;\n  courier: string;\n  claim_type: ClaimType;\n  incident_date: Date;\n  incident_description: string;\n  incident_location?: string;\n  claimed_amount: number;\n  declared_value?: number;\n  photos?: File[];\n  documents?: File[];\n}\n\nexport interface ClaimSummary {\n  total_claims: number;\n  pending_claims: number;\n  approved_claims: number;\n  total_claimed: number;\n  total_approved: number;\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\services\\courierIntegrationsService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[607,610],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[607,610],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { authStore } from '../store/authStore';\n\nconst API_BASE_URL = import.meta.env.VITE_API_BASE_URL || 'http://localhost:3000';\n\ninterface CourierIntegration {\n  integration_id?: string;\n  courier_id?: string;\n  api_base_url?: string;\n  api_version?: string;\n  auth_type?: string;\n  api_key?: string;\n  api_secret?: string;\n  client_id?: string;\n  token_url?: string;\n  is_active?: boolean;\n  is_sandbox?: boolean;\n  sync_frequency_minutes?: number;\n  requests_per_minute?: number;\n  requests_per_hour?: number;\n  webhook_url?: string;\n  webhook_secret?: string;\n  webhook_events?: string[];\n  config?: any;\n}\n\nclass CourierIntegrationsService {\n  private getAuthHeaders() {\n    const token = authStore.getState().tokens?.access_token;\n    if (!token) {\n      throw new Error('No authentication token found');\n    }\n    return {\n      'Authorization': `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    };\n  }\n\n  async listIntegrations() {\n    const response = await fetch(`${API_BASE_URL}/api/courier-integrations?action=list`, {\n      method: 'GET',\n      headers: this.getAuthHeaders(),\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || 'Failed to fetch integrations');\n    }\n\n    return response.json();\n  }\n\n  async getIntegration(integrationId: string) {\n    const response = await fetch(\n      `${API_BASE_URL}/api/courier-integrations?action=get&integration_id=${integrationId}`,\n      {\n        method: 'GET',\n        headers: this.getAuthHeaders(),\n      }\n    );\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || 'Failed to fetch integration');\n    }\n\n    return response.json();\n  }\n\n  async createIntegration(data: CourierIntegration) {\n    const response = await fetch(`${API_BASE_URL}/api/courier-integrations?action=create`, {\n      method: 'POST',\n      headers: this.getAuthHeaders(),\n      body: JSON.stringify(data),\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || 'Failed to create integration');\n    }\n\n    return response.json();\n  }\n\n  async updateIntegration(integrationId: string, data: Partial<CourierIntegration>) {\n    const response = await fetch(`${API_BASE_URL}/api/courier-integrations?action=update`, {\n      method: 'PUT',\n      headers: this.getAuthHeaders(),\n      body: JSON.stringify({ integration_id: integrationId, ...data }),\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || 'Failed to update integration');\n    }\n\n    return response.json();\n  }\n\n  async deleteIntegration(integrationId: string) {\n    const response = await fetch(\n      `${API_BASE_URL}/api/courier-integrations?action=delete&integration_id=${integrationId}`,\n      {\n        method: 'DELETE',\n        headers: this.getAuthHeaders(),\n      }\n    );\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || 'Failed to delete integration');\n    }\n\n    return response.json();\n  }\n\n  async testIntegration(integrationId: string) {\n    const response = await fetch(`${API_BASE_URL}/api/courier-integrations?action=test`, {\n      method: 'POST',\n      headers: this.getAuthHeaders(),\n      body: JSON.stringify({ integration_id: integrationId }),\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || 'Failed to test integration');\n    }\n\n    return response.json();\n  }\n\n  async syncIntegration(integrationId: string) {\n    const response = await fetch(`${API_BASE_URL}/api/courier-integrations?action=sync`, {\n      method: 'POST',\n      headers: this.getAuthHeaders(),\n      body: JSON.stringify({ integration_id: integrationId }),\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || 'Failed to sync integration');\n    }\n\n    return response.json();\n  }\n}\n\nexport const courierIntegrationsService = new CourierIntegrationsService();\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\services\\notificationRulesService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[289,292],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[289,292],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[305,308],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[305,308],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[329,332],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[329,332],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { authStore } from '../store/authStore';\n\nconst API_BASE_URL = import.meta.env.VITE_API_BASE_URL || 'http://localhost:3000';\n\ninterface NotificationRule {\n  rule_id?: string;\n  rule_name: string;\n  rule_description?: string;\n  rule_type?: string;\n  priority?: number;\n  conditions: any;\n  actions: any[];\n  else_actions?: any[];\n  cooldown_hours?: number;\n  max_executions?: number;\n  execution_window_start?: string;\n  execution_window_end?: string;\n  applies_to_couriers?: string[];\n  applies_to_order_statuses?: string[];\n  min_order_value?: number;\n}\n\nclass NotificationRulesService {\n  private getAuthHeaders() {\n    const token = authStore.getState().tokens?.access_token;\n    if (!token) {\n      throw new Error('No authentication token found');\n    }\n    return {\n      'Authorization': `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    };\n  }\n\n  async listRules() {\n    const response = await fetch(`${API_BASE_URL}/api/notification-rules?action=list`, {\n      method: 'GET',\n      headers: this.getAuthHeaders(),\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || 'Failed to fetch rules');\n    }\n\n    return response.json();\n  }\n\n  async getRule(ruleId: string) {\n    const response = await fetch(\n      `${API_BASE_URL}/api/notification-rules?action=get&rule_id=${ruleId}`,\n      {\n        method: 'GET',\n        headers: this.getAuthHeaders(),\n      }\n    );\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || 'Failed to fetch rule');\n    }\n\n    return response.json();\n  }\n\n  async createRule(data: NotificationRule) {\n    const response = await fetch(`${API_BASE_URL}/api/notification-rules?action=create`, {\n      method: 'POST',\n      headers: this.getAuthHeaders(),\n      body: JSON.stringify(data),\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || 'Failed to create rule');\n    }\n\n    return response.json();\n  }\n\n  async updateRule(ruleId: string, data: Partial<NotificationRule>) {\n    const response = await fetch(`${API_BASE_URL}/api/notification-rules?action=update`, {\n      method: 'PUT',\n      headers: this.getAuthHeaders(),\n      body: JSON.stringify({ rule_id: ruleId, ...data }),\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || 'Failed to update rule');\n    }\n\n    return response.json();\n  }\n\n  async deleteRule(ruleId: string) {\n    const response = await fetch(\n      `${API_BASE_URL}/api/notification-rules?action=delete&rule_id=${ruleId}`,\n      {\n        method: 'DELETE',\n        headers: this.getAuthHeaders(),\n      }\n    );\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || 'Failed to delete rule');\n    }\n\n    return response.json();\n  }\n\n  async toggleRule(ruleId: string, isActive: boolean) {\n    const response = await fetch(`${API_BASE_URL}/api/notification-rules?action=toggle`, {\n      method: 'POST',\n      headers: this.getAuthHeaders(),\n      body: JSON.stringify({ rule_id: ruleId, is_active: isActive }),\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || 'Failed to toggle rule');\n    }\n\n    return response.json();\n  }\n\n  async getRuleExecutions(ruleId: string, limit = 50, offset = 0) {\n    const response = await fetch(\n      `${API_BASE_URL}/api/notification-rules?action=executions&rule_id=${ruleId}&limit=${limit}&offset=${offset}`,\n      {\n        method: 'GET',\n        headers: this.getAuthHeaders(),\n      }\n    );\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || 'Failed to fetch executions');\n    }\n\n    return response.json();\n  }\n\n  async getTemplates() {\n    const response = await fetch(`${API_BASE_URL}/api/notification-rules?action=templates`, {\n      method: 'GET',\n      headers: this.getAuthHeaders(),\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || 'Failed to fetch templates');\n    }\n\n    return response.json();\n  }\n}\n\nexport const notificationRulesService = new NotificationRulesService();\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\services\\shipmentTrackingService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":84,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":84,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2179,2182],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2179,2182],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { authStore } from '../store/authStore';\n\nconst API_BASE_URL = import.meta.env.VITE_API_BASE_URL || 'http://localhost:3000';\n\nclass ShipmentTrackingService {\n  private getAuthHeaders() {\n    const token = authStore.getState().tokens?.access_token;\n    if (!token) {\n      throw new Error('No authentication token found');\n    }\n    return {\n      'Authorization': `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    };\n  }\n\n  async getOrderEvents(orderId: string) {\n    const response = await fetch(\n      `${API_BASE_URL}/api/shipment-tracking?action=events&order_id=${orderId}`,\n      {\n        method: 'GET',\n        headers: this.getAuthHeaders(),\n      }\n    );\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || 'Failed to fetch events');\n    }\n\n    return response.json();\n  }\n\n  async getLatestEvent(orderId: string) {\n    const response = await fetch(\n      `${API_BASE_URL}/api/shipment-tracking?action=latest&order_id=${orderId}`,\n      {\n        method: 'GET',\n        headers: this.getAuthHeaders(),\n      }\n    );\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || 'Failed to fetch latest event');\n    }\n\n    return response.json();\n  }\n\n  async getOrderTimeline(orderId: string) {\n    const response = await fetch(\n      `${API_BASE_URL}/api/shipment-tracking?action=timeline&order_id=${orderId}`,\n      {\n        method: 'GET',\n        headers: this.getAuthHeaders(),\n      }\n    );\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || 'Failed to fetch timeline');\n    }\n\n    return response.json();\n  }\n\n  async addTrackingEvent(data: {\n    order_id: string;\n    tracking_number: string;\n    event_type: string;\n    event_timestamp: string;\n    status: string;\n    event_code?: string;\n    event_description?: string;\n    location_city?: string;\n    location_country?: string;\n    location_postal_code?: string;\n    location_facility?: string;\n    substatus?: string;\n    is_exception?: boolean;\n    exception_type?: string;\n    exception_description?: string;\n    raw_event_data?: any;\n  }) {\n    const response = await fetch(`${API_BASE_URL}/api/shipment-tracking?action=add_event`, {\n      method: 'POST',\n      headers: this.getAuthHeaders(),\n      body: JSON.stringify(data),\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || 'Failed to add tracking event');\n    }\n\n    return response.json();\n  }\n\n  async getExceptions(limit = 50, offset = 0) {\n    const response = await fetch(\n      `${API_BASE_URL}/api/shipment-tracking?action=exceptions&limit=${limit}&offset=${offset}`,\n      {\n        method: 'GET',\n        headers: this.getAuthHeaders(),\n      }\n    );\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || 'Failed to fetch exceptions');\n    }\n\n    return response.json();\n  }\n\n  async getDelayedOrders() {\n    const response = await fetch(\n      `${API_BASE_URL}/api/shipment-tracking?action=delayed_orders`,\n      {\n        method: 'GET',\n        headers: this.getAuthHeaders(),\n      }\n    );\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || 'Failed to fetch delayed orders');\n    }\n\n    return response.json();\n  }\n}\n\nexport const shipmentTrackingService = new ShipmentTrackingService();\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\services\\tracking\\BaseAdapter.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'trackingNumber' is defined but never used.","line":21,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":50},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'trackingNumber' is defined but never used.","line":25,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":50},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'webhookUrl' is defined but never used.","line":25,"column":52,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":70},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":33,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[935,938],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[935,938],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":63,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1733,1736],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1733,1736],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// =====================================================\n// Base Tracking Adapter\n// =====================================================\n\nimport { TrackingAdapter, TrackingInfo, CourierAPIConfig } from './types';\n\nexport abstract class BaseTrackingAdapter implements TrackingAdapter {\n  protected config: CourierAPIConfig;\n  \n  constructor(config: CourierAPIConfig) {\n    this.config = config;\n  }\n  \n  abstract get name(): string;\n  \n  abstract track(trackingNumber: string): Promise<TrackingInfo>;\n  \n  abstract validateTrackingNumber(trackingNumber: string): boolean;\n  \n  // Optional methods with default implementations\n  async getProofOfDelivery(trackingNumber: string) {\n    return null;\n  }\n  \n  async subscribeToUpdates(trackingNumber: string, webhookUrl: string) {\n    return false;\n  }\n  \n  // Helper methods for all adapters\n  protected async makeRequest(\n    endpoint: string,\n    options: RequestInit = {}\n  ): Promise<any> {\n    const url = `${this.config.baseUrl}${endpoint}`;\n    \n    const headers = {\n      'Content-Type': 'application/json',\n      'Accept': 'application/json',\n      ...this.getAuthHeaders(),\n      ...options.headers,\n    };\n    \n    const startTime = Date.now();\n    \n    try {\n      const response = await fetch(url, {\n        ...options,\n        headers,\n      });\n      \n      const responseTime = Date.now() - startTime;\n      \n      if (!response.ok) {\n        throw new Error(`API request failed: ${response.status} ${response.statusText}`);\n      }\n      \n      const data = await response.json();\n      \n      // Log successful request\n      await this.logRequest(endpoint, options.method || 'GET', response.status, responseTime, false);\n      \n      return data;\n    } catch (error: any) {\n      const responseTime = Date.now() - startTime;\n      \n      // Log failed request\n      await this.logRequest(endpoint, options.method || 'GET', 0, responseTime, true, error.message);\n      \n      throw error;\n    }\n  }\n  \n  protected abstract getAuthHeaders(): Record<string, string>;\n  \n  protected async logRequest(\n    endpoint: string,\n    method: string,\n    status: number,\n    responseTime: number,\n    isError: boolean,\n    errorMessage?: string\n  ): Promise<void> {\n    try {\n      // Log to database via API\n      await fetch('/api/tracking/log', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          courier: this.name,\n          endpoint,\n          method,\n          status,\n          responseTime,\n          isError,\n          errorMessage,\n        }),\n      });\n    } catch (err) {\n      console.error('Failed to log tracking request:', err);\n    }\n  }\n  \n  protected formatDate(date: string | Date): Date {\n    return new Date(date);\n  }\n  \n  protected cleanTrackingNumber(trackingNumber: string): string {\n    return trackingNumber.trim().toUpperCase().replace(/\\s+/g, '');\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\services\\tracking\\TrackingService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\services\\tracking\\adapters\\BringAdapter.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":40,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1322,1325],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1322,1325],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":45,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1437,1440],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1437,1440],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":56,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":56,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1814,1817],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1814,1817],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// =====================================================\n// Bring (Posten Norge) Tracking Adapter\n// =====================================================\n\nimport { BaseTrackingAdapter } from '../BaseAdapter';\nimport { TrackingInfo, TrackingStatus, TrackingEvent } from '../types';\n\nexport class BringAdapter extends BaseTrackingAdapter {\n  get name(): string {\n    return 'Bring';\n  }\n  \n  validateTrackingNumber(trackingNumber: string): boolean {\n    // Bring tracking numbers are typically 16-18 digits\n    const cleaned = this.cleanTrackingNumber(trackingNumber);\n    return /^[0-9]{16,18}$/.test(cleaned) || /^TESTPACKAGE/.test(cleaned);\n  }\n  \n  protected getAuthHeaders(): Record<string, string> {\n    return {\n      'X-MyBring-API-Uid': this.config.clientId || '',\n      'X-MyBring-API-Key': this.config.apiKey || '',\n      'X-Bring-Client-URL': 'https://performile.com',\n    };\n  }\n  \n  async track(trackingNumber: string): Promise<TrackingInfo> {\n    const cleaned = this.cleanTrackingNumber(trackingNumber);\n    \n    if (!this.validateTrackingNumber(cleaned)) {\n      throw new Error('Invalid Bring tracking number format');\n    }\n    \n    try {\n      const data = await this.makeRequest(\n        `/tracking.json?q=${cleaned}`\n      );\n      \n      return this.normalizeData(data, cleaned);\n    } catch (error: any) {\n      throw new Error(`Bring tracking failed: ${error.message}`);\n    }\n  }\n  \n  private normalizeData(raw: any, trackingNumber: string): TrackingInfo {\n    const consignment = raw.consignmentSet?.[0];\n    \n    if (!consignment) {\n      throw new Error('No tracking information found');\n    }\n    \n    const packageItem = consignment.packageSet?.[0];\n    const events = packageItem?.eventSet || [];\n    \n    // Map events\n    const trackingEvents: TrackingEvent[] = events.map((event: any) => ({\n      eventTime: this.formatDate(event.dateIso),\n      status: this.mapStatus(event.status),\n      statusDescription: event.displayMessage || event.description || '',\n      location: {\n        name: event.displayLocation,\n        city: event.city,\n        country: event.country,\n        postalCode: event.postalCode,\n      },\n      courierEventCode: event.status,\n      courierEventDescription: event.description,\n    }));\n    \n    // Get current status\n    const latestEvent = events[0];\n    const currentStatus = this.mapStatus(latestEvent?.status || consignment.status);\n    \n    return {\n      trackingNumber,\n      courier: 'Bring',\n      status: currentStatus,\n      statusDescription: latestEvent?.displayMessage || consignment.statusDescription,\n      currentLocation: latestEvent ? {\n        name: latestEvent.displayLocation,\n        city: latestEvent.city,\n        country: latestEvent.country,\n      } : undefined,\n      estimatedDelivery: consignment.estimatedDeliveryDate \n        ? this.formatDate(consignment.estimatedDeliveryDate) \n        : undefined,\n      actualDelivery: currentStatus === TrackingStatus.DELIVERED && latestEvent?.dateIso\n        ? this.formatDate(latestEvent.dateIso)\n        : undefined,\n      events: trackingEvents,\n      lastUpdated: new Date(),\n      rawData: raw,\n    };\n  }\n  \n  private mapStatus(status: string): TrackingStatus {\n    const statusMap: Record<string, TrackingStatus> = {\n      'DELIVERED': TrackingStatus.DELIVERED,\n      'DELIVERED_SENDER': TrackingStatus.DELIVERED,\n      'OUT_FOR_DELIVERY': TrackingStatus.OUT_FOR_DELIVERY,\n      'TRANSPORT_TO_RECIPIENT': TrackingStatus.OUT_FOR_DELIVERY,\n      'IN_TRANSIT': TrackingStatus.IN_TRANSIT,\n      'ARRIVED_DELIVERY': TrackingStatus.IN_TRANSIT,\n      'COLLECTED': TrackingStatus.PICKED_UP,\n      'READY_FOR_PICKUP': TrackingStatus.PICKED_UP,\n      'DELIVERY_FAILED': TrackingStatus.FAILED_DELIVERY,\n      'RETURNED': TrackingStatus.RETURNED,\n      'RETURN_TO_SENDER': TrackingStatus.RETURNED,\n      'EXCEPTION': TrackingStatus.EXCEPTION,\n    };\n    \n    return statusMap[status] || TrackingStatus.PENDING;\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\services\\tracking\\adapters\\BudbeeAdapter.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":38,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1156,1159],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1156,1159],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1272,1275],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1272,1275],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":53,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1580,1583],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1580,1583],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// =====================================================\n// Budbee Tracking Adapter\n// =====================================================\n\nimport { BaseTrackingAdapter } from '../BaseAdapter';\nimport { TrackingInfo, TrackingStatus, TrackingEvent } from '../types';\n\nexport class BudbeeAdapter extends BaseTrackingAdapter {\n  get name(): string {\n    return 'Budbee';\n  }\n  \n  validateTrackingNumber(trackingNumber: string): boolean {\n    // Budbee uses alphanumeric tracking numbers\n    const cleaned = this.cleanTrackingNumber(trackingNumber);\n    return /^[A-Z0-9]{8,20}$/.test(cleaned);\n  }\n  \n  protected getAuthHeaders(): Record<string, string> {\n    return {\n      'Authorization': `Bearer ${this.config.apiKey}`,\n    };\n  }\n  \n  async track(trackingNumber: string): Promise<TrackingInfo> {\n    const cleaned = this.cleanTrackingNumber(trackingNumber);\n    \n    if (!this.validateTrackingNumber(cleaned)) {\n      throw new Error('Invalid Budbee tracking number format');\n    }\n    \n    try {\n      const data = await this.makeRequest(\n        `/track/${cleaned}`\n      );\n      \n      return this.normalizeData(data, cleaned);\n    } catch (error: any) {\n      throw new Error(`Budbee tracking failed: ${error.message}`);\n    }\n  }\n  \n  private normalizeData(raw: any, trackingNumber: string): TrackingInfo {\n    const shipment = raw.shipment || raw;\n    \n    if (!shipment) {\n      throw new Error('No tracking information found');\n    }\n    \n    const events = shipment.events || [];\n    \n    // Map events\n    const trackingEvents: TrackingEvent[] = events.map((event: any) => ({\n      eventTime: this.formatDate(event.timestamp),\n      status: this.mapStatus(event.status),\n      statusDescription: event.description || event.status,\n      location: event.location ? {\n        name: event.location.address,\n        city: event.location.city,\n        postalCode: event.location.postalCode,\n        coordinates: event.location.coordinates ? {\n          lat: event.location.coordinates.latitude,\n          lng: event.location.coordinates.longitude,\n        } : undefined,\n      } : undefined,\n      courierEventCode: event.status,\n    }));\n    \n    const currentStatus = this.mapStatus(shipment.status);\n    \n    return {\n      trackingNumber,\n      courier: 'Budbee',\n      status: currentStatus,\n      statusDescription: shipment.statusDescription,\n      currentLocation: shipment.currentLocation ? {\n        name: shipment.currentLocation.address,\n        city: shipment.currentLocation.city,\n      } : undefined,\n      estimatedDelivery: shipment.deliveryWindow?.start \n        ? this.formatDate(shipment.deliveryWindow.start) \n        : undefined,\n      deliveryWindowStart: shipment.deliveryWindow?.start \n        ? this.formatDate(shipment.deliveryWindow.start) \n        : undefined,\n      deliveryWindowEnd: shipment.deliveryWindow?.end \n        ? this.formatDate(shipment.deliveryWindow.end) \n        : undefined,\n      actualDelivery: currentStatus === TrackingStatus.DELIVERED && shipment.deliveredAt\n        ? this.formatDate(shipment.deliveredAt)\n        : undefined,\n      events: trackingEvents,\n      recipient: shipment.recipient ? {\n        name: shipment.recipient.name,\n        signature: shipment.recipient.signature,\n      } : undefined,\n      lastUpdated: new Date(),\n      rawData: raw,\n    };\n  }\n  \n  private mapStatus(status: string): TrackingStatus {\n    const statusMap: Record<string, TrackingStatus> = {\n      'delivered': TrackingStatus.DELIVERED,\n      'out_for_delivery': TrackingStatus.OUT_FOR_DELIVERY,\n      'in_transit': TrackingStatus.IN_TRANSIT,\n      'at_terminal': TrackingStatus.IN_TRANSIT,\n      'picked_up': TrackingStatus.PICKED_UP,\n      'created': TrackingStatus.PENDING,\n      'failed': TrackingStatus.FAILED_DELIVERY,\n      'returned': TrackingStatus.RETURNED,\n      'cancelled': TrackingStatus.CANCELLED,\n    };\n    \n    return statusMap[status.toLowerCase()] || TrackingStatus.PENDING;\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\services\\tracking\\adapters\\DHLAdapter.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":38,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1171,1174],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1171,1174],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1284,1287],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1284,1287],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":53,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1591,1594],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1591,1594],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":96,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":96,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3105,3108],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3105,3108],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// =====================================================\n// DHL Express Tracking Adapter\n// =====================================================\n\nimport { BaseTrackingAdapter } from '../BaseAdapter';\nimport { TrackingInfo, TrackingStatus, TrackingEvent, Location } from '../types';\n\nexport class DHLAdapter extends BaseTrackingAdapter {\n  get name(): string {\n    return 'DHL';\n  }\n  \n  validateTrackingNumber(trackingNumber: string): boolean {\n    // DHL tracking numbers are typically 10 digits\n    const cleaned = this.cleanTrackingNumber(trackingNumber);\n    return /^[0-9]{10}$/.test(cleaned);\n  }\n  \n  protected getAuthHeaders(): Record<string, string> {\n    return {\n      'DHL-API-Key': this.config.apiKey || '',\n    };\n  }\n  \n  async track(trackingNumber: string): Promise<TrackingInfo> {\n    const cleaned = this.cleanTrackingNumber(trackingNumber);\n    \n    if (!this.validateTrackingNumber(cleaned)) {\n      throw new Error('Invalid DHL tracking number format');\n    }\n    \n    try {\n      const data = await this.makeRequest(\n        `/shipments?trackingNumber=${cleaned}`\n      );\n      \n      return this.normalizeData(data, cleaned);\n    } catch (error: any) {\n      throw new Error(`DHL tracking failed: ${error.message}`);\n    }\n  }\n  \n  private normalizeData(raw: any, trackingNumber: string): TrackingInfo {\n    const shipment = raw.shipments?.[0];\n    \n    if (!shipment) {\n      throw new Error('No tracking information found');\n    }\n    \n    const events = shipment.events || [];\n    \n    // Map events\n    const trackingEvents: TrackingEvent[] = events.map((event: any) => ({\n      eventTime: this.formatDate(event.timestamp),\n      status: this.mapStatus(event.statusCode),\n      statusDescription: event.description || '',\n      location: this.parseLocation(event.location),\n      courierEventCode: event.statusCode,\n      courierEventDescription: event.description,\n    }));\n    \n    // Get current status\n    const currentStatus = this.mapStatus(shipment.status.statusCode);\n    \n    return {\n      trackingNumber,\n      courier: 'DHL',\n      status: currentStatus,\n      statusDescription: shipment.status.description,\n      currentLocation: this.parseLocation(events[0]?.location),\n      estimatedDelivery: shipment.estimatedDeliveryDate \n        ? this.formatDate(shipment.estimatedDeliveryDate) \n        : undefined,\n      actualDelivery: currentStatus === TrackingStatus.DELIVERED && events[0]?.timestamp\n        ? this.formatDate(events[0].timestamp)\n        : undefined,\n      events: trackingEvents,\n      lastUpdated: new Date(),\n      rawData: raw,\n    };\n  }\n  \n  private mapStatus(statusCode: string): TrackingStatus {\n    const statusMap: Record<string, TrackingStatus> = {\n      'delivered': TrackingStatus.DELIVERED,\n      'ok': TrackingStatus.DELIVERED,\n      'transit': TrackingStatus.IN_TRANSIT,\n      'pickup': TrackingStatus.PICKED_UP,\n      'failure': TrackingStatus.FAILED_DELIVERY,\n      'unknown': TrackingStatus.EXCEPTION,\n    };\n    \n    return statusMap[statusCode.toLowerCase()] || TrackingStatus.PENDING;\n  }\n  \n  private parseLocation(location: any): Location | undefined {\n    if (!location) return undefined;\n    \n    return {\n      name: location.address?.addressLocality,\n      city: location.address?.addressLocality,\n      country: location.address?.countryCode,\n      postalCode: location.address?.postalCode,\n    };\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\services\\tracking\\adapters\\PostNordAdapter.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":38,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1213,1216],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1213,1216],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1331,1334],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1331,1334],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":54,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1702,1705],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1702,1705],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":123,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":123,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4179,4182],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4179,4182],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// =====================================================\n// PostNord Tracking Adapter\n// =====================================================\n\nimport { BaseTrackingAdapter } from '../BaseAdapter';\nimport { TrackingInfo, TrackingStatus, TrackingEvent, Location } from '../types';\n\nexport class PostNordAdapter extends BaseTrackingAdapter {\n  get name(): string {\n    return 'PostNord';\n  }\n  \n  validateTrackingNumber(trackingNumber: string): boolean {\n    // PostNord tracking numbers are typically 18-20 digits\n    const cleaned = this.cleanTrackingNumber(trackingNumber);\n    return /^[0-9]{18,20}$/.test(cleaned);\n  }\n  \n  protected getAuthHeaders(): Record<string, string> {\n    return {\n      'apikey': this.config.apiKey || '',\n    };\n  }\n  \n  async track(trackingNumber: string): Promise<TrackingInfo> {\n    const cleaned = this.cleanTrackingNumber(trackingNumber);\n    \n    if (!this.validateTrackingNumber(cleaned)) {\n      throw new Error('Invalid PostNord tracking number format');\n    }\n    \n    try {\n      const data = await this.makeRequest(\n        `/trackandtrace/findByIdentifier.json?id=${cleaned}&locale=en`\n      );\n      \n      return this.normalizeData(data, cleaned);\n    } catch (error: any) {\n      throw new Error(`PostNord tracking failed: ${error.message}`);\n    }\n  }\n  \n  private normalizeData(raw: any, trackingNumber: string): TrackingInfo {\n    const shipment = raw.TrackingInformationResponse?.shipments?.[0];\n    \n    if (!shipment) {\n      throw new Error('No tracking information found');\n    }\n    \n    const item = shipment.items?.[0];\n    const events = item?.events || [];\n    \n    // Map events\n    const trackingEvents: TrackingEvent[] = events.map((event: any) => ({\n      eventTime: this.formatDate(event.eventTime),\n      status: this.mapStatus(event.eventCode),\n      statusDescription: event.eventDescription || '',\n      location: this.parseLocation(event.location),\n      courierEventCode: event.eventCode,\n      courierEventDescription: event.eventDescription,\n    }));\n    \n    // Get latest event\n    const latestEvent = events[0];\n    const currentStatus = this.mapStatus(latestEvent?.eventCode || shipment.statusCode);\n    \n    return {\n      trackingNumber,\n      courier: 'PostNord',\n      status: currentStatus,\n      statusDescription: shipment.statusText?.header || latestEvent?.eventDescription,\n      currentLocation: this.parseLocation(latestEvent?.location),\n      estimatedDelivery: shipment.estimatedTimeOfArrival \n        ? this.formatDate(shipment.estimatedTimeOfArrival) \n        : undefined,\n      actualDelivery: currentStatus === TrackingStatus.DELIVERED && latestEvent?.eventTime\n        ? this.formatDate(latestEvent.eventTime)\n        : undefined,\n      events: trackingEvents,\n      lastUpdated: new Date(),\n      rawData: raw,\n    };\n  }\n  \n  private mapStatus(eventCode: string): TrackingStatus {\n    const statusMap: Record<string, TrackingStatus> = {\n      // Delivered\n      'DELIVERED': TrackingStatus.DELIVERED,\n      'DELIVERED_TO_RECIPIENT': TrackingStatus.DELIVERED,\n      'DELIVERED_TO_AGENT': TrackingStatus.DELIVERED,\n      \n      // Out for delivery\n      'OUT_FOR_DELIVERY': TrackingStatus.OUT_FOR_DELIVERY,\n      'LOADED_FOR_DELIVERY': TrackingStatus.OUT_FOR_DELIVERY,\n      \n      // In transit\n      'IN_TRANSIT': TrackingStatus.IN_TRANSIT,\n      'ARRIVED_AT_DELIVERY_FACILITY': TrackingStatus.IN_TRANSIT,\n      'DEPARTED_FROM_FACILITY': TrackingStatus.IN_TRANSIT,\n      \n      // Picked up\n      'PICKED_UP': TrackingStatus.PICKED_UP,\n      'COLLECTED': TrackingStatus.PICKED_UP,\n      \n      // Failed\n      'DELIVERY_FAILED': TrackingStatus.FAILED_DELIVERY,\n      'DELIVERY_ATTEMPT_FAILED': TrackingStatus.FAILED_DELIVERY,\n      'RECIPIENT_NOT_HOME': TrackingStatus.FAILED_DELIVERY,\n      \n      // Returned\n      'RETURNED_TO_SENDER': TrackingStatus.RETURNED,\n      'RETURN_IN_PROGRESS': TrackingStatus.RETURNED,\n      \n      // Exception\n      'EXCEPTION': TrackingStatus.EXCEPTION,\n      'DAMAGED': TrackingStatus.EXCEPTION,\n      'LOST': TrackingStatus.EXCEPTION,\n    };\n    \n    return statusMap[eventCode] || TrackingStatus.PENDING;\n  }\n  \n  private parseLocation(location: any): Location | undefined {\n    if (!location) return undefined;\n    \n    return {\n      name: location.displayName || location.name,\n      city: location.city,\n      country: location.country,\n      postalCode: location.postCode,\n      coordinates: location.coordinate ? {\n        lat: parseFloat(location.coordinate.northing),\n        lng: parseFloat(location.coordinate.easting),\n      } : undefined,\n    };\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\services\\tracking\\types.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":84,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":84,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1725,1728],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1725,1728],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// =====================================================\n// Tracking System Types\n// =====================================================\n\nexport enum TrackingStatus {\n  PENDING = 'pending',\n  PICKED_UP = 'picked_up',\n  IN_TRANSIT = 'in_transit',\n  OUT_FOR_DELIVERY = 'out_for_delivery',\n  DELIVERED = 'delivered',\n  FAILED_DELIVERY = 'failed_delivery',\n  RETURNED = 'returned',\n  CANCELLED = 'cancelled',\n  EXCEPTION = 'exception'\n}\n\nexport interface Location {\n  name?: string;\n  city?: string;\n  country?: string;\n  postalCode?: string;\n  coordinates?: {\n    lat: number;\n    lng: number;\n  };\n}\n\nexport interface TrackingEvent {\n  eventTime: Date;\n  status: TrackingStatus;\n  statusDescription: string;\n  location?: Location;\n  courierEventCode?: string;\n  courierEventDescription?: string;\n}\n\nexport interface RecipientInfo {\n  name?: string;\n  signature?: string; // Base64 encoded\n  deliveryNotes?: string;\n}\n\nexport interface ProofOfDelivery {\n  signatureImage?: string;\n  deliveryPhotoUrl?: string;\n  recipientName?: string;\n  deliveryNotes?: string;\n  timestamp: Date;\n  location?: Location;\n}\n\nexport interface TrackingInfo {\n  trackingId?: string;\n  trackingNumber: string;\n  courier: string;\n  orderId?: string;\n  \n  // Status\n  status: TrackingStatus;\n  statusDescription?: string;\n  \n  // Location\n  currentLocation?: Location;\n  originLocation?: Location;\n  destinationLocation?: Location;\n  \n  // Delivery\n  estimatedDelivery?: Date;\n  actualDelivery?: Date;\n  deliveryWindowStart?: Date;\n  deliveryWindowEnd?: Date;\n  \n  // Events\n  events: TrackingEvent[];\n  \n  // Recipient\n  recipient?: RecipientInfo;\n  \n  // Proof\n  proofOfDelivery?: ProofOfDelivery;\n  \n  // Metadata\n  lastUpdated: Date;\n  rawData?: any;\n}\n\nexport interface TrackingAdapter {\n  name: string;\n  \n  // Core methods\n  track(trackingNumber: string): Promise<TrackingInfo>;\n  validateTrackingNumber(trackingNumber: string): boolean;\n  \n  // Optional methods\n  getProofOfDelivery?(trackingNumber: string): Promise<ProofOfDelivery | null>;\n  subscribeToUpdates?(trackingNumber: string, webhookUrl: string): Promise<boolean>;\n}\n\nexport interface CourierAPIConfig {\n  courierName: string;\n  apiKey?: string;\n  apiSecret?: string;\n  clientId?: string;\n  clientSecret?: string;\n  baseUrl: string;\n  apiVersion?: string;\n  rateLimitPerMinute: number;\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\setupTests.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\store\\authStore.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":71,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2706,2709],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2706,2709],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":105,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":105,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3714,3717],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3714,3717],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":129,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":129,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4399,4402],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4399,4402],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":156,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":156,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5131,5134],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5131,5134],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":173,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":173,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5610,5613],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5610,5613],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\nimport { User, AuthState, LoginCredentials, RegisterData } from '@/types';\nimport { authService } from '@/services/authService';\nimport toast from 'react-hot-toast';\nimport { analytics } from '@/lib/analytics';\nimport { jwtDecode } from 'jwt-decode';\n\ninterface AuthStore extends AuthState {\n  login: (credentials: LoginCredentials) => Promise<boolean>;\n  register: (data: RegisterData) => Promise<boolean>;\n  logout: () => Promise<void>;\n  refreshToken: () => Promise<boolean>;\n  validateStoredToken: () => Promise<void>;\n  updateUser: (user: Partial<User>) => void;\n  clearAuth: () => void;\n  setLoading: (loading: boolean) => void;\n}\n\nexport const useAuthStore = create<AuthStore>()(\n  persist(\n    (set, get) => ({\n      user: null,\n      tokens: null,\n      isAuthenticated: false,\n      isLoading: false,\n\n      login: async (credentials: LoginCredentials) => {\n        try {\n          console.log('[AuthStore] === LOGIN STARTED ===');\n          console.log('[AuthStore] Credentials:', { email: credentials.email });\n          set({ isLoading: true });\n          \n          const response = await authService.login(credentials);\n          console.log('[AuthStore] Login response received:', { success: response.success, hasData: !!response.data });\n          \n          if (response.success && response.data) {\n            const { user, tokens } = response.data;\n            \n            console.log('[AuthStore] Login successful, setting tokens:', { hasTokens: !!tokens, hasAccessToken: !!tokens?.accessToken });\n            \n            // CRITICAL: Manually save tokens to localStorage as backup\n            if (tokens) {\n              try {\n                localStorage.setItem('performile_tokens', JSON.stringify(tokens));\n                console.log('[AuthStore] Tokens manually saved to localStorage');\n              } catch (e) {\n                console.error('[AuthStore] Failed to save tokens to localStorage:', e);\n              }\n            }\n            \n            set({\n              user,\n              tokens,\n              isAuthenticated: true,\n              isLoading: false,\n            });\n            \n            console.log('[AuthStore] State after login:', { hasTokens: !!get().tokens, hasAccessToken: !!get().tokens?.accessToken });\n            \n            // Track login event\n            analytics.login(user.user_id, user.user_role);\n            \n            toast.success('Login successful!');\n            return true;\n          }\n          \n          toast.error(response.message || 'Login failed');\n          set({ isLoading: false });\n          return false;\n        } catch (error: any) {\n          console.error('Login error:', error);\n          toast.error(error.message || 'Login failed');\n          set({ isLoading: false });\n          return false;\n        }\n      },\n\n      register: async (data: RegisterData) => {\n        try {\n          set({ isLoading: true });\n          \n          const response = await authService.register(data);\n          \n          if (response.success && response.data) {\n            const { user, tokens } = response.data;\n            \n            set({\n              user,\n              tokens,\n              isAuthenticated: true,\n              isLoading: false,\n            });\n            \n            // Track signup event\n            analytics.signup(user.user_id, user.user_role);\n            \n            toast.success('Registration successful!');\n            return true;\n          }\n          \n          toast.error(response.message || 'Registration failed');\n          set({ isLoading: false });\n          return false;\n        } catch (error: any) {\n          console.error('Registration error:', error);\n          toast.error(error.message || 'Registration failed');\n          set({ isLoading: false });\n          return false;\n        }\n      },\n\n      logout: async () => {\n        try {\n          console.log('[AuthStore] Logout initiated');\n          const { tokens } = get();\n          \n          if (tokens) {\n            await authService.logout();\n          }\n          \n          // Track logout event\n          analytics.logout();\n          \n          // Use clearAuth to ensure everything is cleared\n          get().clearAuth();\n          \n          toast.success('Logged out successfully');\n        } catch (error: any) {\n          console.error('Logout error:', error);\n          // Clear auth state even if logout request fails\n          get().clearAuth();\n        }\n      },\n\n      refreshToken: async () => {\n        try {\n          const { tokens } = get();\n          \n          if (!tokens?.refreshToken) {\n            return false;\n          }\n          \n          const response = await authService.refreshToken(tokens.refreshToken);\n          \n          if (response.success && response.data) {\n            set({\n              tokens: response.data.tokens,\n            });\n            return true;\n          }\n          \n          // Refresh failed, clear auth\n          get().clearAuth();\n          return false;\n        } catch (error: any) {\n          console.error('Token refresh error:', error);\n          get().clearAuth();\n          return false;\n        }\n      },\n\n      validateStoredToken: async () => {\n        try {\n          const { tokens, isAuthenticated } = get();\n          \n          if (!isAuthenticated || !tokens?.accessToken) {\n            console.log('[AuthStore] No tokens to validate');\n            return;\n          }\n\n          // Decode token to check expiration\n          const decoded: any = jwtDecode(tokens.accessToken);\n          const now = Math.floor(Date.now() / 1000);\n          \n          console.log('[AuthStore] Token validation:', {\n            exp: decoded.exp,\n            now: now,\n            expired: decoded.exp < now,\n            expiresInMinutes: Math.floor((decoded.exp - now) / 60)\n          });\n          \n          // If token expired or expires in less than 5 minutes, try to refresh\n          if (decoded.exp && decoded.exp < now + 300) {\n            console.log('[AuthStore] Token expired or expiring soon, attempting refresh');\n            const refreshSuccess = await get().refreshToken();\n            \n            if (!refreshSuccess) {\n              console.log('[AuthStore] Token refresh failed, clearing auth');\n              get().clearAuth();\n              toast.error('Your session has expired. Please log in again.');\n            } else {\n              console.log('[AuthStore] Token refreshed successfully');\n            }\n          } else {\n            console.log('[AuthStore] Token is still valid');\n          }\n        } catch (error) {\n          console.error('[AuthStore] Token validation error:', error);\n          // If token is invalid, clear auth silently\n          try {\n            get().clearAuth();\n            toast.error('Invalid session. Please log in again.');\n          } catch (clearError) {\n            console.error('[AuthStore] Error clearing auth:', clearError);\n          }\n        }\n      },\n\n      updateUser: (userData: Partial<User>) => {\n        const { user } = get();\n        if (user) {\n          set({\n            user: { ...user, ...userData },\n          });\n        }\n      },\n\n      clearAuth: () => {\n        console.log('[AuthStore] Clearing authentication state');\n        \n        // Clear zustand state\n        set({\n          user: null,\n          tokens: null,\n          isAuthenticated: false,\n          isLoading: false,\n        });\n        \n        // Also clear manual localStorage backup\n        try {\n          localStorage.removeItem('performile_tokens');\n          console.log('[AuthStore] Cleared localStorage backup');\n        } catch (error) {\n          console.error('[AuthStore] Failed to clear localStorage backup:', error);\n        }\n      },\n\n      setLoading: (loading: boolean) => {\n        set({ isLoading: loading });\n      },\n    }),\n    {\n      name: 'performile-auth',\n      partialize: (state) => ({\n        user: state.user,\n        tokens: state.tokens, // TEMPORARY: Store tokens until HttpOnly cookies are implemented\n        isAuthenticated: state.isAuthenticated,\n      }),\n    }\n  )\n);\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\types\\analytics.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\types\\index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":127,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":127,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2987,2990],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2987,2990],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":128,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":128,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3030,3033],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3030,3033],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":142,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":142,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3344,3347],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3344,3347],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":146,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":146,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3408,3411],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3408,3411],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":242,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":242,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5294,5297],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5294,5297],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":259,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":259,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5608,5611],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5608,5611],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":260,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":260,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5644,5647],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5644,5647],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Frontend type definitions for Performile\n\nexport interface User {\n  user_id: string;\n  email: string;\n  user_role: 'admin' | 'merchant' | 'courier' | 'consumer';\n  subscription_tier?: string;\n  first_name?: string;\n  last_name?: string;\n  phone?: string;\n  is_verified: boolean;\n  is_active: boolean;\n  created_at: string;\n  updated_at: string;\n  last_login?: string;\n}\n\nexport interface AuthTokens {\n  accessToken: string;\n  refreshToken: string;\n  expiresIn: number;\n}\n\nexport interface AuthState {\n  user: User | null;\n  tokens: AuthTokens | null;\n  isAuthenticated: boolean;\n  isLoading: boolean;\n}\n\nexport interface LoginCredentials {\n  email: string;\n  password: string;\n}\n\nexport interface RegisterData {\n  email: string;\n  password: string;\n  first_name: string;\n  last_name: string;\n  user_role: 'merchant' | 'courier' | 'consumer';\n  phone?: string;\n}\n\nexport interface TrustScore {\n  courier_id: string;\n  courier_name: string;\n  total_reviews: number;\n  average_rating: number;\n  weighted_rating: number;\n  completion_rate: number;\n  on_time_rate: number;\n  response_time_avg: number;\n  customer_satisfaction_score: number;\n  issue_resolution_rate: number;\n  delivery_attempt_avg: number;\n  last_mile_performance: number;\n  trust_score: number;\n  total_orders: number;\n  completed_orders: number;\n  on_time_deliveries: number;\n  last_calculated: string;\n}\n\nexport interface CourierDashboard extends TrustScore {\n  description?: string;\n  logo_url?: string;\n  contact_email?: string;\n  service_areas?: string[];\n  performance_grade: string;\n  reliability_grade: string;\n  recent_orders: number;\n  avg_delivery_hours: number;\n}\n\nexport interface Order {\n  order_id: string;\n  tracking_number: string;\n  store_id: string;\n  courier_id: string;\n  consumer_id?: string;\n  order_number?: string;\n  order_date: string;\n  delivery_date?: string;\n  estimated_delivery?: string;\n  level_of_service?: string;\n  type_of_delivery?: string;\n  postal_code?: string;\n  country: string;\n  delivery_address?: string;\n  order_status: 'pending' | 'confirmed' | 'picked_up' | 'in_transit' | 'delivered' | 'cancelled' | 'failed';\n  is_reviewed: boolean;\n  review_link_token?: string;\n  first_response_time?: string;\n  issue_reported: boolean;\n  issue_resolved: boolean;\n  issue_resolution_time?: string;\n  delivery_attempts: number;\n  last_mile_duration?: string;\n}\n\nexport interface Review {\n  review_id: string;\n  order_id: string;\n  reviewer_user_id?: string;\n  rating: number;\n  on_time_delivery_score?: number;\n  package_condition_score?: number;\n  communication_score?: number;\n  delivery_person_score?: number;\n  review_text?: string;\n  delay_minutes: number;\n  sentiment: string;\n  needs_evaluation: boolean;\n  review_date: string;\n}\n\nexport interface Store {\n  store_id: string;\n  store_name: string;\n  owner_user_id: string;\n  subscription_plan_id?: string;\n  website_url?: string;\n  description?: string;\n  logo_url?: string;\n  custom_css?: string;\n  market_settings: Record<string, any>;\n  integration_limits: Record<string, any>;\n  is_active: boolean;\n}\n\nexport interface Courier {\n  courier_id: string;\n  courier_name: string;\n  user_id: string;\n  subscription_plan_id?: string;\n  description?: string;\n  logo_url?: string;\n  contact_email?: string;\n  contact_phone?: string;\n  service_areas: string[];\n  market_settings: Record<string, any>;\n  is_active: boolean;\n}\n\nexport interface ApiResponse<T = any> {\n  success: boolean;\n  data?: T;\n  error?: string;\n  message?: string;\n  pagination?: {\n    page: number;\n    limit: number;\n    total: number;\n    totalPages: number;\n  };\n}\n\nexport interface PaginationParams {\n  page?: number;\n  limit?: number;\n  sortBy?: string;\n  sortOrder?: 'asc' | 'desc';\n}\n\nexport interface TrustScoreFilters {\n  country?: string;\n  postal_code?: string;\n  min_reviews?: number;\n  courier_id?: string;\n}\n\nexport interface DashboardStats {\n  total_couriers: number;\n  avg_trust_score: number;\n  avg_on_time_rate: number;\n  avg_completion_rate: number;\n  total_orders_processed: number;\n  total_reviews_count: number;\n}\n\nexport interface TrendData {\n  date: string;\n  orders_count: number;\n  completed_count: number;\n  on_time_count: number;\n  on_time_rate: number;\n  avg_rating: number;\n}\n\nexport interface ComparisonData {\n  couriers: CourierDashboard[];\n  comparison_metrics: {\n    highest_trust_score: number;\n    lowest_trust_score: number;\n    avg_trust_score: number;\n    highest_on_time_rate: number;\n    lowest_on_time_rate: number;\n    most_reviews: number;\n    least_reviews: number;\n  };\n}\n\n// Theme and UI types\nexport interface Theme {\n  palette: {\n    mode: 'light' | 'dark';\n    primary: {\n      main: string;\n      light: string;\n      dark: string;\n    };\n    secondary: {\n      main: string;\n      light: string;\n      dark: string;\n    };\n    background: {\n      default: string;\n      paper: string;\n    };\n  };\n}\n\nimport React from 'react';\n\nexport interface NavigationItem {\n  label: string;\n  path: string;\n  icon: React.ComponentType;\n  roles: string[];\n  children?: NavigationItem[];\n}\n\n// Form types\nexport interface FormField {\n  name: string;\n  label: string;\n  type: 'text' | 'email' | 'password' | 'select' | 'textarea' | 'number' | 'date';\n  required?: boolean;\n  options?: { value: string; label: string }[];\n  validation?: any;\n}\n\n// Error types\nexport interface AppError {\n  message: string;\n  statusCode?: number;\n  field?: string;\n}\n\n// Subscription types\nexport interface SubscriptionPlan {\n  plan_id: string;\n  plan_name: string;\n  user_role: string;\n  price_monthly: number;\n  price_yearly: number;\n  features_json: Record<string, any>;\n  limits_json: Record<string, any>;\n  is_active: boolean;\n}\n\nexport interface UserSubscription {\n  subscription_id: string;\n  user_id: string;\n  plan_id: string;\n  status: 'active' | 'inactive' | 'cancelled' | 'expired';\n  start_date: string;\n  end_date?: string;\n  auto_renew: boolean;\n  payment_method_id?: string;\n}\n\n// Chart data types\nexport interface ChartData {\n  name: string;\n  value: number;\n  color?: string;\n}\n\nexport interface TimeSeriesData {\n  date: string;\n  [key: string]: string | number;\n}\n\n// Notification types\nexport interface Notification {\n  id: string;\n  type: 'success' | 'error' | 'warning' | 'info';\n  title: string;\n  message: string;\n  timestamp: string;\n  read: boolean;\n}\n\n// File upload types\nexport interface FileUpload {\n  file: File;\n  progress: number;\n  status: 'pending' | 'uploading' | 'completed' | 'error';\n  url?: string;\n  error?: string;\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\types\\shepherd.d.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":2,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[49,52],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[49,52],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"declare module 'shepherd.js' {\n  const Shepherd: any;\n  export default Shepherd;\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\types\\team.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[403,406],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[403,406],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":27,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[722,725],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[722,725],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":39,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[992,995],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[992,995],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":44,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1097,1100],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1097,1100],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":53,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1281,1284],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1281,1284],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Team management types for frontend\nexport type TeamRole = 'owner' | 'admin' | 'manager' | 'member' | 'viewer';\nexport type InvitationStatus = 'pending' | 'accepted' | 'declined' | 'expired';\n\nexport interface TeamMember {\n  team_member_id: string;\n  user_id: string;\n  email: string;\n  first_name?: string;\n  last_name?: string;\n  phone?: string;\n  team_role: TeamRole;\n  permissions: Record<string, any>;\n  joined_at: string;\n  last_login?: string;\n  is_active: boolean;\n  invited_by_name?: string;\n}\n\nexport interface TeamInvitation {\n  invitation_id: string;\n  entity_type: 'courier' | 'store';\n  entity_id: string;\n  invited_email: string;\n  invited_by: string;\n  team_role: TeamRole;\n  permissions: Record<string, any>;\n  invitation_token: string;\n  status: InvitationStatus;\n  expires_at: string;\n  accepted_at?: string;\n  declined_at?: string;\n  created_at: string;\n}\n\nexport interface InviteTeamMemberRequest {\n  email: string;\n  teamRole: TeamRole;\n  permissions?: Record<string, any>;\n}\n\nexport interface UpdateTeamMemberRequest {\n  teamRole: TeamRole;\n  permissions?: Record<string, any>;\n}\n\nexport interface UserEntity {\n  courier_id?: string;\n  store_id?: string;\n  courier_name?: string;\n  store_name?: string;\n  team_role: TeamRole;\n  permissions: Record<string, any>;\n}\n\nexport interface UserEntities {\n  couriers: UserEntity[];\n  stores: UserEntity[];\n}\n\n// Role hierarchy for permission checking\nexport const ROLE_HIERARCHY: Record<TeamRole, number> = {\n  owner: 5,\n  admin: 4,\n  manager: 3,\n  member: 2,\n  viewer: 1\n};\n\n// Role permissions\nexport const ROLE_PERMISSIONS = {\n  owner: {\n    canInvite: true,\n    canRemove: true,\n    canUpdateRoles: true,\n    canManageSettings: true,\n    canViewAll: true,\n    canEdit: true\n  },\n  admin: {\n    canInvite: true,\n    canRemove: true,\n    canUpdateRoles: true,\n    canManageSettings: true,\n    canViewAll: true,\n    canEdit: true\n  },\n  manager: {\n    canInvite: true,\n    canRemove: false,\n    canUpdateRoles: false,\n    canManageSettings: false,\n    canViewAll: true,\n    canEdit: true\n  },\n  member: {\n    canInvite: false,\n    canRemove: false,\n    canUpdateRoles: false,\n    canManageSettings: false,\n    canViewAll: true,\n    canEdit: false\n  },\n  viewer: {\n    canInvite: false,\n    canRemove: false,\n    canUpdateRoles: false,\n    canManageSettings: false,\n    canViewAll: true,\n    canEdit: false\n  }\n};\n\nexport const hasPermission = (userRole: TeamRole, requiredRole: TeamRole): boolean => {\n  return ROLE_HIERARCHY[userRole] >= ROLE_HIERARCHY[requiredRole];\n};\n\nexport const canPerformAction = (userRole: TeamRole, action: keyof typeof ROLE_PERMISSIONS.owner): boolean => {\n  return ROLE_PERMISSIONS[userRole][action];\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\utils\\exportToCSV.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[180,183],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[180,183],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[252,255],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[252,255],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":104,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":104,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2659,2662],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2659,2662],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Export data to CSV file\n * Utility for exporting orders and other data to CSV format\n */\n\nexport interface ExportColumn {\n  key: string;\n  label: string;\n  format?: (value: any) => string;\n}\n\nexport function exportToCSV<T extends Record<string, any>>(\n  data: T[],\n  columns: ExportColumn[],\n  filename: string\n): void {\n  if (!data || data.length === 0) {\n    console.warn('No data to export');\n    return;\n  }\n\n  // Create CSV header\n  const headers = columns.map(col => col.label);\n  const csvHeader = headers.join(',');\n\n  // Create CSV rows\n  const csvRows = data.map(row => {\n    return columns.map(col => {\n      let value = row[col.key];\n      \n      // Apply custom formatting if provided\n      if (col.format && value !== null && value !== undefined) {\n        value = col.format(value);\n      }\n      \n      // Handle null/undefined\n      if (value === null || value === undefined) {\n        return '';\n      }\n      \n      // Convert to string and escape\n      const stringValue = String(value);\n      \n      // Escape quotes and wrap in quotes if contains comma, newline, or quote\n      if (stringValue.includes(',') || stringValue.includes('\\n') || stringValue.includes('\"')) {\n        return `\"${stringValue.replace(/\"/g, '\"\"')}\"`;\n      }\n      \n      return stringValue;\n    }).join(',');\n  });\n\n  // Combine header and rows\n  const csvContent = [csvHeader, ...csvRows].join('\\n');\n\n  // Create blob and download\n  const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n  const link = document.createElement('a');\n  \n  if (link.download !== undefined) {\n    // Create download link\n    const url = URL.createObjectURL(blob);\n    link.setAttribute('href', url);\n    link.setAttribute('download', filename);\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    URL.revokeObjectURL(url);\n  }\n}\n\n/**\n * Format date for CSV export\n */\nexport function formatDateForCSV(date: string | Date | null): string {\n  if (!date) return '';\n  const d = typeof date === 'string' ? new Date(date) : date;\n  return d.toLocaleDateString('en-US', { \n    year: 'numeric', \n    month: '2-digit', \n    day: '2-digit' \n  });\n}\n\n/**\n * Format datetime for CSV export\n */\nexport function formatDateTimeForCSV(date: string | Date | null): string {\n  if (!date) return '';\n  const d = typeof date === 'string' ? new Date(date) : date;\n  return d.toLocaleString('en-US', { \n    year: 'numeric', \n    month: '2-digit', \n    day: '2-digit',\n    hour: '2-digit',\n    minute: '2-digit'\n  });\n}\n\n/**\n * Export orders to CSV\n */\nexport function exportOrdersToCSV(orders: any[], filename?: string): void {\n  const columns: ExportColumn[] = [\n    { key: 'order_id', label: 'Order ID' },\n    { key: 'order_number', label: 'Order Number' },\n    { key: 'tracking_number', label: 'Tracking Number' },\n    { key: 'store_name', label: 'Store' },\n    { key: 'courier_name', label: 'Courier' },\n    { key: 'customer_name', label: 'Customer' },\n    { key: 'customer_email', label: 'Customer Email' },\n    { key: 'order_status', label: 'Status' },\n    { key: 'order_date', label: 'Order Date', format: formatDateForCSV },\n    { key: 'delivery_date', label: 'Delivery Date', format: formatDateForCSV },\n    { key: 'delivery_address', label: 'Delivery Address' },\n    { key: 'postal_code', label: 'Postal Code' },\n    { key: 'city', label: 'City' },\n    { key: 'country', label: 'Country' },\n    { key: 'created_at', label: 'Created At', format: formatDateTimeForCSV },\n  ];\n\n  const date = new Date().toISOString().split('T')[0];\n  const defaultFilename = `orders_${date}.csv`;\n\n  exportToCSV(orders, columns, filename || defaultFilename);\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\utils\\subscriptionHelpers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\src\\vite-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\test-node.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":2,"column":33,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":40},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":3,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":33},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":4,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":37}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"console.log('Node.js test script running successfully!');\nconsole.log('Node.js version:', process.version);\nconsole.log('Platform:', process.platform);\nconsole.log('Architecture:', process.arch);\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\test.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":2,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":32},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":3,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":33},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":4,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":37}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"console.log('Node.js is working!');\nconsole.log('Version:', process.version);\nconsole.log('Platform:', process.platform);\nconsole.log('Architecture:', process.arch);\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\utils\\env.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\utils\\pusher-server.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1068,1071],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1068,1071],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":77,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":77,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1993,1996],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1993,1996],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":93,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":93,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2357,2360],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2357,2360],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Pusher from 'pusher';\n\nlet pusherInstance: Pusher | null = null;\n\n/**\n * Get or create Pusher server instance\n */\nexport function getPusherServer(): Pusher {\n  if (pusherInstance) {\n    return pusherInstance;\n  }\n\n  const appId = process.env.VITE_PUSHER_APP_ID || process.env.PUSHER_APP_ID;\n  const key = process.env.VITE_PUSHER_KEY || process.env.PUSHER_KEY;\n  const secret = process.env.PUSHER_SECRET;\n  const cluster = process.env.VITE_PUSHER_CLUSTER || process.env.PUSHER_CLUSTER;\n\n  if (!appId || !key || !secret || !cluster) {\n    throw new Error('Pusher credentials not configured. Please set PUSHER_* environment variables.');\n  }\n\n  pusherInstance = new Pusher({\n    appId,\n    key,\n    secret,\n    cluster,\n    useTLS: true\n  });\n\n  return pusherInstance;\n}\n\n/**\n * Send a notification to a specific user\n */\nexport async function sendNotificationToUser(\n  userId: string,\n  notification: {\n    id?: string;\n    type: 'order_update' | 'new_order' | 'courier_assigned' | 'rating_received' | 'system';\n    title: string;\n    message: string;\n    data?: any;\n  }\n): Promise<void> {\n  try {\n    const pusher = getPusherServer();\n\n    await pusher.trigger(`user-${userId}`, 'new-notification', {\n      id: notification.id || `notif-${Date.now()}`,\n      type: notification.type,\n      title: notification.title,\n      message: notification.message,\n      data: notification.data || {},\n      read: false,\n      created_at: new Date().toISOString(),\n      user_id: userId\n    });\n\n    console.log(`[Pusher] Notification sent to user-${userId}: ${notification.title}`);\n  } catch (error) {\n    console.error('[Pusher] Failed to send notification:', error);\n    throw error;\n  }\n}\n\n/**\n * Send notifications to multiple users\n */\nexport async function sendNotificationToMultipleUsers(\n  userIds: string[],\n  notification: {\n    id?: string;\n    type: 'order_update' | 'new_order' | 'courier_assigned' | 'rating_received' | 'system';\n    title: string;\n    message: string;\n    data?: any;\n  }\n): Promise<void> {\n  const promises = userIds.map(userId => sendNotificationToUser(userId, notification));\n  await Promise.all(promises);\n}\n\n/**\n * Broadcast notification to all users (use sparingly)\n */\nexport async function broadcastNotification(\n  notification: {\n    id?: string;\n    type: 'system';\n    title: string;\n    message: string;\n    data?: any;\n  }\n): Promise<void> {\n  try {\n    const pusher = getPusherServer();\n\n    await pusher.trigger('broadcast', 'new-notification', {\n      id: notification.id || `notif-${Date.now()}`,\n      type: notification.type,\n      title: notification.title,\n      message: notification.message,\n      data: notification.data || {},\n      read: false,\n      created_at: new Date().toISOString()\n    });\n\n    console.log(`[Pusher] Broadcast notification sent: ${notification.title}`);\n  } catch (error) {\n    console.error('[Pusher] Failed to broadcast notification:', error);\n    throw error;\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\utils\\validation.ts","messages":[{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\(.","line":71,"column":46,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":71,"endColumn":47,"suggestions":[{"messageId":"removeEscape","fix":{"range":[1766,1767],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[1766,1766],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\).","line":71,"column":48,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":71,"endColumn":49,"suggestions":[{"messageId":"removeEscape","fix":{"range":[1768,1769],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[1768,1768],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\-.","line":92,"column":34,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":92,"endColumn":35,"suggestions":[{"messageId":"removeEscape","fix":{"range":[2314,2315],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[2314,2314],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":145,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":145,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3460,3463],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3460,3463],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Input validation and sanitization utilities\n * Prevents SQL injection, XSS, and other attacks\n */\n\n/**\n * Validate email format\n */\nexport function validateEmail(email: string): boolean {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return emailRegex.test(email) && email.length <= 255;\n}\n\n/**\n * Validate password strength\n */\nexport function validatePassword(password: string): { valid: boolean; errors: string[] } {\n  const errors: string[] = [];\n  \n  if (password.length < 12) {\n    errors.push('Password must be at least 12 characters long');\n  }\n  \n  if (!/[A-Z]/.test(password)) {\n    errors.push('Password must contain at least one uppercase letter');\n  }\n  \n  if (!/[a-z]/.test(password)) {\n    errors.push('Password must contain at least one lowercase letter');\n  }\n  \n  if (!/[0-9]/.test(password)) {\n    errors.push('Password must contain at least one number');\n  }\n  \n  if (!/[^A-Za-z0-9]/.test(password)) {\n    errors.push('Password must contain at least one special character');\n  }\n  \n  return {\n    valid: errors.length === 0,\n    errors\n  };\n}\n\n/**\n * Sanitize string input (prevent XSS)\n */\nexport function sanitizeString(input: string): string {\n  return input\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#x27;')\n    .replace(/\\//g, '&#x2F;');\n}\n\n/**\n * Validate UUID format\n */\nexport function validateUUID(uuid: string): boolean {\n  const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\n  return uuidRegex.test(uuid);\n}\n\n/**\n * Validate phone number (basic international format)\n */\nexport function validatePhone(phone: string): boolean {\n  const phoneRegex = /^\\+?[1-9]\\d{1,14}$/;\n  return phoneRegex.test(phone.replace(/[\\s\\-\\(\\)]/g, ''));\n}\n\n/**\n * Sanitize SQL input (basic - use parameterized queries instead!)\n * This is a backup - ALWAYS use parameterized queries\n */\nexport function sanitizeSQL(input: string): string {\n  return input\n    .replace(/'/g, \"''\")\n    .replace(/;/g, '')\n    .replace(/--/g, '')\n    .replace(/\\/\\*/g, '')\n    .replace(/\\*\\//g, '');\n}\n\n/**\n * Validate postal code (basic format)\n */\nexport function validatePostalCode(code: string): boolean {\n  // Supports various formats: 12345, 12345-6789, A1A 1A1, etc.\n  const postalRegex = /^[A-Z0-9\\s\\-]{3,10}$/i;\n  return postalRegex.test(code);\n}\n\n/**\n * Validate URL\n */\nexport function validateURL(url: string): boolean {\n  try {\n    const urlObj = new URL(url);\n    return urlObj.protocol === 'http:' || urlObj.protocol === 'https:';\n  } catch {\n    return false;\n  }\n}\n\n/**\n * Validate number within range\n */\nexport function validateNumberRange(value: number, min: number, max: number): boolean {\n  return typeof value === 'number' && !isNaN(value) && value >= min && value <= max;\n}\n\n/**\n * Validate string length\n */\nexport function validateLength(str: string, min: number, max: number): boolean {\n  return str.length >= min && str.length <= max;\n}\n\n/**\n * Validate array of allowed values\n */\nexport function validateEnum<T>(value: T, allowedValues: T[]): boolean {\n  return allowedValues.includes(value);\n}\n\n/**\n * Comprehensive input validator\n */\nexport class InputValidator {\n  private errors: string[] = [];\n\n  /**\n   * Add validation error\n   */\n  private addError(field: string, message: string): void {\n    this.errors.push(`${field}: ${message}`);\n  }\n\n  /**\n   * Validate required field\n   */\n  required(field: string, value: any): this {\n    if (value === null || value === undefined || value === '') {\n      this.addError(field, 'This field is required');\n    }\n    return this;\n  }\n\n  /**\n   * Validate email field\n   */\n  email(field: string, value: string): this {\n    if (value && !validateEmail(value)) {\n      this.addError(field, 'Invalid email format');\n    }\n    return this;\n  }\n\n  /**\n   * Validate password field\n   */\n  password(field: string, value: string): this {\n    if (value) {\n      const result = validatePassword(value);\n      if (!result.valid) {\n        result.errors.forEach(err => this.addError(field, err));\n      }\n    }\n    return this;\n  }\n\n  /**\n   * Validate UUID field\n   */\n  uuid(field: string, value: string): this {\n    if (value && !validateUUID(value)) {\n      this.addError(field, 'Invalid UUID format');\n    }\n    return this;\n  }\n\n  /**\n   * Validate string length\n   */\n  length(field: string, value: string, min: number, max: number): this {\n    if (value && !validateLength(value, min, max)) {\n      this.addError(field, `Must be between ${min} and ${max} characters`);\n    }\n    return this;\n  }\n\n  /**\n   * Validate number range\n   */\n  range(field: string, value: number, min: number, max: number): this {\n    if (value !== undefined && !validateNumberRange(value, min, max)) {\n      this.addError(field, `Must be between ${min} and ${max}`);\n    }\n    return this;\n  }\n\n  /**\n   * Get validation result\n   */\n  getResult(): { valid: boolean; errors: string[] } {\n    return {\n      valid: this.errors.length === 0,\n      errors: this.errors\n    };\n  }\n\n  /**\n   * Reset validator\n   */\n  reset(): this {\n    this.errors = [];\n    return this;\n  }\n}\n\n/**\n * Example usage:\n * \n * const validator = new InputValidator();\n * validator\n *   .required('email', email)\n *   .email('email', email)\n *   .required('password', password)\n *   .password('password', password);\n * \n * const result = validator.getResult();\n * if (!result.valid) {\n *   return res.status(400).json({ errors: result.errors });\n * }\n */\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\vercel-build.js","messages":[{"ruleId":"@typescript-eslint/no-var-requires","severity":2,"message":"Require statement not part of import statement.","line":1,"column":22,"nodeType":"CallExpression","messageId":"noVarReqs","endLine":1,"endColumn":46},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'fs' is assigned a value but never used.","line":2,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":9},{"ruleId":"@typescript-eslint/no-var-requires","severity":2,"message":"Require statement not part of import statement.","line":2,"column":12,"nodeType":"CallExpression","messageId":"noVarReqs","endLine":2,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'path' is assigned a value but never used.","line":3,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":11},{"ruleId":"@typescript-eslint/no-var-requires","severity":2,"message":"Require statement not part of import statement.","line":3,"column":14,"nodeType":"CallExpression","messageId":"noVarReqs","endLine":3,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":21},{"ruleId":"@typescript-eslint/no-var-requires","severity":2,"message":"Require statement not part of import statement.","line":8,"column":1,"nodeType":"CallExpression","messageId":"noVarReqs","endLine":8,"endColumn":18},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":8,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":8},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":11,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":11,"endColumn":8},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":11,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":11,"endColumn":31},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":18,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":18,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":25,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":25,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":32,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":32,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":36,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":36,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":40,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":40,"endColumn":10}],"suppressedMessages":[],"errorCount":17,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { execSync } = require('child_process');\nconst fs = require('fs');\nconst path = require('path');\n\nconsole.log(' Starting Vercel build process...');\n\n// Ensure environment variables are loaded\nrequire('dotenv').config();\n\n// Set NODE_ENV to production if not set\nprocess.env.NODE_ENV = process.env.NODE_ENV || 'production';\n\n// Install dependencies\nconsole.log(' Installing dependencies...');\ntry {\n  execSync('npm install --prefer-offline', { \n    stdio: 'inherit',\n    env: { ...process.env, NODE_ENV: 'development' }\n  });\n  \n  // Install production dependencies\n  console.log(' Installing production dependencies...');\n  execSync('npm install --production --prefer-offline', { \n    stdio: 'inherit',\n    env: { ...process.env, NODE_ENV: 'production' }\n  });\n\n  // Run the build\n  console.log(' Running build...');\n  execSync('npm run build', { \n    stdio: 'inherit',\n    env: { ...process.env, NODE_ENV: 'production' }\n  });\n  \n  console.log(' Build completed successfully!');\n  process.exit(0);\n} catch (error) {\n  console.error(' Build failed:');\n  console.error(error);\n  process.exit(1);\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\vite-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ricka\\Downloads\\performile-platform-main\\performile-platform-main\\apps\\web\\vitest.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]}]